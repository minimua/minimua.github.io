<!doctype html><html lang=zh-CN><head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#"><meta charset=UTF-8><meta name=generator content="Hugo 0.134.2"><meta name=theme-color content="#fff"><meta name=color-scheme content="light dark"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no, date=no, address=no, email=no"><meta http-equiv=Cache-Control content="no-transform"><meta http-equiv=Cache-Control content="no-siteapp"><title>ArrayList源码解析 building | muja's Space </title><link rel=stylesheet href=/css/meme.min.baa76ac2a550ab8b2eaf2b541f152786e6d7df4290f789c0ef381379b57def42.css><script src=/js/meme.min.e46abe484398824efc70edec3126437916974df592d7c395b44f8f60e0f57e9d.js></script><meta name=author content="muja"><meta name=description content='简介 ArrayList继承于 AbstractList 类，实现了 List, RandomAccess, Cloneable, java.io.Serializable 这些接口。
List：表明是一个列表，支持添加、删除、查找等操作，并且可以通过下标进行访问。 RandomAccess：是一个标志接口，表明实现这个这个接口的 List 集合是支持快速随机访问的。在 ArrayList 中，我们即可以通过元素的序号快速获取元素对象，这就是快速随机访问。 Cloneable ：即覆盖了函数clone()，能被克隆。 Serializable：这意味着ArrayList支持序列化，能通过序列化去传输。 1 2 3 public class ArrayList<E> extends AbstractList<E> implements List<E>, RandomAccess, Cloneable, java.io.Serializable {} 源码分析 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 630 631 632 633 634 635 636 637 638 639 640 641 642 643 644 645 646 647 648 649 650 651 652 653 654 655 656 657 658 659 660 661 662 663 664 665 666 667 668 669 670 671 672 673 674 675 676 677 678 679 680 681 682 683 684 685 686 687 688 689 690 691 692 693 694 695 696 697 698 699 700 701 702 703 704 705 706 707 708 709 710 711 712 713 714 715 716 717 718 719 720 721 722 723 724 725 726 727 728 729 730 731 732 733 734 735 736 737 738 739 740 741 742 743 744 745 746 747 748 749 750 751 752 753 754 755 756 757 758 759 760 761 762 763 764 765 766 767 768 769 770 771 772 773 774 775 776 777 778 779 780 781 782 783 784 785 786 787 788 789 790 791 792 793 794 795 796 797 798 799 800 801 802 803 804 805 806 807 808 809 810 811 812 813 814 815 816 817 818 819 820 821 822 823 824 825 826 827 828 829 830 831 832 833 834 835 836 837 838 839 840 841 842 843 844 845 846 847 848 849 850 851 852 853 854 855 856 857 858 859 860 861 862 863 864 865 866 867 868 869 870 871 872 873 874 875 876 877 878 879 880 881 882 883 884 885 886 887 888 889 890 891 892 893 894 895 896 897 898 899 900 901 902 903 904 905 906 907 908 909 910 911 912 913 914 915 916 917 918 919 920 921 922 923 924 925 926 927 928 929 930 931 932 933 934 935 936 937 938 939 940 941 942 943 944 945 946 947 948 949 950 951 952 953 954 955 956 957 958 959 960 961 962 963 964 965 966 967 968 969 970 971 972 973 974 975 976 977 978 979 980 981 982 983 984 985 986 987 988 989 990 991 992 993 994 995 996 997 998 999 1000 1001 1002 1003 1004 1005 1006 1007 1008 1009 1010 1011 1012 1013 1014 1015 1016 1017 1018 1019 1020 1021 1022 1023 1024 1025 1026 1027 1028 1029 1030 1031 1032 1033 1034 1035 1036 1037 1038 1039 1040 1041 1042 1043 1044 1045 1046 1047 1048 1049 1050 1051 1052 1053 1054 1055 1056 1057 1058 1059 1060 1061 1062 1063 1064 1065 1066 1067 1068 1069 1070 1071 1072 1073 1074 1075 1076 1077 1078 1079 1080 1081 1082 1083 1084 1085 1086 1087 1088 1089 1090 1091 1092 1093 1094 1095 1096 1097 1098 1099 1100 1101 1102 1103 1104 1105 1106 1107 1108 1109 1110 1111 1112 1113 1114 1115 1116 1117 1118 1119 1120 1121 1122 1123 1124 1125 1126 1127 1128 1129 1130 1131 1132 1133 1134 1135 1136 1137 1138 1139 1140 1141 1142 1143 1144 1145 1146 1147 1148 1149 1150 1151 1152 1153 1154 1155 1156 1157 1158 1159 1160 1161 1162 1163 1164 1165 1166 1167 1168 1169 1170 1171 1172 1173 1174 1175 1176 1177 1178 1179 1180 1181 1182 1183 1184 1185 package java.util; import java.util.function.Consumer; import java.util.function.Predicate; import java.util.function.UnaryOperator; public class ArrayList<E> extends AbstractList<E> implements List<E>, RandomAccess, Cloneable, java.io.Serializable { private static final long serialVersionUID = 8683452581122892189L; /** * Default initial capacity. mjy：默认初始容量大小 */ private static final int DEFAULT_CAPACITY = 10; /** * Shared empty array instance used for empty instances. mjy：空数组（用于空实例）。 */ private static final Object[] EMPTY_ELEMENTDATA = {}; /** * Shared empty array instance used for default sized empty instances. We * distinguish this from EMPTY_ELEMENTDATA to know how much to inflate when * first element is added. */ // mjy：用于默认大小空实例的共享空数组实例。和EMPTY_ELEMENTDATA数组区分，以知道在添加第一个元素时容量需要增加多少。 private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {}; /** * The array buffer into which the elements of the ArrayList are stored. * The capacity of the ArrayList is the length of this array buffer. Any * empty ArrayList with elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA * will be expanded to DEFAULT_CAPACITY when the first element is added. */ // mjy：存储ArrayList元素的数组缓冲区（就是保存ArrayList数据的数组）。ArrayList的容量是此数组缓冲区的长度。添加第一个元素时，任何具有elementData==DEFAULTCAPACITY_EMMENTDATA的空ArrayList都将扩展为DEFAULT_CAPACITY。 transient Object[] elementData; // non-private to simplify nested class access /** * The size of the ArrayList (the number of elements it contains). mjy：数组长度大小（元素个数） * * @serial */ private int size; /** * Constructs an empty list with the specified initial capacity. * * @param initialCapacity the initial capacity of the list * @throws IllegalArgumentException if the specified initial capacity * is negative */ // mjy：带初始容量参数的构造函数（用户可以在创建ArrayList对象时自己指定集合的初始大小） public ArrayList(int initialCapacity) { if (initialCapacity > 0) { // 传入的参数大于0，创建initialCapacity大小的数组 this.elementData = new Object[initialCapacity]; } else if (initialCapacity == 0) { // 传入的参数等于0，创建空数组 this.elementData = EMPTY_ELEMENTDATA; } else { // 其他情况异常 throw new IllegalArgumentException("Illegal Capacity: " + initialCapacity); } } /** * Constructs an empty list with an initial capacity of ten. */ // mjy：默认无参构造函数 DEFAULTCAPACITY_EMPTY_ELEMENTDATA为0。初始其实是空数组，当添加第一个元素的时候数组容量才变成10 public ArrayList() { this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA; } /** * Constructs a list containing the elements of the specified * collection, in the order they are returned by the collection&#39;s * iterator. * * @param c the collection whose elements are to be placed into this list * @throws NullPointerException if the specified collection is null */ // mjy：构造一个包含指定集合的元素的列表，按照它们由集合的迭代器返回的顺序。 new ArrayList<>(paramList); public ArrayList(Collection<? extends E> c) { // 将参数转换为数组 elementData = c.toArray(); // elementData数组的长度不为0 if ((size = elementData.length) != 0) { // c.toArray might (incorrectly) not return Object[] (see 6260652) // mjy： elementData不是Object类型数据（c.toArray可能返回的不是Object类型的数组） if (elementData.getClass() != Object[].class) // mjy： 将原来不是Object类型的elementData数组的内容，赋值给新的Object类型的elementData数组 elementData = Arrays.copyOf(elementData, size, Object[].class); } else { // replace with empty array. mjy： elementData数组的长度为0，即为空数组 this.elementData = EMPTY_ELEMENTDATA; } } /** * Trims the capacity of this <tt>ArrayList</tt> instance to be the * list&#39;s current size. An application can use this operation to minimize * the storage of an <tt>ArrayList</tt> instance. */ // mjy： 修改这个ArrayList实例的容量是列表的当前大小。 可以使用此操作来最小化ArrayList实例的存储。 public void trimToSize() { modCount++; if (size < elementData.length) { elementData = (size == 0) ? EMPTY_ELEMENTDATA : Arrays.copyOf(elementData, size); } } /** * Increases the capacity of this <tt>ArrayList</tt> instance, if * necessary, to ensure that it can hold at least the number of elements * specified by the minimum capacity argument. * mjy： 如有必要，增加此ArrayList实例的容量，以确保它至少可以容纳最小容量参数指定的元素数量。 * * @param minCapacity the desired minimum capacity mjy：所需的最小容量 */ public void ensureCapacity(int minCapacity) { // mjy： (数组元素不为空) 如果是true，minExpand的值为0，如果是false,minExpand的值为10 int minExpand = (elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA) // any size if not default element table ? 0 // larger than default for default empty table. It&#39;s already // supposed to be at default size. : DEFAULT_CAPACITY; // 如果最小容量大于已有的最大容量 if (minCapacity > minExpand) { ensureExplicitCapacity(minCapacity); } } // mjy： 确保内部容量 private void ensureCapacityInternal(int minCapacity) { // mjy：如果元素是空 if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) { // mjy： 所需要的最小容量为 默认容量和最小容量相比 较大的一个 minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity); } // 确保 容量 ensureExplicitCapacity(minCapacity); } private void ensureExplicitCapacity(int minCapacity) { modCount++; // overflow-conscious code // mjy：所需要的最小容量减去现在的数组元素长度 大于0 if (minCapacity - elementData.length > 0) // mjy：调用grow方法进行扩容，调用此方法代表已经开始扩容了 grow(minCapacity); } /** * The maximum size of array to allocate. * Some VMs reserve some header words in an array. * Attempts to allocate larger arrays may result in * OutOfMemoryError: Requested array size exceeds VM limit * mjy： 是JVM能分配的数组的最大 大小，一般为Integer.MAX_VALUE - 8（这和JVM内部实现有关，留出了一些用于对象头信息的空间）。 */ private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8; /** * Increases the capacity to ensure that it can hold at least the * number of elements specified by the minimum capacity argument. * mjy：ArrayList扩容的核心方法。 * * @param minCapacity the desired minimum capacity */ private void grow(int minCapacity) { // overflow-conscious code // mjy： 表示当前数组的容量（即当前存储元素的数组 elementData 的长度） int oldCapacity = elementData.length; // mjy：是新的数组容量，计算方式是旧容量的 1.5 倍 (oldCapacity + oldCapacity >> 1，即右移一位表示除以2)。通过这种方式，ArrayList 的容量会在需要时以指数方式增加，避免频繁扩容。 int newCapacity = oldCapacity + (oldCapacity >> 1); // mjy：minCapacity是调用grow方法时传入的参数，表示所需的最小容量。如果计算出的newCapacity小于minCapacity，那么直接将newCapacity设置为minCapacity，确保新容量至少能满足当前所需的空间。 if (newCapacity - minCapacity < 0) newCapacity = minCapacity; // mjy：如果newCapacity超过了MAX_ARRAY_SIZE，调用 hugeCapacity(minCapacity) 方法来决定实际的容量。 if (newCapacity - MAX_ARRAY_SIZE > 0) newCapacity = hugeCapacity(minCapacity); // minCapacity is usually close to size, so this is a win: // mjy：调用Arrays.copyOf方法将现有的数组elementData复制到一个新的数组中，新数组的长度为 newCapacity，实现了数组的扩容。这个过程会保留原数组中的所有元素，但底层的存储空间已经扩展。 elementData = Arrays.copyOf(elementData, newCapacity); } // mjy： 处理可能超过最大数组大小的情况 private static int hugeCapacity(int minCapacity) { // mjy： 如果minCapacity为负数，意味着发生了容量溢出（例如，容量计算溢出了Integer的范围），此时抛出 OutOfMemoryError if (minCapacity < 0) // overflow throw new OutOfMemoryError(); // mjy：如果minCapacity超过了MAX_ARRAY_SIZE，返回Integer.MAX_VALUE，即数组会扩展到 JVM 可以支持的最大值。否则即minCapacity小于MAX_ARRAY_SIZE，但仍然超出了合理范围，则返回 MAX_ARRAY_SIZE。 return (minCapacity > MAX_ARRAY_SIZE) ? Integer.MAX_VALUE : MAX_ARRAY_SIZE; } /** * Returns the number of elements in this list. * mjy： 返回此列表中的元素数 * * @return the number of elements in this list */ public int size() { return size; } /** * Returns <tt>true</tt> if this list contains no elements. * mjy： 判断是否为空 如果此列表不包含元素，则返回 true * * @return <tt>true</tt> if this list contains no elements */ public boolean isEmpty() { return size == 0; } /** * Returns <tt>true</tt> if this list contains the specified element. * More formally, returns <tt>true</tt> if and only if this list contains * at least one element <tt>e</tt> such that * <tt>(o==null&amp;nbsp;?&amp;nbsp;e==null&amp;nbsp;:&amp;nbsp;o.equals(e))</tt>. * * @param o element whose presence in this list is to be tested * @return <tt>true</tt> if this list contains the specified element */ // mjy： 判断是否包含指定元素，包含返回true public boolean contains(Object o) { // mjy： indexOf()方法：返回此列表中指定元素的首次出现的索引，如果此列表不包含此元素，则为-1 return indexOf(o) >= 0; } /** * Returns the index of the first occurrence of the specified element * in this list, or -1 if this list does not contain the element. * More formally, returns the lowest index <tt>i</tt> such that * <tt>(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))</tt>, * or -1 if there is no such index. */ // mjy： 返回此列表中指定元素的首次出现的索引，如果此列表不包含此元素，则为-1 public int indexOf(Object o) { // mjy： 入参元素为空 if (o == null) { for (int i = 0; i < size; i++) // mjy： 判断是否存在空元素 if (elementData[i] == null) return i; } else { // 不为空 for (int i = 0; i < size; i++) // mjy： equals()方法比较 if (o.equals(elementData[i])) return i; } return -1; } /** * Returns the index of the last occurrence of the specified element * in this list, or -1 if this list does not contain the element. * More formally, returns the highest index <tt>i</tt> such that * <tt>(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))</tt>, * or -1 if there is no such index. */ // mjy： 返回此列表中指定元素的最后一次出现的索引，如果此列表不包含元素，则返回-1 public int lastIndexOf(Object o) { // 倒序循环 if (o == null) { for (int i = size - 1; i >= 0; i--) if (elementData[i] == null) return i; } else { for (int i = size - 1; i >= 0; i--) if (o.equals(elementData[i])) return i; } return -1; } /** * Returns a shallow copy of this <tt>ArrayList</tt> instance. (The * elements themselves are not copied.) * * @return a clone of this <tt>ArrayList</tt> instance */ // mjy： 克隆方法，返回此ArrayList实例的浅拷 （元素本身不被复制。） public Object clone() { try { ArrayList<?> v = (ArrayList<?>) super.clone(); // mjy： Arrays.copyOf功能是实现数组的复制，返回复制后的数组。参数是被复制的数组和复制的长度 v.elementData = Arrays.copyOf(elementData, size); v.modCount = 0; return v; } catch (CloneNotSupportedException e) { // this shouldn&#39;t happen, since we are Cloneable // mjy： 这不应该发生，因为我们是可以克隆的 throw new InternalError(e); } } /** * Returns an array containing all of the elements in this list * in proper sequence (from first to last element). * mjy： 以正确的顺序（从第一个到最后一个元素）返回一个包含此列表中所有元素的数组。 * <p>The returned array will be "safe" in that no references to it are * maintained by this list. (In other words, this method must allocate * a new array). The caller is thus free to modify the returned array. * mjy： 返回的数组将是安全的，因为该列表不保留对它的引用。 （换句话说，这个方法必须分配一个新的数组）。 * <p>This method acts as bridge between array-based and collection-based * APIs. * mjy： 因此，调用者可以自由地修改返回的数组。 此方法充当基于阵列和基于集合的API之间的桥梁。 * * @return an array containing all of the elements in this list in * proper sequence */ public Object[] toArray() { return Arrays.copyOf(elementData, size); } /** * Returns an array containing all of the elements in this list in proper * sequence (from first to last element); the runtime type of the returned * array is that of the specified array. If the list fits in the * specified array, it is returned therein. Otherwise, a new array is * allocated with the runtime type of the specified array and the size of * this list. * * <p>If the list fits in the specified array with room to spare * (i.e., the array has more elements than the list), the element in * the array immediately following the end of the collection is set to * <tt>null</tt>. (This is useful in determining the length of the * list <i>only</i> if the caller knows that the list does not contain * any null elements.) * * @param a the array into which the elements of the list are to * be stored, if it is big enough; otherwise, a new array of the * same runtime type is allocated for this purpose. * @return an array containing the elements of the list * @throws ArrayStoreException if the runtime type of the specified array * is not a supertype of the runtime type of every element in * this list * @throws NullPointerException if the specified array is null */ @SuppressWarnings("unchecked") public <T> T[] toArray(T[] a) { if (a.length < size) // Make a new array of a&#39;s runtime type, but my contents: return (T[]) Arrays.copyOf(elementData, size, a.getClass()); System.arraycopy(elementData, 0, a, 0, size); if (a.length > size) a[size] = null; return a; } // Positional Access Operations @SuppressWarnings("unchecked") E elementData(int index) { return (E) elementData[index]; } /** * Returns the element at the specified position in this list. * mjy： 返回此列表中指定位置的元素 * * @param index index of the element to return * @return the element at the specified position in this list * @throws IndexOutOfBoundsException {@inheritDoc} */ public E get(int index) { // mjy： 校验数组下标越界 rangeCheck(index); return elementData(index); } /** * Replaces the element at the specified position in this list with * the specified element. * mjy： 用指定的元素替换此列表中指定位置的元素 * * @param index index of the element to replace * @param element element to be stored at the specified position * @return the element previously at the specified position * @throws IndexOutOfBoundsException {@inheritDoc} */ public E set(int index, E element) { // mjy： 校验数组下标越界 rangeCheck(index); // mjy： 旧的值 E oldValue = elementData(index); // mjy： 新的赋值 elementData[index] = element; // mjy： 返回旧的值 return oldValue; } /** * Appends the specified element to the end of this list. * mjy： 添加元素，将指定的元素追加到此列表的末尾 * * @param e element to be appended to this list * @return <tt>true</tt> (as specified by {@link Collection#add}) */ public boolean add(E e) { // mjy： 扩容校验 ensureCapacityInternal(size + 1); // Increments modCount!! // mjy： 添加元素 elementData[size++] = e; return true; } /** * Inserts the specified element at the specified position in this * list. Shifts the element currently at that position (if any) and * any subsequent elements to the right (adds one to their indices). * mjy： 添加元素，在此列表中的指定位置插入指定的元素 * mjy：先调用 rangeCheckForAdd 对index进行界限检查；然后调用 ensureCapacityInternal 方法保证capacity足够大；再将从index开始之后的所有成员后移一个位置；将element插入index位置；最后size加1。 * * @param index index at which the specified element is to be inserted * @param element element to be inserted * @throws IndexOutOfBoundsException {@inheritDoc} */ public void add(int index, E element) { // mjy： 校验 rangeCheckForAdd(index); ensureCapacityInternal(size + 1); // Increments modCount!! // mjy： System.arraycopy()这个实现数组之间复制的方法一定要看一下，下面就用到了arraycopy()方法实现数组自己复制自己 System.arraycopy(elementData, index, elementData, index + 1, size - index); elementData[index] = element; size++; } /** * Removes the element at the specified position in this list. * Shifts any subsequent elements to the left (subtracts one from their * indices). * mjy：删除元素，删除该列表中指定位置的元素。 将任何后续元素移动到左侧（从其索引中减去一个元素） * * @param index the index of the element to be removed * @return the element that was removed from the list * @throws IndexOutOfBoundsException {@inheritDoc} */ public E remove(int index) { rangeCheck(index); modCount++; E oldValue = elementData(index); int numMoved = size - index - 1; if (numMoved > 0) System.arraycopy(elementData, index + 1, elementData, index, numMoved); elementData[--size] = null; // clear to let GC do its work return oldValue; } /** * Removes the first occurrence of the specified element from this list, * if it is present. If the list does not contain the element, it is * unchanged. More formally, removes the element with the lowest index * <tt>i</tt> such that * <tt>(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))</tt> * (if such an element exists). Returns <tt>true</tt> if this list * contained the specified element (or equivalently, if this list * changed as a result of the call). * mjy： 从列表中删除指定元素的第一个出现（如果存在）。 如果列表不包含该元素，则它不会更改。 * * @param o element to be removed from this list, if present * @return <tt>true</tt> if this list contained the specified element */ public boolean remove(Object o) { if (o == null) { for (int index = 0; index < size; index++) if (elementData[index] == null) { fastRemove(index); return true; } } else { for (int index = 0; index < size; index++) if (o.equals(elementData[index])) { fastRemove(index); return true; } } return false; } /* * Private remove method that skimjy bounds checking and does not * return the value removed. */ private void fastRemove(int index) { modCount++; int numMoved = size - index - 1; if (numMoved > 0) System.arraycopy(elementData, index + 1, elementData, index, numMoved); elementData[--size] = null; // clear to let GC do its work } /** * Removes all of the elements from this list. The list will * be empty after this call returns. * mjy： 从列表中清空（删除）所有元素。 */ public void clear() { modCount++; // clear to let GC do its work for (int i = 0; i < size; i++) elementData[i] = null; size = 0; } /** * Appends all of the elements in the specified collection to the end of * this list, in the order that they are returned by the * specified collection&#39;s Iterator. The behavior of this operation is * undefined if the specified collection is modified while the operation * is in progress. (This implies that the behavior of this call is * undefined if the specified collection is this list, and this * list is nonempty.) * * @param c collection containing elements to be added to this list * @return <tt>true</tt> if this list changed as a result of the call * @throws NullPointerException if the specified collection is null */ public boolean addAll(Collection<? extends E> c) { Object[] a = c.toArray(); int numNew = a.length; ensureCapacityInternal(size + numNew); // Increments modCount System.arraycopy(a, 0, elementData, size, numNew); size += numNew; return numNew != 0; } /** * Inserts all of the elements in the specified collection into this * list, starting at the specified position. Shifts the element * currently at that position (if any) and any subsequent elements to * the right (increases their indices). The new elements will appear * in the list in the order that they are returned by the * specified collection&#39;s iterator. * * @param index index at which to insert the first element from the * specified collection * @param c collection containing elements to be added to this list * @return <tt>true</tt> if this list changed as a result of the call * @throws IndexOutOfBoundsException {@inheritDoc} * @throws NullPointerException if the specified collection is null */ public boolean addAll(int index, Collection<? extends E> c) { rangeCheckForAdd(index); Object[] a = c.toArray(); int numNew = a.length; ensureCapacityInternal(size + numNew); // Increments modCount int numMoved = size - index; if (numMoved > 0) System.arraycopy(elementData, index, elementData, index + numNew, numMoved); System.arraycopy(a, 0, elementData, index, numNew); size += numNew; return numNew != 0; } /** * Removes from this list all of the elements whose index is between * {@code fromIndex}, inclusive, and {@code toIndex}, exclusive. * Shifts any succeeding elements to the left (reduces their index). * This call shortens the list by {@code (toIndex - fromIndex)} elements. * (If {@code toIndex==fromIndex}, this operation has no effect.) * * @throws IndexOutOfBoundsException if {@code fromIndex} or * {@code toIndex} is out of range * ({@code fromIndex < 0 || * fromIndex >= size() || * toIndex > size() || * toIndex < fromIndex}) */ protected void removeRange(int fromIndex, int toIndex) { modCount++; int numMoved = size - toIndex; System.arraycopy(elementData, toIndex, elementData, fromIndex, numMoved); // clear to let GC do its work int newSize = size - (toIndex - fromIndex); for (int i = newSize; i < size; i++) { elementData[i] = null; } size = newSize; } /** * Checks if the given index is in range. If not, throws an appropriate * runtime exception. This method does *not* check if the index is * negative: It is always used immediately prior to an array access, * which throws an ArrayIndexOutOfBoundsException if index is negative. */ private void rangeCheck(int index) { if (index >= size) throw new IndexOutOfBoundsException(outOfBoundsMsg(index)); } /** * A version of rangeCheck used by add and addAll. */ private void rangeCheckForAdd(int index) { if (index > size || index < 0) throw new IndexOutOfBoundsException(outOfBoundsMsg(index)); } /** * Constructs an IndexOutOfBoundsException detail message. * Of the many possible refactorings of the error handling code, * this "outlining" performs best with both server and client VMs. */ private String outOfBoundsMsg(int index) { return "Index: " + index + ", Size: " + size; } /** * Removes from this list all of its elements that are contained in the * specified collection. * * @param c collection containing elements to be removed from this list * @return {@code true} if this list changed as a result of the call * @throws ClassCastException if the class of an element of this list * is incompatible with the specified collection * (<a href="Collection.html#optional-restrictions">optional</a>) * @throws NullPointerException if this list contains a null element and the * specified collection does not permit null elements * (<a href="Collection.html#optional-restrictions">optional</a>), * or if the specified collection is null * @see Collection#contains(Object) */ public boolean removeAll(Collection<?> c) { Objects.requireNonNull(c); return batchRemove(c, false); } /** * Retains only the elements in this list that are contained in the * specified collection. In other words, removes from this list all * of its elements that are not contained in the specified collection. * * @param c collection containing elements to be retained in this list * @return {@code true} if this list changed as a result of the call * @throws ClassCastException if the class of an element of this list * is incompatible with the specified collection * (<a href="Collection.html#optional-restrictions">optional</a>) * @throws NullPointerException if this list contains a null element and the * specified collection does not permit null elements * (<a href="Collection.html#optional-restrictions">optional</a>), * or if the specified collection is null * @see Collection#contains(Object) */ public boolean retainAll(Collection<?> c) { Objects.requireNonNull(c); return batchRemove(c, true); } private boolean batchRemove(Collection<?> c, boolean complement) { final Object[] elementData = this.elementData; int r = 0, w = 0; boolean modified = false; try { for (; r < size; r++) if (c.contains(elementData[r]) == complement) elementData[w++] = elementData[r]; } finally { // Preserve behavioral compatibility with AbstractCollection, // even if c.contains() throws. if (r != size) { System.arraycopy(elementData, r, elementData, w, size - r); w += size - r; } if (w != size) { // clear to let GC do its work for (int i = w; i < size; i++) elementData[i] = null; modCount += size - w; size = w; modified = true; } } return modified; } /** * Save the state of the <tt>ArrayList</tt> instance to a stream (that * is, serialize it). * * @serialData The length of the array backing the <tt>ArrayList</tt> * instance is emitted (int), followed by all of its elements * (each an <tt>Object</tt>) in the proper order. */ private void writeObject(java.io.ObjectOutputStream s) throws java.io.IOException { // Write out element count, and any hidden stuff int expectedModCount = modCount; s.defaultWriteObject(); // Write out size as capacity for behavioural compatibility with clone() s.writeInt(size); // Write out all elements in the proper order. for (int i = 0; i < size; i++) { s.writeObject(elementData[i]); } if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } } /** * Reconstitute the <tt>ArrayList</tt> instance from a stream (that is, * deserialize it). */ private void readObject(java.io.ObjectInputStream s) throws java.io.IOException, ClassNotFoundException { elementData = EMPTY_ELEMENTDATA; // Read in size, and any hidden stuff s.defaultReadObject(); // Read in capacity s.readInt(); // ignored if (size > 0) { // be like clone(), allocate array based upon size not capacity ensureCapacityInternal(size); Object[] a = elementData; // Read in all elements in the proper order. for (int i = 0; i < size; i++) { a[i] = s.readObject(); } } } /** * Returns a list iterator over the elements in this list (in proper * sequence), starting at the specified position in the list. * The specified index indicates the first element that would be * returned by an initial call to {@link ListIterator#next next}. * An initial call to {@link ListIterator#previous previous} would * return the element with the specified index minus one. * * <p>The returned list iterator is <a href="#fail-fast"><i>fail-fast</i></a>. * * @throws IndexOutOfBoundsException {@inheritDoc} */ public ListIterator<E> listIterator(int index) { if (index < 0 || index > size) throw new IndexOutOfBoundsException("Index: " + index); return new ListItr(index); } /** * Returns a list iterator over the elements in this list (in proper * sequence). * * <p>The returned list iterator is <a href="#fail-fast"><i>fail-fast</i></a>. * * @see #listIterator(int) */ public ListIterator<E> listIterator() { return new ListItr(0); } /** * Returns an iterator over the elements in this list in proper sequence. * * <p>The returned iterator is <a href="#fail-fast"><i>fail-fast</i></a>. * * @return an iterator over the elements in this list in proper sequence */ public Iterator<E> iterator() { return new Itr(); } /** * An optimized version of AbstractList.Itr */ private class Itr implements Iterator<E> { int cursor; // index of next element to return int lastRet = -1; // index of last element returned; -1 if no such int expectedModCount = modCount; public boolean hasNext() { return cursor != size; } @SuppressWarnings("unchecked") public E next() { checkForComodification(); int i = cursor; if (i >= size) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (i >= elementData.length) throw new ConcurrentModificationException(); cursor = i + 1; return (E) elementData[lastRet = i]; } public void remove() { if (lastRet < 0) throw new IllegalStateException(); checkForComodification(); try { ArrayList.this.remove(lastRet); cursor = lastRet; lastRet = -1; expectedModCount = modCount; } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } @Override @SuppressWarnings("unchecked") public void forEachRemaining(Consumer<? super E> consumer) { Objects.requireNonNull(consumer); final int size = ArrayList.this.size; int i = cursor; if (i >= size) { return; } final Object[] elementData = ArrayList.this.elementData; if (i >= elementData.length) { throw new ConcurrentModificationException(); } while (i != size && modCount == expectedModCount) { consumer.accept((E) elementData[i++]); } // update once at end of iteration to reduce heap write traffic cursor = i; lastRet = i - 1; checkForComodification(); } final void checkForComodification() { if (modCount != expectedModCount) throw new ConcurrentModificationException(); } } /** * An optimized version of AbstractList.ListItr */ private class ListItr extends Itr implements ListIterator<E> { ListItr(int index) { super(); cursor = index; } public boolean hasPrevious() { return cursor != 0; } public int nextIndex() { return cursor; } public int previousIndex() { return cursor - 1; } @SuppressWarnings("unchecked") public E previous() { checkForComodification(); int i = cursor - 1; if (i < 0) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (i >= elementData.length) throw new ConcurrentModificationException(); cursor = i; return (E) elementData[lastRet = i]; } public void set(E e) { if (lastRet < 0) throw new IllegalStateException(); checkForComodification(); try { ArrayList.this.set(lastRet, e); } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } public void add(E e) { checkForComodification(); try { int i = cursor; ArrayList.this.add(i, e); cursor = i + 1; lastRet = -1; expectedModCount = modCount; } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } } /** * Returns a view of the portion of this list between the specified * {@code fromIndex}, inclusive, and {@code toIndex}, exclusive. (If * {@code fromIndex} and {@code toIndex} are equal, the returned list is * empty.) The returned list is backed by this list, so non-structural * changes in the returned list are reflected in this list, and vice-versa. * The returned list supports all of the optional list operations. * * <p>This method eliminates the need for explicit range operations (of * the sort that commonly exist for arrays). Any operation that expects * a list can be used as a range operation by passing a subList view * instead of a whole list. For example, the following idiom * removes a range of elements from a list: * <pre> * list.subList(from, to).clear(); * </pre> * Similar idioms may be constructed for {@link #indexOf(Object)} and * {@link #lastIndexOf(Object)}, and all of the algorithms in the * {@link Collections} class can be applied to a subList. * * <p>The semantics of the list returned by this method become undefined if * the backing list (i.e., this list) is <i>structurally modified</i> in * any way other than via the returned list. (Structural modifications are * those that change the size of this list, or otherwise perturb it in such * a fashion that iterations in progress may yield incorrect results.) * * @throws IndexOutOfBoundsException {@inheritDoc} * @throws IllegalArgumentException {@inheritDoc} */ public List<E> subList(int fromIndex, int toIndex) { subListRangeCheck(fromIndex, toIndex, size); return new SubList(this, 0, fromIndex, toIndex); } static void subListRangeCheck(int fromIndex, int toIndex, int size) { if (fromIndex < 0) throw new IndexOutOfBoundsException("fromIndex = " + fromIndex); if (toIndex > size) throw new IndexOutOfBoundsException("toIndex = " + toIndex); if (fromIndex > toIndex) throw new IllegalArgumentException("fromIndex(" + fromIndex + ") > toIndex(" + toIndex + ")"); } private class SubList extends AbstractList<E> implements RandomAccess { private final AbstractList<E> parent; private final int parentOffset; private final int offset; int size; SubList(AbstractList<E> parent, int offset, int fromIndex, int toIndex) { this.parent = parent; this.parentOffset = fromIndex; this.offset = offset + fromIndex; this.size = toIndex - fromIndex; this.modCount = ArrayList.this.modCount; } public E set(int index, E e) { rangeCheck(index); checkForComodification(); E oldValue = ArrayList.this.elementData(offset + index); ArrayList.this.elementData[offset + index] = e; return oldValue; } public E get(int index) { rangeCheck(index); checkForComodification(); return ArrayList.this.elementData(offset + index); } public int size() { checkForComodification(); return this.size; } public void add(int index, E e) { rangeCheckForAdd(index); checkForComodification(); parent.add(parentOffset + index, e); this.modCount = parent.modCount; this.size++; } public E remove(int index) { rangeCheck(index); checkForComodification(); E result = parent.remove(parentOffset + index); this.modCount = parent.modCount; this.size--; return result; } protected void removeRange(int fromIndex, int toIndex) { checkForComodification(); parent.removeRange(parentOffset + fromIndex, parentOffset + toIndex); this.modCount = parent.modCount; this.size -= toIndex - fromIndex; } public boolean addAll(Collection<? extends E> c) { return addAll(this.size, c); } public boolean addAll(int index, Collection<? extends E> c) { rangeCheckForAdd(index); int cSize = c.size(); if (cSize == 0) return false; checkForComodification(); parent.addAll(parentOffset + index, c); this.modCount = parent.modCount; this.size += cSize; return true; } public Iterator<E> iterator() { return listIterator(); } public ListIterator<E> listIterator(final int index) { checkForComodification(); rangeCheckForAdd(index); final int offset = this.offset; return new ListIterator<E>() { int cursor = index; int lastRet = -1; int expectedModCount = ArrayList.this.modCount; public boolean hasNext() { return cursor != SubList.this.size; } @SuppressWarnings("unchecked") public E next() { checkForComodification(); int i = cursor; if (i >= SubList.this.size) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (offset + i >= elementData.length) throw new ConcurrentModificationException(); cursor = i + 1; return (E) elementData[offset + (lastRet = i)]; } public boolean hasPrevious() { return cursor != 0; } @SuppressWarnings("unchecked") public E previous() { checkForComodification(); int i = cursor - 1; if (i < 0) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (offset + i >= elementData.length) throw new ConcurrentModificationException(); cursor = i; return (E) elementData[offset + (lastRet = i)]; } @SuppressWarnings("unchecked") public void forEachRemaining(Consumer<? super E> consumer) { Objects.requireNonNull(consumer); final int size = SubList.this.size; int i = cursor; if (i >= size) { return; } final Object[] elementData = ArrayList.this.elementData; if (offset + i >= elementData.length) { throw new ConcurrentModificationException(); } while (i != size && modCount == expectedModCount) { consumer.accept((E) elementData[offset + (i++)]); } // update once at end of iteration to reduce heap write traffic lastRet = cursor = i; checkForComodification(); } public int nextIndex() { return cursor; } public int previousIndex() { return cursor - 1; } public void remove() { if (lastRet < 0) throw new IllegalStateException(); checkForComodification(); try { SubList.this.remove(lastRet); cursor = lastRet; lastRet = -1; expectedModCount = ArrayList.this.modCount; } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } public void set(E e) { if (lastRet < 0) throw new IllegalStateException(); checkForComodification(); try { ArrayList.this.set(offset + lastRet, e); } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } public void add(E e) { checkForComodification(); try { int i = cursor; SubList.this.add(i, e); cursor = i + 1; lastRet = -1; expectedModCount = ArrayList.this.modCount; } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } final void checkForComodification() { if (expectedModCount != ArrayList.this.modCount) throw new ConcurrentModificationException(); } }; } public List<E> subList(int fromIndex, int toIndex) { subListRangeCheck(fromIndex, toIndex, size); return new SubList(this, offset, fromIndex, toIndex); } private void rangeCheck(int index) { if (index < 0 || index >= this.size) throw new IndexOutOfBoundsException(outOfBoundsMsg(index)); } private void rangeCheckForAdd(int index) { if (index < 0 || index > this.size) throw new IndexOutOfBoundsException(outOfBoundsMsg(index)); } private String outOfBoundsMsg(int index) { return "Index: " + index + ", Size: " + this.size; } private void checkForComodification() { if (ArrayList.this.modCount != this.modCount) throw new ConcurrentModificationException(); } public Spliterator<E> spliterator() { checkForComodification(); return new ArrayListSpliterator<E>(ArrayList.this, offset, offset + this.size, this.modCount); } } @Override public void forEach(Consumer<? super E> action) { Objects.requireNonNull(action); final int expectedModCount = modCount; @SuppressWarnings("unchecked") final E[] elementData = (E[]) this.elementData; final int size = this.size; for (int i = 0; modCount == expectedModCount && i < size; i++) { action.accept(elementData[i]); } if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } } /** * Creates a <em><a href="Spliterator.html#binding">late-binding</a></em> * and <em>fail-fast</em> {@link Spliterator} over the elements in this * list. * * <p>The {@code Spliterator} reports {@link Spliterator#SIZED}, * {@link Spliterator#SUBSIZED}, and {@link Spliterator#ORDERED}. * Overriding implementations should document the reporting of additional * characteristic values. * * @return a {@code Spliterator} over the elements in this list * @since 1.8 */ @Override public Spliterator<E> spliterator() { return new ArrayListSpliterator<>(this, 0, -1, 0); } /** * Index-based split-by-two, lazily initialized Spliterator */ static final class ArrayListSpliterator<E> implements Spliterator<E> { /* * If ArrayLists were immutable, or structurally immutable (no * adds, removes, etc), we could implement their spliterators * with Arrays.spliterator. Instead we detect as much * interference during traversal as practical without * sacrificing much performance. We rely primarily on * modCounts. These are not guaranteed to detect concurrency * violations, and are sometimes overly conservative about * within-thread interference, but detect enough problems to * be worthwhile in practice. To carry this out, we (1) lazily * initialize fence and expectedModCount until the latest * point that we need to commit to the state we are checking * against; thus improving precision. (This doesn&#39;t apply to * SubLists, that create spliterators with current non-lazy * values). (2) We perform only a single * ConcurrentModificationException check at the end of forEach * (the most performance-sensitive method). When using forEach * (as opposed to iterators), we can normally only detect * interference after actions, not before. Further * CME-triggering checks apply to all other possible * violations of assumptions for example null or too-small * elementData array given its size(), that could only have * occurred due to interference. This allows the inner loop * of forEach to run without any further checks, and * simplifies lambda-resolution. While this does entail a * number of checks, note that in the common case of * list.stream().forEach(a), no checks or other computation * occur anywhere other than inside forEach itself. The other * less-often-used methods cannot take advantage of most of * these streamlinings. */ private final ArrayList<E> list; private int index; // current index, modified on advance/split private int fence; // -1 until used; then one past last index private int expectedModCount; // initialized when fence set /** * Create new spliterator covering the given range */ ArrayListSpliterator(ArrayList<E> list, int origin, int fence, int expectedModCount) { this.list = list; // OK if null unless traversed this.index = origin; this.fence = fence; this.expectedModCount = expectedModCount; } private int getFence() { // initialize fence to size on first use int hi; // (a specialized variant appears in method forEach) ArrayList<E> lst; if ((hi = fence) < 0) { if ((lst = list) == null) hi = fence = 0; else { expectedModCount = lst.modCount; hi = fence = lst.size; } } return hi; } public ArrayListSpliterator<E> trySplit() { int hi = getFence(), lo = index, mid = (lo + hi) >>> 1; return (lo >= mid) ? null : // divide range in half unless too small new ArrayListSpliterator<E>(list, lo, index = mid, expectedModCount); } public boolean tryAdvance(Consumer<? super E> action) { if (action == null) throw new NullPointerException(); int hi = getFence(), i = index; if (i < hi) { index = i + 1; @SuppressWarnings("unchecked") E e = (E) list.elementData[i]; action.accept(e); if (list.modCount != expectedModCount) throw new ConcurrentModificationException(); return true; } return false; } public void forEachRemaining(Consumer<? super E> action) { int i, hi, mc; // hoist accesses and checks from loop ArrayList<E> lst; Object[] a; if (action == null) throw new NullPointerException(); if ((lst = list) != null && (a = lst.elementData) != null) { if ((hi = fence) < 0) { mc = lst.modCount; hi = lst.size; } else mc = expectedModCount; if ((i = index) >= 0 && (index = hi) <= a.length) { for (; i < hi; ++i) { @SuppressWarnings("unchecked") E e = (E) a[i]; action.accept(e); } if (lst.modCount == mc) return; } } throw new ConcurrentModificationException(); } public long estimateSize() { return (long) (getFence() - index); } public int characteristics() { return Spliterator.ORDERED | Spliterator.SIZED | Spliterator.SUBSIZED; } } @Override public boolean removeIf(Predicate<? super E> filter) { Objects.requireNonNull(filter); // figure out which elements are to be removed // any exception thrown from the filter predicate at this stage // will leave the collection unmodified int removeCount = 0; final BitSet removeSet = new BitSet(size); final int expectedModCount = modCount; final int size = this.size; for (int i = 0; modCount == expectedModCount && i < size; i++) { @SuppressWarnings("unchecked") final E element = (E) elementData[i]; if (filter.test(element)) { removeSet.set(i); removeCount++; } } if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } // shift surviving elements left over the spaces left by removed elements final boolean anyToRemove = removeCount > 0; if (anyToRemove) { final int newSize = size - removeCount; for (int i = 0, j = 0; (i < size) && (j < newSize); i++, j++) { i = removeSet.nextClearBit(i); elementData[j] = elementData[i]; } for (int k = newSize; k < size; k++) { elementData[k] = null; // Let gc do its work } this.size = newSize; if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } modCount++; } return anyToRemove; } @Override @SuppressWarnings("unchecked") public void replaceAll(UnaryOperator<E> operator) { Objects.requireNonNull(operator); final int expectedModCount = modCount; final int size = this.size; for (int i = 0; modCount == expectedModCount && i < size; i++) { elementData[i] = operator.apply((E) elementData[i]); } if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } modCount++; } @Override @SuppressWarnings("unchecked") public void sort(Comparator<? super E> c) { final int expectedModCount = modCount; Arrays.sort((E[]) elementData, 0, size, c); if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } modCount++; } } 扩容分析'><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=mask-icon href=/icons/safari-pinned-tab.svg color=#2a6df4><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-title content="muja's Space "><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=mobile-web-app-capable content="yes"><meta name=application-name content="muja's Space "><meta name=msapplication-starturl content="../../../"><meta name=msapplication-TileColor content="#fff"><meta name=msapplication-TileImage content="../../../icons/mstile-150x150.png"><link rel=manifest href=/manifest.json><link rel=canonical href=https://www.mujaspace.com/tech/2023/arraylist%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebPage","datePublished":"2023-02-01T22:00:00+08:00","dateModified":"2024-09-19T11:48:02+00:00","url":"https://www.mujaspace.com/tech/2023/arraylist%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/","name":"ArrayList源码解析 building","description":"简介 ArrayList继承于 AbstractList 类，实现了 List, RandomAccess, Cloneable, java.io.Serializable 这些接口。\nList：表明是一个列表，支持添加、删除、查找等操作，并且可以通过下标进行访问。 RandomAccess：是一个标志接口，表明实现这个这个接口的 List 集合是支持快速随机访问的。在 ArrayList 中，我们即可以通过元素的序号快速获取元素对象，这就是快速随机访问。 Cloneable ：即覆盖了函数clone()，能被克隆。 Serializable：这意味着ArrayList支持序列化，能通过序列化去传输。 1 2 3 public class ArrayList\u003cE\u003e extends AbstractList\u003cE\u003e implements List\u003cE\u003e, RandomAccess, Cloneable, java.io.Serializable {} 源码分析 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 630 631 632 633 634 635 636 637 638 639 640 641 642 643 644 645 646 647 648 649 650 651 652 653 654 655 656 657 658 659 660 661 662 663 664 665 666 667 668 669 670 671 672 673 674 675 676 677 678 679 680 681 682 683 684 685 686 687 688 689 690 691 692 693 694 695 696 697 698 699 700 701 702 703 704 705 706 707 708 709 710 711 712 713 714 715 716 717 718 719 720 721 722 723 724 725 726 727 728 729 730 731 732 733 734 735 736 737 738 739 740 741 742 743 744 745 746 747 748 749 750 751 752 753 754 755 756 757 758 759 760 761 762 763 764 765 766 767 768 769 770 771 772 773 774 775 776 777 778 779 780 781 782 783 784 785 786 787 788 789 790 791 792 793 794 795 796 797 798 799 800 801 802 803 804 805 806 807 808 809 810 811 812 813 814 815 816 817 818 819 820 821 822 823 824 825 826 827 828 829 830 831 832 833 834 835 836 837 838 839 840 841 842 843 844 845 846 847 848 849 850 851 852 853 854 855 856 857 858 859 860 861 862 863 864 865 866 867 868 869 870 871 872 873 874 875 876 877 878 879 880 881 882 883 884 885 886 887 888 889 890 891 892 893 894 895 896 897 898 899 900 901 902 903 904 905 906 907 908 909 910 911 912 913 914 915 916 917 918 919 920 921 922 923 924 925 926 927 928 929 930 931 932 933 934 935 936 937 938 939 940 941 942 943 944 945 946 947 948 949 950 951 952 953 954 955 956 957 958 959 960 961 962 963 964 965 966 967 968 969 970 971 972 973 974 975 976 977 978 979 980 981 982 983 984 985 986 987 988 989 990 991 992 993 994 995 996 997 998 999 1000 1001 1002 1003 1004 1005 1006 1007 1008 1009 1010 1011 1012 1013 1014 1015 1016 1017 1018 1019 1020 1021 1022 1023 1024 1025 1026 1027 1028 1029 1030 1031 1032 1033 1034 1035 1036 1037 1038 1039 1040 1041 1042 1043 1044 1045 1046 1047 1048 1049 1050 1051 1052 1053 1054 1055 1056 1057 1058 1059 1060 1061 1062 1063 1064 1065 1066 1067 1068 1069 1070 1071 1072 1073 1074 1075 1076 1077 1078 1079 1080 1081 1082 1083 1084 1085 1086 1087 1088 1089 1090 1091 1092 1093 1094 1095 1096 1097 1098 1099 1100 1101 1102 1103 1104 1105 1106 1107 1108 1109 1110 1111 1112 1113 1114 1115 1116 1117 1118 1119 1120 1121 1122 1123 1124 1125 1126 1127 1128 1129 1130 1131 1132 1133 1134 1135 1136 1137 1138 1139 1140 1141 1142 1143 1144 1145 1146 1147 1148 1149 1150 1151 1152 1153 1154 1155 1156 1157 1158 1159 1160 1161 1162 1163 1164 1165 1166 1167 1168 1169 1170 1171 1172 1173 1174 1175 1176 1177 1178 1179 1180 1181 1182 1183 1184 1185 package java.util; import java.util.function.Consumer; import java.util.function.Predicate; import java.util.function.UnaryOperator; public class ArrayList\u003cE\u003e extends AbstractList\u003cE\u003e implements List\u003cE\u003e, RandomAccess, Cloneable, java.io.Serializable { private static final long serialVersionUID = 8683452581122892189L; /** * Default initial capacity. mjy：默认初始容量大小 */ private static final int DEFAULT_CAPACITY = 10; /** * Shared empty array instance used for empty instances. mjy：空数组（用于空实例）。 */ private static final Object[] EMPTY_ELEMENTDATA = {}; /** * Shared empty array instance used for default sized empty instances. We * distinguish this from EMPTY_ELEMENTDATA to know how much to inflate when * first element is added. */ // mjy：用于默认大小空实例的共享空数组实例。和EMPTY_ELEMENTDATA数组区分，以知道在添加第一个元素时容量需要增加多少。 private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {}; /** * The array buffer into which the elements of the ArrayList are stored. * The capacity of the ArrayList is the length of this array buffer. Any * empty ArrayList with elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA * will be expanded to DEFAULT_CAPACITY when the first element is added. */ // mjy：存储ArrayList元素的数组缓冲区（就是保存ArrayList数据的数组）。ArrayList的容量是此数组缓冲区的长度。添加第一个元素时，任何具有elementData==DEFAULTCAPACITY_EMMENTDATA的空ArrayList都将扩展为DEFAULT_CAPACITY。 transient Object[] elementData; // non-private to simplify nested class access /** * The size of the ArrayList (the number of elements it contains). mjy：数组长度大小（元素个数） * * @serial */ private int size; /** * Constructs an empty list with the specified initial capacity. * * @param initialCapacity the initial capacity of the list * @throws IllegalArgumentException if the specified initial capacity * is negative */ // mjy：带初始容量参数的构造函数（用户可以在创建ArrayList对象时自己指定集合的初始大小） public ArrayList(int initialCapacity) { if (initialCapacity \u003e 0) { // 传入的参数大于0，创建initialCapacity大小的数组 this.elementData = new Object[initialCapacity]; } else if (initialCapacity == 0) { // 传入的参数等于0，创建空数组 this.elementData = EMPTY_ELEMENTDATA; } else { // 其他情况异常 throw new IllegalArgumentException(\"Illegal Capacity: \" + initialCapacity); } } /** * Constructs an empty list with an initial capacity of ten. */ // mjy：默认无参构造函数 DEFAULTCAPACITY_EMPTY_ELEMENTDATA为0。初始其实是空数组，当添加第一个元素的时候数组容量才变成10 public ArrayList() { this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA; } /** * Constructs a list containing the elements of the specified * collection, in the order they are returned by the collection's * iterator. * * @param c the collection whose elements are to be placed into this list * @throws NullPointerException if the specified collection is null */ // mjy：构造一个包含指定集合的元素的列表，按照它们由集合的迭代器返回的顺序。 new ArrayList\u003c\u003e(paramList); public ArrayList(Collection\u003c? extends E\u003e c) { // 将参数转换为数组 elementData = c.toArray(); // elementData数组的长度不为0 if ((size = elementData.length) != 0) { // c.toArray might (incorrectly) not return Object[] (see 6260652) // mjy： elementData不是Object类型数据（c.toArray可能返回的不是Object类型的数组） if (elementData.getClass() != Object[].class) // mjy： 将原来不是Object类型的elementData数组的内容，赋值给新的Object类型的elementData数组 elementData = Arrays.copyOf(elementData, size, Object[].class); } else { // replace with empty array. mjy： elementData数组的长度为0，即为空数组 this.elementData = EMPTY_ELEMENTDATA; } } /** * Trims the capacity of this \u003ctt\u003eArrayList\u003c/tt\u003e instance to be the * list's current size. An application can use this operation to minimize * the storage of an \u003ctt\u003eArrayList\u003c/tt\u003e instance. */ // mjy： 修改这个ArrayList实例的容量是列表的当前大小。 可以使用此操作来最小化ArrayList实例的存储。 public void trimToSize() { modCount++; if (size \u003c elementData.length) { elementData = (size == 0) ? EMPTY_ELEMENTDATA : Arrays.copyOf(elementData, size); } } /** * Increases the capacity of this \u003ctt\u003eArrayList\u003c/tt\u003e instance, if * necessary, to ensure that it can hold at least the number of elements * specified by the minimum capacity argument. * mjy： 如有必要，增加此ArrayList实例的容量，以确保它至少可以容纳最小容量参数指定的元素数量。 * * @param minCapacity the desired minimum capacity mjy：所需的最小容量 */ public void ensureCapacity(int minCapacity) { // mjy： (数组元素不为空) 如果是true，minExpand的值为0，如果是false,minExpand的值为10 int minExpand = (elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA) // any size if not default element table ? 0 // larger than default for default empty table. It's already // supposed to be at default size. : DEFAULT_CAPACITY; // 如果最小容量大于已有的最大容量 if (minCapacity \u003e minExpand) { ensureExplicitCapacity(minCapacity); } } // mjy： 确保内部容量 private void ensureCapacityInternal(int minCapacity) { // mjy：如果元素是空 if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) { // mjy： 所需要的最小容量为 默认容量和最小容量相比 较大的一个 minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity); } // 确保 容量 ensureExplicitCapacity(minCapacity); } private void ensureExplicitCapacity(int minCapacity) { modCount++; // overflow-conscious code // mjy：所需要的最小容量减去现在的数组元素长度 大于0 if (minCapacity - elementData.length \u003e 0) // mjy：调用grow方法进行扩容，调用此方法代表已经开始扩容了 grow(minCapacity); } /** * The maximum size of array to allocate. * Some VMs reserve some header words in an array. * Attempts to allocate larger arrays may result in * OutOfMemoryError: Requested array size exceeds VM limit * mjy： 是JVM能分配的数组的最大 大小，一般为Integer.MAX_VALUE - 8（这和JVM内部实现有关，留出了一些用于对象头信息的空间）。 */ private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8; /** * Increases the capacity to ensure that it can hold at least the * number of elements specified by the minimum capacity argument. * mjy：ArrayList扩容的核心方法。 * * @param minCapacity the desired minimum capacity */ private void grow(int minCapacity) { // overflow-conscious code // mjy： 表示当前数组的容量（即当前存储元素的数组 elementData 的长度） int oldCapacity = elementData.length; // mjy：是新的数组容量，计算方式是旧容量的 1.5 倍 (oldCapacity + oldCapacity \u003e\u003e 1，即右移一位表示除以2)。通过这种方式，ArrayList 的容量会在需要时以指数方式增加，避免频繁扩容。 int newCapacity = oldCapacity + (oldCapacity \u003e\u003e 1); // mjy：minCapacity是调用grow方法时传入的参数，表示所需的最小容量。如果计算出的newCapacity小于minCapacity，那么直接将newCapacity设置为minCapacity，确保新容量至少能满足当前所需的空间。 if (newCapacity - minCapacity \u003c 0) newCapacity = minCapacity; // mjy：如果newCapacity超过了MAX_ARRAY_SIZE，调用 hugeCapacity(minCapacity) 方法来决定实际的容量。 if (newCapacity - MAX_ARRAY_SIZE \u003e 0) newCapacity = hugeCapacity(minCapacity); // minCapacity is usually close to size, so this is a win: // mjy：调用Arrays.copyOf方法将现有的数组elementData复制到一个新的数组中，新数组的长度为 newCapacity，实现了数组的扩容。这个过程会保留原数组中的所有元素，但底层的存储空间已经扩展。 elementData = Arrays.copyOf(elementData, newCapacity); } // mjy： 处理可能超过最大数组大小的情况 private static int hugeCapacity(int minCapacity) { // mjy： 如果minCapacity为负数，意味着发生了容量溢出（例如，容量计算溢出了Integer的范围），此时抛出 OutOfMemoryError if (minCapacity \u003c 0) // overflow throw new OutOfMemoryError(); // mjy：如果minCapacity超过了MAX_ARRAY_SIZE，返回Integer.MAX_VALUE，即数组会扩展到 JVM 可以支持的最大值。否则即minCapacity小于MAX_ARRAY_SIZE，但仍然超出了合理范围，则返回 MAX_ARRAY_SIZE。 return (minCapacity \u003e MAX_ARRAY_SIZE) ? Integer.MAX_VALUE : MAX_ARRAY_SIZE; } /** * Returns the number of elements in this list. * mjy： 返回此列表中的元素数 * * @return the number of elements in this list */ public int size() { return size; } /** * Returns \u003ctt\u003etrue\u003c/tt\u003e if this list contains no elements. * mjy： 判断是否为空 如果此列表不包含元素，则返回 true * * @return \u003ctt\u003etrue\u003c/tt\u003e if this list contains no elements */ public boolean isEmpty() { return size == 0; } /** * Returns \u003ctt\u003etrue\u003c/tt\u003e if this list contains the specified element. * More formally, returns \u003ctt\u003etrue\u003c/tt\u003e if and only if this list contains * at least one element \u003ctt\u003ee\u003c/tt\u003e such that * \u003ctt\u003e(o==null\u0026nbsp;?\u0026nbsp;e==null\u0026nbsp;:\u0026nbsp;o.equals(e))\u003c/tt\u003e. * * @param o element whose presence in this list is to be tested * @return \u003ctt\u003etrue\u003c/tt\u003e if this list contains the specified element */ // mjy： 判断是否包含指定元素，包含返回true public boolean contains(Object o) { // mjy： indexOf()方法：返回此列表中指定元素的首次出现的索引，如果此列表不包含此元素，则为-1 return indexOf(o) \u003e= 0; } /** * Returns the index of the first occurrence of the specified element * in this list, or -1 if this list does not contain the element. * More formally, returns the lowest index \u003ctt\u003ei\u003c/tt\u003e such that * \u003ctt\u003e(o==null\u0026nbsp;?\u0026nbsp;get(i)==null\u0026nbsp;:\u0026nbsp;o.equals(get(i)))\u003c/tt\u003e, * or -1 if there is no such index. */ // mjy： 返回此列表中指定元素的首次出现的索引，如果此列表不包含此元素，则为-1 public int indexOf(Object o) { // mjy： 入参元素为空 if (o == null) { for (int i = 0; i \u003c size; i++) // mjy： 判断是否存在空元素 if (elementData[i] == null) return i; } else { // 不为空 for (int i = 0; i \u003c size; i++) // mjy： equals()方法比较 if (o.equals(elementData[i])) return i; } return -1; } /** * Returns the index of the last occurrence of the specified element * in this list, or -1 if this list does not contain the element. * More formally, returns the highest index \u003ctt\u003ei\u003c/tt\u003e such that * \u003ctt\u003e(o==null\u0026nbsp;?\u0026nbsp;get(i)==null\u0026nbsp;:\u0026nbsp;o.equals(get(i)))\u003c/tt\u003e, * or -1 if there is no such index. */ // mjy： 返回此列表中指定元素的最后一次出现的索引，如果此列表不包含元素，则返回-1 public int lastIndexOf(Object o) { // 倒序循环 if (o == null) { for (int i = size - 1; i \u003e= 0; i--) if (elementData[i] == null) return i; } else { for (int i = size - 1; i \u003e= 0; i--) if (o.equals(elementData[i])) return i; } return -1; } /** * Returns a shallow copy of this \u003ctt\u003eArrayList\u003c/tt\u003e instance. (The * elements themselves are not copied.) * * @return a clone of this \u003ctt\u003eArrayList\u003c/tt\u003e instance */ // mjy： 克隆方法，返回此ArrayList实例的浅拷 （元素本身不被复制。） public Object clone() { try { ArrayList\u003c?\u003e v = (ArrayList\u003c?\u003e) super.clone(); // mjy： Arrays.copyOf功能是实现数组的复制，返回复制后的数组。参数是被复制的数组和复制的长度 v.elementData = Arrays.copyOf(elementData, size); v.modCount = 0; return v; } catch (CloneNotSupportedException e) { // this shouldn't happen, since we are Cloneable // mjy： 这不应该发生，因为我们是可以克隆的 throw new InternalError(e); } } /** * Returns an array containing all of the elements in this list * in proper sequence (from first to last element). * mjy： 以正确的顺序（从第一个到最后一个元素）返回一个包含此列表中所有元素的数组。 * \u003cp\u003eThe returned array will be \"safe\" in that no references to it are * maintained by this list. (In other words, this method must allocate * a new array). The caller is thus free to modify the returned array. * mjy： 返回的数组将是安全的，因为该列表不保留对它的引用。 （换句话说，这个方法必须分配一个新的数组）。 * \u003cp\u003eThis method acts as bridge between array-based and collection-based * APIs. * mjy： 因此，调用者可以自由地修改返回的数组。 此方法充当基于阵列和基于集合的API之间的桥梁。 * * @return an array containing all of the elements in this list in * proper sequence */ public Object[] toArray() { return Arrays.copyOf(elementData, size); } /** * Returns an array containing all of the elements in this list in proper * sequence (from first to last element); the runtime type of the returned * array is that of the specified array. If the list fits in the * specified array, it is returned therein. Otherwise, a new array is * allocated with the runtime type of the specified array and the size of * this list. * * \u003cp\u003eIf the list fits in the specified array with room to spare * (i.e., the array has more elements than the list), the element in * the array immediately following the end of the collection is set to * \u003ctt\u003enull\u003c/tt\u003e. (This is useful in determining the length of the * list \u003ci\u003eonly\u003c/i\u003e if the caller knows that the list does not contain * any null elements.) * * @param a the array into which the elements of the list are to * be stored, if it is big enough; otherwise, a new array of the * same runtime type is allocated for this purpose. * @return an array containing the elements of the list * @throws ArrayStoreException if the runtime type of the specified array * is not a supertype of the runtime type of every element in * this list * @throws NullPointerException if the specified array is null */ @SuppressWarnings(\"unchecked\") public \u003cT\u003e T[] toArray(T[] a) { if (a.length \u003c size) // Make a new array of a's runtime type, but my contents: return (T[]) Arrays.copyOf(elementData, size, a.getClass()); System.arraycopy(elementData, 0, a, 0, size); if (a.length \u003e size) a[size] = null; return a; } // Positional Access Operations @SuppressWarnings(\"unchecked\") E elementData(int index) { return (E) elementData[index]; } /** * Returns the element at the specified position in this list. * mjy： 返回此列表中指定位置的元素 * * @param index index of the element to return * @return the element at the specified position in this list * @throws IndexOutOfBoundsException {@inheritDoc} */ public E get(int index) { // mjy： 校验数组下标越界 rangeCheck(index); return elementData(index); } /** * Replaces the element at the specified position in this list with * the specified element. * mjy： 用指定的元素替换此列表中指定位置的元素 * * @param index index of the element to replace * @param element element to be stored at the specified position * @return the element previously at the specified position * @throws IndexOutOfBoundsException {@inheritDoc} */ public E set(int index, E element) { // mjy： 校验数组下标越界 rangeCheck(index); // mjy： 旧的值 E oldValue = elementData(index); // mjy： 新的赋值 elementData[index] = element; // mjy： 返回旧的值 return oldValue; } /** * Appends the specified element to the end of this list. * mjy： 添加元素，将指定的元素追加到此列表的末尾 * * @param e element to be appended to this list * @return \u003ctt\u003etrue\u003c/tt\u003e (as specified by {@link Collection#add}) */ public boolean add(E e) { // mjy： 扩容校验 ensureCapacityInternal(size + 1); // Increments modCount!! // mjy： 添加元素 elementData[size++] = e; return true; } /** * Inserts the specified element at the specified position in this * list. Shifts the element currently at that position (if any) and * any subsequent elements to the right (adds one to their indices). * mjy： 添加元素，在此列表中的指定位置插入指定的元素 * mjy：先调用 rangeCheckForAdd 对index进行界限检查；然后调用 ensureCapacityInternal 方法保证capacity足够大；再将从index开始之后的所有成员后移一个位置；将element插入index位置；最后size加1。 * * @param index index at which the specified element is to be inserted * @param element element to be inserted * @throws IndexOutOfBoundsException {@inheritDoc} */ public void add(int index, E element) { // mjy： 校验 rangeCheckForAdd(index); ensureCapacityInternal(size + 1); // Increments modCount!! // mjy： System.arraycopy()这个实现数组之间复制的方法一定要看一下，下面就用到了arraycopy()方法实现数组自己复制自己 System.arraycopy(elementData, index, elementData, index + 1, size - index); elementData[index] = element; size++; } /** * Removes the element at the specified position in this list. * Shifts any subsequent elements to the left (subtracts one from their * indices). * mjy：删除元素，删除该列表中指定位置的元素。 将任何后续元素移动到左侧（从其索引中减去一个元素） * * @param index the index of the element to be removed * @return the element that was removed from the list * @throws IndexOutOfBoundsException {@inheritDoc} */ public E remove(int index) { rangeCheck(index); modCount++; E oldValue = elementData(index); int numMoved = size - index - 1; if (numMoved \u003e 0) System.arraycopy(elementData, index + 1, elementData, index, numMoved); elementData[--size] = null; // clear to let GC do its work return oldValue; } /** * Removes the first occurrence of the specified element from this list, * if it is present. If the list does not contain the element, it is * unchanged. More formally, removes the element with the lowest index * \u003ctt\u003ei\u003c/tt\u003e such that * \u003ctt\u003e(o==null\u0026nbsp;?\u0026nbsp;get(i)==null\u0026nbsp;:\u0026nbsp;o.equals(get(i)))\u003c/tt\u003e * (if such an element exists). Returns \u003ctt\u003etrue\u003c/tt\u003e if this list * contained the specified element (or equivalently, if this list * changed as a result of the call). * mjy： 从列表中删除指定元素的第一个出现（如果存在）。 如果列表不包含该元素，则它不会更改。 * * @param o element to be removed from this list, if present * @return \u003ctt\u003etrue\u003c/tt\u003e if this list contained the specified element */ public boolean remove(Object o) { if (o == null) { for (int index = 0; index \u003c size; index++) if (elementData[index] == null) { fastRemove(index); return true; } } else { for (int index = 0; index \u003c size; index++) if (o.equals(elementData[index])) { fastRemove(index); return true; } } return false; } /* * Private remove method that skimjy bounds checking and does not * return the value removed. */ private void fastRemove(int index) { modCount++; int numMoved = size - index - 1; if (numMoved \u003e 0) System.arraycopy(elementData, index + 1, elementData, index, numMoved); elementData[--size] = null; // clear to let GC do its work } /** * Removes all of the elements from this list. The list will * be empty after this call returns. * mjy： 从列表中清空（删除）所有元素。 */ public void clear() { modCount++; // clear to let GC do its work for (int i = 0; i \u003c size; i++) elementData[i] = null; size = 0; } /** * Appends all of the elements in the specified collection to the end of * this list, in the order that they are returned by the * specified collection's Iterator. The behavior of this operation is * undefined if the specified collection is modified while the operation * is in progress. (This implies that the behavior of this call is * undefined if the specified collection is this list, and this * list is nonempty.) * * @param c collection containing elements to be added to this list * @return \u003ctt\u003etrue\u003c/tt\u003e if this list changed as a result of the call * @throws NullPointerException if the specified collection is null */ public boolean addAll(Collection\u003c? extends E\u003e c) { Object[] a = c.toArray(); int numNew = a.length; ensureCapacityInternal(size + numNew); // Increments modCount System.arraycopy(a, 0, elementData, size, numNew); size += numNew; return numNew != 0; } /** * Inserts all of the elements in the specified collection into this * list, starting at the specified position. Shifts the element * currently at that position (if any) and any subsequent elements to * the right (increases their indices). The new elements will appear * in the list in the order that they are returned by the * specified collection's iterator. * * @param index index at which to insert the first element from the * specified collection * @param c collection containing elements to be added to this list * @return \u003ctt\u003etrue\u003c/tt\u003e if this list changed as a result of the call * @throws IndexOutOfBoundsException {@inheritDoc} * @throws NullPointerException if the specified collection is null */ public boolean addAll(int index, Collection\u003c? extends E\u003e c) { rangeCheckForAdd(index); Object[] a = c.toArray(); int numNew = a.length; ensureCapacityInternal(size + numNew); // Increments modCount int numMoved = size - index; if (numMoved \u003e 0) System.arraycopy(elementData, index, elementData, index + numNew, numMoved); System.arraycopy(a, 0, elementData, index, numNew); size += numNew; return numNew != 0; } /** * Removes from this list all of the elements whose index is between * {@code fromIndex}, inclusive, and {@code toIndex}, exclusive. * Shifts any succeeding elements to the left (reduces their index). * This call shortens the list by {@code (toIndex - fromIndex)} elements. * (If {@code toIndex==fromIndex}, this operation has no effect.) * * @throws IndexOutOfBoundsException if {@code fromIndex} or * {@code toIndex} is out of range * ({@code fromIndex \u003c 0 || * fromIndex \u003e= size() || * toIndex \u003e size() || * toIndex \u003c fromIndex}) */ protected void removeRange(int fromIndex, int toIndex) { modCount++; int numMoved = size - toIndex; System.arraycopy(elementData, toIndex, elementData, fromIndex, numMoved); // clear to let GC do its work int newSize = size - (toIndex - fromIndex); for (int i = newSize; i \u003c size; i++) { elementData[i] = null; } size = newSize; } /** * Checks if the given index is in range. If not, throws an appropriate * runtime exception. This method does *not* check if the index is * negative: It is always used immediately prior to an array access, * which throws an ArrayIndexOutOfBoundsException if index is negative. */ private void rangeCheck(int index) { if (index \u003e= size) throw new IndexOutOfBoundsException(outOfBoundsMsg(index)); } /** * A version of rangeCheck used by add and addAll. */ private void rangeCheckForAdd(int index) { if (index \u003e size || index \u003c 0) throw new IndexOutOfBoundsException(outOfBoundsMsg(index)); } /** * Constructs an IndexOutOfBoundsException detail message. * Of the many possible refactorings of the error handling code, * this \"outlining\" performs best with both server and client VMs. */ private String outOfBoundsMsg(int index) { return \"Index: \" + index + \", Size: \" + size; } /** * Removes from this list all of its elements that are contained in the * specified collection. * * @param c collection containing elements to be removed from this list * @return {@code true} if this list changed as a result of the call * @throws ClassCastException if the class of an element of this list * is incompatible with the specified collection * (\u003ca href=\"Collection.html#optional-restrictions\"\u003eoptional\u003c/a\u003e) * @throws NullPointerException if this list contains a null element and the * specified collection does not permit null elements * (\u003ca href=\"Collection.html#optional-restrictions\"\u003eoptional\u003c/a\u003e), * or if the specified collection is null * @see Collection#contains(Object) */ public boolean removeAll(Collection\u003c?\u003e c) { Objects.requireNonNull(c); return batchRemove(c, false); } /** * Retains only the elements in this list that are contained in the * specified collection. In other words, removes from this list all * of its elements that are not contained in the specified collection. * * @param c collection containing elements to be retained in this list * @return {@code true} if this list changed as a result of the call * @throws ClassCastException if the class of an element of this list * is incompatible with the specified collection * (\u003ca href=\"Collection.html#optional-restrictions\"\u003eoptional\u003c/a\u003e) * @throws NullPointerException if this list contains a null element and the * specified collection does not permit null elements * (\u003ca href=\"Collection.html#optional-restrictions\"\u003eoptional\u003c/a\u003e), * or if the specified collection is null * @see Collection#contains(Object) */ public boolean retainAll(Collection\u003c?\u003e c) { Objects.requireNonNull(c); return batchRemove(c, true); } private boolean batchRemove(Collection\u003c?\u003e c, boolean complement) { final Object[] elementData = this.elementData; int r = 0, w = 0; boolean modified = false; try { for (; r \u003c size; r++) if (c.contains(elementData[r]) == complement) elementData[w++] = elementData[r]; } finally { // Preserve behavioral compatibility with AbstractCollection, // even if c.contains() throws. if (r != size) { System.arraycopy(elementData, r, elementData, w, size - r); w += size - r; } if (w != size) { // clear to let GC do its work for (int i = w; i \u003c size; i++) elementData[i] = null; modCount += size - w; size = w; modified = true; } } return modified; } /** * Save the state of the \u003ctt\u003eArrayList\u003c/tt\u003e instance to a stream (that * is, serialize it). * * @serialData The length of the array backing the \u003ctt\u003eArrayList\u003c/tt\u003e * instance is emitted (int), followed by all of its elements * (each an \u003ctt\u003eObject\u003c/tt\u003e) in the proper order. */ private void writeObject(java.io.ObjectOutputStream s) throws java.io.IOException { // Write out element count, and any hidden stuff int expectedModCount = modCount; s.defaultWriteObject(); // Write out size as capacity for behavioural compatibility with clone() s.writeInt(size); // Write out all elements in the proper order. for (int i = 0; i \u003c size; i++) { s.writeObject(elementData[i]); } if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } } /** * Reconstitute the \u003ctt\u003eArrayList\u003c/tt\u003e instance from a stream (that is, * deserialize it). */ private void readObject(java.io.ObjectInputStream s) throws java.io.IOException, ClassNotFoundException { elementData = EMPTY_ELEMENTDATA; // Read in size, and any hidden stuff s.defaultReadObject(); // Read in capacity s.readInt(); // ignored if (size \u003e 0) { // be like clone(), allocate array based upon size not capacity ensureCapacityInternal(size); Object[] a = elementData; // Read in all elements in the proper order. for (int i = 0; i \u003c size; i++) { a[i] = s.readObject(); } } } /** * Returns a list iterator over the elements in this list (in proper * sequence), starting at the specified position in the list. * The specified index indicates the first element that would be * returned by an initial call to {@link ListIterator#next next}. * An initial call to {@link ListIterator#previous previous} would * return the element with the specified index minus one. * * \u003cp\u003eThe returned list iterator is \u003ca href=\"#fail-fast\"\u003e\u003ci\u003efail-fast\u003c/i\u003e\u003c/a\u003e. * * @throws IndexOutOfBoundsException {@inheritDoc} */ public ListIterator\u003cE\u003e listIterator(int index) { if (index \u003c 0 || index \u003e size) throw new IndexOutOfBoundsException(\"Index: \" + index); return new ListItr(index); } /** * Returns a list iterator over the elements in this list (in proper * sequence). * * \u003cp\u003eThe returned list iterator is \u003ca href=\"#fail-fast\"\u003e\u003ci\u003efail-fast\u003c/i\u003e\u003c/a\u003e. * * @see #listIterator(int) */ public ListIterator\u003cE\u003e listIterator() { return new ListItr(0); } /** * Returns an iterator over the elements in this list in proper sequence. * * \u003cp\u003eThe returned iterator is \u003ca href=\"#fail-fast\"\u003e\u003ci\u003efail-fast\u003c/i\u003e\u003c/a\u003e. * * @return an iterator over the elements in this list in proper sequence */ public Iterator\u003cE\u003e iterator() { return new Itr(); } /** * An optimized version of AbstractList.Itr */ private class Itr implements Iterator\u003cE\u003e { int cursor; // index of next element to return int lastRet = -1; // index of last element returned; -1 if no such int expectedModCount = modCount; public boolean hasNext() { return cursor != size; } @SuppressWarnings(\"unchecked\") public E next() { checkForComodification(); int i = cursor; if (i \u003e= size) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (i \u003e= elementData.length) throw new ConcurrentModificationException(); cursor = i + 1; return (E) elementData[lastRet = i]; } public void remove() { if (lastRet \u003c 0) throw new IllegalStateException(); checkForComodification(); try { ArrayList.this.remove(lastRet); cursor = lastRet; lastRet = -1; expectedModCount = modCount; } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } @Override @SuppressWarnings(\"unchecked\") public void forEachRemaining(Consumer\u003c? super E\u003e consumer) { Objects.requireNonNull(consumer); final int size = ArrayList.this.size; int i = cursor; if (i \u003e= size) { return; } final Object[] elementData = ArrayList.this.elementData; if (i \u003e= elementData.length) { throw new ConcurrentModificationException(); } while (i != size \u0026\u0026 modCount == expectedModCount) { consumer.accept((E) elementData[i++]); } // update once at end of iteration to reduce heap write traffic cursor = i; lastRet = i - 1; checkForComodification(); } final void checkForComodification() { if (modCount != expectedModCount) throw new ConcurrentModificationException(); } } /** * An optimized version of AbstractList.ListItr */ private class ListItr extends Itr implements ListIterator\u003cE\u003e { ListItr(int index) { super(); cursor = index; } public boolean hasPrevious() { return cursor != 0; } public int nextIndex() { return cursor; } public int previousIndex() { return cursor - 1; } @SuppressWarnings(\"unchecked\") public E previous() { checkForComodification(); int i = cursor - 1; if (i \u003c 0) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (i \u003e= elementData.length) throw new ConcurrentModificationException(); cursor = i; return (E) elementData[lastRet = i]; } public void set(E e) { if (lastRet \u003c 0) throw new IllegalStateException(); checkForComodification(); try { ArrayList.this.set(lastRet, e); } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } public void add(E e) { checkForComodification(); try { int i = cursor; ArrayList.this.add(i, e); cursor = i + 1; lastRet = -1; expectedModCount = modCount; } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } } /** * Returns a view of the portion of this list between the specified * {@code fromIndex}, inclusive, and {@code toIndex}, exclusive. (If * {@code fromIndex} and {@code toIndex} are equal, the returned list is * empty.) The returned list is backed by this list, so non-structural * changes in the returned list are reflected in this list, and vice-versa. * The returned list supports all of the optional list operations. * * \u003cp\u003eThis method eliminates the need for explicit range operations (of * the sort that commonly exist for arrays). Any operation that expects * a list can be used as a range operation by passing a subList view * instead of a whole list. For example, the following idiom * removes a range of elements from a list: * \u003cpre\u003e * list.subList(from, to).clear(); * \u003c/pre\u003e * Similar idioms may be constructed for {@link #indexOf(Object)} and * {@link #lastIndexOf(Object)}, and all of the algorithms in the * {@link Collections} class can be applied to a subList. * * \u003cp\u003eThe semantics of the list returned by this method become undefined if * the backing list (i.e., this list) is \u003ci\u003estructurally modified\u003c/i\u003e in * any way other than via the returned list. (Structural modifications are * those that change the size of this list, or otherwise perturb it in such * a fashion that iterations in progress may yield incorrect results.) * * @throws IndexOutOfBoundsException {@inheritDoc} * @throws IllegalArgumentException {@inheritDoc} */ public List\u003cE\u003e subList(int fromIndex, int toIndex) { subListRangeCheck(fromIndex, toIndex, size); return new SubList(this, 0, fromIndex, toIndex); } static void subListRangeCheck(int fromIndex, int toIndex, int size) { if (fromIndex \u003c 0) throw new IndexOutOfBoundsException(\"fromIndex = \" + fromIndex); if (toIndex \u003e size) throw new IndexOutOfBoundsException(\"toIndex = \" + toIndex); if (fromIndex \u003e toIndex) throw new IllegalArgumentException(\"fromIndex(\" + fromIndex + \") \u003e toIndex(\" + toIndex + \")\"); } private class SubList extends AbstractList\u003cE\u003e implements RandomAccess { private final AbstractList\u003cE\u003e parent; private final int parentOffset; private final int offset; int size; SubList(AbstractList\u003cE\u003e parent, int offset, int fromIndex, int toIndex) { this.parent = parent; this.parentOffset = fromIndex; this.offset = offset + fromIndex; this.size = toIndex - fromIndex; this.modCount = ArrayList.this.modCount; } public E set(int index, E e) { rangeCheck(index); checkForComodification(); E oldValue = ArrayList.this.elementData(offset + index); ArrayList.this.elementData[offset + index] = e; return oldValue; } public E get(int index) { rangeCheck(index); checkForComodification(); return ArrayList.this.elementData(offset + index); } public int size() { checkForComodification(); return this.size; } public void add(int index, E e) { rangeCheckForAdd(index); checkForComodification(); parent.add(parentOffset + index, e); this.modCount = parent.modCount; this.size++; } public E remove(int index) { rangeCheck(index); checkForComodification(); E result = parent.remove(parentOffset + index); this.modCount = parent.modCount; this.size--; return result; } protected void removeRange(int fromIndex, int toIndex) { checkForComodification(); parent.removeRange(parentOffset + fromIndex, parentOffset + toIndex); this.modCount = parent.modCount; this.size -= toIndex - fromIndex; } public boolean addAll(Collection\u003c? extends E\u003e c) { return addAll(this.size, c); } public boolean addAll(int index, Collection\u003c? extends E\u003e c) { rangeCheckForAdd(index); int cSize = c.size(); if (cSize == 0) return false; checkForComodification(); parent.addAll(parentOffset + index, c); this.modCount = parent.modCount; this.size += cSize; return true; } public Iterator\u003cE\u003e iterator() { return listIterator(); } public ListIterator\u003cE\u003e listIterator(final int index) { checkForComodification(); rangeCheckForAdd(index); final int offset = this.offset; return new ListIterator\u003cE\u003e() { int cursor = index; int lastRet = -1; int expectedModCount = ArrayList.this.modCount; public boolean hasNext() { return cursor != SubList.this.size; } @SuppressWarnings(\"unchecked\") public E next() { checkForComodification(); int i = cursor; if (i \u003e= SubList.this.size) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (offset + i \u003e= elementData.length) throw new ConcurrentModificationException(); cursor = i + 1; return (E) elementData[offset + (lastRet = i)]; } public boolean hasPrevious() { return cursor != 0; } @SuppressWarnings(\"unchecked\") public E previous() { checkForComodification(); int i = cursor - 1; if (i \u003c 0) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (offset + i \u003e= elementData.length) throw new ConcurrentModificationException(); cursor = i; return (E) elementData[offset + (lastRet = i)]; } @SuppressWarnings(\"unchecked\") public void forEachRemaining(Consumer\u003c? super E\u003e consumer) { Objects.requireNonNull(consumer); final int size = SubList.this.size; int i = cursor; if (i \u003e= size) { return; } final Object[] elementData = ArrayList.this.elementData; if (offset + i \u003e= elementData.length) { throw new ConcurrentModificationException(); } while (i != size \u0026\u0026 modCount == expectedModCount) { consumer.accept((E) elementData[offset + (i++)]); } // update once at end of iteration to reduce heap write traffic lastRet = cursor = i; checkForComodification(); } public int nextIndex() { return cursor; } public int previousIndex() { return cursor - 1; } public void remove() { if (lastRet \u003c 0) throw new IllegalStateException(); checkForComodification(); try { SubList.this.remove(lastRet); cursor = lastRet; lastRet = -1; expectedModCount = ArrayList.this.modCount; } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } public void set(E e) { if (lastRet \u003c 0) throw new IllegalStateException(); checkForComodification(); try { ArrayList.this.set(offset + lastRet, e); } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } public void add(E e) { checkForComodification(); try { int i = cursor; SubList.this.add(i, e); cursor = i + 1; lastRet = -1; expectedModCount = ArrayList.this.modCount; } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } final void checkForComodification() { if (expectedModCount != ArrayList.this.modCount) throw new ConcurrentModificationException(); } }; } public List\u003cE\u003e subList(int fromIndex, int toIndex) { subListRangeCheck(fromIndex, toIndex, size); return new SubList(this, offset, fromIndex, toIndex); } private void rangeCheck(int index) { if (index \u003c 0 || index \u003e= this.size) throw new IndexOutOfBoundsException(outOfBoundsMsg(index)); } private void rangeCheckForAdd(int index) { if (index \u003c 0 || index \u003e this.size) throw new IndexOutOfBoundsException(outOfBoundsMsg(index)); } private String outOfBoundsMsg(int index) { return \"Index: \" + index + \", Size: \" + this.size; } private void checkForComodification() { if (ArrayList.this.modCount != this.modCount) throw new ConcurrentModificationException(); } public Spliterator\u003cE\u003e spliterator() { checkForComodification(); return new ArrayListSpliterator\u003cE\u003e(ArrayList.this, offset, offset + this.size, this.modCount); } } @Override public void forEach(Consumer\u003c? super E\u003e action) { Objects.requireNonNull(action); final int expectedModCount = modCount; @SuppressWarnings(\"unchecked\") final E[] elementData = (E[]) this.elementData; final int size = this.size; for (int i = 0; modCount == expectedModCount \u0026\u0026 i \u003c size; i++) { action.accept(elementData[i]); } if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } } /** * Creates a \u003cem\u003e\u003ca href=\"Spliterator.html#binding\"\u003elate-binding\u003c/a\u003e\u003c/em\u003e * and \u003cem\u003efail-fast\u003c/em\u003e {@link Spliterator} over the elements in this * list. * * \u003cp\u003eThe {@code Spliterator} reports {@link Spliterator#SIZED}, * {@link Spliterator#SUBSIZED}, and {@link Spliterator#ORDERED}. * Overriding implementations should document the reporting of additional * characteristic values. * * @return a {@code Spliterator} over the elements in this list * @since 1.8 */ @Override public Spliterator\u003cE\u003e spliterator() { return new ArrayListSpliterator\u003c\u003e(this, 0, -1, 0); } /** * Index-based split-by-two, lazily initialized Spliterator */ static final class ArrayListSpliterator\u003cE\u003e implements Spliterator\u003cE\u003e { /* * If ArrayLists were immutable, or structurally immutable (no * adds, removes, etc), we could implement their spliterators * with Arrays.spliterator. Instead we detect as much * interference during traversal as practical without * sacrificing much performance. We rely primarily on * modCounts. These are not guaranteed to detect concurrency * violations, and are sometimes overly conservative about * within-thread interference, but detect enough problems to * be worthwhile in practice. To carry this out, we (1) lazily * initialize fence and expectedModCount until the latest * point that we need to commit to the state we are checking * against; thus improving precision. (This doesn't apply to * SubLists, that create spliterators with current non-lazy * values). (2) We perform only a single * ConcurrentModificationException check at the end of forEach * (the most performance-sensitive method). When using forEach * (as opposed to iterators), we can normally only detect * interference after actions, not before. Further * CME-triggering checks apply to all other possible * violations of assumptions for example null or too-small * elementData array given its size(), that could only have * occurred due to interference. This allows the inner loop * of forEach to run without any further checks, and * simplifies lambda-resolution. While this does entail a * number of checks, note that in the common case of * list.stream().forEach(a), no checks or other computation * occur anywhere other than inside forEach itself. The other * less-often-used methods cannot take advantage of most of * these streamlinings. */ private final ArrayList\u003cE\u003e list; private int index; // current index, modified on advance/split private int fence; // -1 until used; then one past last index private int expectedModCount; // initialized when fence set /** * Create new spliterator covering the given range */ ArrayListSpliterator(ArrayList\u003cE\u003e list, int origin, int fence, int expectedModCount) { this.list = list; // OK if null unless traversed this.index = origin; this.fence = fence; this.expectedModCount = expectedModCount; } private int getFence() { // initialize fence to size on first use int hi; // (a specialized variant appears in method forEach) ArrayList\u003cE\u003e lst; if ((hi = fence) \u003c 0) { if ((lst = list) == null) hi = fence = 0; else { expectedModCount = lst.modCount; hi = fence = lst.size; } } return hi; } public ArrayListSpliterator\u003cE\u003e trySplit() { int hi = getFence(), lo = index, mid = (lo + hi) \u003e\u003e\u003e 1; return (lo \u003e= mid) ? null : // divide range in half unless too small new ArrayListSpliterator\u003cE\u003e(list, lo, index = mid, expectedModCount); } public boolean tryAdvance(Consumer\u003c? super E\u003e action) { if (action == null) throw new NullPointerException(); int hi = getFence(), i = index; if (i \u003c hi) { index = i + 1; @SuppressWarnings(\"unchecked\") E e = (E) list.elementData[i]; action.accept(e); if (list.modCount != expectedModCount) throw new ConcurrentModificationException(); return true; } return false; } public void forEachRemaining(Consumer\u003c? super E\u003e action) { int i, hi, mc; // hoist accesses and checks from loop ArrayList\u003cE\u003e lst; Object[] a; if (action == null) throw new NullPointerException(); if ((lst = list) != null \u0026\u0026 (a = lst.elementData) != null) { if ((hi = fence) \u003c 0) { mc = lst.modCount; hi = lst.size; } else mc = expectedModCount; if ((i = index) \u003e= 0 \u0026\u0026 (index = hi) \u003c= a.length) { for (; i \u003c hi; ++i) { @SuppressWarnings(\"unchecked\") E e = (E) a[i]; action.accept(e); } if (lst.modCount == mc) return; } } throw new ConcurrentModificationException(); } public long estimateSize() { return (long) (getFence() - index); } public int characteristics() { return Spliterator.ORDERED | Spliterator.SIZED | Spliterator.SUBSIZED; } } @Override public boolean removeIf(Predicate\u003c? super E\u003e filter) { Objects.requireNonNull(filter); // figure out which elements are to be removed // any exception thrown from the filter predicate at this stage // will leave the collection unmodified int removeCount = 0; final BitSet removeSet = new BitSet(size); final int expectedModCount = modCount; final int size = this.size; for (int i = 0; modCount == expectedModCount \u0026\u0026 i \u003c size; i++) { @SuppressWarnings(\"unchecked\") final E element = (E) elementData[i]; if (filter.test(element)) { removeSet.set(i); removeCount++; } } if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } // shift surviving elements left over the spaces left by removed elements final boolean anyToRemove = removeCount \u003e 0; if (anyToRemove) { final int newSize = size - removeCount; for (int i = 0, j = 0; (i \u003c size) \u0026\u0026 (j \u003c newSize); i++, j++) { i = removeSet.nextClearBit(i); elementData[j] = elementData[i]; } for (int k = newSize; k \u003c size; k++) { elementData[k] = null; // Let gc do its work } this.size = newSize; if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } modCount++; } return anyToRemove; } @Override @SuppressWarnings(\"unchecked\") public void replaceAll(UnaryOperator\u003cE\u003e operator) { Objects.requireNonNull(operator); final int expectedModCount = modCount; final int size = this.size; for (int i = 0; modCount == expectedModCount \u0026\u0026 i \u003c size; i++) { elementData[i] = operator.apply((E) elementData[i]); } if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } modCount++; } @Override @SuppressWarnings(\"unchecked\") public void sort(Comparator\u003c? super E\u003e c) { final int expectedModCount = modCount; Arrays.sort((E[]) elementData, 0, size, c); if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } modCount++; } } 扩容分析","image":"https://www.mujaspace.com/icons/apple-touch-icon.png","license":"[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)","publisher":{"@type":"Organization","name":"muja's Space ","logo":{"@type":"ImageObject","url":"https://www.mujaspace.com/icons/apple-touch-icon.png"},"url":"https://www.mujaspace.com/"},"mainEntityOfPage":{"@type":"WebSite","@id":"https://www.mujaspace.com/"}}</script><meta name=twitter:card content="summary"><meta name=twitter:site content="@minimuaaa"><meta name=twitter:creator content="@minimuaaa"><meta property="og:title" content="ArrayList源码解析 building"><meta property="og:description" content='简介 ArrayList继承于 AbstractList 类，实现了 List, RandomAccess, Cloneable, java.io.Serializable 这些接口。
List：表明是一个列表，支持添加、删除、查找等操作，并且可以通过下标进行访问。 RandomAccess：是一个标志接口，表明实现这个这个接口的 List 集合是支持快速随机访问的。在 ArrayList 中，我们即可以通过元素的序号快速获取元素对象，这就是快速随机访问。 Cloneable ：即覆盖了函数clone()，能被克隆。 Serializable：这意味着ArrayList支持序列化，能通过序列化去传输。 1 2 3 public class ArrayList<E> extends AbstractList<E> implements List<E>, RandomAccess, Cloneable, java.io.Serializable {} 源码分析 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 630 631 632 633 634 635 636 637 638 639 640 641 642 643 644 645 646 647 648 649 650 651 652 653 654 655 656 657 658 659 660 661 662 663 664 665 666 667 668 669 670 671 672 673 674 675 676 677 678 679 680 681 682 683 684 685 686 687 688 689 690 691 692 693 694 695 696 697 698 699 700 701 702 703 704 705 706 707 708 709 710 711 712 713 714 715 716 717 718 719 720 721 722 723 724 725 726 727 728 729 730 731 732 733 734 735 736 737 738 739 740 741 742 743 744 745 746 747 748 749 750 751 752 753 754 755 756 757 758 759 760 761 762 763 764 765 766 767 768 769 770 771 772 773 774 775 776 777 778 779 780 781 782 783 784 785 786 787 788 789 790 791 792 793 794 795 796 797 798 799 800 801 802 803 804 805 806 807 808 809 810 811 812 813 814 815 816 817 818 819 820 821 822 823 824 825 826 827 828 829 830 831 832 833 834 835 836 837 838 839 840 841 842 843 844 845 846 847 848 849 850 851 852 853 854 855 856 857 858 859 860 861 862 863 864 865 866 867 868 869 870 871 872 873 874 875 876 877 878 879 880 881 882 883 884 885 886 887 888 889 890 891 892 893 894 895 896 897 898 899 900 901 902 903 904 905 906 907 908 909 910 911 912 913 914 915 916 917 918 919 920 921 922 923 924 925 926 927 928 929 930 931 932 933 934 935 936 937 938 939 940 941 942 943 944 945 946 947 948 949 950 951 952 953 954 955 956 957 958 959 960 961 962 963 964 965 966 967 968 969 970 971 972 973 974 975 976 977 978 979 980 981 982 983 984 985 986 987 988 989 990 991 992 993 994 995 996 997 998 999 1000 1001 1002 1003 1004 1005 1006 1007 1008 1009 1010 1011 1012 1013 1014 1015 1016 1017 1018 1019 1020 1021 1022 1023 1024 1025 1026 1027 1028 1029 1030 1031 1032 1033 1034 1035 1036 1037 1038 1039 1040 1041 1042 1043 1044 1045 1046 1047 1048 1049 1050 1051 1052 1053 1054 1055 1056 1057 1058 1059 1060 1061 1062 1063 1064 1065 1066 1067 1068 1069 1070 1071 1072 1073 1074 1075 1076 1077 1078 1079 1080 1081 1082 1083 1084 1085 1086 1087 1088 1089 1090 1091 1092 1093 1094 1095 1096 1097 1098 1099 1100 1101 1102 1103 1104 1105 1106 1107 1108 1109 1110 1111 1112 1113 1114 1115 1116 1117 1118 1119 1120 1121 1122 1123 1124 1125 1126 1127 1128 1129 1130 1131 1132 1133 1134 1135 1136 1137 1138 1139 1140 1141 1142 1143 1144 1145 1146 1147 1148 1149 1150 1151 1152 1153 1154 1155 1156 1157 1158 1159 1160 1161 1162 1163 1164 1165 1166 1167 1168 1169 1170 1171 1172 1173 1174 1175 1176 1177 1178 1179 1180 1181 1182 1183 1184 1185 package java.util; import java.util.function.Consumer; import java.util.function.Predicate; import java.util.function.UnaryOperator; public class ArrayList<E> extends AbstractList<E> implements List<E>, RandomAccess, Cloneable, java.io.Serializable { private static final long serialVersionUID = 8683452581122892189L; /** * Default initial capacity. mjy：默认初始容量大小 */ private static final int DEFAULT_CAPACITY = 10; /** * Shared empty array instance used for empty instances. mjy：空数组（用于空实例）。 */ private static final Object[] EMPTY_ELEMENTDATA = {}; /** * Shared empty array instance used for default sized empty instances. We * distinguish this from EMPTY_ELEMENTDATA to know how much to inflate when * first element is added. */ // mjy：用于默认大小空实例的共享空数组实例。和EMPTY_ELEMENTDATA数组区分，以知道在添加第一个元素时容量需要增加多少。 private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {}; /** * The array buffer into which the elements of the ArrayList are stored. * The capacity of the ArrayList is the length of this array buffer. Any * empty ArrayList with elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA * will be expanded to DEFAULT_CAPACITY when the first element is added. */ // mjy：存储ArrayList元素的数组缓冲区（就是保存ArrayList数据的数组）。ArrayList的容量是此数组缓冲区的长度。添加第一个元素时，任何具有elementData==DEFAULTCAPACITY_EMMENTDATA的空ArrayList都将扩展为DEFAULT_CAPACITY。 transient Object[] elementData; // non-private to simplify nested class access /** * The size of the ArrayList (the number of elements it contains). mjy：数组长度大小（元素个数） * * @serial */ private int size; /** * Constructs an empty list with the specified initial capacity. * * @param initialCapacity the initial capacity of the list * @throws IllegalArgumentException if the specified initial capacity * is negative */ // mjy：带初始容量参数的构造函数（用户可以在创建ArrayList对象时自己指定集合的初始大小） public ArrayList(int initialCapacity) { if (initialCapacity > 0) { // 传入的参数大于0，创建initialCapacity大小的数组 this.elementData = new Object[initialCapacity]; } else if (initialCapacity == 0) { // 传入的参数等于0，创建空数组 this.elementData = EMPTY_ELEMENTDATA; } else { // 其他情况异常 throw new IllegalArgumentException("Illegal Capacity: " + initialCapacity); } } /** * Constructs an empty list with an initial capacity of ten. */ // mjy：默认无参构造函数 DEFAULTCAPACITY_EMPTY_ELEMENTDATA为0。初始其实是空数组，当添加第一个元素的时候数组容量才变成10 public ArrayList() { this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA; } /** * Constructs a list containing the elements of the specified * collection, in the order they are returned by the collection&#39;s * iterator. * * @param c the collection whose elements are to be placed into this list * @throws NullPointerException if the specified collection is null */ // mjy：构造一个包含指定集合的元素的列表，按照它们由集合的迭代器返回的顺序。 new ArrayList<>(paramList); public ArrayList(Collection<? extends E> c) { // 将参数转换为数组 elementData = c.toArray(); // elementData数组的长度不为0 if ((size = elementData.length) != 0) { // c.toArray might (incorrectly) not return Object[] (see 6260652) // mjy： elementData不是Object类型数据（c.toArray可能返回的不是Object类型的数组） if (elementData.getClass() != Object[].class) // mjy： 将原来不是Object类型的elementData数组的内容，赋值给新的Object类型的elementData数组 elementData = Arrays.copyOf(elementData, size, Object[].class); } else { // replace with empty array. mjy： elementData数组的长度为0，即为空数组 this.elementData = EMPTY_ELEMENTDATA; } } /** * Trims the capacity of this <tt>ArrayList</tt> instance to be the * list&#39;s current size. An application can use this operation to minimize * the storage of an <tt>ArrayList</tt> instance. */ // mjy： 修改这个ArrayList实例的容量是列表的当前大小。 可以使用此操作来最小化ArrayList实例的存储。 public void trimToSize() { modCount++; if (size < elementData.length) { elementData = (size == 0) ? EMPTY_ELEMENTDATA : Arrays.copyOf(elementData, size); } } /** * Increases the capacity of this <tt>ArrayList</tt> instance, if * necessary, to ensure that it can hold at least the number of elements * specified by the minimum capacity argument. * mjy： 如有必要，增加此ArrayList实例的容量，以确保它至少可以容纳最小容量参数指定的元素数量。 * * @param minCapacity the desired minimum capacity mjy：所需的最小容量 */ public void ensureCapacity(int minCapacity) { // mjy： (数组元素不为空) 如果是true，minExpand的值为0，如果是false,minExpand的值为10 int minExpand = (elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA) // any size if not default element table ? 0 // larger than default for default empty table. It&#39;s already // supposed to be at default size. : DEFAULT_CAPACITY; // 如果最小容量大于已有的最大容量 if (minCapacity > minExpand) { ensureExplicitCapacity(minCapacity); } } // mjy： 确保内部容量 private void ensureCapacityInternal(int minCapacity) { // mjy：如果元素是空 if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) { // mjy： 所需要的最小容量为 默认容量和最小容量相比 较大的一个 minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity); } // 确保 容量 ensureExplicitCapacity(minCapacity); } private void ensureExplicitCapacity(int minCapacity) { modCount++; // overflow-conscious code // mjy：所需要的最小容量减去现在的数组元素长度 大于0 if (minCapacity - elementData.length > 0) // mjy：调用grow方法进行扩容，调用此方法代表已经开始扩容了 grow(minCapacity); } /** * The maximum size of array to allocate. * Some VMs reserve some header words in an array. * Attempts to allocate larger arrays may result in * OutOfMemoryError: Requested array size exceeds VM limit * mjy： 是JVM能分配的数组的最大 大小，一般为Integer.MAX_VALUE - 8（这和JVM内部实现有关，留出了一些用于对象头信息的空间）。 */ private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8; /** * Increases the capacity to ensure that it can hold at least the * number of elements specified by the minimum capacity argument. * mjy：ArrayList扩容的核心方法。 * * @param minCapacity the desired minimum capacity */ private void grow(int minCapacity) { // overflow-conscious code // mjy： 表示当前数组的容量（即当前存储元素的数组 elementData 的长度） int oldCapacity = elementData.length; // mjy：是新的数组容量，计算方式是旧容量的 1.5 倍 (oldCapacity + oldCapacity >> 1，即右移一位表示除以2)。通过这种方式，ArrayList 的容量会在需要时以指数方式增加，避免频繁扩容。 int newCapacity = oldCapacity + (oldCapacity >> 1); // mjy：minCapacity是调用grow方法时传入的参数，表示所需的最小容量。如果计算出的newCapacity小于minCapacity，那么直接将newCapacity设置为minCapacity，确保新容量至少能满足当前所需的空间。 if (newCapacity - minCapacity < 0) newCapacity = minCapacity; // mjy：如果newCapacity超过了MAX_ARRAY_SIZE，调用 hugeCapacity(minCapacity) 方法来决定实际的容量。 if (newCapacity - MAX_ARRAY_SIZE > 0) newCapacity = hugeCapacity(minCapacity); // minCapacity is usually close to size, so this is a win: // mjy：调用Arrays.copyOf方法将现有的数组elementData复制到一个新的数组中，新数组的长度为 newCapacity，实现了数组的扩容。这个过程会保留原数组中的所有元素，但底层的存储空间已经扩展。 elementData = Arrays.copyOf(elementData, newCapacity); } // mjy： 处理可能超过最大数组大小的情况 private static int hugeCapacity(int minCapacity) { // mjy： 如果minCapacity为负数，意味着发生了容量溢出（例如，容量计算溢出了Integer的范围），此时抛出 OutOfMemoryError if (minCapacity < 0) // overflow throw new OutOfMemoryError(); // mjy：如果minCapacity超过了MAX_ARRAY_SIZE，返回Integer.MAX_VALUE，即数组会扩展到 JVM 可以支持的最大值。否则即minCapacity小于MAX_ARRAY_SIZE，但仍然超出了合理范围，则返回 MAX_ARRAY_SIZE。 return (minCapacity > MAX_ARRAY_SIZE) ? Integer.MAX_VALUE : MAX_ARRAY_SIZE; } /** * Returns the number of elements in this list. * mjy： 返回此列表中的元素数 * * @return the number of elements in this list */ public int size() { return size; } /** * Returns <tt>true</tt> if this list contains no elements. * mjy： 判断是否为空 如果此列表不包含元素，则返回 true * * @return <tt>true</tt> if this list contains no elements */ public boolean isEmpty() { return size == 0; } /** * Returns <tt>true</tt> if this list contains the specified element. * More formally, returns <tt>true</tt> if and only if this list contains * at least one element <tt>e</tt> such that * <tt>(o==null&amp;nbsp;?&amp;nbsp;e==null&amp;nbsp;:&amp;nbsp;o.equals(e))</tt>. * * @param o element whose presence in this list is to be tested * @return <tt>true</tt> if this list contains the specified element */ // mjy： 判断是否包含指定元素，包含返回true public boolean contains(Object o) { // mjy： indexOf()方法：返回此列表中指定元素的首次出现的索引，如果此列表不包含此元素，则为-1 return indexOf(o) >= 0; } /** * Returns the index of the first occurrence of the specified element * in this list, or -1 if this list does not contain the element. * More formally, returns the lowest index <tt>i</tt> such that * <tt>(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))</tt>, * or -1 if there is no such index. */ // mjy： 返回此列表中指定元素的首次出现的索引，如果此列表不包含此元素，则为-1 public int indexOf(Object o) { // mjy： 入参元素为空 if (o == null) { for (int i = 0; i < size; i++) // mjy： 判断是否存在空元素 if (elementData[i] == null) return i; } else { // 不为空 for (int i = 0; i < size; i++) // mjy： equals()方法比较 if (o.equals(elementData[i])) return i; } return -1; } /** * Returns the index of the last occurrence of the specified element * in this list, or -1 if this list does not contain the element. * More formally, returns the highest index <tt>i</tt> such that * <tt>(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))</tt>, * or -1 if there is no such index. */ // mjy： 返回此列表中指定元素的最后一次出现的索引，如果此列表不包含元素，则返回-1 public int lastIndexOf(Object o) { // 倒序循环 if (o == null) { for (int i = size - 1; i >= 0; i--) if (elementData[i] == null) return i; } else { for (int i = size - 1; i >= 0; i--) if (o.equals(elementData[i])) return i; } return -1; } /** * Returns a shallow copy of this <tt>ArrayList</tt> instance. (The * elements themselves are not copied.) * * @return a clone of this <tt>ArrayList</tt> instance */ // mjy： 克隆方法，返回此ArrayList实例的浅拷 （元素本身不被复制。） public Object clone() { try { ArrayList<?> v = (ArrayList<?>) super.clone(); // mjy： Arrays.copyOf功能是实现数组的复制，返回复制后的数组。参数是被复制的数组和复制的长度 v.elementData = Arrays.copyOf(elementData, size); v.modCount = 0; return v; } catch (CloneNotSupportedException e) { // this shouldn&#39;t happen, since we are Cloneable // mjy： 这不应该发生，因为我们是可以克隆的 throw new InternalError(e); } } /** * Returns an array containing all of the elements in this list * in proper sequence (from first to last element). * mjy： 以正确的顺序（从第一个到最后一个元素）返回一个包含此列表中所有元素的数组。 * <p>The returned array will be "safe" in that no references to it are * maintained by this list. (In other words, this method must allocate * a new array). The caller is thus free to modify the returned array. * mjy： 返回的数组将是安全的，因为该列表不保留对它的引用。 （换句话说，这个方法必须分配一个新的数组）。 * <p>This method acts as bridge between array-based and collection-based * APIs. * mjy： 因此，调用者可以自由地修改返回的数组。 此方法充当基于阵列和基于集合的API之间的桥梁。 * * @return an array containing all of the elements in this list in * proper sequence */ public Object[] toArray() { return Arrays.copyOf(elementData, size); } /** * Returns an array containing all of the elements in this list in proper * sequence (from first to last element); the runtime type of the returned * array is that of the specified array. If the list fits in the * specified array, it is returned therein. Otherwise, a new array is * allocated with the runtime type of the specified array and the size of * this list. * * <p>If the list fits in the specified array with room to spare * (i.e., the array has more elements than the list), the element in * the array immediately following the end of the collection is set to * <tt>null</tt>. (This is useful in determining the length of the * list <i>only</i> if the caller knows that the list does not contain * any null elements.) * * @param a the array into which the elements of the list are to * be stored, if it is big enough; otherwise, a new array of the * same runtime type is allocated for this purpose. * @return an array containing the elements of the list * @throws ArrayStoreException if the runtime type of the specified array * is not a supertype of the runtime type of every element in * this list * @throws NullPointerException if the specified array is null */ @SuppressWarnings("unchecked") public <T> T[] toArray(T[] a) { if (a.length < size) // Make a new array of a&#39;s runtime type, but my contents: return (T[]) Arrays.copyOf(elementData, size, a.getClass()); System.arraycopy(elementData, 0, a, 0, size); if (a.length > size) a[size] = null; return a; } // Positional Access Operations @SuppressWarnings("unchecked") E elementData(int index) { return (E) elementData[index]; } /** * Returns the element at the specified position in this list. * mjy： 返回此列表中指定位置的元素 * * @param index index of the element to return * @return the element at the specified position in this list * @throws IndexOutOfBoundsException {@inheritDoc} */ public E get(int index) { // mjy： 校验数组下标越界 rangeCheck(index); return elementData(index); } /** * Replaces the element at the specified position in this list with * the specified element. * mjy： 用指定的元素替换此列表中指定位置的元素 * * @param index index of the element to replace * @param element element to be stored at the specified position * @return the element previously at the specified position * @throws IndexOutOfBoundsException {@inheritDoc} */ public E set(int index, E element) { // mjy： 校验数组下标越界 rangeCheck(index); // mjy： 旧的值 E oldValue = elementData(index); // mjy： 新的赋值 elementData[index] = element; // mjy： 返回旧的值 return oldValue; } /** * Appends the specified element to the end of this list. * mjy： 添加元素，将指定的元素追加到此列表的末尾 * * @param e element to be appended to this list * @return <tt>true</tt> (as specified by {@link Collection#add}) */ public boolean add(E e) { // mjy： 扩容校验 ensureCapacityInternal(size + 1); // Increments modCount!! // mjy： 添加元素 elementData[size++] = e; return true; } /** * Inserts the specified element at the specified position in this * list. Shifts the element currently at that position (if any) and * any subsequent elements to the right (adds one to their indices). * mjy： 添加元素，在此列表中的指定位置插入指定的元素 * mjy：先调用 rangeCheckForAdd 对index进行界限检查；然后调用 ensureCapacityInternal 方法保证capacity足够大；再将从index开始之后的所有成员后移一个位置；将element插入index位置；最后size加1。 * * @param index index at which the specified element is to be inserted * @param element element to be inserted * @throws IndexOutOfBoundsException {@inheritDoc} */ public void add(int index, E element) { // mjy： 校验 rangeCheckForAdd(index); ensureCapacityInternal(size + 1); // Increments modCount!! // mjy： System.arraycopy()这个实现数组之间复制的方法一定要看一下，下面就用到了arraycopy()方法实现数组自己复制自己 System.arraycopy(elementData, index, elementData, index + 1, size - index); elementData[index] = element; size++; } /** * Removes the element at the specified position in this list. * Shifts any subsequent elements to the left (subtracts one from their * indices). * mjy：删除元素，删除该列表中指定位置的元素。 将任何后续元素移动到左侧（从其索引中减去一个元素） * * @param index the index of the element to be removed * @return the element that was removed from the list * @throws IndexOutOfBoundsException {@inheritDoc} */ public E remove(int index) { rangeCheck(index); modCount++; E oldValue = elementData(index); int numMoved = size - index - 1; if (numMoved > 0) System.arraycopy(elementData, index + 1, elementData, index, numMoved); elementData[--size] = null; // clear to let GC do its work return oldValue; } /** * Removes the first occurrence of the specified element from this list, * if it is present. If the list does not contain the element, it is * unchanged. More formally, removes the element with the lowest index * <tt>i</tt> such that * <tt>(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))</tt> * (if such an element exists). Returns <tt>true</tt> if this list * contained the specified element (or equivalently, if this list * changed as a result of the call). * mjy： 从列表中删除指定元素的第一个出现（如果存在）。 如果列表不包含该元素，则它不会更改。 * * @param o element to be removed from this list, if present * @return <tt>true</tt> if this list contained the specified element */ public boolean remove(Object o) { if (o == null) { for (int index = 0; index < size; index++) if (elementData[index] == null) { fastRemove(index); return true; } } else { for (int index = 0; index < size; index++) if (o.equals(elementData[index])) { fastRemove(index); return true; } } return false; } /* * Private remove method that skimjy bounds checking and does not * return the value removed. */ private void fastRemove(int index) { modCount++; int numMoved = size - index - 1; if (numMoved > 0) System.arraycopy(elementData, index + 1, elementData, index, numMoved); elementData[--size] = null; // clear to let GC do its work } /** * Removes all of the elements from this list. The list will * be empty after this call returns. * mjy： 从列表中清空（删除）所有元素。 */ public void clear() { modCount++; // clear to let GC do its work for (int i = 0; i < size; i++) elementData[i] = null; size = 0; } /** * Appends all of the elements in the specified collection to the end of * this list, in the order that they are returned by the * specified collection&#39;s Iterator. The behavior of this operation is * undefined if the specified collection is modified while the operation * is in progress. (This implies that the behavior of this call is * undefined if the specified collection is this list, and this * list is nonempty.) * * @param c collection containing elements to be added to this list * @return <tt>true</tt> if this list changed as a result of the call * @throws NullPointerException if the specified collection is null */ public boolean addAll(Collection<? extends E> c) { Object[] a = c.toArray(); int numNew = a.length; ensureCapacityInternal(size + numNew); // Increments modCount System.arraycopy(a, 0, elementData, size, numNew); size += numNew; return numNew != 0; } /** * Inserts all of the elements in the specified collection into this * list, starting at the specified position. Shifts the element * currently at that position (if any) and any subsequent elements to * the right (increases their indices). The new elements will appear * in the list in the order that they are returned by the * specified collection&#39;s iterator. * * @param index index at which to insert the first element from the * specified collection * @param c collection containing elements to be added to this list * @return <tt>true</tt> if this list changed as a result of the call * @throws IndexOutOfBoundsException {@inheritDoc} * @throws NullPointerException if the specified collection is null */ public boolean addAll(int index, Collection<? extends E> c) { rangeCheckForAdd(index); Object[] a = c.toArray(); int numNew = a.length; ensureCapacityInternal(size + numNew); // Increments modCount int numMoved = size - index; if (numMoved > 0) System.arraycopy(elementData, index, elementData, index + numNew, numMoved); System.arraycopy(a, 0, elementData, index, numNew); size += numNew; return numNew != 0; } /** * Removes from this list all of the elements whose index is between * {@code fromIndex}, inclusive, and {@code toIndex}, exclusive. * Shifts any succeeding elements to the left (reduces their index). * This call shortens the list by {@code (toIndex - fromIndex)} elements. * (If {@code toIndex==fromIndex}, this operation has no effect.) * * @throws IndexOutOfBoundsException if {@code fromIndex} or * {@code toIndex} is out of range * ({@code fromIndex < 0 || * fromIndex >= size() || * toIndex > size() || * toIndex < fromIndex}) */ protected void removeRange(int fromIndex, int toIndex) { modCount++; int numMoved = size - toIndex; System.arraycopy(elementData, toIndex, elementData, fromIndex, numMoved); // clear to let GC do its work int newSize = size - (toIndex - fromIndex); for (int i = newSize; i < size; i++) { elementData[i] = null; } size = newSize; } /** * Checks if the given index is in range. If not, throws an appropriate * runtime exception. This method does *not* check if the index is * negative: It is always used immediately prior to an array access, * which throws an ArrayIndexOutOfBoundsException if index is negative. */ private void rangeCheck(int index) { if (index >= size) throw new IndexOutOfBoundsException(outOfBoundsMsg(index)); } /** * A version of rangeCheck used by add and addAll. */ private void rangeCheckForAdd(int index) { if (index > size || index < 0) throw new IndexOutOfBoundsException(outOfBoundsMsg(index)); } /** * Constructs an IndexOutOfBoundsException detail message. * Of the many possible refactorings of the error handling code, * this "outlining" performs best with both server and client VMs. */ private String outOfBoundsMsg(int index) { return "Index: " + index + ", Size: " + size; } /** * Removes from this list all of its elements that are contained in the * specified collection. * * @param c collection containing elements to be removed from this list * @return {@code true} if this list changed as a result of the call * @throws ClassCastException if the class of an element of this list * is incompatible with the specified collection * (<a href="Collection.html#optional-restrictions">optional</a>) * @throws NullPointerException if this list contains a null element and the * specified collection does not permit null elements * (<a href="Collection.html#optional-restrictions">optional</a>), * or if the specified collection is null * @see Collection#contains(Object) */ public boolean removeAll(Collection<?> c) { Objects.requireNonNull(c); return batchRemove(c, false); } /** * Retains only the elements in this list that are contained in the * specified collection. In other words, removes from this list all * of its elements that are not contained in the specified collection. * * @param c collection containing elements to be retained in this list * @return {@code true} if this list changed as a result of the call * @throws ClassCastException if the class of an element of this list * is incompatible with the specified collection * (<a href="Collection.html#optional-restrictions">optional</a>) * @throws NullPointerException if this list contains a null element and the * specified collection does not permit null elements * (<a href="Collection.html#optional-restrictions">optional</a>), * or if the specified collection is null * @see Collection#contains(Object) */ public boolean retainAll(Collection<?> c) { Objects.requireNonNull(c); return batchRemove(c, true); } private boolean batchRemove(Collection<?> c, boolean complement) { final Object[] elementData = this.elementData; int r = 0, w = 0; boolean modified = false; try { for (; r < size; r++) if (c.contains(elementData[r]) == complement) elementData[w++] = elementData[r]; } finally { // Preserve behavioral compatibility with AbstractCollection, // even if c.contains() throws. if (r != size) { System.arraycopy(elementData, r, elementData, w, size - r); w += size - r; } if (w != size) { // clear to let GC do its work for (int i = w; i < size; i++) elementData[i] = null; modCount += size - w; size = w; modified = true; } } return modified; } /** * Save the state of the <tt>ArrayList</tt> instance to a stream (that * is, serialize it). * * @serialData The length of the array backing the <tt>ArrayList</tt> * instance is emitted (int), followed by all of its elements * (each an <tt>Object</tt>) in the proper order. */ private void writeObject(java.io.ObjectOutputStream s) throws java.io.IOException { // Write out element count, and any hidden stuff int expectedModCount = modCount; s.defaultWriteObject(); // Write out size as capacity for behavioural compatibility with clone() s.writeInt(size); // Write out all elements in the proper order. for (int i = 0; i < size; i++) { s.writeObject(elementData[i]); } if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } } /** * Reconstitute the <tt>ArrayList</tt> instance from a stream (that is, * deserialize it). */ private void readObject(java.io.ObjectInputStream s) throws java.io.IOException, ClassNotFoundException { elementData = EMPTY_ELEMENTDATA; // Read in size, and any hidden stuff s.defaultReadObject(); // Read in capacity s.readInt(); // ignored if (size > 0) { // be like clone(), allocate array based upon size not capacity ensureCapacityInternal(size); Object[] a = elementData; // Read in all elements in the proper order. for (int i = 0; i < size; i++) { a[i] = s.readObject(); } } } /** * Returns a list iterator over the elements in this list (in proper * sequence), starting at the specified position in the list. * The specified index indicates the first element that would be * returned by an initial call to {@link ListIterator#next next}. * An initial call to {@link ListIterator#previous previous} would * return the element with the specified index minus one. * * <p>The returned list iterator is <a href="#fail-fast"><i>fail-fast</i></a>. * * @throws IndexOutOfBoundsException {@inheritDoc} */ public ListIterator<E> listIterator(int index) { if (index < 0 || index > size) throw new IndexOutOfBoundsException("Index: " + index); return new ListItr(index); } /** * Returns a list iterator over the elements in this list (in proper * sequence). * * <p>The returned list iterator is <a href="#fail-fast"><i>fail-fast</i></a>. * * @see #listIterator(int) */ public ListIterator<E> listIterator() { return new ListItr(0); } /** * Returns an iterator over the elements in this list in proper sequence. * * <p>The returned iterator is <a href="#fail-fast"><i>fail-fast</i></a>. * * @return an iterator over the elements in this list in proper sequence */ public Iterator<E> iterator() { return new Itr(); } /** * An optimized version of AbstractList.Itr */ private class Itr implements Iterator<E> { int cursor; // index of next element to return int lastRet = -1; // index of last element returned; -1 if no such int expectedModCount = modCount; public boolean hasNext() { return cursor != size; } @SuppressWarnings("unchecked") public E next() { checkForComodification(); int i = cursor; if (i >= size) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (i >= elementData.length) throw new ConcurrentModificationException(); cursor = i + 1; return (E) elementData[lastRet = i]; } public void remove() { if (lastRet < 0) throw new IllegalStateException(); checkForComodification(); try { ArrayList.this.remove(lastRet); cursor = lastRet; lastRet = -1; expectedModCount = modCount; } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } @Override @SuppressWarnings("unchecked") public void forEachRemaining(Consumer<? super E> consumer) { Objects.requireNonNull(consumer); final int size = ArrayList.this.size; int i = cursor; if (i >= size) { return; } final Object[] elementData = ArrayList.this.elementData; if (i >= elementData.length) { throw new ConcurrentModificationException(); } while (i != size && modCount == expectedModCount) { consumer.accept((E) elementData[i++]); } // update once at end of iteration to reduce heap write traffic cursor = i; lastRet = i - 1; checkForComodification(); } final void checkForComodification() { if (modCount != expectedModCount) throw new ConcurrentModificationException(); } } /** * An optimized version of AbstractList.ListItr */ private class ListItr extends Itr implements ListIterator<E> { ListItr(int index) { super(); cursor = index; } public boolean hasPrevious() { return cursor != 0; } public int nextIndex() { return cursor; } public int previousIndex() { return cursor - 1; } @SuppressWarnings("unchecked") public E previous() { checkForComodification(); int i = cursor - 1; if (i < 0) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (i >= elementData.length) throw new ConcurrentModificationException(); cursor = i; return (E) elementData[lastRet = i]; } public void set(E e) { if (lastRet < 0) throw new IllegalStateException(); checkForComodification(); try { ArrayList.this.set(lastRet, e); } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } public void add(E e) { checkForComodification(); try { int i = cursor; ArrayList.this.add(i, e); cursor = i + 1; lastRet = -1; expectedModCount = modCount; } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } } /** * Returns a view of the portion of this list between the specified * {@code fromIndex}, inclusive, and {@code toIndex}, exclusive. (If * {@code fromIndex} and {@code toIndex} are equal, the returned list is * empty.) The returned list is backed by this list, so non-structural * changes in the returned list are reflected in this list, and vice-versa. * The returned list supports all of the optional list operations. * * <p>This method eliminates the need for explicit range operations (of * the sort that commonly exist for arrays). Any operation that expects * a list can be used as a range operation by passing a subList view * instead of a whole list. For example, the following idiom * removes a range of elements from a list: * <pre> * list.subList(from, to).clear(); * </pre> * Similar idioms may be constructed for {@link #indexOf(Object)} and * {@link #lastIndexOf(Object)}, and all of the algorithms in the * {@link Collections} class can be applied to a subList. * * <p>The semantics of the list returned by this method become undefined if * the backing list (i.e., this list) is <i>structurally modified</i> in * any way other than via the returned list. (Structural modifications are * those that change the size of this list, or otherwise perturb it in such * a fashion that iterations in progress may yield incorrect results.) * * @throws IndexOutOfBoundsException {@inheritDoc} * @throws IllegalArgumentException {@inheritDoc} */ public List<E> subList(int fromIndex, int toIndex) { subListRangeCheck(fromIndex, toIndex, size); return new SubList(this, 0, fromIndex, toIndex); } static void subListRangeCheck(int fromIndex, int toIndex, int size) { if (fromIndex < 0) throw new IndexOutOfBoundsException("fromIndex = " + fromIndex); if (toIndex > size) throw new IndexOutOfBoundsException("toIndex = " + toIndex); if (fromIndex > toIndex) throw new IllegalArgumentException("fromIndex(" + fromIndex + ") > toIndex(" + toIndex + ")"); } private class SubList extends AbstractList<E> implements RandomAccess { private final AbstractList<E> parent; private final int parentOffset; private final int offset; int size; SubList(AbstractList<E> parent, int offset, int fromIndex, int toIndex) { this.parent = parent; this.parentOffset = fromIndex; this.offset = offset + fromIndex; this.size = toIndex - fromIndex; this.modCount = ArrayList.this.modCount; } public E set(int index, E e) { rangeCheck(index); checkForComodification(); E oldValue = ArrayList.this.elementData(offset + index); ArrayList.this.elementData[offset + index] = e; return oldValue; } public E get(int index) { rangeCheck(index); checkForComodification(); return ArrayList.this.elementData(offset + index); } public int size() { checkForComodification(); return this.size; } public void add(int index, E e) { rangeCheckForAdd(index); checkForComodification(); parent.add(parentOffset + index, e); this.modCount = parent.modCount; this.size++; } public E remove(int index) { rangeCheck(index); checkForComodification(); E result = parent.remove(parentOffset + index); this.modCount = parent.modCount; this.size--; return result; } protected void removeRange(int fromIndex, int toIndex) { checkForComodification(); parent.removeRange(parentOffset + fromIndex, parentOffset + toIndex); this.modCount = parent.modCount; this.size -= toIndex - fromIndex; } public boolean addAll(Collection<? extends E> c) { return addAll(this.size, c); } public boolean addAll(int index, Collection<? extends E> c) { rangeCheckForAdd(index); int cSize = c.size(); if (cSize == 0) return false; checkForComodification(); parent.addAll(parentOffset + index, c); this.modCount = parent.modCount; this.size += cSize; return true; } public Iterator<E> iterator() { return listIterator(); } public ListIterator<E> listIterator(final int index) { checkForComodification(); rangeCheckForAdd(index); final int offset = this.offset; return new ListIterator<E>() { int cursor = index; int lastRet = -1; int expectedModCount = ArrayList.this.modCount; public boolean hasNext() { return cursor != SubList.this.size; } @SuppressWarnings("unchecked") public E next() { checkForComodification(); int i = cursor; if (i >= SubList.this.size) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (offset + i >= elementData.length) throw new ConcurrentModificationException(); cursor = i + 1; return (E) elementData[offset + (lastRet = i)]; } public boolean hasPrevious() { return cursor != 0; } @SuppressWarnings("unchecked") public E previous() { checkForComodification(); int i = cursor - 1; if (i < 0) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (offset + i >= elementData.length) throw new ConcurrentModificationException(); cursor = i; return (E) elementData[offset + (lastRet = i)]; } @SuppressWarnings("unchecked") public void forEachRemaining(Consumer<? super E> consumer) { Objects.requireNonNull(consumer); final int size = SubList.this.size; int i = cursor; if (i >= size) { return; } final Object[] elementData = ArrayList.this.elementData; if (offset + i >= elementData.length) { throw new ConcurrentModificationException(); } while (i != size && modCount == expectedModCount) { consumer.accept((E) elementData[offset + (i++)]); } // update once at end of iteration to reduce heap write traffic lastRet = cursor = i; checkForComodification(); } public int nextIndex() { return cursor; } public int previousIndex() { return cursor - 1; } public void remove() { if (lastRet < 0) throw new IllegalStateException(); checkForComodification(); try { SubList.this.remove(lastRet); cursor = lastRet; lastRet = -1; expectedModCount = ArrayList.this.modCount; } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } public void set(E e) { if (lastRet < 0) throw new IllegalStateException(); checkForComodification(); try { ArrayList.this.set(offset + lastRet, e); } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } public void add(E e) { checkForComodification(); try { int i = cursor; SubList.this.add(i, e); cursor = i + 1; lastRet = -1; expectedModCount = ArrayList.this.modCount; } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } final void checkForComodification() { if (expectedModCount != ArrayList.this.modCount) throw new ConcurrentModificationException(); } }; } public List<E> subList(int fromIndex, int toIndex) { subListRangeCheck(fromIndex, toIndex, size); return new SubList(this, offset, fromIndex, toIndex); } private void rangeCheck(int index) { if (index < 0 || index >= this.size) throw new IndexOutOfBoundsException(outOfBoundsMsg(index)); } private void rangeCheckForAdd(int index) { if (index < 0 || index > this.size) throw new IndexOutOfBoundsException(outOfBoundsMsg(index)); } private String outOfBoundsMsg(int index) { return "Index: " + index + ", Size: " + this.size; } private void checkForComodification() { if (ArrayList.this.modCount != this.modCount) throw new ConcurrentModificationException(); } public Spliterator<E> spliterator() { checkForComodification(); return new ArrayListSpliterator<E>(ArrayList.this, offset, offset + this.size, this.modCount); } } @Override public void forEach(Consumer<? super E> action) { Objects.requireNonNull(action); final int expectedModCount = modCount; @SuppressWarnings("unchecked") final E[] elementData = (E[]) this.elementData; final int size = this.size; for (int i = 0; modCount == expectedModCount && i < size; i++) { action.accept(elementData[i]); } if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } } /** * Creates a <em><a href="Spliterator.html#binding">late-binding</a></em> * and <em>fail-fast</em> {@link Spliterator} over the elements in this * list. * * <p>The {@code Spliterator} reports {@link Spliterator#SIZED}, * {@link Spliterator#SUBSIZED}, and {@link Spliterator#ORDERED}. * Overriding implementations should document the reporting of additional * characteristic values. * * @return a {@code Spliterator} over the elements in this list * @since 1.8 */ @Override public Spliterator<E> spliterator() { return new ArrayListSpliterator<>(this, 0, -1, 0); } /** * Index-based split-by-two, lazily initialized Spliterator */ static final class ArrayListSpliterator<E> implements Spliterator<E> { /* * If ArrayLists were immutable, or structurally immutable (no * adds, removes, etc), we could implement their spliterators * with Arrays.spliterator. Instead we detect as much * interference during traversal as practical without * sacrificing much performance. We rely primarily on * modCounts. These are not guaranteed to detect concurrency * violations, and are sometimes overly conservative about * within-thread interference, but detect enough problems to * be worthwhile in practice. To carry this out, we (1) lazily * initialize fence and expectedModCount until the latest * point that we need to commit to the state we are checking * against; thus improving precision. (This doesn&#39;t apply to * SubLists, that create spliterators with current non-lazy * values). (2) We perform only a single * ConcurrentModificationException check at the end of forEach * (the most performance-sensitive method). When using forEach * (as opposed to iterators), we can normally only detect * interference after actions, not before. Further * CME-triggering checks apply to all other possible * violations of assumptions for example null or too-small * elementData array given its size(), that could only have * occurred due to interference. This allows the inner loop * of forEach to run without any further checks, and * simplifies lambda-resolution. While this does entail a * number of checks, note that in the common case of * list.stream().forEach(a), no checks or other computation * occur anywhere other than inside forEach itself. The other * less-often-used methods cannot take advantage of most of * these streamlinings. */ private final ArrayList<E> list; private int index; // current index, modified on advance/split private int fence; // -1 until used; then one past last index private int expectedModCount; // initialized when fence set /** * Create new spliterator covering the given range */ ArrayListSpliterator(ArrayList<E> list, int origin, int fence, int expectedModCount) { this.list = list; // OK if null unless traversed this.index = origin; this.fence = fence; this.expectedModCount = expectedModCount; } private int getFence() { // initialize fence to size on first use int hi; // (a specialized variant appears in method forEach) ArrayList<E> lst; if ((hi = fence) < 0) { if ((lst = list) == null) hi = fence = 0; else { expectedModCount = lst.modCount; hi = fence = lst.size; } } return hi; } public ArrayListSpliterator<E> trySplit() { int hi = getFence(), lo = index, mid = (lo + hi) >>> 1; return (lo >= mid) ? null : // divide range in half unless too small new ArrayListSpliterator<E>(list, lo, index = mid, expectedModCount); } public boolean tryAdvance(Consumer<? super E> action) { if (action == null) throw new NullPointerException(); int hi = getFence(), i = index; if (i < hi) { index = i + 1; @SuppressWarnings("unchecked") E e = (E) list.elementData[i]; action.accept(e); if (list.modCount != expectedModCount) throw new ConcurrentModificationException(); return true; } return false; } public void forEachRemaining(Consumer<? super E> action) { int i, hi, mc; // hoist accesses and checks from loop ArrayList<E> lst; Object[] a; if (action == null) throw new NullPointerException(); if ((lst = list) != null && (a = lst.elementData) != null) { if ((hi = fence) < 0) { mc = lst.modCount; hi = lst.size; } else mc = expectedModCount; if ((i = index) >= 0 && (index = hi) <= a.length) { for (; i < hi; ++i) { @SuppressWarnings("unchecked") E e = (E) a[i]; action.accept(e); } if (lst.modCount == mc) return; } } throw new ConcurrentModificationException(); } public long estimateSize() { return (long) (getFence() - index); } public int characteristics() { return Spliterator.ORDERED | Spliterator.SIZED | Spliterator.SUBSIZED; } } @Override public boolean removeIf(Predicate<? super E> filter) { Objects.requireNonNull(filter); // figure out which elements are to be removed // any exception thrown from the filter predicate at this stage // will leave the collection unmodified int removeCount = 0; final BitSet removeSet = new BitSet(size); final int expectedModCount = modCount; final int size = this.size; for (int i = 0; modCount == expectedModCount && i < size; i++) { @SuppressWarnings("unchecked") final E element = (E) elementData[i]; if (filter.test(element)) { removeSet.set(i); removeCount++; } } if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } // shift surviving elements left over the spaces left by removed elements final boolean anyToRemove = removeCount > 0; if (anyToRemove) { final int newSize = size - removeCount; for (int i = 0, j = 0; (i < size) && (j < newSize); i++, j++) { i = removeSet.nextClearBit(i); elementData[j] = elementData[i]; } for (int k = newSize; k < size; k++) { elementData[k] = null; // Let gc do its work } this.size = newSize; if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } modCount++; } return anyToRemove; } @Override @SuppressWarnings("unchecked") public void replaceAll(UnaryOperator<E> operator) { Objects.requireNonNull(operator); final int expectedModCount = modCount; final int size = this.size; for (int i = 0; modCount == expectedModCount && i < size; i++) { elementData[i] = operator.apply((E) elementData[i]); } if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } modCount++; } @Override @SuppressWarnings("unchecked") public void sort(Comparator<? super E> c) { final int expectedModCount = modCount; Arrays.sort((E[]) elementData, 0, size, c); if (modCount != expectedModCount) { throw new ConcurrentModificationException(); } modCount++; } } 扩容分析'><meta property="og:url" content="https://www.mujaspace.com/tech/2023/arraylist%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"><meta property="og:site_name" content="muja's Space "><meta property="og:locale" content="zh"><meta property="og:image" content="https://www.mujaspace.com/icons/apple-touch-icon.png"><meta property="og:type" content="website"></head><body><div class=container><header class=header><div class=header-wrapper><div class="header-inner single"><div class=site-brand><a href=/ class=brand>muja's Space</a></div><nav class=nav><ul class=menu id=menu><li class=menu-item><a href=/life/><svg viewBox="0 0 384 512" class="icon life"><path d="M368 48c8.8.0 16-7.2 16-16V16c0-8.8-7.2-16-16-16H16C7.2.0.0 7.2.0 16v16c0 8.8 7.2 16 16 16h16v156.7C11.8 214.8.0 226.9.0 240c0 67.2 34.6 126.2 86.8 160.5l-21.4 70.2C59.1 491.2 74.5 512 96 512h192c21.5.0 36.9-20.8 30.6-41.3l-21.4-70.2C349.4 366.2 384 307.2 384 240c0-13.1-11.8-25.2-32-35.3V48h16zM80 72c0-4.4 3.6-8 8-8h48c4.4.0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H88c-4.4.0-8-3.6-8-8V72zm112 2e2c-77.1.0-139.6-14.3-139.6-32s62.5-32 139.6-32 139.6 14.3 139.6 32-62.5 32-139.6 32z"/></svg><span class=menu-item-name>life</span></a></li><li class=menu-item><a href=/live/><svg viewBox="0 0 512 512" class="icon live"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3.0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg><span class=menu-item-name>live</span></a></li><li class="menu-item active"><a href=/tech/><svg viewBox="0 0 640 512" class="icon tech"><path d="M128 32C92.7 32 64 60.7 64 96V352h64V96H512V352h64V96c0-35.3-28.7-64-64-64H128zM19.2 384C8.6 384 0 392.6.0 403.2.0 445.6 34.4 480 76.8 480H563.2c42.4.0 76.8-34.4 76.8-76.8.0-10.6-8.6-19.2-19.2-19.2H19.2z"/></svg><span class=menu-item-name>tech</span></a></li><li class=menu-item><a href=/link/><svg viewBox="0 0 512 512" class="icon link"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg><span class=menu-item-name>link</span></a></li><li class=menu-item><a href=/about/><svg viewBox="0 0 496 512" class="icon about"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6.0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7.0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4.0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9s28-2.7 40.9-6.9c2.3-.7 4.7-1.1 7.1-1.1 42.9.0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/></svg><span class=menu-item-name>about</span></a></li><li class=menu-item><a id=theme-switcher href=#><svg viewBox="0 0 512 512" class="icon theme-icon-light"><path d="M193.2 104.5 242 7a18 18 0 0128 0l48.8 97.5L422.2 70A18 18 0 01442 89.8l-34.5 103.4L505 242a18 18 0 010 28l-97.5 48.8L442 422.2A18 18 0 01422.2 442l-103.4-34.5L270 505a18 18 0 01-28 0l-48.8-97.5L89.8 442A18 18 0 0170 422.2l34.5-103.4-97.5-48.8a18 18 0 010-28l97.5-48.8L70 89.8A18 18 0 0189.8 70zM256 128a128 128 0 10.01.0M256 160a96 96 0 10.01.0"/></svg><svg viewBox="0 0 512 512" class="icon theme-icon-dark"><path d="M27 412A256 256 0 10181 5a11.5 11.5.0 00-5 20A201.5 201.5.0 0142 399a11.5 11.5.0 00-15 13"/></svg></a></li></ul></nav></div></div><input type=checkbox id=nav-toggle aria-hidden=true>
<label for=nav-toggle class=nav-toggle></label>
<label for=nav-toggle class=nav-curtain></label></header><main class="main single" id=main><div class=main-inner><article class="content post h-entry" data-align=justify data-type=tech data-toc-num=true><h1 class="post-title p-name">ArrayList源码解析 building</h1><div class=post-meta><time datetime=2023-02-01T22:00:00+08:00 class="post-meta-item published dt-published"><svg viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M148 288h-40c-6.6.0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h48c26.5.0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3.0 6-2.7 6-6z"/></svg>&nbsp;2023-02-01</time>
<span class="post-meta-item wordcount"><svg viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3.0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9.0l60.1 60.1c18.8 18.7 18.8 49.1.0 67.9zM284.2 99.8 21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3.0-17l-111-111c-4.8-4.7-12.4-4.7-17.1.0zM124.1 339.9c-5.5-5.5-5.5-14.3.0-19.8l154-154c5.5-5.5 14.3-5.5 19.8.0s5.5 14.3.0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8.0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&nbsp;9751</span>
<span class="post-meta-item reading-time"><svg viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5.0-2e2-89.5-2e2-2e2S145.5 56 256 56s2e2 89.5 2e2 2e2-89.5 2e2-2e2 2e2zm61.8-104.4-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6.0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>&nbsp;20&nbsp;分钟</span></div><div class="post-body e-content"><h1 id=简介><a href=#简介 class=anchor-link><svg viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>简介</h1><p><code>ArrayList</code>继承于 <strong><code>AbstractList</code></strong> 类，实现了 <strong><code>List</code></strong>, <strong><code>RandomAccess</code></strong>, <strong><code>Cloneable</code></strong>, <strong><code>java.io.Serializable</code></strong> 这些接口。</p><ul><li><code>List</code>：表明是一个列表，支持添加、删除、查找等操作，并且可以通过下标进行访问。</li><li><code>RandomAccess</code>：是一个标志接口，表明实现这个这个接口的 List 集合是支持<strong>快速随机访问</strong>的。在 <code>ArrayList</code> 中，我们即可以通过元素的序号快速获取元素对象，这就是快速随机访问。</li><li><code>Cloneable</code>  ：即覆盖了函数<code>clone()</code>，能被克隆。</li><li><code>Serializable</code>：这意味着<code>ArrayList</code>支持序列化，能通过序列化去传输。</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ArrayList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>AbstractList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>implements</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=p>,</span><span class=w> </span><span class=n>RandomAccess</span><span class=p>,</span><span class=w> </span><span class=n>Cloneable</span><span class=p>,</span><span class=w> </span><span class=n>java</span><span class=p>.</span><span class=na>io</span><span class=p>.</span><span class=na>Serializable</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>{}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></div><h1 id=源码分析><a href=#源码分析 class=anchor-link><svg viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>源码分析</h1><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>   1
</span><span class=lnt>   2
</span><span class=lnt>   3
</span><span class=lnt>   4
</span><span class=lnt>   5
</span><span class=lnt>   6
</span><span class=lnt>   7
</span><span class=lnt>   8
</span><span class=lnt>   9
</span><span class=lnt>  10
</span><span class=lnt>  11
</span><span class=lnt>  12
</span><span class=lnt>  13
</span><span class=lnt>  14
</span><span class=lnt>  15
</span><span class=lnt>  16
</span><span class=lnt>  17
</span><span class=lnt>  18
</span><span class=lnt>  19
</span><span class=lnt>  20
</span><span class=lnt>  21
</span><span class=lnt>  22
</span><span class=lnt>  23
</span><span class=lnt>  24
</span><span class=lnt>  25
</span><span class=lnt>  26
</span><span class=lnt>  27
</span><span class=lnt>  28
</span><span class=lnt>  29
</span><span class=lnt>  30
</span><span class=lnt>  31
</span><span class=lnt>  32
</span><span class=lnt>  33
</span><span class=lnt>  34
</span><span class=lnt>  35
</span><span class=lnt>  36
</span><span class=lnt>  37
</span><span class=lnt>  38
</span><span class=lnt>  39
</span><span class=lnt>  40
</span><span class=lnt>  41
</span><span class=lnt>  42
</span><span class=lnt>  43
</span><span class=lnt>  44
</span><span class=lnt>  45
</span><span class=lnt>  46
</span><span class=lnt>  47
</span><span class=lnt>  48
</span><span class=lnt>  49
</span><span class=lnt>  50
</span><span class=lnt>  51
</span><span class=lnt>  52
</span><span class=lnt>  53
</span><span class=lnt>  54
</span><span class=lnt>  55
</span><span class=lnt>  56
</span><span class=lnt>  57
</span><span class=lnt>  58
</span><span class=lnt>  59
</span><span class=lnt>  60
</span><span class=lnt>  61
</span><span class=lnt>  62
</span><span class=lnt>  63
</span><span class=lnt>  64
</span><span class=lnt>  65
</span><span class=lnt>  66
</span><span class=lnt>  67
</span><span class=lnt>  68
</span><span class=lnt>  69
</span><span class=lnt>  70
</span><span class=lnt>  71
</span><span class=lnt>  72
</span><span class=lnt>  73
</span><span class=lnt>  74
</span><span class=lnt>  75
</span><span class=lnt>  76
</span><span class=lnt>  77
</span><span class=lnt>  78
</span><span class=lnt>  79
</span><span class=lnt>  80
</span><span class=lnt>  81
</span><span class=lnt>  82
</span><span class=lnt>  83
</span><span class=lnt>  84
</span><span class=lnt>  85
</span><span class=lnt>  86
</span><span class=lnt>  87
</span><span class=lnt>  88
</span><span class=lnt>  89
</span><span class=lnt>  90
</span><span class=lnt>  91
</span><span class=lnt>  92
</span><span class=lnt>  93
</span><span class=lnt>  94
</span><span class=lnt>  95
</span><span class=lnt>  96
</span><span class=lnt>  97
</span><span class=lnt>  98
</span><span class=lnt>  99
</span><span class=lnt> 100
</span><span class=lnt> 101
</span><span class=lnt> 102
</span><span class=lnt> 103
</span><span class=lnt> 104
</span><span class=lnt> 105
</span><span class=lnt> 106
</span><span class=lnt> 107
</span><span class=lnt> 108
</span><span class=lnt> 109
</span><span class=lnt> 110
</span><span class=lnt> 111
</span><span class=lnt> 112
</span><span class=lnt> 113
</span><span class=lnt> 114
</span><span class=lnt> 115
</span><span class=lnt> 116
</span><span class=lnt> 117
</span><span class=lnt> 118
</span><span class=lnt> 119
</span><span class=lnt> 120
</span><span class=lnt> 121
</span><span class=lnt> 122
</span><span class=lnt> 123
</span><span class=lnt> 124
</span><span class=lnt> 125
</span><span class=lnt> 126
</span><span class=lnt> 127
</span><span class=lnt> 128
</span><span class=lnt> 129
</span><span class=lnt> 130
</span><span class=lnt> 131
</span><span class=lnt> 132
</span><span class=lnt> 133
</span><span class=lnt> 134
</span><span class=lnt> 135
</span><span class=lnt> 136
</span><span class=lnt> 137
</span><span class=lnt> 138
</span><span class=lnt> 139
</span><span class=lnt> 140
</span><span class=lnt> 141
</span><span class=lnt> 142
</span><span class=lnt> 143
</span><span class=lnt> 144
</span><span class=lnt> 145
</span><span class=lnt> 146
</span><span class=lnt> 147
</span><span class=lnt> 148
</span><span class=lnt> 149
</span><span class=lnt> 150
</span><span class=lnt> 151
</span><span class=lnt> 152
</span><span class=lnt> 153
</span><span class=lnt> 154
</span><span class=lnt> 155
</span><span class=lnt> 156
</span><span class=lnt> 157
</span><span class=lnt> 158
</span><span class=lnt> 159
</span><span class=lnt> 160
</span><span class=lnt> 161
</span><span class=lnt> 162
</span><span class=lnt> 163
</span><span class=lnt> 164
</span><span class=lnt> 165
</span><span class=lnt> 166
</span><span class=lnt> 167
</span><span class=lnt> 168
</span><span class=lnt> 169
</span><span class=lnt> 170
</span><span class=lnt> 171
</span><span class=lnt> 172
</span><span class=lnt> 173
</span><span class=lnt> 174
</span><span class=lnt> 175
</span><span class=lnt> 176
</span><span class=lnt> 177
</span><span class=lnt> 178
</span><span class=lnt> 179
</span><span class=lnt> 180
</span><span class=lnt> 181
</span><span class=lnt> 182
</span><span class=lnt> 183
</span><span class=lnt> 184
</span><span class=lnt> 185
</span><span class=lnt> 186
</span><span class=lnt> 187
</span><span class=lnt> 188
</span><span class=lnt> 189
</span><span class=lnt> 190
</span><span class=lnt> 191
</span><span class=lnt> 192
</span><span class=lnt> 193
</span><span class=lnt> 194
</span><span class=lnt> 195
</span><span class=lnt> 196
</span><span class=lnt> 197
</span><span class=lnt> 198
</span><span class=lnt> 199
</span><span class=lnt> 200
</span><span class=lnt> 201
</span><span class=lnt> 202
</span><span class=lnt> 203
</span><span class=lnt> 204
</span><span class=lnt> 205
</span><span class=lnt> 206
</span><span class=lnt> 207
</span><span class=lnt> 208
</span><span class=lnt> 209
</span><span class=lnt> 210
</span><span class=lnt> 211
</span><span class=lnt> 212
</span><span class=lnt> 213
</span><span class=lnt> 214
</span><span class=lnt> 215
</span><span class=lnt> 216
</span><span class=lnt> 217
</span><span class=lnt> 218
</span><span class=lnt> 219
</span><span class=lnt> 220
</span><span class=lnt> 221
</span><span class=lnt> 222
</span><span class=lnt> 223
</span><span class=lnt> 224
</span><span class=lnt> 225
</span><span class=lnt> 226
</span><span class=lnt> 227
</span><span class=lnt> 228
</span><span class=lnt> 229
</span><span class=lnt> 230
</span><span class=lnt> 231
</span><span class=lnt> 232
</span><span class=lnt> 233
</span><span class=lnt> 234
</span><span class=lnt> 235
</span><span class=lnt> 236
</span><span class=lnt> 237
</span><span class=lnt> 238
</span><span class=lnt> 239
</span><span class=lnt> 240
</span><span class=lnt> 241
</span><span class=lnt> 242
</span><span class=lnt> 243
</span><span class=lnt> 244
</span><span class=lnt> 245
</span><span class=lnt> 246
</span><span class=lnt> 247
</span><span class=lnt> 248
</span><span class=lnt> 249
</span><span class=lnt> 250
</span><span class=lnt> 251
</span><span class=lnt> 252
</span><span class=lnt> 253
</span><span class=lnt> 254
</span><span class=lnt> 255
</span><span class=lnt> 256
</span><span class=lnt> 257
</span><span class=lnt> 258
</span><span class=lnt> 259
</span><span class=lnt> 260
</span><span class=lnt> 261
</span><span class=lnt> 262
</span><span class=lnt> 263
</span><span class=lnt> 264
</span><span class=lnt> 265
</span><span class=lnt> 266
</span><span class=lnt> 267
</span><span class=lnt> 268
</span><span class=lnt> 269
</span><span class=lnt> 270
</span><span class=lnt> 271
</span><span class=lnt> 272
</span><span class=lnt> 273
</span><span class=lnt> 274
</span><span class=lnt> 275
</span><span class=lnt> 276
</span><span class=lnt> 277
</span><span class=lnt> 278
</span><span class=lnt> 279
</span><span class=lnt> 280
</span><span class=lnt> 281
</span><span class=lnt> 282
</span><span class=lnt> 283
</span><span class=lnt> 284
</span><span class=lnt> 285
</span><span class=lnt> 286
</span><span class=lnt> 287
</span><span class=lnt> 288
</span><span class=lnt> 289
</span><span class=lnt> 290
</span><span class=lnt> 291
</span><span class=lnt> 292
</span><span class=lnt> 293
</span><span class=lnt> 294
</span><span class=lnt> 295
</span><span class=lnt> 296
</span><span class=lnt> 297
</span><span class=lnt> 298
</span><span class=lnt> 299
</span><span class=lnt> 300
</span><span class=lnt> 301
</span><span class=lnt> 302
</span><span class=lnt> 303
</span><span class=lnt> 304
</span><span class=lnt> 305
</span><span class=lnt> 306
</span><span class=lnt> 307
</span><span class=lnt> 308
</span><span class=lnt> 309
</span><span class=lnt> 310
</span><span class=lnt> 311
</span><span class=lnt> 312
</span><span class=lnt> 313
</span><span class=lnt> 314
</span><span class=lnt> 315
</span><span class=lnt> 316
</span><span class=lnt> 317
</span><span class=lnt> 318
</span><span class=lnt> 319
</span><span class=lnt> 320
</span><span class=lnt> 321
</span><span class=lnt> 322
</span><span class=lnt> 323
</span><span class=lnt> 324
</span><span class=lnt> 325
</span><span class=lnt> 326
</span><span class=lnt> 327
</span><span class=lnt> 328
</span><span class=lnt> 329
</span><span class=lnt> 330
</span><span class=lnt> 331
</span><span class=lnt> 332
</span><span class=lnt> 333
</span><span class=lnt> 334
</span><span class=lnt> 335
</span><span class=lnt> 336
</span><span class=lnt> 337
</span><span class=lnt> 338
</span><span class=lnt> 339
</span><span class=lnt> 340
</span><span class=lnt> 341
</span><span class=lnt> 342
</span><span class=lnt> 343
</span><span class=lnt> 344
</span><span class=lnt> 345
</span><span class=lnt> 346
</span><span class=lnt> 347
</span><span class=lnt> 348
</span><span class=lnt> 349
</span><span class=lnt> 350
</span><span class=lnt> 351
</span><span class=lnt> 352
</span><span class=lnt> 353
</span><span class=lnt> 354
</span><span class=lnt> 355
</span><span class=lnt> 356
</span><span class=lnt> 357
</span><span class=lnt> 358
</span><span class=lnt> 359
</span><span class=lnt> 360
</span><span class=lnt> 361
</span><span class=lnt> 362
</span><span class=lnt> 363
</span><span class=lnt> 364
</span><span class=lnt> 365
</span><span class=lnt> 366
</span><span class=lnt> 367
</span><span class=lnt> 368
</span><span class=lnt> 369
</span><span class=lnt> 370
</span><span class=lnt> 371
</span><span class=lnt> 372
</span><span class=lnt> 373
</span><span class=lnt> 374
</span><span class=lnt> 375
</span><span class=lnt> 376
</span><span class=lnt> 377
</span><span class=lnt> 378
</span><span class=lnt> 379
</span><span class=lnt> 380
</span><span class=lnt> 381
</span><span class=lnt> 382
</span><span class=lnt> 383
</span><span class=lnt> 384
</span><span class=lnt> 385
</span><span class=lnt> 386
</span><span class=lnt> 387
</span><span class=lnt> 388
</span><span class=lnt> 389
</span><span class=lnt> 390
</span><span class=lnt> 391
</span><span class=lnt> 392
</span><span class=lnt> 393
</span><span class=lnt> 394
</span><span class=lnt> 395
</span><span class=lnt> 396
</span><span class=lnt> 397
</span><span class=lnt> 398
</span><span class=lnt> 399
</span><span class=lnt> 400
</span><span class=lnt> 401
</span><span class=lnt> 402
</span><span class=lnt> 403
</span><span class=lnt> 404
</span><span class=lnt> 405
</span><span class=lnt> 406
</span><span class=lnt> 407
</span><span class=lnt> 408
</span><span class=lnt> 409
</span><span class=lnt> 410
</span><span class=lnt> 411
</span><span class=lnt> 412
</span><span class=lnt> 413
</span><span class=lnt> 414
</span><span class=lnt> 415
</span><span class=lnt> 416
</span><span class=lnt> 417
</span><span class=lnt> 418
</span><span class=lnt> 419
</span><span class=lnt> 420
</span><span class=lnt> 421
</span><span class=lnt> 422
</span><span class=lnt> 423
</span><span class=lnt> 424
</span><span class=lnt> 425
</span><span class=lnt> 426
</span><span class=lnt> 427
</span><span class=lnt> 428
</span><span class=lnt> 429
</span><span class=lnt> 430
</span><span class=lnt> 431
</span><span class=lnt> 432
</span><span class=lnt> 433
</span><span class=lnt> 434
</span><span class=lnt> 435
</span><span class=lnt> 436
</span><span class=lnt> 437
</span><span class=lnt> 438
</span><span class=lnt> 439
</span><span class=lnt> 440
</span><span class=lnt> 441
</span><span class=lnt> 442
</span><span class=lnt> 443
</span><span class=lnt> 444
</span><span class=lnt> 445
</span><span class=lnt> 446
</span><span class=lnt> 447
</span><span class=lnt> 448
</span><span class=lnt> 449
</span><span class=lnt> 450
</span><span class=lnt> 451
</span><span class=lnt> 452
</span><span class=lnt> 453
</span><span class=lnt> 454
</span><span class=lnt> 455
</span><span class=lnt> 456
</span><span class=lnt> 457
</span><span class=lnt> 458
</span><span class=lnt> 459
</span><span class=lnt> 460
</span><span class=lnt> 461
</span><span class=lnt> 462
</span><span class=lnt> 463
</span><span class=lnt> 464
</span><span class=lnt> 465
</span><span class=lnt> 466
</span><span class=lnt> 467
</span><span class=lnt> 468
</span><span class=lnt> 469
</span><span class=lnt> 470
</span><span class=lnt> 471
</span><span class=lnt> 472
</span><span class=lnt> 473
</span><span class=lnt> 474
</span><span class=lnt> 475
</span><span class=lnt> 476
</span><span class=lnt> 477
</span><span class=lnt> 478
</span><span class=lnt> 479
</span><span class=lnt> 480
</span><span class=lnt> 481
</span><span class=lnt> 482
</span><span class=lnt> 483
</span><span class=lnt> 484
</span><span class=lnt> 485
</span><span class=lnt> 486
</span><span class=lnt> 487
</span><span class=lnt> 488
</span><span class=lnt> 489
</span><span class=lnt> 490
</span><span class=lnt> 491
</span><span class=lnt> 492
</span><span class=lnt> 493
</span><span class=lnt> 494
</span><span class=lnt> 495
</span><span class=lnt> 496
</span><span class=lnt> 497
</span><span class=lnt> 498
</span><span class=lnt> 499
</span><span class=lnt> 500
</span><span class=lnt> 501
</span><span class=lnt> 502
</span><span class=lnt> 503
</span><span class=lnt> 504
</span><span class=lnt> 505
</span><span class=lnt> 506
</span><span class=lnt> 507
</span><span class=lnt> 508
</span><span class=lnt> 509
</span><span class=lnt> 510
</span><span class=lnt> 511
</span><span class=lnt> 512
</span><span class=lnt> 513
</span><span class=lnt> 514
</span><span class=lnt> 515
</span><span class=lnt> 516
</span><span class=lnt> 517
</span><span class=lnt> 518
</span><span class=lnt> 519
</span><span class=lnt> 520
</span><span class=lnt> 521
</span><span class=lnt> 522
</span><span class=lnt> 523
</span><span class=lnt> 524
</span><span class=lnt> 525
</span><span class=lnt> 526
</span><span class=lnt> 527
</span><span class=lnt> 528
</span><span class=lnt> 529
</span><span class=lnt> 530
</span><span class=lnt> 531
</span><span class=lnt> 532
</span><span class=lnt> 533
</span><span class=lnt> 534
</span><span class=lnt> 535
</span><span class=lnt> 536
</span><span class=lnt> 537
</span><span class=lnt> 538
</span><span class=lnt> 539
</span><span class=lnt> 540
</span><span class=lnt> 541
</span><span class=lnt> 542
</span><span class=lnt> 543
</span><span class=lnt> 544
</span><span class=lnt> 545
</span><span class=lnt> 546
</span><span class=lnt> 547
</span><span class=lnt> 548
</span><span class=lnt> 549
</span><span class=lnt> 550
</span><span class=lnt> 551
</span><span class=lnt> 552
</span><span class=lnt> 553
</span><span class=lnt> 554
</span><span class=lnt> 555
</span><span class=lnt> 556
</span><span class=lnt> 557
</span><span class=lnt> 558
</span><span class=lnt> 559
</span><span class=lnt> 560
</span><span class=lnt> 561
</span><span class=lnt> 562
</span><span class=lnt> 563
</span><span class=lnt> 564
</span><span class=lnt> 565
</span><span class=lnt> 566
</span><span class=lnt> 567
</span><span class=lnt> 568
</span><span class=lnt> 569
</span><span class=lnt> 570
</span><span class=lnt> 571
</span><span class=lnt> 572
</span><span class=lnt> 573
</span><span class=lnt> 574
</span><span class=lnt> 575
</span><span class=lnt> 576
</span><span class=lnt> 577
</span><span class=lnt> 578
</span><span class=lnt> 579
</span><span class=lnt> 580
</span><span class=lnt> 581
</span><span class=lnt> 582
</span><span class=lnt> 583
</span><span class=lnt> 584
</span><span class=lnt> 585
</span><span class=lnt> 586
</span><span class=lnt> 587
</span><span class=lnt> 588
</span><span class=lnt> 589
</span><span class=lnt> 590
</span><span class=lnt> 591
</span><span class=lnt> 592
</span><span class=lnt> 593
</span><span class=lnt> 594
</span><span class=lnt> 595
</span><span class=lnt> 596
</span><span class=lnt> 597
</span><span class=lnt> 598
</span><span class=lnt> 599
</span><span class=lnt> 600
</span><span class=lnt> 601
</span><span class=lnt> 602
</span><span class=lnt> 603
</span><span class=lnt> 604
</span><span class=lnt> 605
</span><span class=lnt> 606
</span><span class=lnt> 607
</span><span class=lnt> 608
</span><span class=lnt> 609
</span><span class=lnt> 610
</span><span class=lnt> 611
</span><span class=lnt> 612
</span><span class=lnt> 613
</span><span class=lnt> 614
</span><span class=lnt> 615
</span><span class=lnt> 616
</span><span class=lnt> 617
</span><span class=lnt> 618
</span><span class=lnt> 619
</span><span class=lnt> 620
</span><span class=lnt> 621
</span><span class=lnt> 622
</span><span class=lnt> 623
</span><span class=lnt> 624
</span><span class=lnt> 625
</span><span class=lnt> 626
</span><span class=lnt> 627
</span><span class=lnt> 628
</span><span class=lnt> 629
</span><span class=lnt> 630
</span><span class=lnt> 631
</span><span class=lnt> 632
</span><span class=lnt> 633
</span><span class=lnt> 634
</span><span class=lnt> 635
</span><span class=lnt> 636
</span><span class=lnt> 637
</span><span class=lnt> 638
</span><span class=lnt> 639
</span><span class=lnt> 640
</span><span class=lnt> 641
</span><span class=lnt> 642
</span><span class=lnt> 643
</span><span class=lnt> 644
</span><span class=lnt> 645
</span><span class=lnt> 646
</span><span class=lnt> 647
</span><span class=lnt> 648
</span><span class=lnt> 649
</span><span class=lnt> 650
</span><span class=lnt> 651
</span><span class=lnt> 652
</span><span class=lnt> 653
</span><span class=lnt> 654
</span><span class=lnt> 655
</span><span class=lnt> 656
</span><span class=lnt> 657
</span><span class=lnt> 658
</span><span class=lnt> 659
</span><span class=lnt> 660
</span><span class=lnt> 661
</span><span class=lnt> 662
</span><span class=lnt> 663
</span><span class=lnt> 664
</span><span class=lnt> 665
</span><span class=lnt> 666
</span><span class=lnt> 667
</span><span class=lnt> 668
</span><span class=lnt> 669
</span><span class=lnt> 670
</span><span class=lnt> 671
</span><span class=lnt> 672
</span><span class=lnt> 673
</span><span class=lnt> 674
</span><span class=lnt> 675
</span><span class=lnt> 676
</span><span class=lnt> 677
</span><span class=lnt> 678
</span><span class=lnt> 679
</span><span class=lnt> 680
</span><span class=lnt> 681
</span><span class=lnt> 682
</span><span class=lnt> 683
</span><span class=lnt> 684
</span><span class=lnt> 685
</span><span class=lnt> 686
</span><span class=lnt> 687
</span><span class=lnt> 688
</span><span class=lnt> 689
</span><span class=lnt> 690
</span><span class=lnt> 691
</span><span class=lnt> 692
</span><span class=lnt> 693
</span><span class=lnt> 694
</span><span class=lnt> 695
</span><span class=lnt> 696
</span><span class=lnt> 697
</span><span class=lnt> 698
</span><span class=lnt> 699
</span><span class=lnt> 700
</span><span class=lnt> 701
</span><span class=lnt> 702
</span><span class=lnt> 703
</span><span class=lnt> 704
</span><span class=lnt> 705
</span><span class=lnt> 706
</span><span class=lnt> 707
</span><span class=lnt> 708
</span><span class=lnt> 709
</span><span class=lnt> 710
</span><span class=lnt> 711
</span><span class=lnt> 712
</span><span class=lnt> 713
</span><span class=lnt> 714
</span><span class=lnt> 715
</span><span class=lnt> 716
</span><span class=lnt> 717
</span><span class=lnt> 718
</span><span class=lnt> 719
</span><span class=lnt> 720
</span><span class=lnt> 721
</span><span class=lnt> 722
</span><span class=lnt> 723
</span><span class=lnt> 724
</span><span class=lnt> 725
</span><span class=lnt> 726
</span><span class=lnt> 727
</span><span class=lnt> 728
</span><span class=lnt> 729
</span><span class=lnt> 730
</span><span class=lnt> 731
</span><span class=lnt> 732
</span><span class=lnt> 733
</span><span class=lnt> 734
</span><span class=lnt> 735
</span><span class=lnt> 736
</span><span class=lnt> 737
</span><span class=lnt> 738
</span><span class=lnt> 739
</span><span class=lnt> 740
</span><span class=lnt> 741
</span><span class=lnt> 742
</span><span class=lnt> 743
</span><span class=lnt> 744
</span><span class=lnt> 745
</span><span class=lnt> 746
</span><span class=lnt> 747
</span><span class=lnt> 748
</span><span class=lnt> 749
</span><span class=lnt> 750
</span><span class=lnt> 751
</span><span class=lnt> 752
</span><span class=lnt> 753
</span><span class=lnt> 754
</span><span class=lnt> 755
</span><span class=lnt> 756
</span><span class=lnt> 757
</span><span class=lnt> 758
</span><span class=lnt> 759
</span><span class=lnt> 760
</span><span class=lnt> 761
</span><span class=lnt> 762
</span><span class=lnt> 763
</span><span class=lnt> 764
</span><span class=lnt> 765
</span><span class=lnt> 766
</span><span class=lnt> 767
</span><span class=lnt> 768
</span><span class=lnt> 769
</span><span class=lnt> 770
</span><span class=lnt> 771
</span><span class=lnt> 772
</span><span class=lnt> 773
</span><span class=lnt> 774
</span><span class=lnt> 775
</span><span class=lnt> 776
</span><span class=lnt> 777
</span><span class=lnt> 778
</span><span class=lnt> 779
</span><span class=lnt> 780
</span><span class=lnt> 781
</span><span class=lnt> 782
</span><span class=lnt> 783
</span><span class=lnt> 784
</span><span class=lnt> 785
</span><span class=lnt> 786
</span><span class=lnt> 787
</span><span class=lnt> 788
</span><span class=lnt> 789
</span><span class=lnt> 790
</span><span class=lnt> 791
</span><span class=lnt> 792
</span><span class=lnt> 793
</span><span class=lnt> 794
</span><span class=lnt> 795
</span><span class=lnt> 796
</span><span class=lnt> 797
</span><span class=lnt> 798
</span><span class=lnt> 799
</span><span class=lnt> 800
</span><span class=lnt> 801
</span><span class=lnt> 802
</span><span class=lnt> 803
</span><span class=lnt> 804
</span><span class=lnt> 805
</span><span class=lnt> 806
</span><span class=lnt> 807
</span><span class=lnt> 808
</span><span class=lnt> 809
</span><span class=lnt> 810
</span><span class=lnt> 811
</span><span class=lnt> 812
</span><span class=lnt> 813
</span><span class=lnt> 814
</span><span class=lnt> 815
</span><span class=lnt> 816
</span><span class=lnt> 817
</span><span class=lnt> 818
</span><span class=lnt> 819
</span><span class=lnt> 820
</span><span class=lnt> 821
</span><span class=lnt> 822
</span><span class=lnt> 823
</span><span class=lnt> 824
</span><span class=lnt> 825
</span><span class=lnt> 826
</span><span class=lnt> 827
</span><span class=lnt> 828
</span><span class=lnt> 829
</span><span class=lnt> 830
</span><span class=lnt> 831
</span><span class=lnt> 832
</span><span class=lnt> 833
</span><span class=lnt> 834
</span><span class=lnt> 835
</span><span class=lnt> 836
</span><span class=lnt> 837
</span><span class=lnt> 838
</span><span class=lnt> 839
</span><span class=lnt> 840
</span><span class=lnt> 841
</span><span class=lnt> 842
</span><span class=lnt> 843
</span><span class=lnt> 844
</span><span class=lnt> 845
</span><span class=lnt> 846
</span><span class=lnt> 847
</span><span class=lnt> 848
</span><span class=lnt> 849
</span><span class=lnt> 850
</span><span class=lnt> 851
</span><span class=lnt> 852
</span><span class=lnt> 853
</span><span class=lnt> 854
</span><span class=lnt> 855
</span><span class=lnt> 856
</span><span class=lnt> 857
</span><span class=lnt> 858
</span><span class=lnt> 859
</span><span class=lnt> 860
</span><span class=lnt> 861
</span><span class=lnt> 862
</span><span class=lnt> 863
</span><span class=lnt> 864
</span><span class=lnt> 865
</span><span class=lnt> 866
</span><span class=lnt> 867
</span><span class=lnt> 868
</span><span class=lnt> 869
</span><span class=lnt> 870
</span><span class=lnt> 871
</span><span class=lnt> 872
</span><span class=lnt> 873
</span><span class=lnt> 874
</span><span class=lnt> 875
</span><span class=lnt> 876
</span><span class=lnt> 877
</span><span class=lnt> 878
</span><span class=lnt> 879
</span><span class=lnt> 880
</span><span class=lnt> 881
</span><span class=lnt> 882
</span><span class=lnt> 883
</span><span class=lnt> 884
</span><span class=lnt> 885
</span><span class=lnt> 886
</span><span class=lnt> 887
</span><span class=lnt> 888
</span><span class=lnt> 889
</span><span class=lnt> 890
</span><span class=lnt> 891
</span><span class=lnt> 892
</span><span class=lnt> 893
</span><span class=lnt> 894
</span><span class=lnt> 895
</span><span class=lnt> 896
</span><span class=lnt> 897
</span><span class=lnt> 898
</span><span class=lnt> 899
</span><span class=lnt> 900
</span><span class=lnt> 901
</span><span class=lnt> 902
</span><span class=lnt> 903
</span><span class=lnt> 904
</span><span class=lnt> 905
</span><span class=lnt> 906
</span><span class=lnt> 907
</span><span class=lnt> 908
</span><span class=lnt> 909
</span><span class=lnt> 910
</span><span class=lnt> 911
</span><span class=lnt> 912
</span><span class=lnt> 913
</span><span class=lnt> 914
</span><span class=lnt> 915
</span><span class=lnt> 916
</span><span class=lnt> 917
</span><span class=lnt> 918
</span><span class=lnt> 919
</span><span class=lnt> 920
</span><span class=lnt> 921
</span><span class=lnt> 922
</span><span class=lnt> 923
</span><span class=lnt> 924
</span><span class=lnt> 925
</span><span class=lnt> 926
</span><span class=lnt> 927
</span><span class=lnt> 928
</span><span class=lnt> 929
</span><span class=lnt> 930
</span><span class=lnt> 931
</span><span class=lnt> 932
</span><span class=lnt> 933
</span><span class=lnt> 934
</span><span class=lnt> 935
</span><span class=lnt> 936
</span><span class=lnt> 937
</span><span class=lnt> 938
</span><span class=lnt> 939
</span><span class=lnt> 940
</span><span class=lnt> 941
</span><span class=lnt> 942
</span><span class=lnt> 943
</span><span class=lnt> 944
</span><span class=lnt> 945
</span><span class=lnt> 946
</span><span class=lnt> 947
</span><span class=lnt> 948
</span><span class=lnt> 949
</span><span class=lnt> 950
</span><span class=lnt> 951
</span><span class=lnt> 952
</span><span class=lnt> 953
</span><span class=lnt> 954
</span><span class=lnt> 955
</span><span class=lnt> 956
</span><span class=lnt> 957
</span><span class=lnt> 958
</span><span class=lnt> 959
</span><span class=lnt> 960
</span><span class=lnt> 961
</span><span class=lnt> 962
</span><span class=lnt> 963
</span><span class=lnt> 964
</span><span class=lnt> 965
</span><span class=lnt> 966
</span><span class=lnt> 967
</span><span class=lnt> 968
</span><span class=lnt> 969
</span><span class=lnt> 970
</span><span class=lnt> 971
</span><span class=lnt> 972
</span><span class=lnt> 973
</span><span class=lnt> 974
</span><span class=lnt> 975
</span><span class=lnt> 976
</span><span class=lnt> 977
</span><span class=lnt> 978
</span><span class=lnt> 979
</span><span class=lnt> 980
</span><span class=lnt> 981
</span><span class=lnt> 982
</span><span class=lnt> 983
</span><span class=lnt> 984
</span><span class=lnt> 985
</span><span class=lnt> 986
</span><span class=lnt> 987
</span><span class=lnt> 988
</span><span class=lnt> 989
</span><span class=lnt> 990
</span><span class=lnt> 991
</span><span class=lnt> 992
</span><span class=lnt> 993
</span><span class=lnt> 994
</span><span class=lnt> 995
</span><span class=lnt> 996
</span><span class=lnt> 997
</span><span class=lnt> 998
</span><span class=lnt> 999
</span><span class=lnt>1000
</span><span class=lnt>1001
</span><span class=lnt>1002
</span><span class=lnt>1003
</span><span class=lnt>1004
</span><span class=lnt>1005
</span><span class=lnt>1006
</span><span class=lnt>1007
</span><span class=lnt>1008
</span><span class=lnt>1009
</span><span class=lnt>1010
</span><span class=lnt>1011
</span><span class=lnt>1012
</span><span class=lnt>1013
</span><span class=lnt>1014
</span><span class=lnt>1015
</span><span class=lnt>1016
</span><span class=lnt>1017
</span><span class=lnt>1018
</span><span class=lnt>1019
</span><span class=lnt>1020
</span><span class=lnt>1021
</span><span class=lnt>1022
</span><span class=lnt>1023
</span><span class=lnt>1024
</span><span class=lnt>1025
</span><span class=lnt>1026
</span><span class=lnt>1027
</span><span class=lnt>1028
</span><span class=lnt>1029
</span><span class=lnt>1030
</span><span class=lnt>1031
</span><span class=lnt>1032
</span><span class=lnt>1033
</span><span class=lnt>1034
</span><span class=lnt>1035
</span><span class=lnt>1036
</span><span class=lnt>1037
</span><span class=lnt>1038
</span><span class=lnt>1039
</span><span class=lnt>1040
</span><span class=lnt>1041
</span><span class=lnt>1042
</span><span class=lnt>1043
</span><span class=lnt>1044
</span><span class=lnt>1045
</span><span class=lnt>1046
</span><span class=lnt>1047
</span><span class=lnt>1048
</span><span class=lnt>1049
</span><span class=lnt>1050
</span><span class=lnt>1051
</span><span class=lnt>1052
</span><span class=lnt>1053
</span><span class=lnt>1054
</span><span class=lnt>1055
</span><span class=lnt>1056
</span><span class=lnt>1057
</span><span class=lnt>1058
</span><span class=lnt>1059
</span><span class=lnt>1060
</span><span class=lnt>1061
</span><span class=lnt>1062
</span><span class=lnt>1063
</span><span class=lnt>1064
</span><span class=lnt>1065
</span><span class=lnt>1066
</span><span class=lnt>1067
</span><span class=lnt>1068
</span><span class=lnt>1069
</span><span class=lnt>1070
</span><span class=lnt>1071
</span><span class=lnt>1072
</span><span class=lnt>1073
</span><span class=lnt>1074
</span><span class=lnt>1075
</span><span class=lnt>1076
</span><span class=lnt>1077
</span><span class=lnt>1078
</span><span class=lnt>1079
</span><span class=lnt>1080
</span><span class=lnt>1081
</span><span class=lnt>1082
</span><span class=lnt>1083
</span><span class=lnt>1084
</span><span class=lnt>1085
</span><span class=lnt>1086
</span><span class=lnt>1087
</span><span class=lnt>1088
</span><span class=lnt>1089
</span><span class=lnt>1090
</span><span class=lnt>1091
</span><span class=lnt>1092
</span><span class=lnt>1093
</span><span class=lnt>1094
</span><span class=lnt>1095
</span><span class=lnt>1096
</span><span class=lnt>1097
</span><span class=lnt>1098
</span><span class=lnt>1099
</span><span class=lnt>1100
</span><span class=lnt>1101
</span><span class=lnt>1102
</span><span class=lnt>1103
</span><span class=lnt>1104
</span><span class=lnt>1105
</span><span class=lnt>1106
</span><span class=lnt>1107
</span><span class=lnt>1108
</span><span class=lnt>1109
</span><span class=lnt>1110
</span><span class=lnt>1111
</span><span class=lnt>1112
</span><span class=lnt>1113
</span><span class=lnt>1114
</span><span class=lnt>1115
</span><span class=lnt>1116
</span><span class=lnt>1117
</span><span class=lnt>1118
</span><span class=lnt>1119
</span><span class=lnt>1120
</span><span class=lnt>1121
</span><span class=lnt>1122
</span><span class=lnt>1123
</span><span class=lnt>1124
</span><span class=lnt>1125
</span><span class=lnt>1126
</span><span class=lnt>1127
</span><span class=lnt>1128
</span><span class=lnt>1129
</span><span class=lnt>1130
</span><span class=lnt>1131
</span><span class=lnt>1132
</span><span class=lnt>1133
</span><span class=lnt>1134
</span><span class=lnt>1135
</span><span class=lnt>1136
</span><span class=lnt>1137
</span><span class=lnt>1138
</span><span class=lnt>1139
</span><span class=lnt>1140
</span><span class=lnt>1141
</span><span class=lnt>1142
</span><span class=lnt>1143
</span><span class=lnt>1144
</span><span class=lnt>1145
</span><span class=lnt>1146
</span><span class=lnt>1147
</span><span class=lnt>1148
</span><span class=lnt>1149
</span><span class=lnt>1150
</span><span class=lnt>1151
</span><span class=lnt>1152
</span><span class=lnt>1153
</span><span class=lnt>1154
</span><span class=lnt>1155
</span><span class=lnt>1156
</span><span class=lnt>1157
</span><span class=lnt>1158
</span><span class=lnt>1159
</span><span class=lnt>1160
</span><span class=lnt>1161
</span><span class=lnt>1162
</span><span class=lnt>1163
</span><span class=lnt>1164
</span><span class=lnt>1165
</span><span class=lnt>1166
</span><span class=lnt>1167
</span><span class=lnt>1168
</span><span class=lnt>1169
</span><span class=lnt>1170
</span><span class=lnt>1171
</span><span class=lnt>1172
</span><span class=lnt>1173
</span><span class=lnt>1174
</span><span class=lnt>1175
</span><span class=lnt>1176
</span><span class=lnt>1177
</span><span class=lnt>1178
</span><span class=lnt>1179
</span><span class=lnt>1180
</span><span class=lnt>1181
</span><span class=lnt>1182
</span><span class=lnt>1183
</span><span class=lnt>1184
</span><span class=lnt>1185
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span><span class=w> </span><span class=nn>java.util</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.util.function.Consumer</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.util.function.Predicate</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.util.function.UnaryOperator</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ArrayList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>AbstractList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>implements</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=p>,</span><span class=w> </span><span class=n>RandomAccess</span><span class=p>,</span><span class=w> </span><span class=n>Cloneable</span><span class=p>,</span><span class=w> </span><span class=n>java</span><span class=p>.</span><span class=na>io</span><span class=p>.</span><span class=na>Serializable</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>serialVersionUID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>8683452581122892189L</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Default initial capacity.  mjy：默认初始容量大小  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>DEFAULT_CAPACITY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>10</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Shared empty array instance used for empty instances. mjy：空数组（用于空实例）。  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>Object</span><span class=o>[]</span><span class=w> </span><span class=n>EMPTY_ELEMENTDATA</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{};</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Shared empty array instance used for default sized empty instances. We     * distinguish this from EMPTY_ELEMENTDATA to know how much to inflate when     * first element is added.     */</span><span class=w>    </span><span class=c1>// mjy：用于默认大小空实例的共享空数组实例。和EMPTY_ELEMENTDATA数组区分，以知道在添加第一个元素时容量需要增加多少。  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>Object</span><span class=o>[]</span><span class=w> </span><span class=n>DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{};</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * The array buffer into which the elements of the ArrayList are stored.     * The capacity of the ArrayList is the length of this array buffer. Any     * empty ArrayList with elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA     * will be expanded to DEFAULT_CAPACITY when the first element is added.     */</span><span class=w>    </span><span class=c1>// mjy：存储ArrayList元素的数组缓冲区（就是保存ArrayList数据的数组）。ArrayList的容量是此数组缓冲区的长度。添加第一个元素时，任何具有elementData==DEFAULTCAPACITY_EMMENTDATA的空ArrayList都将扩展为DEFAULT_CAPACITY。  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>transient</span><span class=w> </span><span class=n>Object</span><span class=o>[]</span><span class=w> </span><span class=n>elementData</span><span class=p>;</span><span class=w> </span><span class=c1>// non-private to simplify nested class access  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * The size of the ArrayList (the number of elements it contains). mjy：数组长度大小（元素个数）  
</span></span></span><span class=line><span class=cl><span class=cm>     *  
</span></span></span><span class=line><span class=cl><span class=cm>     * @serial  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Constructs an empty list with the specified initial capacity.     *     * @param initialCapacity the initial capacity of the list  
</span></span></span><span class=line><span class=cl><span class=cm>     * @throws IllegalArgumentException if the specified initial capacity  
</span></span></span><span class=line><span class=cl><span class=cm>     *                                  is negative     */</span><span class=w>    </span><span class=c1>// mjy：带初始容量参数的构造函数（用户可以在创建ArrayList对象时自己指定集合的初始大小）  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>ArrayList</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>initialCapacity</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>initialCapacity</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// 传入的参数大于0，创建initialCapacity大小的数组  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Object</span><span class=o>[</span><span class=n>initialCapacity</span><span class=o>]</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>initialCapacity</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// 传入的参数等于0，创建空数组  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>EMPTY_ELEMENTDATA</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// 其他情况异常  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IllegalArgumentException</span><span class=p>(</span><span class=s>&#34;Illegal Capacity: &#34;</span><span class=w> </span><span class=o>+</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>initialCapacity</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Constructs an empty list with an initial capacity of ten.     */</span><span class=w>    </span><span class=c1>// mjy：默认无参构造函数 DEFAULTCAPACITY_EMPTY_ELEMENTDATA为0。初始其实是空数组，当添加第一个元素的时候数组容量才变成10  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>ArrayList</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Constructs a list containing the elements of the specified     * collection, in the order they are returned by the collection&#39;s     * iterator.     *     * @param c the collection whose elements are to be placed into this list  
</span></span></span><span class=line><span class=cl><span class=cm>     * @throws NullPointerException if the specified collection is null  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=c1>// mjy：构造一个包含指定集合的元素的列表，按照它们由集合的迭代器返回的顺序。 new ArrayList&lt;&gt;(paramList);    public ArrayList(Collection&lt;? extends E&gt; c) {  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 将参数转换为数组  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>c</span><span class=p>.</span><span class=na>toArray</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// elementData数组的长度不为0  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>((</span><span class=n>size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>elementData</span><span class=p>.</span><span class=na>length</span><span class=p>)</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// c.toArray might (incorrectly) not return Object[] (see 6260652)  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// mjy： elementData不是Object类型数据（c.toArray可能返回的不是Object类型的数组）  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>elementData</span><span class=p>.</span><span class=na>getClass</span><span class=p>()</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>Object</span><span class=o>[]</span><span class=p>.</span><span class=na>class</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c1>// mjy： 将原来不是Object类型的elementData数组的内容，赋值给新的Object类型的elementData数组  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>copyOf</span><span class=p>(</span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>size</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=o>[]</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// replace with empty array. mjy： elementData数组的长度为0，即为空数组  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>EMPTY_ELEMENTDATA</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Trims the capacity of this &lt;tt&gt;ArrayList&lt;/tt&gt; instance to be the  
</span></span></span><span class=line><span class=cl><span class=cm>     * list&#39;s current size.  An application can use this operation to minimize     * the storage of an &lt;tt&gt;ArrayList&lt;/tt&gt; instance.  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=c1>// mjy： 修改这个ArrayList实例的容量是列表的当前大小。 可以使用此操作来最小化ArrayList实例的存储。  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>trimToSize</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>modCount</span><span class=o>++</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>size</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>elementData</span><span class=p>.</span><span class=na>length</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>size</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=o>?</span><span class=w> </span><span class=n>EMPTY_ELEMENTDATA</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>:</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>copyOf</span><span class=p>(</span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>size</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Increases the capacity of this &lt;tt&gt;ArrayList&lt;/tt&gt; instance, if  
</span></span></span><span class=line><span class=cl><span class=cm>     * necessary, to ensure that it can hold at least the number of elements     * specified by the minimum capacity argument.     * mjy： 如有必要，增加此ArrayList实例的容量，以确保它至少可以容纳最小容量参数指定的元素数量。  
</span></span></span><span class=line><span class=cl><span class=cm>     *  
</span></span></span><span class=line><span class=cl><span class=cm>     * @param minCapacity the desired minimum capacity   mjy：所需的最小容量  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>ensureCapacity</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>minCapacity</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy： (数组元素不为空) 如果是true，minExpand的值为0，如果是false,minExpand的值为10  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>minExpand</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>elementData</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c1>// any size if not default element table  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=o>?</span><span class=w> </span><span class=n>0</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c1>// larger than default for default empty table. It&#39;s already  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c1>// supposed to be at default size.                : DEFAULT_CAPACITY;  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 如果最小容量大于已有的最大容量  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>minCapacity</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>minExpand</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>ensureExplicitCapacity</span><span class=p>(</span><span class=n>minCapacity</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// mjy： 确保内部容量  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>ensureCapacityInternal</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>minCapacity</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy：如果元素是空  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>elementData</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// mjy： 所需要的最小容量为 默认容量和最小容量相比 较大的一个  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>minCapacity</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Math</span><span class=p>.</span><span class=na>max</span><span class=p>(</span><span class=n>DEFAULT_CAPACITY</span><span class=p>,</span><span class=w> </span><span class=n>minCapacity</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 确保 容量  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ensureExplicitCapacity</span><span class=p>(</span><span class=n>minCapacity</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>ensureExplicitCapacity</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>minCapacity</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>modCount</span><span class=o>++</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// overflow-conscious code  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy：所需要的最小容量减去现在的数组元素长度 大于0  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>minCapacity</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>elementData</span><span class=p>.</span><span class=na>length</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// mjy：调用grow方法进行扩容，调用此方法代表已经开始扩容了  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>grow</span><span class=p>(</span><span class=n>minCapacity</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * The maximum size of array to allocate.     * Some VMs reserve some header words in an array.     * Attempts to allocate larger arrays may result in     * OutOfMemoryError: Requested array size exceeds VM limit     * mjy： 是JVM能分配的数组的最大 大小，一般为Integer.MAX_VALUE - 8（这和JVM内部实现有关，留出了一些用于对象头信息的空间）。  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>MAX_ARRAY_SIZE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Integer</span><span class=p>.</span><span class=na>MAX_VALUE</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>8</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Increases the capacity to ensure that it can hold at least the     * number of elements specified by the minimum capacity argument.     * mjy：ArrayList扩容的核心方法。  
</span></span></span><span class=line><span class=cl><span class=cm>     *  
</span></span></span><span class=line><span class=cl><span class=cm>     * @param minCapacity the desired minimum capacity  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>grow</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>minCapacity</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// overflow-conscious code  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy： 表示当前数组的容量（即当前存储元素的数组 elementData 的长度）  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>oldCapacity</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>elementData</span><span class=p>.</span><span class=na>length</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy：是新的数组容量，计算方式是旧容量的 1.5 倍 (oldCapacity + oldCapacity &gt;&gt; 1，即右移一位表示除以2)。通过这种方式，ArrayList 的容量会在需要时以指数方式增加，避免频繁扩容。  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>newCapacity</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>oldCapacity</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=p>(</span><span class=n>oldCapacity</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>1</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy：minCapacity是调用grow方法时传入的参数，表示所需的最小容量。如果计算出的newCapacity小于minCapacity，那么直接将newCapacity设置为minCapacity，确保新容量至少能满足当前所需的空间。  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>newCapacity</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>minCapacity</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>newCapacity</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>minCapacity</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy：如果newCapacity超过了MAX_ARRAY_SIZE，调用 hugeCapacity(minCapacity) 方法来决定实际的容量。  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>newCapacity</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>MAX_ARRAY_SIZE</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>newCapacity</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>hugeCapacity</span><span class=p>(</span><span class=n>minCapacity</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// minCapacity is usually close to size, so this is a win:  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy：调用Arrays.copyOf方法将现有的数组elementData复制到一个新的数组中，新数组的长度为 newCapacity，实现了数组的扩容。这个过程会保留原数组中的所有元素，但底层的存储空间已经扩展。  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>copyOf</span><span class=p>(</span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>newCapacity</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// mjy： 处理可能超过最大数组大小的情况  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nf>hugeCapacity</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>minCapacity</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy： 如果minCapacity为负数，意味着发生了容量溢出（例如，容量计算溢出了Integer的范围），此时抛出 OutOfMemoryError        if (minCapacity &lt; 0) // overflow  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>OutOfMemoryError</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy：如果minCapacity超过了MAX_ARRAY_SIZE，返回Integer.MAX_VALUE，即数组会扩展到 JVM 可以支持的最大值。否则即minCapacity小于MAX_ARRAY_SIZE，但仍然超出了合理范围，则返回 MAX_ARRAY_SIZE。  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=n>minCapacity</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>MAX_ARRAY_SIZE</span><span class=p>)</span><span class=w> </span><span class=o>?</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>Integer</span><span class=p>.</span><span class=na>MAX_VALUE</span><span class=w> </span><span class=p>:</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>MAX_ARRAY_SIZE</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Returns the number of elements in this list.     * mjy： 返回此列表中的元素数  
</span></span></span><span class=line><span class=cl><span class=cm>     *  
</span></span></span><span class=line><span class=cl><span class=cm>     * @return the number of elements in this list  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nf>size</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Returns &lt;tt&gt;true&lt;/tt&gt; if this list contains no elements.  
</span></span></span><span class=line><span class=cl><span class=cm>     * mjy： 判断是否为空 如果此列表不包含元素，则返回 true  
</span></span></span><span class=line><span class=cl><span class=cm>     *     * @return &lt;tt&gt;true&lt;/tt&gt; if this list contains no elements  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>isEmpty</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Returns &lt;tt&gt;true&lt;/tt&gt; if this list contains the specified element.  
</span></span></span><span class=line><span class=cl><span class=cm>     * More formally, returns &lt;tt&gt;true&lt;/tt&gt; if and only if this list contains  
</span></span></span><span class=line><span class=cl><span class=cm>     * at least one element &lt;tt&gt;e&lt;/tt&gt; such that  
</span></span></span><span class=line><span class=cl><span class=cm>     * &lt;tt&gt;(o==null&amp;nbsp;?&amp;nbsp;e==null&amp;nbsp;:&amp;nbsp;o.equals(e))&lt;/tt&gt;.  
</span></span></span><span class=line><span class=cl><span class=cm>     *     * @param o element whose presence in this list is to be tested  
</span></span></span><span class=line><span class=cl><span class=cm>     * @return &lt;tt&gt;true&lt;/tt&gt; if this list contains the specified element  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=c1>// mjy： 判断是否包含指定元素，包含返回true  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>contains</span><span class=p>(</span><span class=n>Object</span><span class=w> </span><span class=n>o</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy： indexOf()方法：返回此列表中指定元素的首次出现的索引，如果此列表不包含此元素，则为-1  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>indexOf</span><span class=p>(</span><span class=n>o</span><span class=p>)</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Returns the index of the first occurrence of the specified element     * in this list, or -1 if this list does not contain the element.     * More formally, returns the lowest index &lt;tt&gt;i&lt;/tt&gt; such that  
</span></span></span><span class=line><span class=cl><span class=cm>     * &lt;tt&gt;(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))&lt;/tt&gt;,  
</span></span></span><span class=line><span class=cl><span class=cm>     * or -1 if there is no such index.     */</span><span class=w>    </span><span class=c1>// mjy： 返回此列表中指定元素的首次出现的索引，如果此列表不包含此元素，则为-1  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nf>indexOf</span><span class=p>(</span><span class=n>Object</span><span class=w> </span><span class=n>o</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy： 入参元素为空  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>o</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c1>// mjy： 判断是否存在空元素  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>elementData</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=n>i</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// 不为空  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c1>// mjy： equals()方法比较  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>o</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=n>elementData</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=p>))</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=n>i</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=o>-</span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Returns the index of the last occurrence of the specified element     * in this list, or -1 if this list does not contain the element.     * More formally, returns the highest index &lt;tt&gt;i&lt;/tt&gt; such that  
</span></span></span><span class=line><span class=cl><span class=cm>     * &lt;tt&gt;(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))&lt;/tt&gt;,  
</span></span></span><span class=line><span class=cl><span class=cm>     * or -1 if there is no such index.     */</span><span class=w>    </span><span class=c1>// mjy： 返回此列表中指定元素的最后一次出现的索引，如果此列表不包含元素，则返回-1  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nf>lastIndexOf</span><span class=p>(</span><span class=n>Object</span><span class=w> </span><span class=n>o</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 倒序循环  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>o</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>--</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>elementData</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=n>i</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>--</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>o</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=n>elementData</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=p>))</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=n>i</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=o>-</span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Returns a shallow copy of this &lt;tt&gt;ArrayList&lt;/tt&gt; instance.  (The  
</span></span></span><span class=line><span class=cl><span class=cm>     * elements themselves are not copied.)     *     * @return a clone of this &lt;tt&gt;ArrayList&lt;/tt&gt; instance  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=c1>// mjy： 克隆方法，返回此ArrayList实例的浅拷 （元素本身不被复制。）  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Object</span><span class=w> </span><span class=nf>clone</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>ArrayList</span><span class=o>&lt;?&gt;</span><span class=w> </span><span class=n>v</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>ArrayList</span><span class=o>&lt;?&gt;</span><span class=p>)</span><span class=w> </span><span class=kd>super</span><span class=p>.</span><span class=na>clone</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// mjy： Arrays.copyOf功能是实现数组的复制，返回复制后的数组。参数是被复制的数组和复制的长度  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>v</span><span class=p>.</span><span class=na>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>copyOf</span><span class=p>(</span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>size</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>v</span><span class=p>.</span><span class=na>modCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>v</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>CloneNotSupportedException</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// this shouldn&#39;t happen, since we are Cloneable  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// mjy： 这不应该发生，因为我们是可以克隆的  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>InternalError</span><span class=p>(</span><span class=n>e</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Returns an array containing all of the elements in this list     * in proper sequence (from first to last element).     * mjy： 以正确的顺序（从第一个到最后一个元素）返回一个包含此列表中所有元素的数组。  
</span></span></span><span class=line><span class=cl><span class=cm>     * &lt;p&gt;The returned array will be &#34;safe&#34; in that no references to it are  
</span></span></span><span class=line><span class=cl><span class=cm>     * maintained by this list.  (In other words, this method must allocate     * a new array).  The caller is thus free to modify the returned array.     * mjy： 返回的数组将是安全的，因为该列表不保留对它的引用。 （换句话说，这个方法必须分配一个新的数组）。  
</span></span></span><span class=line><span class=cl><span class=cm>     * &lt;p&gt;This method acts as bridge between array-based and collection-based  
</span></span></span><span class=line><span class=cl><span class=cm>     * APIs.     * mjy： 因此，调用者可以自由地修改返回的数组。 此方法充当基于阵列和基于集合的API之间的桥梁。  
</span></span></span><span class=line><span class=cl><span class=cm>     *  
</span></span></span><span class=line><span class=cl><span class=cm>     * @return an array containing all of the elements in this list in  
</span></span></span><span class=line><span class=cl><span class=cm>     * proper sequence     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Object</span><span class=o>[]</span><span class=w> </span><span class=nf>toArray</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>copyOf</span><span class=p>(</span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>size</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Returns an array containing all of the elements in this list in proper     * sequence (from first to last element); the runtime type of the returned     * array is that of the specified array.  If the list fits in the     * specified array, it is returned therein.  Otherwise, a new array is     * allocated with the runtime type of the specified array and the size of     * this list.     *     * &lt;p&gt;If the list fits in the specified array with room to spare  
</span></span></span><span class=line><span class=cl><span class=cm>     * (i.e., the array has more elements than the list), the element in     * the array immediately following the end of the collection is set to     * &lt;tt&gt;null&lt;/tt&gt;.  (This is useful in determining the length of the  
</span></span></span><span class=line><span class=cl><span class=cm>     * list &lt;i&gt;only&lt;/i&gt; if the caller knows that the list does not contain  
</span></span></span><span class=line><span class=cl><span class=cm>     * any null elements.)     *     * @param a the array into which the elements of the list are to  
</span></span></span><span class=line><span class=cl><span class=cm>     *          be stored, if it is big enough; otherwise, a new array of the     *          same runtime type is allocated for this purpose.     * @return an array containing the elements of the list  
</span></span></span><span class=line><span class=cl><span class=cm>     * @throws ArrayStoreException  if the runtime type of the specified array  
</span></span></span><span class=line><span class=cl><span class=cm>     *                              is not a supertype of the runtime type of every element in     *                              this list     * @throws NullPointerException if the specified array is null  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=nd>@SuppressWarnings</span><span class=p>(</span><span class=s>&#34;unchecked&#34;</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=n>T</span><span class=o>[]</span><span class=w> </span><span class=nf>toArray</span><span class=p>(</span><span class=n>T</span><span class=o>[]</span><span class=w> </span><span class=n>a</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=na>length</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>size</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// Make a new array of a&#39;s runtime type, but my contents:  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=n>T</span><span class=o>[]</span><span class=p>)</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>copyOf</span><span class=p>(</span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>size</span><span class=p>,</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=na>getClass</span><span class=p>());</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>arraycopy</span><span class=p>(</span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>0</span><span class=p>,</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>0</span><span class=p>,</span><span class=w> </span><span class=n>size</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=na>length</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>size</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>a</span><span class=o>[</span><span class=n>size</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>a</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// Positional Access Operations  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@SuppressWarnings</span><span class=p>(</span><span class=s>&#34;unchecked&#34;</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>E</span><span class=w> </span><span class=nf>elementData</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=n>E</span><span class=p>)</span><span class=w> </span><span class=n>elementData</span><span class=o>[</span><span class=n>index</span><span class=o>]</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Returns the element at the specified position in this list.     * mjy： 返回此列表中指定位置的元素  
</span></span></span><span class=line><span class=cl><span class=cm>     *  
</span></span></span><span class=line><span class=cl><span class=cm>     * @param index index of the element to return  
</span></span></span><span class=line><span class=cl><span class=cm>     * @return the element at the specified position in this list  
</span></span></span><span class=line><span class=cl><span class=cm>     * @throws IndexOutOfBoundsException {@inheritDoc}  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy： 校验数组下标越界  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>rangeCheck</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>elementData</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Replaces the element at the specified position in this list with     * the specified element.     * mjy： 用指定的元素替换此列表中指定位置的元素  
</span></span></span><span class=line><span class=cl><span class=cm>     *  
</span></span></span><span class=line><span class=cl><span class=cm>     * @param index   index of the element to replace  
</span></span></span><span class=line><span class=cl><span class=cm>     * @param element element to be stored at the specified position  
</span></span></span><span class=line><span class=cl><span class=cm>     * @return the element previously at the specified position  
</span></span></span><span class=line><span class=cl><span class=cm>     * @throws IndexOutOfBoundsException {@inheritDoc}  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=nf>set</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>,</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=n>element</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy： 校验数组下标越界  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>rangeCheck</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy： 旧的值  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>E</span><span class=w> </span><span class=n>oldValue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>elementData</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy： 新的赋值  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>elementData</span><span class=o>[</span><span class=n>index</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>element</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy： 返回旧的值  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>oldValue</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Appends the specified element to the end of this list.     * mjy： 添加元素，将指定的元素追加到此列表的末尾  
</span></span></span><span class=line><span class=cl><span class=cm>     *  
</span></span></span><span class=line><span class=cl><span class=cm>     * @param e element to be appended to this list  
</span></span></span><span class=line><span class=cl><span class=cm>     * @return &lt;tt&gt;true&lt;/tt&gt; (as specified by {@link Collection#add})  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>add</span><span class=p>(</span><span class=n>E</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy： 扩容校验  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ensureCapacityInternal</span><span class=p>(</span><span class=n>size</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>1</span><span class=p>);</span><span class=w>  </span><span class=c1>// Increments modCount!!  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy： 添加元素  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>elementData</span><span class=o>[</span><span class=n>size</span><span class=o>++]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>e</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Inserts the specified element at the specified position in this     * list. Shifts the element currently at that position (if any) and     * any subsequent elements to the right (adds one to their indices).     * mjy： 添加元素，在此列表中的指定位置插入指定的元素  
</span></span></span><span class=line><span class=cl><span class=cm>     * mjy：先调用 rangeCheckForAdd 对index进行界限检查；然后调用 ensureCapacityInternal 方法保证capacity足够大；再将从index开始之后的所有成员后移一个位置；将element插入index位置；最后size加1。  
</span></span></span><span class=line><span class=cl><span class=cm>     *  
</span></span></span><span class=line><span class=cl><span class=cm>     * @param index   index at which the specified element is to be inserted  
</span></span></span><span class=line><span class=cl><span class=cm>     * @param element element to be inserted  
</span></span></span><span class=line><span class=cl><span class=cm>     * @throws IndexOutOfBoundsException {@inheritDoc}  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>add</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>,</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=n>element</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy： 校验  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>rangeCheckForAdd</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ensureCapacityInternal</span><span class=p>(</span><span class=n>size</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>1</span><span class=p>);</span><span class=w>  </span><span class=c1>// Increments modCount!!  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// mjy： System.arraycopy()这个实现数组之间复制的方法一定要看一下，下面就用到了arraycopy()方法实现数组自己复制自己  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>arraycopy</span><span class=p>(</span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>index</span><span class=p>,</span><span class=w> </span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>1</span><span class=p>,</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>size</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>elementData</span><span class=o>[</span><span class=n>index</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>element</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>size</span><span class=o>++</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Removes the element at the specified position in this list.     * Shifts any subsequent elements to the left (subtracts one from their     * indices).     * mjy：删除元素，删除该列表中指定位置的元素。 将任何后续元素移动到左侧（从其索引中减去一个元素）  
</span></span></span><span class=line><span class=cl><span class=cm>     *  
</span></span></span><span class=line><span class=cl><span class=cm>     * @param index the index of the element to be removed  
</span></span></span><span class=line><span class=cl><span class=cm>     * @return the element that was removed from the list  
</span></span></span><span class=line><span class=cl><span class=cm>     * @throws IndexOutOfBoundsException {@inheritDoc}  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=nf>remove</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>rangeCheck</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>modCount</span><span class=o>++</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>E</span><span class=w> </span><span class=n>oldValue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>elementData</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>numMoved</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>numMoved</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>arraycopy</span><span class=p>(</span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>index</span><span class=p>,</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>numMoved</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>elementData</span><span class=o>[--</span><span class=n>size</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w> </span><span class=c1>// clear to let GC do its work  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>oldValue</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Removes the first occurrence of the specified element from this list,     * if it is present.  If the list does not contain the element, it is     * unchanged.  More formally, removes the element with the lowest index     * &lt;tt&gt;i&lt;/tt&gt; such that  
</span></span></span><span class=line><span class=cl><span class=cm>     * &lt;tt&gt;(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))&lt;/tt&gt;  
</span></span></span><span class=line><span class=cl><span class=cm>     * (if such an element exists).  Returns &lt;tt&gt;true&lt;/tt&gt; if this list  
</span></span></span><span class=line><span class=cl><span class=cm>     * contained the specified element (or equivalently, if this list     * changed as a result of the call).     * mjy： 从列表中删除指定元素的第一个出现（如果存在）。 如果列表不包含该元素，则它不会更改。  
</span></span></span><span class=line><span class=cl><span class=cm>     *  
</span></span></span><span class=line><span class=cl><span class=cm>     * @param o element to be removed from this list, if present  
</span></span></span><span class=line><span class=cl><span class=cm>     * @return &lt;tt&gt;true&lt;/tt&gt; if this list contained the specified element  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>remove</span><span class=p>(</span><span class=n>Object</span><span class=w> </span><span class=n>o</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>o</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w> </span><span class=n>index</span><span class=o>++</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>elementData</span><span class=o>[</span><span class=n>index</span><span class=o>]</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>fastRemove</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>                </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w> </span><span class=n>index</span><span class=o>++</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>o</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=n>elementData</span><span class=o>[</span><span class=n>index</span><span class=o>]</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>fastRemove</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>                </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kc>false</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/*  
</span></span></span><span class=line><span class=cl><span class=cm>     * Private remove method that skimjy bounds checking and does not     * return the value removed.     */</span><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>fastRemove</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>modCount</span><span class=o>++</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>numMoved</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>numMoved</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>arraycopy</span><span class=p>(</span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>index</span><span class=p>,</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>numMoved</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>elementData</span><span class=o>[--</span><span class=n>size</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w> </span><span class=c1>// clear to let GC do its work  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Removes all of the elements from this list.  The list will     * be empty after this call returns.     * mjy： 从列表中清空（删除）所有元素。  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>clear</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>modCount</span><span class=o>++</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// clear to let GC do its work  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>elementData</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Appends all of the elements in the specified collection to the end of     * this list, in the order that they are returned by the     * specified collection&#39;s Iterator.  The behavior of this operation is     * undefined if the specified collection is modified while the operation     * is in progress.  (This implies that the behavior of this call is     * undefined if the specified collection is this list, and this     * list is nonempty.)     *     * @param c collection containing elements to be added to this list  
</span></span></span><span class=line><span class=cl><span class=cm>     * @return &lt;tt&gt;true&lt;/tt&gt; if this list changed as a result of the call  
</span></span></span><span class=line><span class=cl><span class=cm>     * @throws NullPointerException if the specified collection is null  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>addAll</span><span class=p>(</span><span class=n>Collection</span><span class=o>&lt;?</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>c</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Object</span><span class=o>[]</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>c</span><span class=p>.</span><span class=na>toArray</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>numNew</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=na>length</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ensureCapacityInternal</span><span class=p>(</span><span class=n>size</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>numNew</span><span class=p>);</span><span class=w>  </span><span class=c1>// Increments modCount  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>arraycopy</span><span class=p>(</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>0</span><span class=p>,</span><span class=w> </span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>size</span><span class=p>,</span><span class=w> </span><span class=n>numNew</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>size</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>numNew</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>numNew</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Inserts all of the elements in the specified collection into this     * list, starting at the specified position.  Shifts the element     * currently at that position (if any) and any subsequent elements to     * the right (increases their indices).  The new elements will appear     * in the list in the order that they are returned by the     * specified collection&#39;s iterator.     *     * @param index index at which to insert the first element from the  
</span></span></span><span class=line><span class=cl><span class=cm>     *              specified collection     * @param c     collection containing elements to be added to this list  
</span></span></span><span class=line><span class=cl><span class=cm>     * @return &lt;tt&gt;true&lt;/tt&gt; if this list changed as a result of the call  
</span></span></span><span class=line><span class=cl><span class=cm>     * @throws IndexOutOfBoundsException {@inheritDoc}  
</span></span></span><span class=line><span class=cl><span class=cm>     * @throws NullPointerException      if the specified collection is null  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>addAll</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>,</span><span class=w> </span><span class=n>Collection</span><span class=o>&lt;?</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>c</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>rangeCheckForAdd</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Object</span><span class=o>[]</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>c</span><span class=p>.</span><span class=na>toArray</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>numNew</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=na>length</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ensureCapacityInternal</span><span class=p>(</span><span class=n>size</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>numNew</span><span class=p>);</span><span class=w>  </span><span class=c1>// Increments modCount  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>numMoved</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>index</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>numMoved</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>arraycopy</span><span class=p>(</span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>index</span><span class=p>,</span><span class=w> </span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>numNew</span><span class=p>,</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>numMoved</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>arraycopy</span><span class=p>(</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>0</span><span class=p>,</span><span class=w> </span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>index</span><span class=p>,</span><span class=w> </span><span class=n>numNew</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>size</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>numNew</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>numNew</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Removes from this list all of the elements whose index is between     * {@code fromIndex}, inclusive, and {@code toIndex}, exclusive.  
</span></span></span><span class=line><span class=cl><span class=cm>     * Shifts any succeeding elements to the left (reduces their index).     * This call shortens the list by {@code (toIndex - fromIndex)} elements.  
</span></span></span><span class=line><span class=cl><span class=cm>     * (If {@code toIndex==fromIndex}, this operation has no effect.)  
</span></span></span><span class=line><span class=cl><span class=cm>     *     * @throws IndexOutOfBoundsException if {@code fromIndex} or  
</span></span></span><span class=line><span class=cl><span class=cm>     *                                   {@code toIndex} is out of range  
</span></span></span><span class=line><span class=cl><span class=cm>     *                                   ({@code fromIndex &lt; 0 ||  
</span></span></span><span class=line><span class=cl><span class=cm>     *                                   fromIndex &gt;= size() ||     *                                   toIndex &gt; size() ||     *                                   toIndex &lt; fromIndex})     */</span><span class=w>    </span><span class=kd>protected</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>removeRange</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>fromIndex</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>toIndex</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>modCount</span><span class=o>++</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>numMoved</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>toIndex</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>arraycopy</span><span class=p>(</span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>toIndex</span><span class=p>,</span><span class=w> </span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>fromIndex</span><span class=p>,</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>numMoved</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// clear to let GC do its work  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>newSize</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=p>(</span><span class=n>toIndex</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>fromIndex</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>newSize</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>elementData</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>newSize</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Checks if the given index is in range.  If not, throws an appropriate     * runtime exception.  This method does *not* check if the index is     * negative: It is always used immediately prior to an array access,     * which throws an ArrayIndexOutOfBoundsException if index is negative.     */</span><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>rangeCheck</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>index</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>size</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IndexOutOfBoundsException</span><span class=p>(</span><span class=n>outOfBoundsMsg</span><span class=p>(</span><span class=n>index</span><span class=p>));</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * A version of rangeCheck used by add and addAll.     */</span><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>rangeCheckForAdd</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>index</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IndexOutOfBoundsException</span><span class=p>(</span><span class=n>outOfBoundsMsg</span><span class=p>(</span><span class=n>index</span><span class=p>));</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Constructs an IndexOutOfBoundsException detail message.     * Of the many possible refactorings of the error handling code,     * this &#34;outlining&#34; performs best with both server and client VMs.     */</span><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>outOfBoundsMsg</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;Index: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;, Size: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Removes from this list all of its elements that are contained in the     * specified collection.     *     * @param c collection containing elements to be removed from this list  
</span></span></span><span class=line><span class=cl><span class=cm>     * @return {@code true} if this list changed as a result of the call  
</span></span></span><span class=line><span class=cl><span class=cm>     * @throws ClassCastException   if the class of an element of this list  
</span></span></span><span class=line><span class=cl><span class=cm>     *                              is incompatible with the specified collection     *                              (&lt;a href=&#34;Collection.html#optional-restrictions&#34;&gt;optional&lt;/a&gt;)  
</span></span></span><span class=line><span class=cl><span class=cm>     * @throws NullPointerException if this list contains a null element and the  
</span></span></span><span class=line><span class=cl><span class=cm>     *                              specified collection does not permit null elements     *                              (&lt;a href=&#34;Collection.html#optional-restrictions&#34;&gt;optional&lt;/a&gt;),  
</span></span></span><span class=line><span class=cl><span class=cm>     *                              or if the specified collection is null     * @see Collection#contains(Object)  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>removeAll</span><span class=p>(</span><span class=n>Collection</span><span class=o>&lt;?&gt;</span><span class=w> </span><span class=n>c</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Objects</span><span class=p>.</span><span class=na>requireNonNull</span><span class=p>(</span><span class=n>c</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>batchRemove</span><span class=p>(</span><span class=n>c</span><span class=p>,</span><span class=w> </span><span class=kc>false</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Retains only the elements in this list that are contained in the     * specified collection.  In other words, removes from this list all     * of its elements that are not contained in the specified collection.     *     * @param c collection containing elements to be retained in this list  
</span></span></span><span class=line><span class=cl><span class=cm>     * @return {@code true} if this list changed as a result of the call  
</span></span></span><span class=line><span class=cl><span class=cm>     * @throws ClassCastException   if the class of an element of this list  
</span></span></span><span class=line><span class=cl><span class=cm>     *                              is incompatible with the specified collection     *                              (&lt;a href=&#34;Collection.html#optional-restrictions&#34;&gt;optional&lt;/a&gt;)  
</span></span></span><span class=line><span class=cl><span class=cm>     * @throws NullPointerException if this list contains a null element and the  
</span></span></span><span class=line><span class=cl><span class=cm>     *                              specified collection does not permit null elements     *                              (&lt;a href=&#34;Collection.html#optional-restrictions&#34;&gt;optional&lt;/a&gt;),  
</span></span></span><span class=line><span class=cl><span class=cm>     *                              or if the specified collection is null     * @see Collection#contains(Object)  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>retainAll</span><span class=p>(</span><span class=n>Collection</span><span class=o>&lt;?&gt;</span><span class=w> </span><span class=n>c</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Objects</span><span class=p>.</span><span class=na>requireNonNull</span><span class=p>(</span><span class=n>c</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>batchRemove</span><span class=p>(</span><span class=n>c</span><span class=p>,</span><span class=w> </span><span class=kc>true</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>batchRemove</span><span class=p>(</span><span class=n>Collection</span><span class=o>&lt;?&gt;</span><span class=w> </span><span class=n>c</span><span class=p>,</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=n>complement</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>final</span><span class=w> </span><span class=n>Object</span><span class=o>[]</span><span class=w> </span><span class=n>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>elementData</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>,</span><span class=w> </span><span class=n>w</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>boolean</span><span class=w> </span><span class=n>modified</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(;</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w> </span><span class=n>r</span><span class=o>++</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>c</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>elementData</span><span class=o>[</span><span class=n>r</span><span class=o>]</span><span class=p>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>complement</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>elementData</span><span class=o>[</span><span class=n>w</span><span class=o>++]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>elementData</span><span class=o>[</span><span class=n>r</span><span class=o>]</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>finally</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// Preserve behavioral compatibility with AbstractCollection,  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// even if c.contains() throws.            if (r != size) {  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>System</span><span class=p>.</span><span class=na>arraycopy</span><span class=p>(</span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>r</span><span class=p>,</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>w</span><span class=p>,</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>size</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>r</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>w</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>r</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>w</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>size</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c1>// clear to let GC do its work  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>w</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>elementData</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>modCount</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>w</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>w</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>modified</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>modified</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Save the state of the &lt;tt&gt;ArrayList&lt;/tt&gt; instance to a stream (that  
</span></span></span><span class=line><span class=cl><span class=cm>     * is, serialize it).     *     * @serialData The length of the array backing the &lt;tt&gt;ArrayList&lt;/tt&gt;  
</span></span></span><span class=line><span class=cl><span class=cm>     * instance is emitted (int), followed by all of its elements  
</span></span></span><span class=line><span class=cl><span class=cm>     * (each an &lt;tt&gt;Object&lt;/tt&gt;) in the proper order.  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>writeObject</span><span class=p>(</span><span class=n>java</span><span class=p>.</span><span class=na>io</span><span class=p>.</span><span class=na>ObjectOutputStream</span><span class=w> </span><span class=n>s</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kd>throws</span><span class=w> </span><span class=n>java</span><span class=p>.</span><span class=na>io</span><span class=p>.</span><span class=na>IOException</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// Write out element count, and any hidden stuff  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>expectedModCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>s</span><span class=p>.</span><span class=na>defaultWriteObject</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// Write out size as capacity for behavioural compatibility with clone()  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>s</span><span class=p>.</span><span class=na>writeInt</span><span class=p>(</span><span class=n>size</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// Write out all elements in the proper order.  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>s</span><span class=p>.</span><span class=na>writeObject</span><span class=p>(</span><span class=n>elementData</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>modCount</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>expectedModCount</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Reconstitute the &lt;tt&gt;ArrayList&lt;/tt&gt; instance from a stream (that is,  
</span></span></span><span class=line><span class=cl><span class=cm>     * deserialize it).     */</span><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>readObject</span><span class=p>(</span><span class=n>java</span><span class=p>.</span><span class=na>io</span><span class=p>.</span><span class=na>ObjectInputStream</span><span class=w> </span><span class=n>s</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kd>throws</span><span class=w> </span><span class=n>java</span><span class=p>.</span><span class=na>io</span><span class=p>.</span><span class=na>IOException</span><span class=p>,</span><span class=w> </span><span class=n>ClassNotFoundException</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>EMPTY_ELEMENTDATA</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// Read in size, and any hidden stuff  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>s</span><span class=p>.</span><span class=na>defaultReadObject</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// Read in capacity  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>s</span><span class=p>.</span><span class=na>readInt</span><span class=p>();</span><span class=w> </span><span class=c1>// ignored  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>size</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// be like clone(), allocate array based upon size not capacity  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>ensureCapacityInternal</span><span class=p>(</span><span class=n>size</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Object</span><span class=o>[]</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>elementData</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// Read in all elements in the proper order.  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>a</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=na>readObject</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Returns a list iterator over the elements in this list (in proper     * sequence), starting at the specified position in the list.     * The specified index indicates the first element that would be     * returned by an initial call to {@link ListIterator#next next}.  
</span></span></span><span class=line><span class=cl><span class=cm>     * An initial call to {@link ListIterator#previous previous} would  
</span></span></span><span class=line><span class=cl><span class=cm>     * return the element with the specified index minus one.     *     * &lt;p&gt;The returned list iterator is &lt;a href=&#34;#fail-fast&#34;&gt;&lt;i&gt;fail-fast&lt;/i&gt;&lt;/a&gt;.  
</span></span></span><span class=line><span class=cl><span class=cm>     *     * @throws IndexOutOfBoundsException {@inheritDoc}  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>ListIterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=nf>listIterator</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>index</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>0</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>size</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IndexOutOfBoundsException</span><span class=p>(</span><span class=s>&#34;Index: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ListItr</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Returns a list iterator over the elements in this list (in proper     * sequence).     *     * &lt;p&gt;The returned list iterator is &lt;a href=&#34;#fail-fast&#34;&gt;&lt;i&gt;fail-fast&lt;/i&gt;&lt;/a&gt;.  
</span></span></span><span class=line><span class=cl><span class=cm>     *     * @see #listIterator(int)  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>ListIterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=nf>listIterator</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ListItr</span><span class=p>(</span><span class=n>0</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Returns an iterator over the elements in this list in proper sequence.     *     * &lt;p&gt;The returned iterator is &lt;a href=&#34;#fail-fast&#34;&gt;&lt;i&gt;fail-fast&lt;/i&gt;&lt;/a&gt;.  
</span></span></span><span class=line><span class=cl><span class=cm>     *     * @return an iterator over the elements in this list in proper sequence  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Iterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=nf>iterator</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Itr</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * An optimized version of AbstractList.Itr     */</span><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>class</span> <span class=nc>Itr</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Iterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>cursor</span><span class=p>;</span><span class=w>       </span><span class=c1>// index of next element to return  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>lastRet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>-</span><span class=n>1</span><span class=p>;</span><span class=w> </span><span class=c1>// index of last element returned; -1 if no such  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>expectedModCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>hasNext</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>cursor</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nd>@SuppressWarnings</span><span class=p>(</span><span class=s>&#34;unchecked&#34;</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=nf>next</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cursor</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>size</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>NoSuchElementException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Object</span><span class=o>[]</span><span class=w> </span><span class=n>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>elementData</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>elementData</span><span class=p>.</span><span class=na>length</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>cursor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=n>E</span><span class=p>)</span><span class=w> </span><span class=n>elementData</span><span class=o>[</span><span class=n>lastRet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=o>]</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>remove</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>lastRet</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IllegalStateException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>remove</span><span class=p>(</span><span class=n>lastRet</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>cursor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>lastRet</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>lastRet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>-</span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>expectedModCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>IndexOutOfBoundsException</span><span class=w> </span><span class=n>ex</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nd>@Override</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nd>@SuppressWarnings</span><span class=p>(</span><span class=s>&#34;unchecked&#34;</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>forEachRemaining</span><span class=p>(</span><span class=n>Consumer</span><span class=o>&lt;?</span><span class=w> </span><span class=kd>super</span><span class=w> </span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>consumer</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Objects</span><span class=p>.</span><span class=na>requireNonNull</span><span class=p>(</span><span class=n>consumer</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>size</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cursor</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>size</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kd>final</span><span class=w> </span><span class=n>Object</span><span class=o>[]</span><span class=w> </span><span class=n>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>elementData</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>elementData</span><span class=p>.</span><span class=na>length</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>modCount</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>expectedModCount</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>consumer</span><span class=p>.</span><span class=na>accept</span><span class=p>((</span><span class=n>E</span><span class=p>)</span><span class=w> </span><span class=n>elementData</span><span class=o>[</span><span class=n>i</span><span class=o>++]</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// update once at end of iteration to reduce heap write traffic  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>cursor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>lastRet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>final</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>checkForComodification</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>modCount</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>expectedModCount</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * An optimized version of AbstractList.ListItr     */</span><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>class</span> <span class=nc>ListItr</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Itr</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>ListIterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ListItr</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kd>super</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>cursor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>index</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>hasPrevious</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>cursor</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nf>nextIndex</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>cursor</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nf>previousIndex</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>cursor</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nd>@SuppressWarnings</span><span class=p>(</span><span class=s>&#34;unchecked&#34;</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=nf>previous</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cursor</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>NoSuchElementException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Object</span><span class=o>[]</span><span class=w> </span><span class=n>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>elementData</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>elementData</span><span class=p>.</span><span class=na>length</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>cursor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=n>E</span><span class=p>)</span><span class=w> </span><span class=n>elementData</span><span class=o>[</span><span class=n>lastRet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=o>]</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>set</span><span class=p>(</span><span class=n>E</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>lastRet</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IllegalStateException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>lastRet</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>IndexOutOfBoundsException</span><span class=w> </span><span class=n>ex</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>add</span><span class=p>(</span><span class=n>E</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cursor</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>cursor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>lastRet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>-</span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>expectedModCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>IndexOutOfBoundsException</span><span class=w> </span><span class=n>ex</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Returns a view of the portion of this list between the specified     * {@code fromIndex}, inclusive, and {@code toIndex}, exclusive.  (If  
</span></span></span><span class=line><span class=cl><span class=cm>     * {@code fromIndex} and {@code toIndex} are equal, the returned list is  
</span></span></span><span class=line><span class=cl><span class=cm>     * empty.)  The returned list is backed by this list, so non-structural     * changes in the returned list are reflected in this list, and vice-versa.     * The returned list supports all of the optional list operations.     *     * &lt;p&gt;This method eliminates the need for explicit range operations (of  
</span></span></span><span class=line><span class=cl><span class=cm>     * the sort that commonly exist for arrays).  Any operation that expects     * a list can be used as a range operation by passing a subList view     * instead of a whole list.  For example, the following idiom     * removes a range of elements from a list:     * &lt;pre&gt;  
</span></span></span><span class=line><span class=cl><span class=cm>     *      list.subList(from, to).clear();  
</span></span></span><span class=line><span class=cl><span class=cm>     * &lt;/pre&gt;  
</span></span></span><span class=line><span class=cl><span class=cm>     * Similar idioms may be constructed for {@link #indexOf(Object)} and  
</span></span></span><span class=line><span class=cl><span class=cm>     * {@link #lastIndexOf(Object)}, and all of the algorithms in the  
</span></span></span><span class=line><span class=cl><span class=cm>     * {@link Collections} class can be applied to a subList.  
</span></span></span><span class=line><span class=cl><span class=cm>     *     * &lt;p&gt;The semantics of the list returned by this method become undefined if  
</span></span></span><span class=line><span class=cl><span class=cm>     * the backing list (i.e., this list) is &lt;i&gt;structurally modified&lt;/i&gt; in  
</span></span></span><span class=line><span class=cl><span class=cm>     * any way other than via the returned list.  (Structural modifications are     * those that change the size of this list, or otherwise perturb it in such     * a fashion that iterations in progress may yield incorrect results.)     *     * @throws IndexOutOfBoundsException {@inheritDoc}  
</span></span></span><span class=line><span class=cl><span class=cm>     * @throws IllegalArgumentException  {@inheritDoc}  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=nf>subList</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>fromIndex</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>toIndex</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>subListRangeCheck</span><span class=p>(</span><span class=n>fromIndex</span><span class=p>,</span><span class=w> </span><span class=n>toIndex</span><span class=p>,</span><span class=w> </span><span class=n>size</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>SubList</span><span class=p>(</span><span class=k>this</span><span class=p>,</span><span class=w> </span><span class=n>0</span><span class=p>,</span><span class=w> </span><span class=n>fromIndex</span><span class=p>,</span><span class=w> </span><span class=n>toIndex</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>subListRangeCheck</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>fromIndex</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>toIndex</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>size</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>fromIndex</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IndexOutOfBoundsException</span><span class=p>(</span><span class=s>&#34;fromIndex = &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>fromIndex</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>toIndex</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>size</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IndexOutOfBoundsException</span><span class=p>(</span><span class=s>&#34;toIndex = &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>toIndex</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>fromIndex</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>toIndex</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IllegalArgumentException</span><span class=p>(</span><span class=s>&#34;fromIndex(&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>fromIndex</span><span class=w> </span><span class=o>+</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=s>&#34;) &gt; toIndex(&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>toIndex</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;)&#34;</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>class</span> <span class=nc>SubList</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>AbstractList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>RandomAccess</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>AbstractList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>parent</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>parentOffset</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>offset</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>SubList</span><span class=p>(</span><span class=n>AbstractList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>parent</span><span class=p>,</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kt>int</span><span class=w> </span><span class=n>offset</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>fromIndex</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>toIndex</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>parentOffset</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fromIndex</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>offset</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>offset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>fromIndex</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>toIndex</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>fromIndex</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>modCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=nf>set</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>,</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>rangeCheck</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>E</span><span class=w> </span><span class=n>oldValue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>elementData</span><span class=p>(</span><span class=n>offset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>elementData</span><span class=o>[</span><span class=n>offset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>index</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>e</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>oldValue</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>rangeCheck</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>elementData</span><span class=p>(</span><span class=n>offset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nf>size</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>size</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>add</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>,</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>rangeCheckForAdd</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>parent</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>parentOffset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>index</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>modCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=p>.</span><span class=na>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>size</span><span class=o>++</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=nf>remove</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>rangeCheck</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>E</span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=p>.</span><span class=na>remove</span><span class=p>(</span><span class=n>parentOffset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>modCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=p>.</span><span class=na>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>size</span><span class=o>--</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>result</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>protected</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>removeRange</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>fromIndex</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>toIndex</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>parent</span><span class=p>.</span><span class=na>removeRange</span><span class=p>(</span><span class=n>parentOffset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>fromIndex</span><span class=p>,</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>parentOffset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>toIndex</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>modCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=p>.</span><span class=na>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>size</span><span class=w> </span><span class=o>-=</span><span class=w> </span><span class=n>toIndex</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>fromIndex</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>addAll</span><span class=p>(</span><span class=n>Collection</span><span class=o>&lt;?</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>c</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>addAll</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=na>size</span><span class=p>,</span><span class=w> </span><span class=n>c</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>addAll</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>,</span><span class=w> </span><span class=n>Collection</span><span class=o>&lt;?</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>c</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>rangeCheckForAdd</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>cSize</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>c</span><span class=p>.</span><span class=na>size</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>cSize</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=kc>false</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>parent</span><span class=p>.</span><span class=na>addAll</span><span class=p>(</span><span class=n>parentOffset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>index</span><span class=p>,</span><span class=w> </span><span class=n>c</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>modCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=p>.</span><span class=na>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>size</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>cSize</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>Iterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=nf>iterator</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>listIterator</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>ListIterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=nf>listIterator</span><span class=p>(</span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>rangeCheckForAdd</span><span class=p>(</span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>offset</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>offset</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ListIterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kt>int</span><span class=w> </span><span class=n>cursor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>index</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kt>int</span><span class=w> </span><span class=n>lastRet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>-</span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kt>int</span><span class=w> </span><span class=n>expectedModCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>hasNext</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=n>cursor</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>SubList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>size</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nd>@SuppressWarnings</span><span class=p>(</span><span class=s>&#34;unchecked&#34;</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kd>public</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=nf>next</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cursor</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>SubList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>size</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>NoSuchElementException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>Object</span><span class=o>[]</span><span class=w> </span><span class=n>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>elementData</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>offset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>elementData</span><span class=p>.</span><span class=na>length</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>cursor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=n>E</span><span class=p>)</span><span class=w> </span><span class=n>elementData</span><span class=o>[</span><span class=n>offset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=p>(</span><span class=n>lastRet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>)</span><span class=o>]</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>hasPrevious</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=n>cursor</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nd>@SuppressWarnings</span><span class=p>(</span><span class=s>&#34;unchecked&#34;</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kd>public</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=nf>previous</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cursor</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>NoSuchElementException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>Object</span><span class=o>[]</span><span class=w> </span><span class=n>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>elementData</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>offset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>elementData</span><span class=p>.</span><span class=na>length</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>cursor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=n>E</span><span class=p>)</span><span class=w> </span><span class=n>elementData</span><span class=o>[</span><span class=n>offset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=p>(</span><span class=n>lastRet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>)</span><span class=o>]</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nd>@SuppressWarnings</span><span class=p>(</span><span class=s>&#34;unchecked&#34;</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>forEachRemaining</span><span class=p>(</span><span class=n>Consumer</span><span class=o>&lt;?</span><span class=w> </span><span class=kd>super</span><span class=w> </span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>consumer</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>Objects</span><span class=p>.</span><span class=na>requireNonNull</span><span class=p>(</span><span class=n>consumer</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>SubList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>size</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cursor</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>size</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>return</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=kd>final</span><span class=w> </span><span class=n>Object</span><span class=o>[]</span><span class=w> </span><span class=n>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>elementData</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>offset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>elementData</span><span class=p>.</span><span class=na>length</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>modCount</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>expectedModCount</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>consumer</span><span class=p>.</span><span class=na>accept</span><span class=p>((</span><span class=n>E</span><span class=p>)</span><span class=w> </span><span class=n>elementData</span><span class=o>[</span><span class=n>offset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=o>]</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=c1>// update once at end of iteration to reduce heap write traffic  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>lastRet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cursor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kd>public</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nf>nextIndex</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=n>cursor</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kd>public</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nf>previousIndex</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=n>cursor</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>remove</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>lastRet</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IllegalStateException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>SubList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>remove</span><span class=p>(</span><span class=n>lastRet</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>cursor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>lastRet</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>lastRet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>-</span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>expectedModCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>IndexOutOfBoundsException</span><span class=w> </span><span class=n>ex</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>set</span><span class=p>(</span><span class=n>E</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>lastRet</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IllegalStateException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>offset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>lastRet</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>IndexOutOfBoundsException</span><span class=w> </span><span class=n>ex</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>add</span><span class=p>(</span><span class=n>E</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cursor</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>SubList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>cursor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>lastRet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>-</span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>expectedModCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>IndexOutOfBoundsException</span><span class=w> </span><span class=n>ex</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=kd>final</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>checkForComodification</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>expectedModCount</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>modCount</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>};</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=nf>subList</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>fromIndex</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>toIndex</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>subListRangeCheck</span><span class=p>(</span><span class=n>fromIndex</span><span class=p>,</span><span class=w> </span><span class=n>toIndex</span><span class=p>,</span><span class=w> </span><span class=n>size</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>SubList</span><span class=p>(</span><span class=k>this</span><span class=p>,</span><span class=w> </span><span class=n>offset</span><span class=p>,</span><span class=w> </span><span class=n>fromIndex</span><span class=p>,</span><span class=w> </span><span class=n>toIndex</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>rangeCheck</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>index</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>0</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>size</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IndexOutOfBoundsException</span><span class=p>(</span><span class=n>outOfBoundsMsg</span><span class=p>(</span><span class=n>index</span><span class=p>));</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>rangeCheckForAdd</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>index</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>0</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>size</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IndexOutOfBoundsException</span><span class=p>(</span><span class=n>outOfBoundsMsg</span><span class=p>(</span><span class=n>index</span><span class=p>));</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>outOfBoundsMsg</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=s>&#34;Index: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;, Size: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>size</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>checkForComodification</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>.</span><span class=na>modCount</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>modCount</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>Spliterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=nf>spliterator</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>checkForComodification</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayListSpliterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=p>(</span><span class=n>ArrayList</span><span class=p>.</span><span class=na>this</span><span class=p>,</span><span class=w> </span><span class=n>offset</span><span class=p>,</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>offset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>size</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>modCount</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>forEach</span><span class=p>(</span><span class=n>Consumer</span><span class=o>&lt;?</span><span class=w> </span><span class=kd>super</span><span class=w> </span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Objects</span><span class=p>.</span><span class=na>requireNonNull</span><span class=p>(</span><span class=n>action</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>expectedModCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nd>@SuppressWarnings</span><span class=p>(</span><span class=s>&#34;unchecked&#34;</span><span class=p>)</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>E</span><span class=o>[]</span><span class=w> </span><span class=n>elementData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>E</span><span class=o>[]</span><span class=p>)</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>elementData</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>size</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>modCount</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>expectedModCount</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>action</span><span class=p>.</span><span class=na>accept</span><span class=p>(</span><span class=n>elementData</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>modCount</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>expectedModCount</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Creates a &lt;em&gt;&lt;a href=&#34;Spliterator.html#binding&#34;&gt;late-binding&lt;/a&gt;&lt;/em&gt;  
</span></span></span><span class=line><span class=cl><span class=cm>     * and &lt;em&gt;fail-fast&lt;/em&gt; {@link Spliterator} over the elements in this  
</span></span></span><span class=line><span class=cl><span class=cm>     * list.     *     * &lt;p&gt;The {@code Spliterator} reports {@link Spliterator#SIZED},  
</span></span></span><span class=line><span class=cl><span class=cm>     * {@link Spliterator#SUBSIZED}, and {@link Spliterator#ORDERED}.  
</span></span></span><span class=line><span class=cl><span class=cm>     * Overriding implementations should document the reporting of additional     * characteristic values.     *     * @return a {@code Spliterator} over the elements in this list  
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8  
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>    </span><span class=nd>@Override</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Spliterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=nf>spliterator</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayListSpliterator</span><span class=o>&lt;&gt;</span><span class=p>(</span><span class=k>this</span><span class=p>,</span><span class=w> </span><span class=n>0</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>0</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>     * Index-based split-by-two, lazily initialized Spliterator     */</span><span class=w>    </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=kd>class</span> <span class=nc>ArrayListSpliterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Spliterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=cm>/*  
</span></span></span><span class=line><span class=cl><span class=cm>         * If ArrayLists were immutable, or structurally immutable (no         * adds, removes, etc), we could implement their spliterators         * with Arrays.spliterator. Instead we detect as much         * interference during traversal as practical without         * sacrificing much performance. We rely primarily on         * modCounts. These are not guaranteed to detect concurrency         * violations, and are sometimes overly conservative about         * within-thread interference, but detect enough problems to         * be worthwhile in practice. To carry this out, we (1) lazily         * initialize fence and expectedModCount until the latest         * point that we need to commit to the state we are checking         * against; thus improving precision.  (This doesn&#39;t apply to         * SubLists, that create spliterators with current non-lazy         * values).  (2) We perform only a single         * ConcurrentModificationException check at the end of forEach         * (the most performance-sensitive method). When using forEach         * (as opposed to iterators), we can normally only detect         * interference after actions, not before. Further         * CME-triggering checks apply to all other possible         * violations of assumptions for example null or too-small         * elementData array given its size(), that could only have         * occurred due to interference.  This allows the inner loop         * of forEach to run without any further checks, and         * simplifies lambda-resolution. While this does entail a         * number of checks, note that in the common case of         * list.stream().forEach(a), no checks or other computation         * occur anywhere other than inside forEach itself.  The other         * less-often-used methods cannot take advantage of most of         * these streamlinings.         */</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>list</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=p>;</span><span class=w> </span><span class=c1>// current index, modified on advance/split  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>fence</span><span class=p>;</span><span class=w> </span><span class=c1>// -1 until used; then one past last index  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>expectedModCount</span><span class=p>;</span><span class=w> </span><span class=c1>// initialized when fence set  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm>         * Create new spliterator covering the given  range         */</span><span class=w>        </span><span class=n>ArrayListSpliterator</span><span class=p>(</span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>list</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>origin</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>fence</span><span class=p>,</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                             </span><span class=kt>int</span><span class=w> </span><span class=n>expectedModCount</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>list</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>list</span><span class=p>;</span><span class=w> </span><span class=c1>// OK if null unless traversed  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>index</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>origin</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>fence</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fence</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>expectedModCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>expectedModCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nf>getFence</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=c1>// initialize fence to size on first use  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>hi</span><span class=p>;</span><span class=w> </span><span class=c1>// (a specialized variant appears in method forEach)  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>lst</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>((</span><span class=n>hi</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fence</span><span class=p>)</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>((</span><span class=n>lst</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>list</span><span class=p>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>hi</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fence</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>expectedModCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>lst</span><span class=p>.</span><span class=na>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>hi</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fence</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>lst</span><span class=p>.</span><span class=na>size</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>hi</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>ArrayListSpliterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=nf>trySplit</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>hi</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getFence</span><span class=p>(),</span><span class=w> </span><span class=n>lo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>index</span><span class=p>,</span><span class=w> </span><span class=n>mid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>lo</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>hi</span><span class=p>)</span><span class=w> </span><span class=o>&gt;&gt;&gt;</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=n>lo</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>mid</span><span class=p>)</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=kc>null</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=c1>// divide range in half unless too small  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>new</span><span class=w> </span><span class=n>ArrayListSpliterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=p>(</span><span class=n>list</span><span class=p>,</span><span class=w> </span><span class=n>lo</span><span class=p>,</span><span class=w> </span><span class=n>index</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mid</span><span class=p>,</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                            </span><span class=n>expectedModCount</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>tryAdvance</span><span class=p>(</span><span class=n>Consumer</span><span class=o>&lt;?</span><span class=w> </span><span class=kd>super</span><span class=w> </span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>action</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>NullPointerException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>hi</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getFence</span><span class=p>(),</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>index</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>hi</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>index</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nd>@SuppressWarnings</span><span class=p>(</span><span class=s>&#34;unchecked&#34;</span><span class=p>)</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>E</span><span class=p>)</span><span class=w> </span><span class=n>list</span><span class=p>.</span><span class=na>elementData</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>action</span><span class=p>.</span><span class=na>accept</span><span class=p>(</span><span class=n>e</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>list</span><span class=p>.</span><span class=na>modCount</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>expectedModCount</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>            </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=kc>false</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>forEachRemaining</span><span class=p>(</span><span class=n>Consumer</span><span class=o>&lt;?</span><span class=w> </span><span class=kd>super</span><span class=w> </span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>hi</span><span class=p>,</span><span class=w> </span><span class=n>mc</span><span class=p>;</span><span class=w> </span><span class=c1>// hoist accesses and checks from loop  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>lst</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Object</span><span class=o>[]</span><span class=w> </span><span class=n>a</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>action</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>NullPointerException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>((</span><span class=n>lst</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>list</span><span class=p>)</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=p>(</span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>lst</span><span class=p>.</span><span class=na>elementData</span><span class=p>)</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>((</span><span class=n>hi</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fence</span><span class=p>)</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>mc</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>lst</span><span class=p>.</span><span class=na>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>hi</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>lst</span><span class=p>.</span><span class=na>size</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>mc</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>expectedModCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>((</span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>index</span><span class=p>)</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>0</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=p>(</span><span class=n>index</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>hi</span><span class=p>)</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=na>length</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>for</span><span class=w> </span><span class=p>(;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>hi</span><span class=p>;</span><span class=w> </span><span class=o>++</span><span class=n>i</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=nd>@SuppressWarnings</span><span class=p>(</span><span class=s>&#34;unchecked&#34;</span><span class=p>)</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>E</span><span class=p>)</span><span class=w> </span><span class=n>a</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>action</span><span class=p>.</span><span class=na>accept</span><span class=p>(</span><span class=n>e</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>lst</span><span class=p>.</span><span class=na>modCount</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>mc</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>return</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=nf>estimateSize</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=kt>long</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>getFence</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>index</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nf>characteristics</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>Spliterator</span><span class=p>.</span><span class=na>ORDERED</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>Spliterator</span><span class=p>.</span><span class=na>SIZED</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>Spliterator</span><span class=p>.</span><span class=na>SUBSIZED</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>removeIf</span><span class=p>(</span><span class=n>Predicate</span><span class=o>&lt;?</span><span class=w> </span><span class=kd>super</span><span class=w> </span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>filter</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Objects</span><span class=p>.</span><span class=na>requireNonNull</span><span class=p>(</span><span class=n>filter</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// figure out which elements are to be removed  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// any exception thrown from the filter predicate at this stage        // will leave the collection unmodified        int removeCount = 0;  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>final</span><span class=w> </span><span class=n>BitSet</span><span class=w> </span><span class=n>removeSet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BitSet</span><span class=p>(</span><span class=n>size</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>expectedModCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>size</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>modCount</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>expectedModCount</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nd>@SuppressWarnings</span><span class=p>(</span><span class=s>&#34;unchecked&#34;</span><span class=p>)</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>E</span><span class=w> </span><span class=n>element</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>E</span><span class=p>)</span><span class=w> </span><span class=n>elementData</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>filter</span><span class=p>.</span><span class=na>test</span><span class=p>(</span><span class=n>element</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>removeSet</span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>i</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>removeCount</span><span class=o>++</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>modCount</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>expectedModCount</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// shift surviving elements left over the spaces left by removed elements  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>final</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=n>anyToRemove</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>removeCount</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>anyToRemove</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>newSize</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>removeCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>,</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>size</span><span class=p>)</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=p>(</span><span class=n>j</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>newSize</span><span class=p>);</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>,</span><span class=w> </span><span class=n>j</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>removeSet</span><span class=p>.</span><span class=na>nextClearBit</span><span class=p>(</span><span class=n>i</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>elementData</span><span class=o>[</span><span class=n>j</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>elementData</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>newSize</span><span class=p>;</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w> </span><span class=n>k</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>elementData</span><span class=o>[</span><span class=n>k</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>  </span><span class=c1>// Let gc do its work  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>newSize</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>modCount</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>expectedModCount</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>modCount</span><span class=o>++</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>anyToRemove</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@SuppressWarnings</span><span class=p>(</span><span class=s>&#34;unchecked&#34;</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>replaceAll</span><span class=p>(</span><span class=n>UnaryOperator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>operator</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Objects</span><span class=p>.</span><span class=na>requireNonNull</span><span class=p>(</span><span class=n>operator</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>expectedModCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>size</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>modCount</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>expectedModCount</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>size</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>elementData</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>operator</span><span class=p>.</span><span class=na>apply</span><span class=p>((</span><span class=n>E</span><span class=p>)</span><span class=w> </span><span class=n>elementData</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>modCount</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>expectedModCount</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>modCount</span><span class=o>++</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@SuppressWarnings</span><span class=p>(</span><span class=s>&#34;unchecked&#34;</span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>sort</span><span class=p>(</span><span class=n>Comparator</span><span class=o>&lt;?</span><span class=w> </span><span class=kd>super</span><span class=w> </span><span class=n>E</span><span class=o>&gt;</span><span class=w> </span><span class=n>c</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>expectedModCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>modCount</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Arrays</span><span class=p>.</span><span class=na>sort</span><span class=p>((</span><span class=n>E</span><span class=o>[]</span><span class=p>)</span><span class=w> </span><span class=n>elementData</span><span class=p>,</span><span class=w> </span><span class=n>0</span><span class=p>,</span><span class=w> </span><span class=n>size</span><span class=p>,</span><span class=w> </span><span class=n>c</span><span class=p>);</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>modCount</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>expectedModCount</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcurrentModificationException</span><span class=p>();</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>modCount</span><span class=o>++</span><span class=p>;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></div><h1 id=扩容分析><a href=#扩容分析 class=anchor-link><svg viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>扩容分析</h1></div><ul class=post-copyright><li class="copyright-item author"><span class=copyright-item-text>作者</span>：<a href=http://www.mujaspace.com/ class="p-author h-card" target=_blank rel=noopener>muja</a></li><li class="copyright-item link"><span class=copyright-item-text>链接</span>：<a href=/tech/2023/arraylist%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/ target=_blank rel=noopener>https://www.mujaspace.com/tech/2023/arraylist源码解析/</a></li><li class="copyright-item license"><span class=copyright-item-text>许可</span>：<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel=noopener>CC BY-NC-SA 4.0</a></li></ul></article><div class=updated-badge-container><span title="Updated @ 2024-09-19 11:48:02 UTC" style=cursor:help><svg width="130" height="20" class="updated-badge"><linearGradient id="b" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><clipPath id="a"><rect width="130" height="20" rx="3" fill="#fff"/></clipPath><g clip-path="url(#a)"><path class="updated-badge-left" d="M0 0h55v20H0z"/><path class="updated-badge-right" d="M55 0h75v20H55z"/><path fill="url(#b)" d="M0 0h130v20H0z"/></g><g fill="#fff" text-anchor="middle" font-size="110"><text x="285" y="150" fill="#010101" fill-opacity=".3" textLength="450" transform="scale(.1)">updated</text><text x="285" y="140" textLength="450" transform="scale(.1)">updated</text><text x="915" y="150" fill="#010101" fill-opacity=".3" textLength="650" transform="scale(.1)">2024-09-19</text><text x="915" y="140" textLength="650" transform="scale(.1)">2024-09-19</text></g></svg></span></div><div class=post-share><div class=share-items><div class="share-item twitter"><a href="https://twitter.com/share?url=https://www.mujaspace.com/tech/2023/arraylist%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/&amp;text=ArrayList%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90%20building&amp;hashtags=Tech,&amp;via=minimuaaa" title=分享到「Twitter」 target=_blank rel=noopener><svg viewBox="0 0 512 512" class="icon twitter-icon"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></a></div><div class="share-item facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=https://www.mujaspace.com/tech/2023/arraylist%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/&amp;hashtag=%23Tech" title=分享到「Facebook」 target=_blank rel=noopener><svg viewBox="0 0 512 512" class="icon facebook-icon"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg></a></div><div class="share-item linkedin"><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.mujaspace.com/tech/2023/arraylist%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/&amp;title=ArrayList%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90%20building&amp;summary=%e7%ae%80%e4%bb%8b%20ArrayList%e7%bb%a7%e6%89%bf%e4%ba%8e%c2%a0AbstractList%c2%a0%e7%b1%bb%ef%bc%8c%e5%ae%9e%e7%8e%b0%e4%ba%86%c2%a0List,%c2%a0RandomAccess,%c2%a0Cloneable,%c2%a0java.io.Serializable%c2%a0%e8%bf%99%e4%ba%9b%e6%8e%a5%e5%8f%a3%e3%80%82%0aList%ef%bc%9a%e8%a1%a8%e6%98%8e%e6%98%af%e4%b8%80%e4%b8%aa%e5%88%97%e8%a1%a8%ef%bc%8c%e6%94%af%e6%8c%81%e6%b7%bb%e5%8a%a0%e3%80%81%e5%88%a0%e9%99%a4%e3%80%81%e6%9f%a5%e6%89%be%e7%ad%89%e6%93%8d%e4%bd%9c%ef%bc%8c%e5%b9%b6%e4%b8%94%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e4%b8%8b%e6%a0%87%e8%bf%9b%e8%a1%8c%e8%ae%bf%e9%97%ae%e3%80%82%20RandomAccess%ef%bc%9a%e6%98%af%e4%b8%80%e4%b8%aa%e6%a0%87%e5%bf%97%e6%8e%a5%e5%8f%a3%ef%bc%8c%e8%a1%a8%e6%98%8e%e5%ae%9e%e7%8e%b0%e8%bf%99%e4%b8%aa%e8%bf%99%e4%b8%aa%e6%8e%a5%e5%8f%a3%e7%9a%84%20List%20%e9%9b%86%e5%90%88%e6%98%af%e6%94%af%e6%8c%81%e5%bf%ab%e9%80%9f%e9%9a%8f%e6%9c%ba%e8%ae%bf%e9%97%ae%e7%9a%84%e3%80%82%e5%9c%a8%c2%a0ArrayList%c2%a0%e4%b8%ad%ef%bc%8c%e6%88%91%e4%bb%ac%e5%8d%b3%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e5%85%83%e7%b4%a0%e7%9a%84%e5%ba%8f%e5%8f%b7%e5%bf%ab%e9%80%9f%e8%8e%b7%e5%8f%96%e5%85%83%e7%b4%a0%e5%af%b9%e8%b1%a1%ef%bc%8c%e8%bf%99%e5%b0%b1%e6%98%af%e5%bf%ab%e9%80%9f%e9%9a%8f%e6%9c%ba%e8%ae%bf%e9%97%ae%e3%80%82%20Cloneable%c2%a0%ef%bc%9a%e5%8d%b3%e8%a6%86%e7%9b%96%e4%ba%86%e5%87%bd%e6%95%b0clone%28%29%ef%bc%8c%e8%83%bd%e8%a2%ab%e5%85%8b%e9%9a%86%e3%80%82%20Serializable%ef%bc%9a%e8%bf%99%e6%84%8f%e5%91%b3%e7%9d%80ArrayList%e6%94%af%e6%8c%81%e5%ba%8f%e5%88%97%e5%8c%96%ef%bc%8c%e8%83%bd%e9%80%9a%e8%bf%87%e5%ba%8f%e5%88%97%e5%8c%96%e5%8e%bb%e4%bc%a0%e8%be%93%e3%80%82%201%202%203%20public%20class%20ArrayList%3cE%3e%20extends%20AbstractList%3cE%3e%20implements%20List%3cE%3e,%20RandomAccess,%20Cloneable,%20java.io.Serializable%20%7b%7d%20%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90%201%202%203%204%205%206%207%208%209%2010%2011%2012%2013%2014%2015%2016%2017%2018%2019%2020%2021%2022%2023%2024%2025%2026%2027%2028%2029%2030%2031%2032%2033%2034%2035%2036%2037%2038%2039%2040%2041%2042%2043%2044%2045%2046%2047%2048%2049%2050%2051%2052%2053%2054%2055%2056%2057%2058%2059%2060%2061%2062%2063%2064%2065%2066%2067%2068%2069%2070%2071%2072%2073%2074%2075%2076%2077%2078%2079%2080%2081%2082%2083%2084%2085%2086%2087%2088%2089%2090%2091%2092%2093%2094%2095%2096%2097%2098%2099%20100%20101%20102%20103%20104%20105%20106%20107%20108%20109%20110%20111%20112%20113%20114%20115%20116%20117%20118%20119%20120%20121%20122%20123%20124%20125%20126%20127%20128%20129%20130%20131%20132%20133%20134%20135%20136%20137%20138%20139%20140%20141%20142%20143%20144%20145%20146%20147%20148%20149%20150%20151%20152%20153%20154%20155%20156%20157%20158%20159%20160%20161%20162%20163%20164%20165%20166%20167%20168%20169%20170%20171%20172%20173%20174%20175%20176%20177%20178%20179%20180%20181%20182%20183%20184%20185%20186%20187%20188%20189%20190%20191%20192%20193%20194%20195%20196%20197%20198%20199%20200%20201%20202%20203%20204%20205%20206%20207%20208%20209%20210%20211%20212%20213%20214%20215%20216%20217%20218%20219%20220%20221%20222%20223%20224%20225%20226%20227%20228%20229%20230%20231%20232%20233%20234%20235%20236%20237%20238%20239%20240%20241%20242%20243%20244%20245%20246%20247%20248%20249%20250%20251%20252%20253%20254%20255%20256%20257%20258%20259%20260%20261%20262%20263%20264%20265%20266%20267%20268%20269%20270%20271%20272%20273%20274%20275%20276%20277%20278%20279%20280%20281%20282%20283%20284%20285%20286%20287%20288%20289%20290%20291%20292%20293%20294%20295%20296%20297%20298%20299%20300%20301%20302%20303%20304%20305%20306%20307%20308%20309%20310%20311%20312%20313%20314%20315%20316%20317%20318%20319%20320%20321%20322%20323%20324%20325%20326%20327%20328%20329%20330%20331%20332%20333%20334%20335%20336%20337%20338%20339%20340%20341%20342%20343%20344%20345%20346%20347%20348%20349%20350%20351%20352%20353%20354%20355%20356%20357%20358%20359%20360%20361%20362%20363%20364%20365%20366%20367%20368%20369%20370%20371%20372%20373%20374%20375%20376%20377%20378%20379%20380%20381%20382%20383%20384%20385%20386%20387%20388%20389%20390%20391%20392%20393%20394%20395%20396%20397%20398%20399%20400%20401%20402%20403%20404%20405%20406%20407%20408%20409%20410%20411%20412%20413%20414%20415%20416%20417%20418%20419%20420%20421%20422%20423%20424%20425%20426%20427%20428%20429%20430%20431%20432%20433%20434%20435%20436%20437%20438%20439%20440%20441%20442%20443%20444%20445%20446%20447%20448%20449%20450%20451%20452%20453%20454%20455%20456%20457%20458%20459%20460%20461%20462%20463%20464%20465%20466%20467%20468%20469%20470%20471%20472%20473%20474%20475%20476%20477%20478%20479%20480%20481%20482%20483%20484%20485%20486%20487%20488%20489%20490%20491%20492%20493%20494%20495%20496%20497%20498%20499%20500%20501%20502%20503%20504%20505%20506%20507%20508%20509%20510%20511%20512%20513%20514%20515%20516%20517%20518%20519%20520%20521%20522%20523%20524%20525%20526%20527%20528%20529%20530%20531%20532%20533%20534%20535%20536%20537%20538%20539%20540%20541%20542%20543%20544%20545%20546%20547%20548%20549%20550%20551%20552%20553%20554%20555%20556%20557%20558%20559%20560%20561%20562%20563%20564%20565%20566%20567%20568%20569%20570%20571%20572%20573%20574%20575%20576%20577%20578%20579%20580%20581%20582%20583%20584%20585%20586%20587%20588%20589%20590%20591%20592%20593%20594%20595%20596%20597%20598%20599%20600%20601%20602%20603%20604%20605%20606%20607%20608%20609%20610%20611%20612%20613%20614%20615%20616%20617%20618%20619%20620%20621%20622%20623%20624%20625%20626%20627%20628%20629%20630%20631%20632%20633%20634%20635%20636%20637%20638%20639%20640%20641%20642%20643%20644%20645%20646%20647%20648%20649%20650%20651%20652%20653%20654%20655%20656%20657%20658%20659%20660%20661%20662%20663%20664%20665%20666%20667%20668%20669%20670%20671%20672%20673%20674%20675%20676%20677%20678%20679%20680%20681%20682%20683%20684%20685%20686%20687%20688%20689%20690%20691%20692%20693%20694%20695%20696%20697%20698%20699%20700%20701%20702%20703%20704%20705%20706%20707%20708%20709%20710%20711%20712%20713%20714%20715%20716%20717%20718%20719%20720%20721%20722%20723%20724%20725%20726%20727%20728%20729%20730%20731%20732%20733%20734%20735%20736%20737%20738%20739%20740%20741%20742%20743%20744%20745%20746%20747%20748%20749%20750%20751%20752%20753%20754%20755%20756%20757%20758%20759%20760%20761%20762%20763%20764%20765%20766%20767%20768%20769%20770%20771%20772%20773%20774%20775%20776%20777%20778%20779%20780%20781%20782%20783%20784%20785%20786%20787%20788%20789%20790%20791%20792%20793%20794%20795%20796%20797%20798%20799%20800%20801%20802%20803%20804%20805%20806%20807%20808%20809%20810%20811%20812%20813%20814%20815%20816%20817%20818%20819%20820%20821%20822%20823%20824%20825%20826%20827%20828%20829%20830%20831%20832%20833%20834%20835%20836%20837%20838%20839%20840%20841%20842%20843%20844%20845%20846%20847%20848%20849%20850%20851%20852%20853%20854%20855%20856%20857%20858%20859%20860%20861%20862%20863%20864%20865%20866%20867%20868%20869%20870%20871%20872%20873%20874%20875%20876%20877%20878%20879%20880%20881%20882%20883%20884%20885%20886%20887%20888%20889%20890%20891%20892%20893%20894%20895%20896%20897%20898%20899%20900%20901%20902%20903%20904%20905%20906%20907%20908%20909%20910%20911%20912%20913%20914%20915%20916%20917%20918%20919%20920%20921%20922%20923%20924%20925%20926%20927%20928%20929%20930%20931%20932%20933%20934%20935%20936%20937%20938%20939%20940%20941%20942%20943%20944%20945%20946%20947%20948%20949%20950%20951%20952%20953%20954%20955%20956%20957%20958%20959%20960%20961%20962%20963%20964%20965%20966%20967%20968%20969%20970%20971%20972%20973%20974%20975%20976%20977%20978%20979%20980%20981%20982%20983%20984%20985%20986%20987%20988%20989%20990%20991%20992%20993%20994%20995%20996%20997%20998%20999%201000%201001%201002%201003%201004%201005%201006%201007%201008%201009%201010%201011%201012%201013%201014%201015%201016%201017%201018%201019%201020%201021%201022%201023%201024%201025%201026%201027%201028%201029%201030%201031%201032%201033%201034%201035%201036%201037%201038%201039%201040%201041%201042%201043%201044%201045%201046%201047%201048%201049%201050%201051%201052%201053%201054%201055%201056%201057%201058%201059%201060%201061%201062%201063%201064%201065%201066%201067%201068%201069%201070%201071%201072%201073%201074%201075%201076%201077%201078%201079%201080%201081%201082%201083%201084%201085%201086%201087%201088%201089%201090%201091%201092%201093%201094%201095%201096%201097%201098%201099%201100%201101%201102%201103%201104%201105%201106%201107%201108%201109%201110%201111%201112%201113%201114%201115%201116%201117%201118%201119%201120%201121%201122%201123%201124%201125%201126%201127%201128%201129%201130%201131%201132%201133%201134%201135%201136%201137%201138%201139%201140%201141%201142%201143%201144%201145%201146%201147%201148%201149%201150%201151%201152%201153%201154%201155%201156%201157%201158%201159%201160%201161%201162%201163%201164%201165%201166%201167%201168%201169%201170%201171%201172%201173%201174%201175%201176%201177%201178%201179%201180%201181%201182%201183%201184%201185%20package%20java.util;%20import%20java.util.function.Consumer;%20import%20java.util.function.Predicate;%20import%20java.util.function.UnaryOperator;%20public%20class%20ArrayList%3cE%3e%20extends%20AbstractList%3cE%3e%20implements%20List%3cE%3e,%20RandomAccess,%20Cloneable,%20java.io.Serializable%20%7b%20private%20static%20final%20long%20serialVersionUID%20=%208683452581122892189L;%20/**%20*%20Default%20initial%20capacity.%20mjy%ef%bc%9a%e9%bb%98%e8%ae%a4%e5%88%9d%e5%a7%8b%e5%ae%b9%e9%87%8f%e5%a4%a7%e5%b0%8f%20*/%20private%20static%20final%20int%20DEFAULT_CAPACITY%20=%2010;%20/**%20*%20Shared%20empty%20array%20instance%20used%20for%20empty%20instances.%20mjy%ef%bc%9a%e7%a9%ba%e6%95%b0%e7%bb%84%ef%bc%88%e7%94%a8%e4%ba%8e%e7%a9%ba%e5%ae%9e%e4%be%8b%ef%bc%89%e3%80%82%20*/%20private%20static%20final%20Object[]%20EMPTY_ELEMENTDATA%20=%20%7b%7d;%20/**%20*%20Shared%20empty%20array%20instance%20used%20for%20default%20sized%20empty%20instances.%20We%20*%20distinguish%20this%20from%20EMPTY_ELEMENTDATA%20to%20know%20how%20much%20to%20inflate%20when%20*%20first%20element%20is%20added.%20*/%20//%20mjy%ef%bc%9a%e7%94%a8%e4%ba%8e%e9%bb%98%e8%ae%a4%e5%a4%a7%e5%b0%8f%e7%a9%ba%e5%ae%9e%e4%be%8b%e7%9a%84%e5%85%b1%e4%ba%ab%e7%a9%ba%e6%95%b0%e7%bb%84%e5%ae%9e%e4%be%8b%e3%80%82%e5%92%8cEMPTY_ELEMENTDATA%e6%95%b0%e7%bb%84%e5%8c%ba%e5%88%86%ef%bc%8c%e4%bb%a5%e7%9f%a5%e9%81%93%e5%9c%a8%e6%b7%bb%e5%8a%a0%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%e6%97%b6%e5%ae%b9%e9%87%8f%e9%9c%80%e8%a6%81%e5%a2%9e%e5%8a%a0%e5%a4%9a%e5%b0%91%e3%80%82%20private%20static%20final%20Object[]%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%20=%20%7b%7d;%20/**%20*%20The%20array%20buffer%20into%20which%20the%20elements%20of%20the%20ArrayList%20are%20stored.%20*%20The%20capacity%20of%20the%20ArrayList%20is%20the%20length%20of%20this%20array%20buffer.%20Any%20*%20empty%20ArrayList%20with%20elementData%20==%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%20*%20will%20be%20expanded%20to%20DEFAULT_CAPACITY%20when%20the%20first%20element%20is%20added.%20*/%20//%20mjy%ef%bc%9a%e5%ad%98%e5%82%a8ArrayList%e5%85%83%e7%b4%a0%e7%9a%84%e6%95%b0%e7%bb%84%e7%bc%93%e5%86%b2%e5%8c%ba%ef%bc%88%e5%b0%b1%e6%98%af%e4%bf%9d%e5%ad%98ArrayList%e6%95%b0%e6%8d%ae%e7%9a%84%e6%95%b0%e7%bb%84%ef%bc%89%e3%80%82ArrayList%e7%9a%84%e5%ae%b9%e9%87%8f%e6%98%af%e6%ad%a4%e6%95%b0%e7%bb%84%e7%bc%93%e5%86%b2%e5%8c%ba%e7%9a%84%e9%95%bf%e5%ba%a6%e3%80%82%e6%b7%bb%e5%8a%a0%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%e6%97%b6%ef%bc%8c%e4%bb%bb%e4%bd%95%e5%85%b7%e6%9c%89elementData==DEFAULTCAPACITY_EMMENTDATA%e7%9a%84%e7%a9%baArrayList%e9%83%bd%e5%b0%86%e6%89%a9%e5%b1%95%e4%b8%baDEFAULT_CAPACITY%e3%80%82%20transient%20Object[]%20elementData;%20//%20non-private%20to%20simplify%20nested%20class%20access%20/**%20*%20The%20size%20of%20the%20ArrayList%20%28the%20number%20of%20elements%20it%20contains%29.%20mjy%ef%bc%9a%e6%95%b0%e7%bb%84%e9%95%bf%e5%ba%a6%e5%a4%a7%e5%b0%8f%ef%bc%88%e5%85%83%e7%b4%a0%e4%b8%aa%e6%95%b0%ef%bc%89%20*%20*%20@serial%20*/%20private%20int%20size;%20/**%20*%20Constructs%20an%20empty%20list%20with%20the%20specified%20initial%20capacity.%20*%20*%20@param%20initialCapacity%20the%20initial%20capacity%20of%20the%20list%20*%20@throws%20IllegalArgumentException%20if%20the%20specified%20initial%20capacity%20*%20is%20negative%20*/%20//%20mjy%ef%bc%9a%e5%b8%a6%e5%88%9d%e5%a7%8b%e5%ae%b9%e9%87%8f%e5%8f%82%e6%95%b0%e7%9a%84%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%ef%bc%88%e7%94%a8%e6%88%b7%e5%8f%af%e4%bb%a5%e5%9c%a8%e5%88%9b%e5%bb%baArrayList%e5%af%b9%e8%b1%a1%e6%97%b6%e8%87%aa%e5%b7%b1%e6%8c%87%e5%ae%9a%e9%9b%86%e5%90%88%e7%9a%84%e5%88%9d%e5%a7%8b%e5%a4%a7%e5%b0%8f%ef%bc%89%20public%20ArrayList%28int%20initialCapacity%29%20%7b%20if%20%28initialCapacity%20%3e%200%29%20%7b%20//%20%e4%bc%a0%e5%85%a5%e7%9a%84%e5%8f%82%e6%95%b0%e5%a4%a7%e4%ba%8e0%ef%bc%8c%e5%88%9b%e5%bb%bainitialCapacity%e5%a4%a7%e5%b0%8f%e7%9a%84%e6%95%b0%e7%bb%84%20this.elementData%20=%20new%20Object[initialCapacity];%20%7d%20else%20if%20%28initialCapacity%20==%200%29%20%7b%20//%20%e4%bc%a0%e5%85%a5%e7%9a%84%e5%8f%82%e6%95%b0%e7%ad%89%e4%ba%8e0%ef%bc%8c%e5%88%9b%e5%bb%ba%e7%a9%ba%e6%95%b0%e7%bb%84%20this.elementData%20=%20EMPTY_ELEMENTDATA;%20%7d%20else%20%7b%20//%20%e5%85%b6%e4%bb%96%e6%83%85%e5%86%b5%e5%bc%82%e5%b8%b8%20throw%20new%20IllegalArgumentException%28%22Illegal%20Capacity:%20%22%20+%20initialCapacity%29;%20%7d%20%7d%20/**%20*%20Constructs%20an%20empty%20list%20with%20an%20initial%20capacity%20of%20ten.%20*/%20//%20mjy%ef%bc%9a%e9%bb%98%e8%ae%a4%e6%97%a0%e5%8f%82%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%e4%b8%ba0%e3%80%82%e5%88%9d%e5%a7%8b%e5%85%b6%e5%ae%9e%e6%98%af%e7%a9%ba%e6%95%b0%e7%bb%84%ef%bc%8c%e5%bd%93%e6%b7%bb%e5%8a%a0%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%e7%9a%84%e6%97%b6%e5%80%99%e6%95%b0%e7%bb%84%e5%ae%b9%e9%87%8f%e6%89%8d%e5%8f%98%e6%88%9010%20public%20ArrayList%28%29%20%7b%20this.elementData%20=%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA;%20%7d%20/**%20*%20Constructs%20a%20list%20containing%20the%20elements%20of%20the%20specified%20*%20collection,%20in%20the%20order%20they%20are%20returned%20by%20the%20collection%27s%20*%20iterator.%20*%20*%20@param%20c%20the%20collection%20whose%20elements%20are%20to%20be%20placed%20into%20this%20list%20*%20@throws%20NullPointerException%20if%20the%20specified%20collection%20is%20null%20*/%20//%20mjy%ef%bc%9a%e6%9e%84%e9%80%a0%e4%b8%80%e4%b8%aa%e5%8c%85%e5%90%ab%e6%8c%87%e5%ae%9a%e9%9b%86%e5%90%88%e7%9a%84%e5%85%83%e7%b4%a0%e7%9a%84%e5%88%97%e8%a1%a8%ef%bc%8c%e6%8c%89%e7%85%a7%e5%ae%83%e4%bb%ac%e7%94%b1%e9%9b%86%e5%90%88%e7%9a%84%e8%bf%ad%e4%bb%a3%e5%99%a8%e8%bf%94%e5%9b%9e%e7%9a%84%e9%a1%ba%e5%ba%8f%e3%80%82%20new%20ArrayList%3c%3e%28paramList%29;%20public%20ArrayList%28Collection%3c?%20extends%20E%3e%20c%29%20%7b%20//%20%e5%b0%86%e5%8f%82%e6%95%b0%e8%bd%ac%e6%8d%a2%e4%b8%ba%e6%95%b0%e7%bb%84%20elementData%20=%20c.toArray%28%29;%20//%20elementData%e6%95%b0%e7%bb%84%e7%9a%84%e9%95%bf%e5%ba%a6%e4%b8%8d%e4%b8%ba0%20if%20%28%28size%20=%20elementData.length%29%20!=%200%29%20%7b%20//%20c.toArray%20might%20%28incorrectly%29%20not%20return%20Object[]%20%28see%206260652%29%20//%20mjy%ef%bc%9a%20elementData%e4%b8%8d%e6%98%afObject%e7%b1%bb%e5%9e%8b%e6%95%b0%e6%8d%ae%ef%bc%88c.toArray%e5%8f%af%e8%83%bd%e8%bf%94%e5%9b%9e%e7%9a%84%e4%b8%8d%e6%98%afObject%e7%b1%bb%e5%9e%8b%e7%9a%84%e6%95%b0%e7%bb%84%ef%bc%89%20if%20%28elementData.getClass%28%29%20!=%20Object[].class%29%20//%20mjy%ef%bc%9a%20%e5%b0%86%e5%8e%9f%e6%9d%a5%e4%b8%8d%e6%98%afObject%e7%b1%bb%e5%9e%8b%e7%9a%84elementData%e6%95%b0%e7%bb%84%e7%9a%84%e5%86%85%e5%ae%b9%ef%bc%8c%e8%b5%8b%e5%80%bc%e7%bb%99%e6%96%b0%e7%9a%84Object%e7%b1%bb%e5%9e%8b%e7%9a%84elementData%e6%95%b0%e7%bb%84%20elementData%20=%20Arrays.copyOf%28elementData,%20size,%20Object[].class%29;%20%7d%20else%20%7b%20//%20replace%20with%20empty%20array.%20mjy%ef%bc%9a%20elementData%e6%95%b0%e7%bb%84%e7%9a%84%e9%95%bf%e5%ba%a6%e4%b8%ba0%ef%bc%8c%e5%8d%b3%e4%b8%ba%e7%a9%ba%e6%95%b0%e7%bb%84%20this.elementData%20=%20EMPTY_ELEMENTDATA;%20%7d%20%7d%20/**%20*%20Trims%20the%20capacity%20of%20this%20%3ctt%3eArrayList%3c/tt%3e%20instance%20to%20be%20the%20*%20list%27s%20current%20size.%20An%20application%20can%20use%20this%20operation%20to%20minimize%20*%20the%20storage%20of%20an%20%3ctt%3eArrayList%3c/tt%3e%20instance.%20*/%20//%20mjy%ef%bc%9a%20%e4%bf%ae%e6%94%b9%e8%bf%99%e4%b8%aaArrayList%e5%ae%9e%e4%be%8b%e7%9a%84%e5%ae%b9%e9%87%8f%e6%98%af%e5%88%97%e8%a1%a8%e7%9a%84%e5%bd%93%e5%89%8d%e5%a4%a7%e5%b0%8f%e3%80%82%20%e5%8f%af%e4%bb%a5%e4%bd%bf%e7%94%a8%e6%ad%a4%e6%93%8d%e4%bd%9c%e6%9d%a5%e6%9c%80%e5%b0%8f%e5%8c%96ArrayList%e5%ae%9e%e4%be%8b%e7%9a%84%e5%ad%98%e5%82%a8%e3%80%82%20public%20void%20trimToSize%28%29%20%7b%20modCount++;%20if%20%28size%20%3c%20elementData.length%29%20%7b%20elementData%20=%20%28size%20==%200%29%20?%20EMPTY_ELEMENTDATA%20:%20Arrays.copyOf%28elementData,%20size%29;%20%7d%20%7d%20/**%20*%20Increases%20the%20capacity%20of%20this%20%3ctt%3eArrayList%3c/tt%3e%20instance,%20if%20*%20necessary,%20to%20ensure%20that%20it%20can%20hold%20at%20least%20the%20number%20of%20elements%20*%20specified%20by%20the%20minimum%20capacity%20argument.%20*%20mjy%ef%bc%9a%20%e5%a6%82%e6%9c%89%e5%bf%85%e8%a6%81%ef%bc%8c%e5%a2%9e%e5%8a%a0%e6%ad%a4ArrayList%e5%ae%9e%e4%be%8b%e7%9a%84%e5%ae%b9%e9%87%8f%ef%bc%8c%e4%bb%a5%e7%a1%ae%e4%bf%9d%e5%ae%83%e8%87%b3%e5%b0%91%e5%8f%af%e4%bb%a5%e5%ae%b9%e7%ba%b3%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e5%8f%82%e6%95%b0%e6%8c%87%e5%ae%9a%e7%9a%84%e5%85%83%e7%b4%a0%e6%95%b0%e9%87%8f%e3%80%82%20*%20*%20@param%20minCapacity%20the%20desired%20minimum%20capacity%20mjy%ef%bc%9a%e6%89%80%e9%9c%80%e7%9a%84%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%20*/%20public%20void%20ensureCapacity%28int%20minCapacity%29%20%7b%20//%20mjy%ef%bc%9a%20%28%e6%95%b0%e7%bb%84%e5%85%83%e7%b4%a0%e4%b8%8d%e4%b8%ba%e7%a9%ba%29%20%e5%a6%82%e6%9e%9c%e6%98%aftrue%ef%bc%8cminExpand%e7%9a%84%e5%80%bc%e4%b8%ba0%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%98%affalse,minExpand%e7%9a%84%e5%80%bc%e4%b8%ba10%20int%20minExpand%20=%20%28elementData%20!=%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%29%20//%20any%20size%20if%20not%20default%20element%20table%20?%200%20//%20larger%20than%20default%20for%20default%20empty%20table.%20It%27s%20already%20//%20supposed%20to%20be%20at%20default%20size.%20:%20DEFAULT_CAPACITY;%20//%20%e5%a6%82%e6%9e%9c%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e5%a4%a7%e4%ba%8e%e5%b7%b2%e6%9c%89%e7%9a%84%e6%9c%80%e5%a4%a7%e5%ae%b9%e9%87%8f%20if%20%28minCapacity%20%3e%20minExpand%29%20%7b%20ensureExplicitCapacity%28minCapacity%29;%20%7d%20%7d%20//%20mjy%ef%bc%9a%20%e7%a1%ae%e4%bf%9d%e5%86%85%e9%83%a8%e5%ae%b9%e9%87%8f%20private%20void%20ensureCapacityInternal%28int%20minCapacity%29%20%7b%20//%20mjy%ef%bc%9a%e5%a6%82%e6%9e%9c%e5%85%83%e7%b4%a0%e6%98%af%e7%a9%ba%20if%20%28elementData%20==%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%89%80%e9%9c%80%e8%a6%81%e7%9a%84%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e4%b8%ba%20%e9%bb%98%e8%ae%a4%e5%ae%b9%e9%87%8f%e5%92%8c%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e7%9b%b8%e6%af%94%20%e8%be%83%e5%a4%a7%e7%9a%84%e4%b8%80%e4%b8%aa%20minCapacity%20=%20Math.max%28DEFAULT_CAPACITY,%20minCapacity%29;%20%7d%20//%20%e7%a1%ae%e4%bf%9d%20%e5%ae%b9%e9%87%8f%20ensureExplicitCapacity%28minCapacity%29;%20%7d%20private%20void%20ensureExplicitCapacity%28int%20minCapacity%29%20%7b%20modCount++;%20//%20overflow-conscious%20code%20//%20mjy%ef%bc%9a%e6%89%80%e9%9c%80%e8%a6%81%e7%9a%84%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e5%87%8f%e5%8e%bb%e7%8e%b0%e5%9c%a8%e7%9a%84%e6%95%b0%e7%bb%84%e5%85%83%e7%b4%a0%e9%95%bf%e5%ba%a6%20%e5%a4%a7%e4%ba%8e0%20if%20%28minCapacity%20-%20elementData.length%20%3e%200%29%20//%20mjy%ef%bc%9a%e8%b0%83%e7%94%a8grow%e6%96%b9%e6%b3%95%e8%bf%9b%e8%a1%8c%e6%89%a9%e5%ae%b9%ef%bc%8c%e8%b0%83%e7%94%a8%e6%ad%a4%e6%96%b9%e6%b3%95%e4%bb%a3%e8%a1%a8%e5%b7%b2%e7%bb%8f%e5%bc%80%e5%a7%8b%e6%89%a9%e5%ae%b9%e4%ba%86%20grow%28minCapacity%29;%20%7d%20/**%20*%20The%20maximum%20size%20of%20array%20to%20allocate.%20*%20Some%20VMs%20reserve%20some%20header%20words%20in%20an%20array.%20*%20Attempts%20to%20allocate%20larger%20arrays%20may%20result%20in%20*%20OutOfMemoryError:%20Requested%20array%20size%20exceeds%20VM%20limit%20*%20mjy%ef%bc%9a%20%e6%98%afJVM%e8%83%bd%e5%88%86%e9%85%8d%e7%9a%84%e6%95%b0%e7%bb%84%e7%9a%84%e6%9c%80%e5%a4%a7%20%e5%a4%a7%e5%b0%8f%ef%bc%8c%e4%b8%80%e8%88%ac%e4%b8%baInteger.MAX_VALUE%20-%208%ef%bc%88%e8%bf%99%e5%92%8cJVM%e5%86%85%e9%83%a8%e5%ae%9e%e7%8e%b0%e6%9c%89%e5%85%b3%ef%bc%8c%e7%95%99%e5%87%ba%e4%ba%86%e4%b8%80%e4%ba%9b%e7%94%a8%e4%ba%8e%e5%af%b9%e8%b1%a1%e5%a4%b4%e4%bf%a1%e6%81%af%e7%9a%84%e7%a9%ba%e9%97%b4%ef%bc%89%e3%80%82%20*/%20private%20static%20final%20int%20MAX_ARRAY_SIZE%20=%20Integer.MAX_VALUE%20-%208;%20/**%20*%20Increases%20the%20capacity%20to%20ensure%20that%20it%20can%20hold%20at%20least%20the%20*%20number%20of%20elements%20specified%20by%20the%20minimum%20capacity%20argument.%20*%20mjy%ef%bc%9aArrayList%e6%89%a9%e5%ae%b9%e7%9a%84%e6%a0%b8%e5%bf%83%e6%96%b9%e6%b3%95%e3%80%82%20*%20*%20@param%20minCapacity%20the%20desired%20minimum%20capacity%20*/%20private%20void%20grow%28int%20minCapacity%29%20%7b%20//%20overflow-conscious%20code%20//%20mjy%ef%bc%9a%20%e8%a1%a8%e7%a4%ba%e5%bd%93%e5%89%8d%e6%95%b0%e7%bb%84%e7%9a%84%e5%ae%b9%e9%87%8f%ef%bc%88%e5%8d%b3%e5%bd%93%e5%89%8d%e5%ad%98%e5%82%a8%e5%85%83%e7%b4%a0%e7%9a%84%e6%95%b0%e7%bb%84%20elementData%20%e7%9a%84%e9%95%bf%e5%ba%a6%ef%bc%89%20int%20oldCapacity%20=%20elementData.length;%20//%20mjy%ef%bc%9a%e6%98%af%e6%96%b0%e7%9a%84%e6%95%b0%e7%bb%84%e5%ae%b9%e9%87%8f%ef%bc%8c%e8%ae%a1%e7%ae%97%e6%96%b9%e5%bc%8f%e6%98%af%e6%97%a7%e5%ae%b9%e9%87%8f%e7%9a%84%201.5%20%e5%80%8d%20%28oldCapacity%20+%20oldCapacity%20%3e%3e%201%ef%bc%8c%e5%8d%b3%e5%8f%b3%e7%a7%bb%e4%b8%80%e4%bd%8d%e8%a1%a8%e7%a4%ba%e9%99%a4%e4%bb%a52%29%e3%80%82%e9%80%9a%e8%bf%87%e8%bf%99%e7%a7%8d%e6%96%b9%e5%bc%8f%ef%bc%8cArrayList%20%e7%9a%84%e5%ae%b9%e9%87%8f%e4%bc%9a%e5%9c%a8%e9%9c%80%e8%a6%81%e6%97%b6%e4%bb%a5%e6%8c%87%e6%95%b0%e6%96%b9%e5%bc%8f%e5%a2%9e%e5%8a%a0%ef%bc%8c%e9%81%bf%e5%85%8d%e9%a2%91%e7%b9%81%e6%89%a9%e5%ae%b9%e3%80%82%20int%20newCapacity%20=%20oldCapacity%20+%20%28oldCapacity%20%3e%3e%201%29;%20//%20mjy%ef%bc%9aminCapacity%e6%98%af%e8%b0%83%e7%94%a8grow%e6%96%b9%e6%b3%95%e6%97%b6%e4%bc%a0%e5%85%a5%e7%9a%84%e5%8f%82%e6%95%b0%ef%bc%8c%e8%a1%a8%e7%a4%ba%e6%89%80%e9%9c%80%e7%9a%84%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e3%80%82%e5%a6%82%e6%9e%9c%e8%ae%a1%e7%ae%97%e5%87%ba%e7%9a%84newCapacity%e5%b0%8f%e4%ba%8eminCapacity%ef%bc%8c%e9%82%a3%e4%b9%88%e7%9b%b4%e6%8e%a5%e5%b0%86newCapacity%e8%ae%be%e7%bd%ae%e4%b8%baminCapacity%ef%bc%8c%e7%a1%ae%e4%bf%9d%e6%96%b0%e5%ae%b9%e9%87%8f%e8%87%b3%e5%b0%91%e8%83%bd%e6%bb%a1%e8%b6%b3%e5%bd%93%e5%89%8d%e6%89%80%e9%9c%80%e7%9a%84%e7%a9%ba%e9%97%b4%e3%80%82%20if%20%28newCapacity%20-%20minCapacity%20%3c%200%29%20newCapacity%20=%20minCapacity;%20//%20mjy%ef%bc%9a%e5%a6%82%e6%9e%9cnewCapacity%e8%b6%85%e8%bf%87%e4%ba%86MAX_ARRAY_SIZE%ef%bc%8c%e8%b0%83%e7%94%a8%20hugeCapacity%28minCapacity%29%20%e6%96%b9%e6%b3%95%e6%9d%a5%e5%86%b3%e5%ae%9a%e5%ae%9e%e9%99%85%e7%9a%84%e5%ae%b9%e9%87%8f%e3%80%82%20if%20%28newCapacity%20-%20MAX_ARRAY_SIZE%20%3e%200%29%20newCapacity%20=%20hugeCapacity%28minCapacity%29;%20//%20minCapacity%20is%20usually%20close%20to%20size,%20so%20this%20is%20a%20win:%20//%20mjy%ef%bc%9a%e8%b0%83%e7%94%a8Arrays.copyOf%e6%96%b9%e6%b3%95%e5%b0%86%e7%8e%b0%e6%9c%89%e7%9a%84%e6%95%b0%e7%bb%84elementData%e5%a4%8d%e5%88%b6%e5%88%b0%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84%e6%95%b0%e7%bb%84%e4%b8%ad%ef%bc%8c%e6%96%b0%e6%95%b0%e7%bb%84%e7%9a%84%e9%95%bf%e5%ba%a6%e4%b8%ba%20newCapacity%ef%bc%8c%e5%ae%9e%e7%8e%b0%e4%ba%86%e6%95%b0%e7%bb%84%e7%9a%84%e6%89%a9%e5%ae%b9%e3%80%82%e8%bf%99%e4%b8%aa%e8%bf%87%e7%a8%8b%e4%bc%9a%e4%bf%9d%e7%95%99%e5%8e%9f%e6%95%b0%e7%bb%84%e4%b8%ad%e7%9a%84%e6%89%80%e6%9c%89%e5%85%83%e7%b4%a0%ef%bc%8c%e4%bd%86%e5%ba%95%e5%b1%82%e7%9a%84%e5%ad%98%e5%82%a8%e7%a9%ba%e9%97%b4%e5%b7%b2%e7%bb%8f%e6%89%a9%e5%b1%95%e3%80%82%20elementData%20=%20Arrays.copyOf%28elementData,%20newCapacity%29;%20%7d%20//%20mjy%ef%bc%9a%20%e5%a4%84%e7%90%86%e5%8f%af%e8%83%bd%e8%b6%85%e8%bf%87%e6%9c%80%e5%a4%a7%e6%95%b0%e7%bb%84%e5%a4%a7%e5%b0%8f%e7%9a%84%e6%83%85%e5%86%b5%20private%20static%20int%20hugeCapacity%28int%20minCapacity%29%20%7b%20//%20mjy%ef%bc%9a%20%e5%a6%82%e6%9e%9cminCapacity%e4%b8%ba%e8%b4%9f%e6%95%b0%ef%bc%8c%e6%84%8f%e5%91%b3%e7%9d%80%e5%8f%91%e7%94%9f%e4%ba%86%e5%ae%b9%e9%87%8f%e6%ba%a2%e5%87%ba%ef%bc%88%e4%be%8b%e5%a6%82%ef%bc%8c%e5%ae%b9%e9%87%8f%e8%ae%a1%e7%ae%97%e6%ba%a2%e5%87%ba%e4%ba%86Integer%e7%9a%84%e8%8c%83%e5%9b%b4%ef%bc%89%ef%bc%8c%e6%ad%a4%e6%97%b6%e6%8a%9b%e5%87%ba%20OutOfMemoryError%20if%20%28minCapacity%20%3c%200%29%20//%20overflow%20throw%20new%20OutOfMemoryError%28%29;%20//%20mjy%ef%bc%9a%e5%a6%82%e6%9e%9cminCapacity%e8%b6%85%e8%bf%87%e4%ba%86MAX_ARRAY_SIZE%ef%bc%8c%e8%bf%94%e5%9b%9eInteger.MAX_VALUE%ef%bc%8c%e5%8d%b3%e6%95%b0%e7%bb%84%e4%bc%9a%e6%89%a9%e5%b1%95%e5%88%b0%20JVM%20%e5%8f%af%e4%bb%a5%e6%94%af%e6%8c%81%e7%9a%84%e6%9c%80%e5%a4%a7%e5%80%bc%e3%80%82%e5%90%a6%e5%88%99%e5%8d%b3minCapacity%e5%b0%8f%e4%ba%8eMAX_ARRAY_SIZE%ef%bc%8c%e4%bd%86%e4%bb%8d%e7%84%b6%e8%b6%85%e5%87%ba%e4%ba%86%e5%90%88%e7%90%86%e8%8c%83%e5%9b%b4%ef%bc%8c%e5%88%99%e8%bf%94%e5%9b%9e%20MAX_ARRAY_SIZE%e3%80%82%20return%20%28minCapacity%20%3e%20MAX_ARRAY_SIZE%29%20?%20Integer.MAX_VALUE%20:%20MAX_ARRAY_SIZE;%20%7d%20/**%20*%20Returns%20the%20number%20of%20elements%20in%20this%20list.%20*%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e7%9a%84%e5%85%83%e7%b4%a0%e6%95%b0%20*%20*%20@return%20the%20number%20of%20elements%20in%20this%20list%20*/%20public%20int%20size%28%29%20%7b%20return%20size;%20%7d%20/**%20*%20Returns%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contains%20no%20elements.%20*%20mjy%ef%bc%9a%20%e5%88%a4%e6%96%ad%e6%98%af%e5%90%a6%e4%b8%ba%e7%a9%ba%20%e5%a6%82%e6%9e%9c%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e8%bf%94%e5%9b%9e%20true%20*%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contains%20no%20elements%20*/%20public%20boolean%20isEmpty%28%29%20%7b%20return%20size%20==%200;%20%7d%20/**%20*%20Returns%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contains%20the%20specified%20element.%20*%20More%20formally,%20returns%20%3ctt%3etrue%3c/tt%3e%20if%20and%20only%20if%20this%20list%20contains%20*%20at%20least%20one%20element%20%3ctt%3ee%3c/tt%3e%20such%20that%20*%20%3ctt%3e%28o==null&amp;nbsp;?&amp;nbsp;e==null&amp;nbsp;:&amp;nbsp;o.equals%28e%29%29%3c/tt%3e.%20*%20*%20@param%20o%20element%20whose%20presence%20in%20this%20list%20is%20to%20be%20tested%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contains%20the%20specified%20element%20*/%20//%20mjy%ef%bc%9a%20%e5%88%a4%e6%96%ad%e6%98%af%e5%90%a6%e5%8c%85%e5%90%ab%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%ef%bc%8c%e5%8c%85%e5%90%ab%e8%bf%94%e5%9b%9etrue%20public%20boolean%20contains%28Object%20o%29%20%7b%20//%20mjy%ef%bc%9a%20indexOf%28%29%e6%96%b9%e6%b3%95%ef%bc%9a%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%e7%9a%84%e9%a6%96%e6%ac%a1%e5%87%ba%e7%8e%b0%e7%9a%84%e7%b4%a2%e5%bc%95%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e6%ad%a4%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e4%b8%ba-1%20return%20indexOf%28o%29%20%3e=%200;%20%7d%20/**%20*%20Returns%20the%20index%20of%20the%20first%20occurrence%20of%20the%20specified%20element%20*%20in%20this%20list,%20or%20-1%20if%20this%20list%20does%20not%20contain%20the%20element.%20*%20More%20formally,%20returns%20the%20lowest%20index%20%3ctt%3ei%3c/tt%3e%20such%20that%20*%20%3ctt%3e%28o==null&amp;nbsp;?&amp;nbsp;get%28i%29==null&amp;nbsp;:&amp;nbsp;o.equals%28get%28i%29%29%29%3c/tt%3e,%20*%20or%20-1%20if%20there%20is%20no%20such%20index.%20*/%20//%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%e7%9a%84%e9%a6%96%e6%ac%a1%e5%87%ba%e7%8e%b0%e7%9a%84%e7%b4%a2%e5%bc%95%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e6%ad%a4%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e4%b8%ba-1%20public%20int%20indexOf%28Object%20o%29%20%7b%20//%20mjy%ef%bc%9a%20%e5%85%a5%e5%8f%82%e5%85%83%e7%b4%a0%e4%b8%ba%e7%a9%ba%20if%20%28o%20==%20null%29%20%7b%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20//%20mjy%ef%bc%9a%20%e5%88%a4%e6%96%ad%e6%98%af%e5%90%a6%e5%ad%98%e5%9c%a8%e7%a9%ba%e5%85%83%e7%b4%a0%20if%20%28elementData[i]%20==%20null%29%20return%20i;%20%7d%20else%20%7b%20//%20%e4%b8%8d%e4%b8%ba%e7%a9%ba%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20//%20mjy%ef%bc%9a%20equals%28%29%e6%96%b9%e6%b3%95%e6%af%94%e8%be%83%20if%20%28o.equals%28elementData[i]%29%29%20return%20i;%20%7d%20return%20-1;%20%7d%20/**%20*%20Returns%20the%20index%20of%20the%20last%20occurrence%20of%20the%20specified%20element%20*%20in%20this%20list,%20or%20-1%20if%20this%20list%20does%20not%20contain%20the%20element.%20*%20More%20formally,%20returns%20the%20highest%20index%20%3ctt%3ei%3c/tt%3e%20such%20that%20*%20%3ctt%3e%28o==null&amp;nbsp;?&amp;nbsp;get%28i%29==null&amp;nbsp;:&amp;nbsp;o.equals%28get%28i%29%29%29%3c/tt%3e,%20*%20or%20-1%20if%20there%20is%20no%20such%20index.%20*/%20//%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%e7%9a%84%e6%9c%80%e5%90%8e%e4%b8%80%e6%ac%a1%e5%87%ba%e7%8e%b0%e7%9a%84%e7%b4%a2%e5%bc%95%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e8%bf%94%e5%9b%9e-1%20public%20int%20lastIndexOf%28Object%20o%29%20%7b%20//%20%e5%80%92%e5%ba%8f%e5%be%aa%e7%8e%af%20if%20%28o%20==%20null%29%20%7b%20for%20%28int%20i%20=%20size%20-%201;%20i%20%3e=%200;%20i--%29%20if%20%28elementData[i]%20==%20null%29%20return%20i;%20%7d%20else%20%7b%20for%20%28int%20i%20=%20size%20-%201;%20i%20%3e=%200;%20i--%29%20if%20%28o.equals%28elementData[i]%29%29%20return%20i;%20%7d%20return%20-1;%20%7d%20/**%20*%20Returns%20a%20shallow%20copy%20of%20this%20%3ctt%3eArrayList%3c/tt%3e%20instance.%20%28The%20*%20elements%20themselves%20are%20not%20copied.%29%20*%20*%20@return%20a%20clone%20of%20this%20%3ctt%3eArrayList%3c/tt%3e%20instance%20*/%20//%20mjy%ef%bc%9a%20%e5%85%8b%e9%9a%86%e6%96%b9%e6%b3%95%ef%bc%8c%e8%bf%94%e5%9b%9e%e6%ad%a4ArrayList%e5%ae%9e%e4%be%8b%e7%9a%84%e6%b5%85%e6%8b%b7%20%ef%bc%88%e5%85%83%e7%b4%a0%e6%9c%ac%e8%ba%ab%e4%b8%8d%e8%a2%ab%e5%a4%8d%e5%88%b6%e3%80%82%ef%bc%89%20public%20Object%20clone%28%29%20%7b%20try%20%7b%20ArrayList%3c?%3e%20v%20=%20%28ArrayList%3c?%3e%29%20super.clone%28%29;%20//%20mjy%ef%bc%9a%20Arrays.copyOf%e5%8a%9f%e8%83%bd%e6%98%af%e5%ae%9e%e7%8e%b0%e6%95%b0%e7%bb%84%e7%9a%84%e5%a4%8d%e5%88%b6%ef%bc%8c%e8%bf%94%e5%9b%9e%e5%a4%8d%e5%88%b6%e5%90%8e%e7%9a%84%e6%95%b0%e7%bb%84%e3%80%82%e5%8f%82%e6%95%b0%e6%98%af%e8%a2%ab%e5%a4%8d%e5%88%b6%e7%9a%84%e6%95%b0%e7%bb%84%e5%92%8c%e5%a4%8d%e5%88%b6%e7%9a%84%e9%95%bf%e5%ba%a6%20v.elementData%20=%20Arrays.copyOf%28elementData,%20size%29;%20v.modCount%20=%200;%20return%20v;%20%7d%20catch%20%28CloneNotSupportedException%20e%29%20%7b%20//%20this%20shouldn%27t%20happen,%20since%20we%20are%20Cloneable%20//%20mjy%ef%bc%9a%20%e8%bf%99%e4%b8%8d%e5%ba%94%e8%af%a5%e5%8f%91%e7%94%9f%ef%bc%8c%e5%9b%a0%e4%b8%ba%e6%88%91%e4%bb%ac%e6%98%af%e5%8f%af%e4%bb%a5%e5%85%8b%e9%9a%86%e7%9a%84%20throw%20new%20InternalError%28e%29;%20%7d%20%7d%20/**%20*%20Returns%20an%20array%20containing%20all%20of%20the%20elements%20in%20this%20list%20*%20in%20proper%20sequence%20%28from%20first%20to%20last%20element%29.%20*%20mjy%ef%bc%9a%20%e4%bb%a5%e6%ad%a3%e7%a1%ae%e7%9a%84%e9%a1%ba%e5%ba%8f%ef%bc%88%e4%bb%8e%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%88%b0%e6%9c%80%e5%90%8e%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%ef%bc%89%e8%bf%94%e5%9b%9e%e4%b8%80%e4%b8%aa%e5%8c%85%e5%90%ab%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%89%80%e6%9c%89%e5%85%83%e7%b4%a0%e7%9a%84%e6%95%b0%e7%bb%84%e3%80%82%20*%20%3cp%3eThe%20returned%20array%20will%20be%20%22safe%22%20in%20that%20no%20references%20to%20it%20are%20*%20maintained%20by%20this%20list.%20%28In%20other%20words,%20this%20method%20must%20allocate%20*%20a%20new%20array%29.%20The%20caller%20is%20thus%20free%20to%20modify%20the%20returned%20array.%20*%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e7%9a%84%e6%95%b0%e7%bb%84%e5%b0%86%e6%98%af%e5%ae%89%e5%85%a8%e7%9a%84%ef%bc%8c%e5%9b%a0%e4%b8%ba%e8%af%a5%e5%88%97%e8%a1%a8%e4%b8%8d%e4%bf%9d%e7%95%99%e5%af%b9%e5%ae%83%e7%9a%84%e5%bc%95%e7%94%a8%e3%80%82%20%ef%bc%88%e6%8d%a2%e5%8f%a5%e8%af%9d%e8%af%b4%ef%bc%8c%e8%bf%99%e4%b8%aa%e6%96%b9%e6%b3%95%e5%bf%85%e9%a1%bb%e5%88%86%e9%85%8d%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84%e6%95%b0%e7%bb%84%ef%bc%89%e3%80%82%20*%20%3cp%3eThis%20method%20acts%20as%20bridge%20between%20array-based%20and%20collection-based%20*%20APIs.%20*%20mjy%ef%bc%9a%20%e5%9b%a0%e6%ad%a4%ef%bc%8c%e8%b0%83%e7%94%a8%e8%80%85%e5%8f%af%e4%bb%a5%e8%87%aa%e7%94%b1%e5%9c%b0%e4%bf%ae%e6%94%b9%e8%bf%94%e5%9b%9e%e7%9a%84%e6%95%b0%e7%bb%84%e3%80%82%20%e6%ad%a4%e6%96%b9%e6%b3%95%e5%85%85%e5%bd%93%e5%9f%ba%e4%ba%8e%e9%98%b5%e5%88%97%e5%92%8c%e5%9f%ba%e4%ba%8e%e9%9b%86%e5%90%88%e7%9a%84API%e4%b9%8b%e9%97%b4%e7%9a%84%e6%a1%a5%e6%a2%81%e3%80%82%20*%20*%20@return%20an%20array%20containing%20all%20of%20the%20elements%20in%20this%20list%20in%20*%20proper%20sequence%20*/%20public%20Object[]%20toArray%28%29%20%7b%20return%20Arrays.copyOf%28elementData,%20size%29;%20%7d%20/**%20*%20Returns%20an%20array%20containing%20all%20of%20the%20elements%20in%20this%20list%20in%20proper%20*%20sequence%20%28from%20first%20to%20last%20element%29;%20the%20runtime%20type%20of%20the%20returned%20*%20array%20is%20that%20of%20the%20specified%20array.%20If%20the%20list%20fits%20in%20the%20*%20specified%20array,%20it%20is%20returned%20therein.%20Otherwise,%20a%20new%20array%20is%20*%20allocated%20with%20the%20runtime%20type%20of%20the%20specified%20array%20and%20the%20size%20of%20*%20this%20list.%20*%20*%20%3cp%3eIf%20the%20list%20fits%20in%20the%20specified%20array%20with%20room%20to%20spare%20*%20%28i.e.,%20the%20array%20has%20more%20elements%20than%20the%20list%29,%20the%20element%20in%20*%20the%20array%20immediately%20following%20the%20end%20of%20the%20collection%20is%20set%20to%20*%20%3ctt%3enull%3c/tt%3e.%20%28This%20is%20useful%20in%20determining%20the%20length%20of%20the%20*%20list%20%3ci%3eonly%3c/i%3e%20if%20the%20caller%20knows%20that%20the%20list%20does%20not%20contain%20*%20any%20null%20elements.%29%20*%20*%20@param%20a%20the%20array%20into%20which%20the%20elements%20of%20the%20list%20are%20to%20*%20be%20stored,%20if%20it%20is%20big%20enough;%20otherwise,%20a%20new%20array%20of%20the%20*%20same%20runtime%20type%20is%20allocated%20for%20this%20purpose.%20*%20@return%20an%20array%20containing%20the%20elements%20of%20the%20list%20*%20@throws%20ArrayStoreException%20if%20the%20runtime%20type%20of%20the%20specified%20array%20*%20is%20not%20a%20supertype%20of%20the%20runtime%20type%20of%20every%20element%20in%20*%20this%20list%20*%20@throws%20NullPointerException%20if%20the%20specified%20array%20is%20null%20*/%20@SuppressWarnings%28%22unchecked%22%29%20public%20%3cT%3e%20T[]%20toArray%28T[]%20a%29%20%7b%20if%20%28a.length%20%3c%20size%29%20//%20Make%20a%20new%20array%20of%20a%27s%20runtime%20type,%20but%20my%20contents:%20return%20%28T[]%29%20Arrays.copyOf%28elementData,%20size,%20a.getClass%28%29%29;%20System.arraycopy%28elementData,%200,%20a,%200,%20size%29;%20if%20%28a.length%20%3e%20size%29%20a[size]%20=%20null;%20return%20a;%20%7d%20//%20Positional%20Access%20Operations%20@SuppressWarnings%28%22unchecked%22%29%20E%20elementData%28int%20index%29%20%7b%20return%20%28E%29%20elementData[index];%20%7d%20/**%20*%20Returns%20the%20element%20at%20the%20specified%20position%20in%20this%20list.%20*%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e4%bd%8d%e7%bd%ae%e7%9a%84%e5%85%83%e7%b4%a0%20*%20*%20@param%20index%20index%20of%20the%20element%20to%20return%20*%20@return%20the%20element%20at%20the%20specified%20position%20in%20this%20list%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20E%20get%28int%20index%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%a0%a1%e9%aa%8c%e6%95%b0%e7%bb%84%e4%b8%8b%e6%a0%87%e8%b6%8a%e7%95%8c%20rangeCheck%28index%29;%20return%20elementData%28index%29;%20%7d%20/**%20*%20Replaces%20the%20element%20at%20the%20specified%20position%20in%20this%20list%20with%20*%20the%20specified%20element.%20*%20mjy%ef%bc%9a%20%e7%94%a8%e6%8c%87%e5%ae%9a%e7%9a%84%e5%85%83%e7%b4%a0%e6%9b%bf%e6%8d%a2%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e4%bd%8d%e7%bd%ae%e7%9a%84%e5%85%83%e7%b4%a0%20*%20*%20@param%20index%20index%20of%20the%20element%20to%20replace%20*%20@param%20element%20element%20to%20be%20stored%20at%20the%20specified%20position%20*%20@return%20the%20element%20previously%20at%20the%20specified%20position%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20E%20set%28int%20index,%20E%20element%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%a0%a1%e9%aa%8c%e6%95%b0%e7%bb%84%e4%b8%8b%e6%a0%87%e8%b6%8a%e7%95%8c%20rangeCheck%28index%29;%20//%20mjy%ef%bc%9a%20%e6%97%a7%e7%9a%84%e5%80%bc%20E%20oldValue%20=%20elementData%28index%29;%20//%20mjy%ef%bc%9a%20%e6%96%b0%e7%9a%84%e8%b5%8b%e5%80%bc%20elementData[index]%20=%20element;%20//%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%97%a7%e7%9a%84%e5%80%bc%20return%20oldValue;%20%7d%20/**%20*%20Appends%20the%20specified%20element%20to%20the%20end%20of%20this%20list.%20*%20mjy%ef%bc%9a%20%e6%b7%bb%e5%8a%a0%e5%85%83%e7%b4%a0%ef%bc%8c%e5%b0%86%e6%8c%87%e5%ae%9a%e7%9a%84%e5%85%83%e7%b4%a0%e8%bf%bd%e5%8a%a0%e5%88%b0%e6%ad%a4%e5%88%97%e8%a1%a8%e7%9a%84%e6%9c%ab%e5%b0%be%20*%20*%20@param%20e%20element%20to%20be%20appended%20to%20this%20list%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20%28as%20specified%20by%20%7b@link%20Collection#add%7d%29%20*/%20public%20boolean%20add%28E%20e%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%89%a9%e5%ae%b9%e6%a0%a1%e9%aa%8c%20ensureCapacityInternal%28size%20+%201%29;%20//%20Increments%20modCount!!%20//%20mjy%ef%bc%9a%20%e6%b7%bb%e5%8a%a0%e5%85%83%e7%b4%a0%20elementData[size++]%20=%20e;%20return%20true;%20%7d%20/**%20*%20Inserts%20the%20specified%20element%20at%20the%20specified%20position%20in%20this%20*%20list.%20Shifts%20the%20element%20currently%20at%20that%20position%20%28if%20any%29%20and%20*%20any%20subsequent%20elements%20to%20the%20right%20%28adds%20one%20to%20their%20indices%29.%20*%20mjy%ef%bc%9a%20%e6%b7%bb%e5%8a%a0%e5%85%83%e7%b4%a0%ef%bc%8c%e5%9c%a8%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e7%9a%84%e6%8c%87%e5%ae%9a%e4%bd%8d%e7%bd%ae%e6%8f%92%e5%85%a5%e6%8c%87%e5%ae%9a%e7%9a%84%e5%85%83%e7%b4%a0%20*%20mjy%ef%bc%9a%e5%85%88%e8%b0%83%e7%94%a8%20rangeCheckForAdd%20%e5%af%b9index%e8%bf%9b%e8%a1%8c%e7%95%8c%e9%99%90%e6%a3%80%e6%9f%a5%ef%bc%9b%e7%84%b6%e5%90%8e%e8%b0%83%e7%94%a8%20ensureCapacityInternal%20%e6%96%b9%e6%b3%95%e4%bf%9d%e8%af%81capacity%e8%b6%b3%e5%a4%9f%e5%a4%a7%ef%bc%9b%e5%86%8d%e5%b0%86%e4%bb%8eindex%e5%bc%80%e5%a7%8b%e4%b9%8b%e5%90%8e%e7%9a%84%e6%89%80%e6%9c%89%e6%88%90%e5%91%98%e5%90%8e%e7%a7%bb%e4%b8%80%e4%b8%aa%e4%bd%8d%e7%bd%ae%ef%bc%9b%e5%b0%86element%e6%8f%92%e5%85%a5index%e4%bd%8d%e7%bd%ae%ef%bc%9b%e6%9c%80%e5%90%8esize%e5%8a%a01%e3%80%82%20*%20*%20@param%20index%20index%20at%20which%20the%20specified%20element%20is%20to%20be%20inserted%20*%20@param%20element%20element%20to%20be%20inserted%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20void%20add%28int%20index,%20E%20element%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%a0%a1%e9%aa%8c%20rangeCheckForAdd%28index%29;%20ensureCapacityInternal%28size%20+%201%29;%20//%20Increments%20modCount!!%20//%20mjy%ef%bc%9a%20System.arraycopy%28%29%e8%bf%99%e4%b8%aa%e5%ae%9e%e7%8e%b0%e6%95%b0%e7%bb%84%e4%b9%8b%e9%97%b4%e5%a4%8d%e5%88%b6%e7%9a%84%e6%96%b9%e6%b3%95%e4%b8%80%e5%ae%9a%e8%a6%81%e7%9c%8b%e4%b8%80%e4%b8%8b%ef%bc%8c%e4%b8%8b%e9%9d%a2%e5%b0%b1%e7%94%a8%e5%88%b0%e4%ba%86arraycopy%28%29%e6%96%b9%e6%b3%95%e5%ae%9e%e7%8e%b0%e6%95%b0%e7%bb%84%e8%87%aa%e5%b7%b1%e5%a4%8d%e5%88%b6%e8%87%aa%e5%b7%b1%20System.arraycopy%28elementData,%20index,%20elementData,%20index%20+%201,%20size%20-%20index%29;%20elementData[index]%20=%20element;%20size++;%20%7d%20/**%20*%20Removes%20the%20element%20at%20the%20specified%20position%20in%20this%20list.%20*%20Shifts%20any%20subsequent%20elements%20to%20the%20left%20%28subtracts%20one%20from%20their%20*%20indices%29.%20*%20mjy%ef%bc%9a%e5%88%a0%e9%99%a4%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%a0%e9%99%a4%e8%af%a5%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e4%bd%8d%e7%bd%ae%e7%9a%84%e5%85%83%e7%b4%a0%e3%80%82%20%e5%b0%86%e4%bb%bb%e4%bd%95%e5%90%8e%e7%bb%ad%e5%85%83%e7%b4%a0%e7%a7%bb%e5%8a%a8%e5%88%b0%e5%b7%a6%e4%be%a7%ef%bc%88%e4%bb%8e%e5%85%b6%e7%b4%a2%e5%bc%95%e4%b8%ad%e5%87%8f%e5%8e%bb%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%ef%bc%89%20*%20*%20@param%20index%20the%20index%20of%20the%20element%20to%20be%20removed%20*%20@return%20the%20element%20that%20was%20removed%20from%20the%20list%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20E%20remove%28int%20index%29%20%7b%20rangeCheck%28index%29;%20modCount++;%20E%20oldValue%20=%20elementData%28index%29;%20int%20numMoved%20=%20size%20-%20index%20-%201;%20if%20%28numMoved%20%3e%200%29%20System.arraycopy%28elementData,%20index%20+%201,%20elementData,%20index,%20numMoved%29;%20elementData[--size]%20=%20null;%20//%20clear%20to%20let%20GC%20do%20its%20work%20return%20oldValue;%20%7d%20/**%20*%20Removes%20the%20first%20occurrence%20of%20the%20specified%20element%20from%20this%20list,%20*%20if%20it%20is%20present.%20If%20the%20list%20does%20not%20contain%20the%20element,%20it%20is%20*%20unchanged.%20More%20formally,%20removes%20the%20element%20with%20the%20lowest%20index%20*%20%3ctt%3ei%3c/tt%3e%20such%20that%20*%20%3ctt%3e%28o==null&amp;nbsp;?&amp;nbsp;get%28i%29==null&amp;nbsp;:&amp;nbsp;o.equals%28get%28i%29%29%29%3c/tt%3e%20*%20%28if%20such%20an%20element%20exists%29.%20Returns%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20*%20contained%20the%20specified%20element%20%28or%20equivalently,%20if%20this%20list%20*%20changed%20as%20a%20result%20of%20the%20call%29.%20*%20mjy%ef%bc%9a%20%e4%bb%8e%e5%88%97%e8%a1%a8%e4%b8%ad%e5%88%a0%e9%99%a4%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%e7%9a%84%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%87%ba%e7%8e%b0%ef%bc%88%e5%a6%82%e6%9e%9c%e5%ad%98%e5%9c%a8%ef%bc%89%e3%80%82%20%e5%a6%82%e6%9e%9c%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e8%af%a5%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e5%ae%83%e4%b8%8d%e4%bc%9a%e6%9b%b4%e6%94%b9%e3%80%82%20*%20*%20@param%20o%20element%20to%20be%20removed%20from%20this%20list,%20if%20present%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contained%20the%20specified%20element%20*/%20public%20boolean%20remove%28Object%20o%29%20%7b%20if%20%28o%20==%20null%29%20%7b%20for%20%28int%20index%20=%200;%20index%20%3c%20size;%20index++%29%20if%20%28elementData[index]%20==%20null%29%20%7b%20fastRemove%28index%29;%20return%20true;%20%7d%20%7d%20else%20%7b%20for%20%28int%20index%20=%200;%20index%20%3c%20size;%20index++%29%20if%20%28o.equals%28elementData[index]%29%29%20%7b%20fastRemove%28index%29;%20return%20true;%20%7d%20%7d%20return%20false;%20%7d%20/*%20*%20Private%20remove%20method%20that%20skimjy%20bounds%20checking%20and%20does%20not%20*%20return%20the%20value%20removed.%20*/%20private%20void%20fastRemove%28int%20index%29%20%7b%20modCount++;%20int%20numMoved%20=%20size%20-%20index%20-%201;%20if%20%28numMoved%20%3e%200%29%20System.arraycopy%28elementData,%20index%20+%201,%20elementData,%20index,%20numMoved%29;%20elementData[--size]%20=%20null;%20//%20clear%20to%20let%20GC%20do%20its%20work%20%7d%20/**%20*%20Removes%20all%20of%20the%20elements%20from%20this%20list.%20The%20list%20will%20*%20be%20empty%20after%20this%20call%20returns.%20*%20mjy%ef%bc%9a%20%e4%bb%8e%e5%88%97%e8%a1%a8%e4%b8%ad%e6%b8%85%e7%a9%ba%ef%bc%88%e5%88%a0%e9%99%a4%ef%bc%89%e6%89%80%e6%9c%89%e5%85%83%e7%b4%a0%e3%80%82%20*/%20public%20void%20clear%28%29%20%7b%20modCount++;%20//%20clear%20to%20let%20GC%20do%20its%20work%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20elementData[i]%20=%20null;%20size%20=%200;%20%7d%20/**%20*%20Appends%20all%20of%20the%20elements%20in%20the%20specified%20collection%20to%20the%20end%20of%20*%20this%20list,%20in%20the%20order%20that%20they%20are%20returned%20by%20the%20*%20specified%20collection%27s%20Iterator.%20The%20behavior%20of%20this%20operation%20is%20*%20undefined%20if%20the%20specified%20collection%20is%20modified%20while%20the%20operation%20*%20is%20in%20progress.%20%28This%20implies%20that%20the%20behavior%20of%20this%20call%20is%20*%20undefined%20if%20the%20specified%20collection%20is%20this%20list,%20and%20this%20*%20list%20is%20nonempty.%29%20*%20*%20@param%20c%20collection%20containing%20elements%20to%20be%20added%20to%20this%20list%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20changed%20as%20a%20result%20of%20the%20call%20*%20@throws%20NullPointerException%20if%20the%20specified%20collection%20is%20null%20*/%20public%20boolean%20addAll%28Collection%3c?%20extends%20E%3e%20c%29%20%7b%20Object[]%20a%20=%20c.toArray%28%29;%20int%20numNew%20=%20a.length;%20ensureCapacityInternal%28size%20+%20numNew%29;%20//%20Increments%20modCount%20System.arraycopy%28a,%200,%20elementData,%20size,%20numNew%29;%20size%20+=%20numNew;%20return%20numNew%20!=%200;%20%7d%20/**%20*%20Inserts%20all%20of%20the%20elements%20in%20the%20specified%20collection%20into%20this%20*%20list,%20starting%20at%20the%20specified%20position.%20Shifts%20the%20element%20*%20currently%20at%20that%20position%20%28if%20any%29%20and%20any%20subsequent%20elements%20to%20*%20the%20right%20%28increases%20their%20indices%29.%20The%20new%20elements%20will%20appear%20*%20in%20the%20list%20in%20the%20order%20that%20they%20are%20returned%20by%20the%20*%20specified%20collection%27s%20iterator.%20*%20*%20@param%20index%20index%20at%20which%20to%20insert%20the%20first%20element%20from%20the%20*%20specified%20collection%20*%20@param%20c%20collection%20containing%20elements%20to%20be%20added%20to%20this%20list%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20changed%20as%20a%20result%20of%20the%20call%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*%20@throws%20NullPointerException%20if%20the%20specified%20collection%20is%20null%20*/%20public%20boolean%20addAll%28int%20index,%20Collection%3c?%20extends%20E%3e%20c%29%20%7b%20rangeCheckForAdd%28index%29;%20Object[]%20a%20=%20c.toArray%28%29;%20int%20numNew%20=%20a.length;%20ensureCapacityInternal%28size%20+%20numNew%29;%20//%20Increments%20modCount%20int%20numMoved%20=%20size%20-%20index;%20if%20%28numMoved%20%3e%200%29%20System.arraycopy%28elementData,%20index,%20elementData,%20index%20+%20numNew,%20numMoved%29;%20System.arraycopy%28a,%200,%20elementData,%20index,%20numNew%29;%20size%20+=%20numNew;%20return%20numNew%20!=%200;%20%7d%20/**%20*%20Removes%20from%20this%20list%20all%20of%20the%20elements%20whose%20index%20is%20between%20*%20%7b@code%20fromIndex%7d,%20inclusive,%20and%20%7b@code%20toIndex%7d,%20exclusive.%20*%20Shifts%20any%20succeeding%20elements%20to%20the%20left%20%28reduces%20their%20index%29.%20*%20This%20call%20shortens%20the%20list%20by%20%7b@code%20%28toIndex%20-%20fromIndex%29%7d%20elements.%20*%20%28If%20%7b@code%20toIndex==fromIndex%7d,%20this%20operation%20has%20no%20effect.%29%20*%20*%20@throws%20IndexOutOfBoundsException%20if%20%7b@code%20fromIndex%7d%20or%20*%20%7b@code%20toIndex%7d%20is%20out%20of%20range%20*%20%28%7b@code%20fromIndex%20%3c%200%20%7c%7c%20*%20fromIndex%20%3e=%20size%28%29%20%7c%7c%20*%20toIndex%20%3e%20size%28%29%20%7c%7c%20*%20toIndex%20%3c%20fromIndex%7d%29%20*/%20protected%20void%20removeRange%28int%20fromIndex,%20int%20toIndex%29%20%7b%20modCount++;%20int%20numMoved%20=%20size%20-%20toIndex;%20System.arraycopy%28elementData,%20toIndex,%20elementData,%20fromIndex,%20numMoved%29;%20//%20clear%20to%20let%20GC%20do%20its%20work%20int%20newSize%20=%20size%20-%20%28toIndex%20-%20fromIndex%29;%20for%20%28int%20i%20=%20newSize;%20i%20%3c%20size;%20i++%29%20%7b%20elementData[i]%20=%20null;%20%7d%20size%20=%20newSize;%20%7d%20/**%20*%20Checks%20if%20the%20given%20index%20is%20in%20range.%20If%20not,%20throws%20an%20appropriate%20*%20runtime%20exception.%20This%20method%20does%20*not*%20check%20if%20the%20index%20is%20*%20negative:%20It%20is%20always%20used%20immediately%20prior%20to%20an%20array%20access,%20*%20which%20throws%20an%20ArrayIndexOutOfBoundsException%20if%20index%20is%20negative.%20*/%20private%20void%20rangeCheck%28int%20index%29%20%7b%20if%20%28index%20%3e=%20size%29%20throw%20new%20IndexOutOfBoundsException%28outOfBoundsMsg%28index%29%29;%20%7d%20/**%20*%20A%20version%20of%20rangeCheck%20used%20by%20add%20and%20addAll.%20*/%20private%20void%20rangeCheckForAdd%28int%20index%29%20%7b%20if%20%28index%20%3e%20size%20%7c%7c%20index%20%3c%200%29%20throw%20new%20IndexOutOfBoundsException%28outOfBoundsMsg%28index%29%29;%20%7d%20/**%20*%20Constructs%20an%20IndexOutOfBoundsException%20detail%20message.%20*%20Of%20the%20many%20possible%20refactorings%20of%20the%20error%20handling%20code,%20*%20this%20%22outlining%22%20performs%20best%20with%20both%20server%20and%20client%20VMs.%20*/%20private%20String%20outOfBoundsMsg%28int%20index%29%20%7b%20return%20%22Index:%20%22%20+%20index%20+%20%22,%20Size:%20%22%20+%20size;%20%7d%20/**%20*%20Removes%20from%20this%20list%20all%20of%20its%20elements%20that%20are%20contained%20in%20the%20*%20specified%20collection.%20*%20*%20@param%20c%20collection%20containing%20elements%20to%20be%20removed%20from%20this%20list%20*%20@return%20%7b@code%20true%7d%20if%20this%20list%20changed%20as%20a%20result%20of%20the%20call%20*%20@throws%20ClassCastException%20if%20the%20class%20of%20an%20element%20of%20this%20list%20*%20is%20incompatible%20with%20the%20specified%20collection%20*%20%28%3ca%20href=%22Collection.html#optional-restrictions%22%3eoptional%3c/a%3e%29%20*%20@throws%20NullPointerException%20if%20this%20list%20contains%20a%20null%20element%20and%20the%20*%20specified%20collection%20does%20not%20permit%20null%20elements%20*%20%28%3ca%20href=%22Collection.html#optional-restrictions%22%3eoptional%3c/a%3e%29,%20*%20or%20if%20the%20specified%20collection%20is%20null%20*%20@see%20Collection#contains%28Object%29%20*/%20public%20boolean%20removeAll%28Collection%3c?%3e%20c%29%20%7b%20Objects.requireNonNull%28c%29;%20return%20batchRemove%28c,%20false%29;%20%7d%20/**%20*%20Retains%20only%20the%20elements%20in%20this%20list%20that%20are%20contained%20in%20the%20*%20specified%20collection.%20In%20other%20words,%20removes%20from%20this%20list%20all%20*%20of%20its%20elements%20that%20are%20not%20contained%20in%20the%20specified%20collection.%20*%20*%20@param%20c%20collection%20containing%20elements%20to%20be%20retained%20in%20this%20list%20*%20@return%20%7b@code%20true%7d%20if%20this%20list%20changed%20as%20a%20result%20of%20the%20call%20*%20@throws%20ClassCastException%20if%20the%20class%20of%20an%20element%20of%20this%20list%20*%20is%20incompatible%20with%20the%20specified%20collection%20*%20%28%3ca%20href=%22Collection.html#optional-restrictions%22%3eoptional%3c/a%3e%29%20*%20@throws%20NullPointerException%20if%20this%20list%20contains%20a%20null%20element%20and%20the%20*%20specified%20collection%20does%20not%20permit%20null%20elements%20*%20%28%3ca%20href=%22Collection.html#optional-restrictions%22%3eoptional%3c/a%3e%29,%20*%20or%20if%20the%20specified%20collection%20is%20null%20*%20@see%20Collection#contains%28Object%29%20*/%20public%20boolean%20retainAll%28Collection%3c?%3e%20c%29%20%7b%20Objects.requireNonNull%28c%29;%20return%20batchRemove%28c,%20true%29;%20%7d%20private%20boolean%20batchRemove%28Collection%3c?%3e%20c,%20boolean%20complement%29%20%7b%20final%20Object[]%20elementData%20=%20this.elementData;%20int%20r%20=%200,%20w%20=%200;%20boolean%20modified%20=%20false;%20try%20%7b%20for%20%28;%20r%20%3c%20size;%20r++%29%20if%20%28c.contains%28elementData[r]%29%20==%20complement%29%20elementData[w++]%20=%20elementData[r];%20%7d%20finally%20%7b%20//%20Preserve%20behavioral%20compatibility%20with%20AbstractCollection,%20//%20even%20if%20c.contains%28%29%20throws.%20if%20%28r%20!=%20size%29%20%7b%20System.arraycopy%28elementData,%20r,%20elementData,%20w,%20size%20-%20r%29;%20w%20+=%20size%20-%20r;%20%7d%20if%20%28w%20!=%20size%29%20%7b%20//%20clear%20to%20let%20GC%20do%20its%20work%20for%20%28int%20i%20=%20w;%20i%20%3c%20size;%20i++%29%20elementData[i]%20=%20null;%20modCount%20+=%20size%20-%20w;%20size%20=%20w;%20modified%20=%20true;%20%7d%20%7d%20return%20modified;%20%7d%20/**%20*%20Save%20the%20state%20of%20the%20%3ctt%3eArrayList%3c/tt%3e%20instance%20to%20a%20stream%20%28that%20*%20is,%20serialize%20it%29.%20*%20*%20@serialData%20The%20length%20of%20the%20array%20backing%20the%20%3ctt%3eArrayList%3c/tt%3e%20*%20instance%20is%20emitted%20%28int%29,%20followed%20by%20all%20of%20its%20elements%20*%20%28each%20an%20%3ctt%3eObject%3c/tt%3e%29%20in%20the%20proper%20order.%20*/%20private%20void%20writeObject%28java.io.ObjectOutputStream%20s%29%20throws%20java.io.IOException%20%7b%20//%20Write%20out%20element%20count,%20and%20any%20hidden%20stuff%20int%20expectedModCount%20=%20modCount;%20s.defaultWriteObject%28%29;%20//%20Write%20out%20size%20as%20capacity%20for%20behavioural%20compatibility%20with%20clone%28%29%20s.writeInt%28size%29;%20//%20Write%20out%20all%20elements%20in%20the%20proper%20order.%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20%7b%20s.writeObject%28elementData[i]%29;%20%7d%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20/**%20*%20Reconstitute%20the%20%3ctt%3eArrayList%3c/tt%3e%20instance%20from%20a%20stream%20%28that%20is,%20*%20deserialize%20it%29.%20*/%20private%20void%20readObject%28java.io.ObjectInputStream%20s%29%20throws%20java.io.IOException,%20ClassNotFoundException%20%7b%20elementData%20=%20EMPTY_ELEMENTDATA;%20//%20Read%20in%20size,%20and%20any%20hidden%20stuff%20s.defaultReadObject%28%29;%20//%20Read%20in%20capacity%20s.readInt%28%29;%20//%20ignored%20if%20%28size%20%3e%200%29%20%7b%20//%20be%20like%20clone%28%29,%20allocate%20array%20based%20upon%20size%20not%20capacity%20ensureCapacityInternal%28size%29;%20Object[]%20a%20=%20elementData;%20//%20Read%20in%20all%20elements%20in%20the%20proper%20order.%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20%7b%20a[i]%20=%20s.readObject%28%29;%20%7d%20%7d%20%7d%20/**%20*%20Returns%20a%20list%20iterator%20over%20the%20elements%20in%20this%20list%20%28in%20proper%20*%20sequence%29,%20starting%20at%20the%20specified%20position%20in%20the%20list.%20*%20The%20specified%20index%20indicates%20the%20first%20element%20that%20would%20be%20*%20returned%20by%20an%20initial%20call%20to%20%7b@link%20ListIterator#next%20next%7d.%20*%20An%20initial%20call%20to%20%7b@link%20ListIterator#previous%20previous%7d%20would%20*%20return%20the%20element%20with%20the%20specified%20index%20minus%20one.%20*%20*%20%3cp%3eThe%20returned%20list%20iterator%20is%20%3ca%20href=%22#fail-fast%22%3e%3ci%3efail-fast%3c/i%3e%3c/a%3e.%20*%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20ListIterator%3cE%3e%20listIterator%28int%20index%29%20%7b%20if%20%28index%20%3c%200%20%7c%7c%20index%20%3e%20size%29%20throw%20new%20IndexOutOfBoundsException%28%22Index:%20%22%20+%20index%29;%20return%20new%20ListItr%28index%29;%20%7d%20/**%20*%20Returns%20a%20list%20iterator%20over%20the%20elements%20in%20this%20list%20%28in%20proper%20*%20sequence%29.%20*%20*%20%3cp%3eThe%20returned%20list%20iterator%20is%20%3ca%20href=%22#fail-fast%22%3e%3ci%3efail-fast%3c/i%3e%3c/a%3e.%20*%20*%20@see%20#listIterator%28int%29%20*/%20public%20ListIterator%3cE%3e%20listIterator%28%29%20%7b%20return%20new%20ListItr%280%29;%20%7d%20/**%20*%20Returns%20an%20iterator%20over%20the%20elements%20in%20this%20list%20in%20proper%20sequence.%20*%20*%20%3cp%3eThe%20returned%20iterator%20is%20%3ca%20href=%22#fail-fast%22%3e%3ci%3efail-fast%3c/i%3e%3c/a%3e.%20*%20*%20@return%20an%20iterator%20over%20the%20elements%20in%20this%20list%20in%20proper%20sequence%20*/%20public%20Iterator%3cE%3e%20iterator%28%29%20%7b%20return%20new%20Itr%28%29;%20%7d%20/**%20*%20An%20optimized%20version%20of%20AbstractList.Itr%20*/%20private%20class%20Itr%20implements%20Iterator%3cE%3e%20%7b%20int%20cursor;%20//%20index%20of%20next%20element%20to%20return%20int%20lastRet%20=%20-1;%20//%20index%20of%20last%20element%20returned;%20-1%20if%20no%20such%20int%20expectedModCount%20=%20modCount;%20public%20boolean%20hasNext%28%29%20%7b%20return%20cursor%20!=%20size;%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20E%20next%28%29%20%7b%20checkForComodification%28%29;%20int%20i%20=%20cursor;%20if%20%28i%20%3e=%20size%29%20throw%20new%20NoSuchElementException%28%29;%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28i%20%3e=%20elementData.length%29%20throw%20new%20ConcurrentModificationException%28%29;%20cursor%20=%20i%20+%201;%20return%20%28E%29%20elementData[lastRet%20=%20i];%20%7d%20public%20void%20remove%28%29%20%7b%20if%20%28lastRet%20%3c%200%29%20throw%20new%20IllegalStateException%28%29;%20checkForComodification%28%29;%20try%20%7b%20ArrayList.this.remove%28lastRet%29;%20cursor%20=%20lastRet;%20lastRet%20=%20-1;%20expectedModCount%20=%20modCount;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20@Override%20@SuppressWarnings%28%22unchecked%22%29%20public%20void%20forEachRemaining%28Consumer%3c?%20super%20E%3e%20consumer%29%20%7b%20Objects.requireNonNull%28consumer%29;%20final%20int%20size%20=%20ArrayList.this.size;%20int%20i%20=%20cursor;%20if%20%28i%20%3e=%20size%29%20%7b%20return;%20%7d%20final%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28i%20%3e=%20elementData.length%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20while%20%28i%20!=%20size%20&&%20modCount%20==%20expectedModCount%29%20%7b%20consumer.accept%28%28E%29%20elementData[i++]%29;%20%7d%20//%20update%20once%20at%20end%20of%20iteration%20to%20reduce%20heap%20write%20traffic%20cursor%20=%20i;%20lastRet%20=%20i%20-%201;%20checkForComodification%28%29;%20%7d%20final%20void%20checkForComodification%28%29%20%7b%20if%20%28modCount%20!=%20expectedModCount%29%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20/**%20*%20An%20optimized%20version%20of%20AbstractList.ListItr%20*/%20private%20class%20ListItr%20extends%20Itr%20implements%20ListIterator%3cE%3e%20%7b%20ListItr%28int%20index%29%20%7b%20super%28%29;%20cursor%20=%20index;%20%7d%20public%20boolean%20hasPrevious%28%29%20%7b%20return%20cursor%20!=%200;%20%7d%20public%20int%20nextIndex%28%29%20%7b%20return%20cursor;%20%7d%20public%20int%20previousIndex%28%29%20%7b%20return%20cursor%20-%201;%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20E%20previous%28%29%20%7b%20checkForComodification%28%29;%20int%20i%20=%20cursor%20-%201;%20if%20%28i%20%3c%200%29%20throw%20new%20NoSuchElementException%28%29;%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28i%20%3e=%20elementData.length%29%20throw%20new%20ConcurrentModificationException%28%29;%20cursor%20=%20i;%20return%20%28E%29%20elementData[lastRet%20=%20i];%20%7d%20public%20void%20set%28E%20e%29%20%7b%20if%20%28lastRet%20%3c%200%29%20throw%20new%20IllegalStateException%28%29;%20checkForComodification%28%29;%20try%20%7b%20ArrayList.this.set%28lastRet,%20e%29;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20public%20void%20add%28E%20e%29%20%7b%20checkForComodification%28%29;%20try%20%7b%20int%20i%20=%20cursor;%20ArrayList.this.add%28i,%20e%29;%20cursor%20=%20i%20+%201;%20lastRet%20=%20-1;%20expectedModCount%20=%20modCount;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20%7d%20/**%20*%20Returns%20a%20view%20of%20the%20portion%20of%20this%20list%20between%20the%20specified%20*%20%7b@code%20fromIndex%7d,%20inclusive,%20and%20%7b@code%20toIndex%7d,%20exclusive.%20%28If%20*%20%7b@code%20fromIndex%7d%20and%20%7b@code%20toIndex%7d%20are%20equal,%20the%20returned%20list%20is%20*%20empty.%29%20The%20returned%20list%20is%20backed%20by%20this%20list,%20so%20non-structural%20*%20changes%20in%20the%20returned%20list%20are%20reflected%20in%20this%20list,%20and%20vice-versa.%20*%20The%20returned%20list%20supports%20all%20of%20the%20optional%20list%20operations.%20*%20*%20%3cp%3eThis%20method%20eliminates%20the%20need%20for%20explicit%20range%20operations%20%28of%20*%20the%20sort%20that%20commonly%20exist%20for%20arrays%29.%20Any%20operation%20that%20expects%20*%20a%20list%20can%20be%20used%20as%20a%20range%20operation%20by%20passing%20a%20subList%20view%20*%20instead%20of%20a%20whole%20list.%20For%20example,%20the%20following%20idiom%20*%20removes%20a%20range%20of%20elements%20from%20a%20list:%20*%20%3cpre%3e%20*%20list.subList%28from,%20to%29.clear%28%29;%20*%20%3c/pre%3e%20*%20Similar%20idioms%20may%20be%20constructed%20for%20%7b@link%20#indexOf%28Object%29%7d%20and%20*%20%7b@link%20#lastIndexOf%28Object%29%7d,%20and%20all%20of%20the%20algorithms%20in%20the%20*%20%7b@link%20Collections%7d%20class%20can%20be%20applied%20to%20a%20subList.%20*%20*%20%3cp%3eThe%20semantics%20of%20the%20list%20returned%20by%20this%20method%20become%20undefined%20if%20*%20the%20backing%20list%20%28i.e.,%20this%20list%29%20is%20%3ci%3estructurally%20modified%3c/i%3e%20in%20*%20any%20way%20other%20than%20via%20the%20returned%20list.%20%28Structural%20modifications%20are%20*%20those%20that%20change%20the%20size%20of%20this%20list,%20or%20otherwise%20perturb%20it%20in%20such%20*%20a%20fashion%20that%20iterations%20in%20progress%20may%20yield%20incorrect%20results.%29%20*%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*%20@throws%20IllegalArgumentException%20%7b@inheritDoc%7d%20*/%20public%20List%3cE%3e%20subList%28int%20fromIndex,%20int%20toIndex%29%20%7b%20subListRangeCheck%28fromIndex,%20toIndex,%20size%29;%20return%20new%20SubList%28this,%200,%20fromIndex,%20toIndex%29;%20%7d%20static%20void%20subListRangeCheck%28int%20fromIndex,%20int%20toIndex,%20int%20size%29%20%7b%20if%20%28fromIndex%20%3c%200%29%20throw%20new%20IndexOutOfBoundsException%28%22fromIndex%20=%20%22%20+%20fromIndex%29;%20if%20%28toIndex%20%3e%20size%29%20throw%20new%20IndexOutOfBoundsException%28%22toIndex%20=%20%22%20+%20toIndex%29;%20if%20%28fromIndex%20%3e%20toIndex%29%20throw%20new%20IllegalArgumentException%28%22fromIndex%28%22%20+%20fromIndex%20+%20%22%29%20%3e%20toIndex%28%22%20+%20toIndex%20+%20%22%29%22%29;%20%7d%20private%20class%20SubList%20extends%20AbstractList%3cE%3e%20implements%20RandomAccess%20%7b%20private%20final%20AbstractList%3cE%3e%20parent;%20private%20final%20int%20parentOffset;%20private%20final%20int%20offset;%20int%20size;%20SubList%28AbstractList%3cE%3e%20parent,%20int%20offset,%20int%20fromIndex,%20int%20toIndex%29%20%7b%20this.parent%20=%20parent;%20this.parentOffset%20=%20fromIndex;%20this.offset%20=%20offset%20+%20fromIndex;%20this.size%20=%20toIndex%20-%20fromIndex;%20this.modCount%20=%20ArrayList.this.modCount;%20%7d%20public%20E%20set%28int%20index,%20E%20e%29%20%7b%20rangeCheck%28index%29;%20checkForComodification%28%29;%20E%20oldValue%20=%20ArrayList.this.elementData%28offset%20+%20index%29;%20ArrayList.this.elementData[offset%20+%20index]%20=%20e;%20return%20oldValue;%20%7d%20public%20E%20get%28int%20index%29%20%7b%20rangeCheck%28index%29;%20checkForComodification%28%29;%20return%20ArrayList.this.elementData%28offset%20+%20index%29;%20%7d%20public%20int%20size%28%29%20%7b%20checkForComodification%28%29;%20return%20this.size;%20%7d%20public%20void%20add%28int%20index,%20E%20e%29%20%7b%20rangeCheckForAdd%28index%29;%20checkForComodification%28%29;%20parent.add%28parentOffset%20+%20index,%20e%29;%20this.modCount%20=%20parent.modCount;%20this.size++;%20%7d%20public%20E%20remove%28int%20index%29%20%7b%20rangeCheck%28index%29;%20checkForComodification%28%29;%20E%20result%20=%20parent.remove%28parentOffset%20+%20index%29;%20this.modCount%20=%20parent.modCount;%20this.size--;%20return%20result;%20%7d%20protected%20void%20removeRange%28int%20fromIndex,%20int%20toIndex%29%20%7b%20checkForComodification%28%29;%20parent.removeRange%28parentOffset%20+%20fromIndex,%20parentOffset%20+%20toIndex%29;%20this.modCount%20=%20parent.modCount;%20this.size%20-=%20toIndex%20-%20fromIndex;%20%7d%20public%20boolean%20addAll%28Collection%3c?%20extends%20E%3e%20c%29%20%7b%20return%20addAll%28this.size,%20c%29;%20%7d%20public%20boolean%20addAll%28int%20index,%20Collection%3c?%20extends%20E%3e%20c%29%20%7b%20rangeCheckForAdd%28index%29;%20int%20cSize%20=%20c.size%28%29;%20if%20%28cSize%20==%200%29%20return%20false;%20checkForComodification%28%29;%20parent.addAll%28parentOffset%20+%20index,%20c%29;%20this.modCount%20=%20parent.modCount;%20this.size%20+=%20cSize;%20return%20true;%20%7d%20public%20Iterator%3cE%3e%20iterator%28%29%20%7b%20return%20listIterator%28%29;%20%7d%20public%20ListIterator%3cE%3e%20listIterator%28final%20int%20index%29%20%7b%20checkForComodification%28%29;%20rangeCheckForAdd%28index%29;%20final%20int%20offset%20=%20this.offset;%20return%20new%20ListIterator%3cE%3e%28%29%20%7b%20int%20cursor%20=%20index;%20int%20lastRet%20=%20-1;%20int%20expectedModCount%20=%20ArrayList.this.modCount;%20public%20boolean%20hasNext%28%29%20%7b%20return%20cursor%20!=%20SubList.this.size;%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20E%20next%28%29%20%7b%20checkForComodification%28%29;%20int%20i%20=%20cursor;%20if%20%28i%20%3e=%20SubList.this.size%29%20throw%20new%20NoSuchElementException%28%29;%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28offset%20+%20i%20%3e=%20elementData.length%29%20throw%20new%20ConcurrentModificationException%28%29;%20cursor%20=%20i%20+%201;%20return%20%28E%29%20elementData[offset%20+%20%28lastRet%20=%20i%29];%20%7d%20public%20boolean%20hasPrevious%28%29%20%7b%20return%20cursor%20!=%200;%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20E%20previous%28%29%20%7b%20checkForComodification%28%29;%20int%20i%20=%20cursor%20-%201;%20if%20%28i%20%3c%200%29%20throw%20new%20NoSuchElementException%28%29;%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28offset%20+%20i%20%3e=%20elementData.length%29%20throw%20new%20ConcurrentModificationException%28%29;%20cursor%20=%20i;%20return%20%28E%29%20elementData[offset%20+%20%28lastRet%20=%20i%29];%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20void%20forEachRemaining%28Consumer%3c?%20super%20E%3e%20consumer%29%20%7b%20Objects.requireNonNull%28consumer%29;%20final%20int%20size%20=%20SubList.this.size;%20int%20i%20=%20cursor;%20if%20%28i%20%3e=%20size%29%20%7b%20return;%20%7d%20final%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28offset%20+%20i%20%3e=%20elementData.length%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20while%20%28i%20!=%20size%20&&%20modCount%20==%20expectedModCount%29%20%7b%20consumer.accept%28%28E%29%20elementData[offset%20+%20%28i++%29]%29;%20%7d%20//%20update%20once%20at%20end%20of%20iteration%20to%20reduce%20heap%20write%20traffic%20lastRet%20=%20cursor%20=%20i;%20checkForComodification%28%29;%20%7d%20public%20int%20nextIndex%28%29%20%7b%20return%20cursor;%20%7d%20public%20int%20previousIndex%28%29%20%7b%20return%20cursor%20-%201;%20%7d%20public%20void%20remove%28%29%20%7b%20if%20%28lastRet%20%3c%200%29%20throw%20new%20IllegalStateException%28%29;%20checkForComodification%28%29;%20try%20%7b%20SubList.this.remove%28lastRet%29;%20cursor%20=%20lastRet;%20lastRet%20=%20-1;%20expectedModCount%20=%20ArrayList.this.modCount;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20public%20void%20set%28E%20e%29%20%7b%20if%20%28lastRet%20%3c%200%29%20throw%20new%20IllegalStateException%28%29;%20checkForComodification%28%29;%20try%20%7b%20ArrayList.this.set%28offset%20+%20lastRet,%20e%29;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20public%20void%20add%28E%20e%29%20%7b%20checkForComodification%28%29;%20try%20%7b%20int%20i%20=%20cursor;%20SubList.this.add%28i,%20e%29;%20cursor%20=%20i%20+%201;%20lastRet%20=%20-1;%20expectedModCount%20=%20ArrayList.this.modCount;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20final%20void%20checkForComodification%28%29%20%7b%20if%20%28expectedModCount%20!=%20ArrayList.this.modCount%29%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d;%20%7d%20public%20List%3cE%3e%20subList%28int%20fromIndex,%20int%20toIndex%29%20%7b%20subListRangeCheck%28fromIndex,%20toIndex,%20size%29;%20return%20new%20SubList%28this,%20offset,%20fromIndex,%20toIndex%29;%20%7d%20private%20void%20rangeCheck%28int%20index%29%20%7b%20if%20%28index%20%3c%200%20%7c%7c%20index%20%3e=%20this.size%29%20throw%20new%20IndexOutOfBoundsException%28outOfBoundsMsg%28index%29%29;%20%7d%20private%20void%20rangeCheckForAdd%28int%20index%29%20%7b%20if%20%28index%20%3c%200%20%7c%7c%20index%20%3e%20this.size%29%20throw%20new%20IndexOutOfBoundsException%28outOfBoundsMsg%28index%29%29;%20%7d%20private%20String%20outOfBoundsMsg%28int%20index%29%20%7b%20return%20%22Index:%20%22%20+%20index%20+%20%22,%20Size:%20%22%20+%20this.size;%20%7d%20private%20void%20checkForComodification%28%29%20%7b%20if%20%28ArrayList.this.modCount%20!=%20this.modCount%29%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20public%20Spliterator%3cE%3e%20spliterator%28%29%20%7b%20checkForComodification%28%29;%20return%20new%20ArrayListSpliterator%3cE%3e%28ArrayList.this,%20offset,%20offset%20+%20this.size,%20this.modCount%29;%20%7d%20%7d%20@Override%20public%20void%20forEach%28Consumer%3c?%20super%20E%3e%20action%29%20%7b%20Objects.requireNonNull%28action%29;%20final%20int%20expectedModCount%20=%20modCount;%20@SuppressWarnings%28%22unchecked%22%29%20final%20E[]%20elementData%20=%20%28E[]%29%20this.elementData;%20final%20int%20size%20=%20this.size;%20for%20%28int%20i%20=%200;%20modCount%20==%20expectedModCount%20&&%20i%20%3c%20size;%20i++%29%20%7b%20action.accept%28elementData[i]%29;%20%7d%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20/**%20*%20Creates%20a%20%3cem%3e%3ca%20href=%22Spliterator.html#binding%22%3elate-binding%3c/a%3e%3c/em%3e%20*%20and%20%3cem%3efail-fast%3c/em%3e%20%7b@link%20Spliterator%7d%20over%20the%20elements%20in%20this%20*%20list.%20*%20*%20%3cp%3eThe%20%7b@code%20Spliterator%7d%20reports%20%7b@link%20Spliterator#SIZED%7d,%20*%20%7b@link%20Spliterator#SUBSIZED%7d,%20and%20%7b@link%20Spliterator#ORDERED%7d.%20*%20Overriding%20implementations%20should%20document%20the%20reporting%20of%20additional%20*%20characteristic%20values.%20*%20*%20@return%20a%20%7b@code%20Spliterator%7d%20over%20the%20elements%20in%20this%20list%20*%20@since%201.8%20*/%20@Override%20public%20Spliterator%3cE%3e%20spliterator%28%29%20%7b%20return%20new%20ArrayListSpliterator%3c%3e%28this,%200,%20-1,%200%29;%20%7d%20/**%20*%20Index-based%20split-by-two,%20lazily%20initialized%20Spliterator%20*/%20static%20final%20class%20ArrayListSpliterator%3cE%3e%20implements%20Spliterator%3cE%3e%20%7b%20/*%20*%20If%20ArrayLists%20were%20immutable,%20or%20structurally%20immutable%20%28no%20*%20adds,%20removes,%20etc%29,%20we%20could%20implement%20their%20spliterators%20*%20with%20Arrays.spliterator.%20Instead%20we%20detect%20as%20much%20*%20interference%20during%20traversal%20as%20practical%20without%20*%20sacrificing%20much%20performance.%20We%20rely%20primarily%20on%20*%20modCounts.%20These%20are%20not%20guaranteed%20to%20detect%20concurrency%20*%20violations,%20and%20are%20sometimes%20overly%20conservative%20about%20*%20within-thread%20interference,%20but%20detect%20enough%20problems%20to%20*%20be%20worthwhile%20in%20practice.%20To%20carry%20this%20out,%20we%20%281%29%20lazily%20*%20initialize%20fence%20and%20expectedModCount%20until%20the%20latest%20*%20point%20that%20we%20need%20to%20commit%20to%20the%20state%20we%20are%20checking%20*%20against;%20thus%20improving%20precision.%20%28This%20doesn%27t%20apply%20to%20*%20SubLists,%20that%20create%20spliterators%20with%20current%20non-lazy%20*%20values%29.%20%282%29%20We%20perform%20only%20a%20single%20*%20ConcurrentModificationException%20check%20at%20the%20end%20of%20forEach%20*%20%28the%20most%20performance-sensitive%20method%29.%20When%20using%20forEach%20*%20%28as%20opposed%20to%20iterators%29,%20we%20can%20normally%20only%20detect%20*%20interference%20after%20actions,%20not%20before.%20Further%20*%20CME-triggering%20checks%20apply%20to%20all%20other%20possible%20*%20violations%20of%20assumptions%20for%20example%20null%20or%20too-small%20*%20elementData%20array%20given%20its%20size%28%29,%20that%20could%20only%20have%20*%20occurred%20due%20to%20interference.%20This%20allows%20the%20inner%20loop%20*%20of%20forEach%20to%20run%20without%20any%20further%20checks,%20and%20*%20simplifies%20lambda-resolution.%20While%20this%20does%20entail%20a%20*%20number%20of%20checks,%20note%20that%20in%20the%20common%20case%20of%20*%20list.stream%28%29.forEach%28a%29,%20no%20checks%20or%20other%20computation%20*%20occur%20anywhere%20other%20than%20inside%20forEach%20itself.%20The%20other%20*%20less-often-used%20methods%20cannot%20take%20advantage%20of%20most%20of%20*%20these%20streamlinings.%20*/%20private%20final%20ArrayList%3cE%3e%20list;%20private%20int%20index;%20//%20current%20index,%20modified%20on%20advance/split%20private%20int%20fence;%20//%20-1%20until%20used;%20then%20one%20past%20last%20index%20private%20int%20expectedModCount;%20//%20initialized%20when%20fence%20set%20/**%20*%20Create%20new%20spliterator%20covering%20the%20given%20range%20*/%20ArrayListSpliterator%28ArrayList%3cE%3e%20list,%20int%20origin,%20int%20fence,%20int%20expectedModCount%29%20%7b%20this.list%20=%20list;%20//%20OK%20if%20null%20unless%20traversed%20this.index%20=%20origin;%20this.fence%20=%20fence;%20this.expectedModCount%20=%20expectedModCount;%20%7d%20private%20int%20getFence%28%29%20%7b%20//%20initialize%20fence%20to%20size%20on%20first%20use%20int%20hi;%20//%20%28a%20specialized%20variant%20appears%20in%20method%20forEach%29%20ArrayList%3cE%3e%20lst;%20if%20%28%28hi%20=%20fence%29%20%3c%200%29%20%7b%20if%20%28%28lst%20=%20list%29%20==%20null%29%20hi%20=%20fence%20=%200;%20else%20%7b%20expectedModCount%20=%20lst.modCount;%20hi%20=%20fence%20=%20lst.size;%20%7d%20%7d%20return%20hi;%20%7d%20public%20ArrayListSpliterator%3cE%3e%20trySplit%28%29%20%7b%20int%20hi%20=%20getFence%28%29,%20lo%20=%20index,%20mid%20=%20%28lo%20+%20hi%29%20%3e%3e%3e%201;%20return%20%28lo%20%3e=%20mid%29%20?%20null%20:%20//%20divide%20range%20in%20half%20unless%20too%20small%20new%20ArrayListSpliterator%3cE%3e%28list,%20lo,%20index%20=%20mid,%20expectedModCount%29;%20%7d%20public%20boolean%20tryAdvance%28Consumer%3c?%20super%20E%3e%20action%29%20%7b%20if%20%28action%20==%20null%29%20throw%20new%20NullPointerException%28%29;%20int%20hi%20=%20getFence%28%29,%20i%20=%20index;%20if%20%28i%20%3c%20hi%29%20%7b%20index%20=%20i%20+%201;%20@SuppressWarnings%28%22unchecked%22%29%20E%20e%20=%20%28E%29%20list.elementData[i];%20action.accept%28e%29;%20if%20%28list.modCount%20!=%20expectedModCount%29%20throw%20new%20ConcurrentModificationException%28%29;%20return%20true;%20%7d%20return%20false;%20%7d%20public%20void%20forEachRemaining%28Consumer%3c?%20super%20E%3e%20action%29%20%7b%20int%20i,%20hi,%20mc;%20//%20hoist%20accesses%20and%20checks%20from%20loop%20ArrayList%3cE%3e%20lst;%20Object[]%20a;%20if%20%28action%20==%20null%29%20throw%20new%20NullPointerException%28%29;%20if%20%28%28lst%20=%20list%29%20!=%20null%20&&%20%28a%20=%20lst.elementData%29%20!=%20null%29%20%7b%20if%20%28%28hi%20=%20fence%29%20%3c%200%29%20%7b%20mc%20=%20lst.modCount;%20hi%20=%20lst.size;%20%7d%20else%20mc%20=%20expectedModCount;%20if%20%28%28i%20=%20index%29%20%3e=%200%20&&%20%28index%20=%20hi%29%20%3c=%20a.length%29%20%7b%20for%20%28;%20i%20%3c%20hi;%20++i%29%20%7b%20@SuppressWarnings%28%22unchecked%22%29%20E%20e%20=%20%28E%29%20a[i];%20action.accept%28e%29;%20%7d%20if%20%28lst.modCount%20==%20mc%29%20return;%20%7d%20%7d%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20public%20long%20estimateSize%28%29%20%7b%20return%20%28long%29%20%28getFence%28%29%20-%20index%29;%20%7d%20public%20int%20characteristics%28%29%20%7b%20return%20Spliterator.ORDERED%20%7c%20Spliterator.SIZED%20%7c%20Spliterator.SUBSIZED;%20%7d%20%7d%20@Override%20public%20boolean%20removeIf%28Predicate%3c?%20super%20E%3e%20filter%29%20%7b%20Objects.requireNonNull%28filter%29;%20//%20figure%20out%20which%20elements%20are%20to%20be%20removed%20//%20any%20exception%20thrown%20from%20the%20filter%20predicate%20at%20this%20stage%20//%20will%20leave%20the%20collection%20unmodified%20int%20removeCount%20=%200;%20final%20BitSet%20removeSet%20=%20new%20BitSet%28size%29;%20final%20int%20expectedModCount%20=%20modCount;%20final%20int%20size%20=%20this.size;%20for%20%28int%20i%20=%200;%20modCount%20==%20expectedModCount%20&&%20i%20%3c%20size;%20i++%29%20%7b%20@SuppressWarnings%28%22unchecked%22%29%20final%20E%20element%20=%20%28E%29%20elementData[i];%20if%20%28filter.test%28element%29%29%20%7b%20removeSet.set%28i%29;%20removeCount++;%20%7d%20%7d%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20//%20shift%20surviving%20elements%20left%20over%20the%20spaces%20left%20by%20removed%20elements%20final%20boolean%20anyToRemove%20=%20removeCount%20%3e%200;%20if%20%28anyToRemove%29%20%7b%20final%20int%20newSize%20=%20size%20-%20removeCount;%20for%20%28int%20i%20=%200,%20j%20=%200;%20%28i%20%3c%20size%29%20&&%20%28j%20%3c%20newSize%29;%20i++,%20j++%29%20%7b%20i%20=%20removeSet.nextClearBit%28i%29;%20elementData[j]%20=%20elementData[i];%20%7d%20for%20%28int%20k%20=%20newSize;%20k%20%3c%20size;%20k++%29%20%7b%20elementData[k]%20=%20null;%20//%20Let%20gc%20do%20its%20work%20%7d%20this.size%20=%20newSize;%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20modCount++;%20%7d%20return%20anyToRemove;%20%7d%20@Override%20@SuppressWarnings%28%22unchecked%22%29%20public%20void%20replaceAll%28UnaryOperator%3cE%3e%20operator%29%20%7b%20Objects.requireNonNull%28operator%29;%20final%20int%20expectedModCount%20=%20modCount;%20final%20int%20size%20=%20this.size;%20for%20%28int%20i%20=%200;%20modCount%20==%20expectedModCount%20&&%20i%20%3c%20size;%20i++%29%20%7b%20elementData[i]%20=%20operator.apply%28%28E%29%20elementData[i]%29;%20%7d%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20modCount++;%20%7d%20@Override%20@SuppressWarnings%28%22unchecked%22%29%20public%20void%20sort%28Comparator%3c?%20super%20E%3e%20c%29%20%7b%20final%20int%20expectedModCount%20=%20modCount;%20Arrays.sort%28%28E[]%29%20elementData,%200,%20size,%20c%29;%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20modCount++;%20%7d%20%7d%20%e6%89%a9%e5%ae%b9%e5%88%86%e6%9e%90&amp;source=muja%27s%20Space%20" title=分享到「LinkedIn」 target=_blank rel=noopener><svg viewBox="0 0 448 512" class="icon linkedin-icon"><path d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></a></div><div class="share-item telegram"><a href="https://t.me/share/url?url=https://www.mujaspace.com/tech/2023/arraylist%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/&amp;text=ArrayList%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90%20building" title=分享到「Telegram」 target=_blank rel=noopener><svg viewBox="0 0 496 512" class="icon telegram-icon"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"/></svg></a></div><div class="share-item weibo"><a href="https://service.weibo.com/share/share.php?&amp;url=https://www.mujaspace.com/tech/2023/arraylist%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/&amp;title=ArrayList%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90%20building&amp;pic=https://www.mujaspace.com/icons/apple-touch-icon.png&amp;searchPic=false" title=分享到「新浪微博」 target=_blank rel=noopener><svg viewBox="0 0 512 512" class="icon weibo-icon"><path d="M407 177.6c7.6-24-13.4-46.8-37.4-41.7-22 4.8-28.8-28.1-7.1-32.8 50.1-10.9 92.3 37.1 76.5 84.8-6.8 21.2-38.8 10.8-32-10.3zM214.8 446.7C108.5 446.7.0 395.3.0 310.4c0-44.3 28-95.4 76.3-143.7C176 67 279.5 65.8 249.9 161c-4 13.1 12.3 5.7 12.3 6 79.5-33.6 140.5-16.8 114 51.4-3.7 9.4 1.1 10.9 8.3 13.1 135.7 42.3 34.8 215.2-169.7 215.2zm143.7-146.3c-5.4-55.7-78.5-94-163.4-85.7-84.8 8.6-148.8 60.3-143.4 116s78.5 94 163.4 85.7c84.8-8.6 148.8-60.3 143.4-116zM347.9 35.1c-25.9 5.6-16.8 43.7 8.3 38.3 72.3-15.2 134.8 52.8 111.7 124-7.4 24.2 29.1 37 37.4 12 31.9-99.8-55.1-195.9-157.4-174.3zm-78.5 311c-17.1 38.8-66.8 60-109.1 46.3-40.8-13.1-58-53.4-40.3-89.7 17.7-35.4 63.1-55.4 103.4-45.1 42 10.8 63.1 50.2 46 88.5zm-86.3-30c-12.9-5.4-30 .3-38 12.9-8.3 12.9-4.3 28 8.6 34 13.1 6 30.8.3 39.1-12.9 8-13.1 3.7-28.3-9.7-34zm32.6-13.4c-5.1-1.7-11.4.6-14.3 5.4-2.9 5.1-1.4 10.6 3.7 12.9 5.1 2 11.7-.3 14.6-5.4 2.8-5.2 1.1-10.9-4-12.9z"/></svg></a></div><div class="share-item douban"><a href="https://www.douban.com/share/service?href=https://www.mujaspace.com/tech/2023/arraylist%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/&amp;name=ArrayList%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90%20building&amp;text=%e7%ae%80%e4%bb%8b%20ArrayList%e7%bb%a7%e6%89%bf%e4%ba%8e%c2%a0AbstractList%c2%a0%e7%b1%bb%ef%bc%8c%e5%ae%9e%e7%8e%b0%e4%ba%86%c2%a0List,%c2%a0RandomAccess,%c2%a0Cloneable,%c2%a0java.io.Serializable%c2%a0%e8%bf%99%e4%ba%9b%e6%8e%a5%e5%8f%a3%e3%80%82%0aList%ef%bc%9a%e8%a1%a8%e6%98%8e%e6%98%af%e4%b8%80%e4%b8%aa%e5%88%97%e8%a1%a8%ef%bc%8c%e6%94%af%e6%8c%81%e6%b7%bb%e5%8a%a0%e3%80%81%e5%88%a0%e9%99%a4%e3%80%81%e6%9f%a5%e6%89%be%e7%ad%89%e6%93%8d%e4%bd%9c%ef%bc%8c%e5%b9%b6%e4%b8%94%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e4%b8%8b%e6%a0%87%e8%bf%9b%e8%a1%8c%e8%ae%bf%e9%97%ae%e3%80%82%20RandomAccess%ef%bc%9a%e6%98%af%e4%b8%80%e4%b8%aa%e6%a0%87%e5%bf%97%e6%8e%a5%e5%8f%a3%ef%bc%8c%e8%a1%a8%e6%98%8e%e5%ae%9e%e7%8e%b0%e8%bf%99%e4%b8%aa%e8%bf%99%e4%b8%aa%e6%8e%a5%e5%8f%a3%e7%9a%84%20List%20%e9%9b%86%e5%90%88%e6%98%af%e6%94%af%e6%8c%81%e5%bf%ab%e9%80%9f%e9%9a%8f%e6%9c%ba%e8%ae%bf%e9%97%ae%e7%9a%84%e3%80%82%e5%9c%a8%c2%a0ArrayList%c2%a0%e4%b8%ad%ef%bc%8c%e6%88%91%e4%bb%ac%e5%8d%b3%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e5%85%83%e7%b4%a0%e7%9a%84%e5%ba%8f%e5%8f%b7%e5%bf%ab%e9%80%9f%e8%8e%b7%e5%8f%96%e5%85%83%e7%b4%a0%e5%af%b9%e8%b1%a1%ef%bc%8c%e8%bf%99%e5%b0%b1%e6%98%af%e5%bf%ab%e9%80%9f%e9%9a%8f%e6%9c%ba%e8%ae%bf%e9%97%ae%e3%80%82%20Cloneable%c2%a0%ef%bc%9a%e5%8d%b3%e8%a6%86%e7%9b%96%e4%ba%86%e5%87%bd%e6%95%b0clone%28%29%ef%bc%8c%e8%83%bd%e8%a2%ab%e5%85%8b%e9%9a%86%e3%80%82%20Serializable%ef%bc%9a%e8%bf%99%e6%84%8f%e5%91%b3%e7%9d%80ArrayList%e6%94%af%e6%8c%81%e5%ba%8f%e5%88%97%e5%8c%96%ef%bc%8c%e8%83%bd%e9%80%9a%e8%bf%87%e5%ba%8f%e5%88%97%e5%8c%96%e5%8e%bb%e4%bc%a0%e8%be%93%e3%80%82%201%202%203%20public%20class%20ArrayList%3cE%3e%20extends%20AbstractList%3cE%3e%20implements%20List%3cE%3e,%20RandomAccess,%20Cloneable,%20java.io.Serializable%20%7b%7d%20%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90%201%202%203%204%205%206%207%208%209%2010%2011%2012%2013%2014%2015%2016%2017%2018%2019%2020%2021%2022%2023%2024%2025%2026%2027%2028%2029%2030%2031%2032%2033%2034%2035%2036%2037%2038%2039%2040%2041%2042%2043%2044%2045%2046%2047%2048%2049%2050%2051%2052%2053%2054%2055%2056%2057%2058%2059%2060%2061%2062%2063%2064%2065%2066%2067%2068%2069%2070%2071%2072%2073%2074%2075%2076%2077%2078%2079%2080%2081%2082%2083%2084%2085%2086%2087%2088%2089%2090%2091%2092%2093%2094%2095%2096%2097%2098%2099%20100%20101%20102%20103%20104%20105%20106%20107%20108%20109%20110%20111%20112%20113%20114%20115%20116%20117%20118%20119%20120%20121%20122%20123%20124%20125%20126%20127%20128%20129%20130%20131%20132%20133%20134%20135%20136%20137%20138%20139%20140%20141%20142%20143%20144%20145%20146%20147%20148%20149%20150%20151%20152%20153%20154%20155%20156%20157%20158%20159%20160%20161%20162%20163%20164%20165%20166%20167%20168%20169%20170%20171%20172%20173%20174%20175%20176%20177%20178%20179%20180%20181%20182%20183%20184%20185%20186%20187%20188%20189%20190%20191%20192%20193%20194%20195%20196%20197%20198%20199%20200%20201%20202%20203%20204%20205%20206%20207%20208%20209%20210%20211%20212%20213%20214%20215%20216%20217%20218%20219%20220%20221%20222%20223%20224%20225%20226%20227%20228%20229%20230%20231%20232%20233%20234%20235%20236%20237%20238%20239%20240%20241%20242%20243%20244%20245%20246%20247%20248%20249%20250%20251%20252%20253%20254%20255%20256%20257%20258%20259%20260%20261%20262%20263%20264%20265%20266%20267%20268%20269%20270%20271%20272%20273%20274%20275%20276%20277%20278%20279%20280%20281%20282%20283%20284%20285%20286%20287%20288%20289%20290%20291%20292%20293%20294%20295%20296%20297%20298%20299%20300%20301%20302%20303%20304%20305%20306%20307%20308%20309%20310%20311%20312%20313%20314%20315%20316%20317%20318%20319%20320%20321%20322%20323%20324%20325%20326%20327%20328%20329%20330%20331%20332%20333%20334%20335%20336%20337%20338%20339%20340%20341%20342%20343%20344%20345%20346%20347%20348%20349%20350%20351%20352%20353%20354%20355%20356%20357%20358%20359%20360%20361%20362%20363%20364%20365%20366%20367%20368%20369%20370%20371%20372%20373%20374%20375%20376%20377%20378%20379%20380%20381%20382%20383%20384%20385%20386%20387%20388%20389%20390%20391%20392%20393%20394%20395%20396%20397%20398%20399%20400%20401%20402%20403%20404%20405%20406%20407%20408%20409%20410%20411%20412%20413%20414%20415%20416%20417%20418%20419%20420%20421%20422%20423%20424%20425%20426%20427%20428%20429%20430%20431%20432%20433%20434%20435%20436%20437%20438%20439%20440%20441%20442%20443%20444%20445%20446%20447%20448%20449%20450%20451%20452%20453%20454%20455%20456%20457%20458%20459%20460%20461%20462%20463%20464%20465%20466%20467%20468%20469%20470%20471%20472%20473%20474%20475%20476%20477%20478%20479%20480%20481%20482%20483%20484%20485%20486%20487%20488%20489%20490%20491%20492%20493%20494%20495%20496%20497%20498%20499%20500%20501%20502%20503%20504%20505%20506%20507%20508%20509%20510%20511%20512%20513%20514%20515%20516%20517%20518%20519%20520%20521%20522%20523%20524%20525%20526%20527%20528%20529%20530%20531%20532%20533%20534%20535%20536%20537%20538%20539%20540%20541%20542%20543%20544%20545%20546%20547%20548%20549%20550%20551%20552%20553%20554%20555%20556%20557%20558%20559%20560%20561%20562%20563%20564%20565%20566%20567%20568%20569%20570%20571%20572%20573%20574%20575%20576%20577%20578%20579%20580%20581%20582%20583%20584%20585%20586%20587%20588%20589%20590%20591%20592%20593%20594%20595%20596%20597%20598%20599%20600%20601%20602%20603%20604%20605%20606%20607%20608%20609%20610%20611%20612%20613%20614%20615%20616%20617%20618%20619%20620%20621%20622%20623%20624%20625%20626%20627%20628%20629%20630%20631%20632%20633%20634%20635%20636%20637%20638%20639%20640%20641%20642%20643%20644%20645%20646%20647%20648%20649%20650%20651%20652%20653%20654%20655%20656%20657%20658%20659%20660%20661%20662%20663%20664%20665%20666%20667%20668%20669%20670%20671%20672%20673%20674%20675%20676%20677%20678%20679%20680%20681%20682%20683%20684%20685%20686%20687%20688%20689%20690%20691%20692%20693%20694%20695%20696%20697%20698%20699%20700%20701%20702%20703%20704%20705%20706%20707%20708%20709%20710%20711%20712%20713%20714%20715%20716%20717%20718%20719%20720%20721%20722%20723%20724%20725%20726%20727%20728%20729%20730%20731%20732%20733%20734%20735%20736%20737%20738%20739%20740%20741%20742%20743%20744%20745%20746%20747%20748%20749%20750%20751%20752%20753%20754%20755%20756%20757%20758%20759%20760%20761%20762%20763%20764%20765%20766%20767%20768%20769%20770%20771%20772%20773%20774%20775%20776%20777%20778%20779%20780%20781%20782%20783%20784%20785%20786%20787%20788%20789%20790%20791%20792%20793%20794%20795%20796%20797%20798%20799%20800%20801%20802%20803%20804%20805%20806%20807%20808%20809%20810%20811%20812%20813%20814%20815%20816%20817%20818%20819%20820%20821%20822%20823%20824%20825%20826%20827%20828%20829%20830%20831%20832%20833%20834%20835%20836%20837%20838%20839%20840%20841%20842%20843%20844%20845%20846%20847%20848%20849%20850%20851%20852%20853%20854%20855%20856%20857%20858%20859%20860%20861%20862%20863%20864%20865%20866%20867%20868%20869%20870%20871%20872%20873%20874%20875%20876%20877%20878%20879%20880%20881%20882%20883%20884%20885%20886%20887%20888%20889%20890%20891%20892%20893%20894%20895%20896%20897%20898%20899%20900%20901%20902%20903%20904%20905%20906%20907%20908%20909%20910%20911%20912%20913%20914%20915%20916%20917%20918%20919%20920%20921%20922%20923%20924%20925%20926%20927%20928%20929%20930%20931%20932%20933%20934%20935%20936%20937%20938%20939%20940%20941%20942%20943%20944%20945%20946%20947%20948%20949%20950%20951%20952%20953%20954%20955%20956%20957%20958%20959%20960%20961%20962%20963%20964%20965%20966%20967%20968%20969%20970%20971%20972%20973%20974%20975%20976%20977%20978%20979%20980%20981%20982%20983%20984%20985%20986%20987%20988%20989%20990%20991%20992%20993%20994%20995%20996%20997%20998%20999%201000%201001%201002%201003%201004%201005%201006%201007%201008%201009%201010%201011%201012%201013%201014%201015%201016%201017%201018%201019%201020%201021%201022%201023%201024%201025%201026%201027%201028%201029%201030%201031%201032%201033%201034%201035%201036%201037%201038%201039%201040%201041%201042%201043%201044%201045%201046%201047%201048%201049%201050%201051%201052%201053%201054%201055%201056%201057%201058%201059%201060%201061%201062%201063%201064%201065%201066%201067%201068%201069%201070%201071%201072%201073%201074%201075%201076%201077%201078%201079%201080%201081%201082%201083%201084%201085%201086%201087%201088%201089%201090%201091%201092%201093%201094%201095%201096%201097%201098%201099%201100%201101%201102%201103%201104%201105%201106%201107%201108%201109%201110%201111%201112%201113%201114%201115%201116%201117%201118%201119%201120%201121%201122%201123%201124%201125%201126%201127%201128%201129%201130%201131%201132%201133%201134%201135%201136%201137%201138%201139%201140%201141%201142%201143%201144%201145%201146%201147%201148%201149%201150%201151%201152%201153%201154%201155%201156%201157%201158%201159%201160%201161%201162%201163%201164%201165%201166%201167%201168%201169%201170%201171%201172%201173%201174%201175%201176%201177%201178%201179%201180%201181%201182%201183%201184%201185%20package%20java.util;%20import%20java.util.function.Consumer;%20import%20java.util.function.Predicate;%20import%20java.util.function.UnaryOperator;%20public%20class%20ArrayList%3cE%3e%20extends%20AbstractList%3cE%3e%20implements%20List%3cE%3e,%20RandomAccess,%20Cloneable,%20java.io.Serializable%20%7b%20private%20static%20final%20long%20serialVersionUID%20=%208683452581122892189L;%20/**%20*%20Default%20initial%20capacity.%20mjy%ef%bc%9a%e9%bb%98%e8%ae%a4%e5%88%9d%e5%a7%8b%e5%ae%b9%e9%87%8f%e5%a4%a7%e5%b0%8f%20*/%20private%20static%20final%20int%20DEFAULT_CAPACITY%20=%2010;%20/**%20*%20Shared%20empty%20array%20instance%20used%20for%20empty%20instances.%20mjy%ef%bc%9a%e7%a9%ba%e6%95%b0%e7%bb%84%ef%bc%88%e7%94%a8%e4%ba%8e%e7%a9%ba%e5%ae%9e%e4%be%8b%ef%bc%89%e3%80%82%20*/%20private%20static%20final%20Object[]%20EMPTY_ELEMENTDATA%20=%20%7b%7d;%20/**%20*%20Shared%20empty%20array%20instance%20used%20for%20default%20sized%20empty%20instances.%20We%20*%20distinguish%20this%20from%20EMPTY_ELEMENTDATA%20to%20know%20how%20much%20to%20inflate%20when%20*%20first%20element%20is%20added.%20*/%20//%20mjy%ef%bc%9a%e7%94%a8%e4%ba%8e%e9%bb%98%e8%ae%a4%e5%a4%a7%e5%b0%8f%e7%a9%ba%e5%ae%9e%e4%be%8b%e7%9a%84%e5%85%b1%e4%ba%ab%e7%a9%ba%e6%95%b0%e7%bb%84%e5%ae%9e%e4%be%8b%e3%80%82%e5%92%8cEMPTY_ELEMENTDATA%e6%95%b0%e7%bb%84%e5%8c%ba%e5%88%86%ef%bc%8c%e4%bb%a5%e7%9f%a5%e9%81%93%e5%9c%a8%e6%b7%bb%e5%8a%a0%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%e6%97%b6%e5%ae%b9%e9%87%8f%e9%9c%80%e8%a6%81%e5%a2%9e%e5%8a%a0%e5%a4%9a%e5%b0%91%e3%80%82%20private%20static%20final%20Object[]%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%20=%20%7b%7d;%20/**%20*%20The%20array%20buffer%20into%20which%20the%20elements%20of%20the%20ArrayList%20are%20stored.%20*%20The%20capacity%20of%20the%20ArrayList%20is%20the%20length%20of%20this%20array%20buffer.%20Any%20*%20empty%20ArrayList%20with%20elementData%20==%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%20*%20will%20be%20expanded%20to%20DEFAULT_CAPACITY%20when%20the%20first%20element%20is%20added.%20*/%20//%20mjy%ef%bc%9a%e5%ad%98%e5%82%a8ArrayList%e5%85%83%e7%b4%a0%e7%9a%84%e6%95%b0%e7%bb%84%e7%bc%93%e5%86%b2%e5%8c%ba%ef%bc%88%e5%b0%b1%e6%98%af%e4%bf%9d%e5%ad%98ArrayList%e6%95%b0%e6%8d%ae%e7%9a%84%e6%95%b0%e7%bb%84%ef%bc%89%e3%80%82ArrayList%e7%9a%84%e5%ae%b9%e9%87%8f%e6%98%af%e6%ad%a4%e6%95%b0%e7%bb%84%e7%bc%93%e5%86%b2%e5%8c%ba%e7%9a%84%e9%95%bf%e5%ba%a6%e3%80%82%e6%b7%bb%e5%8a%a0%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%e6%97%b6%ef%bc%8c%e4%bb%bb%e4%bd%95%e5%85%b7%e6%9c%89elementData==DEFAULTCAPACITY_EMMENTDATA%e7%9a%84%e7%a9%baArrayList%e9%83%bd%e5%b0%86%e6%89%a9%e5%b1%95%e4%b8%baDEFAULT_CAPACITY%e3%80%82%20transient%20Object[]%20elementData;%20//%20non-private%20to%20simplify%20nested%20class%20access%20/**%20*%20The%20size%20of%20the%20ArrayList%20%28the%20number%20of%20elements%20it%20contains%29.%20mjy%ef%bc%9a%e6%95%b0%e7%bb%84%e9%95%bf%e5%ba%a6%e5%a4%a7%e5%b0%8f%ef%bc%88%e5%85%83%e7%b4%a0%e4%b8%aa%e6%95%b0%ef%bc%89%20*%20*%20@serial%20*/%20private%20int%20size;%20/**%20*%20Constructs%20an%20empty%20list%20with%20the%20specified%20initial%20capacity.%20*%20*%20@param%20initialCapacity%20the%20initial%20capacity%20of%20the%20list%20*%20@throws%20IllegalArgumentException%20if%20the%20specified%20initial%20capacity%20*%20is%20negative%20*/%20//%20mjy%ef%bc%9a%e5%b8%a6%e5%88%9d%e5%a7%8b%e5%ae%b9%e9%87%8f%e5%8f%82%e6%95%b0%e7%9a%84%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%ef%bc%88%e7%94%a8%e6%88%b7%e5%8f%af%e4%bb%a5%e5%9c%a8%e5%88%9b%e5%bb%baArrayList%e5%af%b9%e8%b1%a1%e6%97%b6%e8%87%aa%e5%b7%b1%e6%8c%87%e5%ae%9a%e9%9b%86%e5%90%88%e7%9a%84%e5%88%9d%e5%a7%8b%e5%a4%a7%e5%b0%8f%ef%bc%89%20public%20ArrayList%28int%20initialCapacity%29%20%7b%20if%20%28initialCapacity%20%3e%200%29%20%7b%20//%20%e4%bc%a0%e5%85%a5%e7%9a%84%e5%8f%82%e6%95%b0%e5%a4%a7%e4%ba%8e0%ef%bc%8c%e5%88%9b%e5%bb%bainitialCapacity%e5%a4%a7%e5%b0%8f%e7%9a%84%e6%95%b0%e7%bb%84%20this.elementData%20=%20new%20Object[initialCapacity];%20%7d%20else%20if%20%28initialCapacity%20==%200%29%20%7b%20//%20%e4%bc%a0%e5%85%a5%e7%9a%84%e5%8f%82%e6%95%b0%e7%ad%89%e4%ba%8e0%ef%bc%8c%e5%88%9b%e5%bb%ba%e7%a9%ba%e6%95%b0%e7%bb%84%20this.elementData%20=%20EMPTY_ELEMENTDATA;%20%7d%20else%20%7b%20//%20%e5%85%b6%e4%bb%96%e6%83%85%e5%86%b5%e5%bc%82%e5%b8%b8%20throw%20new%20IllegalArgumentException%28%22Illegal%20Capacity:%20%22%20+%20initialCapacity%29;%20%7d%20%7d%20/**%20*%20Constructs%20an%20empty%20list%20with%20an%20initial%20capacity%20of%20ten.%20*/%20//%20mjy%ef%bc%9a%e9%bb%98%e8%ae%a4%e6%97%a0%e5%8f%82%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%e4%b8%ba0%e3%80%82%e5%88%9d%e5%a7%8b%e5%85%b6%e5%ae%9e%e6%98%af%e7%a9%ba%e6%95%b0%e7%bb%84%ef%bc%8c%e5%bd%93%e6%b7%bb%e5%8a%a0%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%e7%9a%84%e6%97%b6%e5%80%99%e6%95%b0%e7%bb%84%e5%ae%b9%e9%87%8f%e6%89%8d%e5%8f%98%e6%88%9010%20public%20ArrayList%28%29%20%7b%20this.elementData%20=%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA;%20%7d%20/**%20*%20Constructs%20a%20list%20containing%20the%20elements%20of%20the%20specified%20*%20collection,%20in%20the%20order%20they%20are%20returned%20by%20the%20collection%27s%20*%20iterator.%20*%20*%20@param%20c%20the%20collection%20whose%20elements%20are%20to%20be%20placed%20into%20this%20list%20*%20@throws%20NullPointerException%20if%20the%20specified%20collection%20is%20null%20*/%20//%20mjy%ef%bc%9a%e6%9e%84%e9%80%a0%e4%b8%80%e4%b8%aa%e5%8c%85%e5%90%ab%e6%8c%87%e5%ae%9a%e9%9b%86%e5%90%88%e7%9a%84%e5%85%83%e7%b4%a0%e7%9a%84%e5%88%97%e8%a1%a8%ef%bc%8c%e6%8c%89%e7%85%a7%e5%ae%83%e4%bb%ac%e7%94%b1%e9%9b%86%e5%90%88%e7%9a%84%e8%bf%ad%e4%bb%a3%e5%99%a8%e8%bf%94%e5%9b%9e%e7%9a%84%e9%a1%ba%e5%ba%8f%e3%80%82%20new%20ArrayList%3c%3e%28paramList%29;%20public%20ArrayList%28Collection%3c?%20extends%20E%3e%20c%29%20%7b%20//%20%e5%b0%86%e5%8f%82%e6%95%b0%e8%bd%ac%e6%8d%a2%e4%b8%ba%e6%95%b0%e7%bb%84%20elementData%20=%20c.toArray%28%29;%20//%20elementData%e6%95%b0%e7%bb%84%e7%9a%84%e9%95%bf%e5%ba%a6%e4%b8%8d%e4%b8%ba0%20if%20%28%28size%20=%20elementData.length%29%20!=%200%29%20%7b%20//%20c.toArray%20might%20%28incorrectly%29%20not%20return%20Object[]%20%28see%206260652%29%20//%20mjy%ef%bc%9a%20elementData%e4%b8%8d%e6%98%afObject%e7%b1%bb%e5%9e%8b%e6%95%b0%e6%8d%ae%ef%bc%88c.toArray%e5%8f%af%e8%83%bd%e8%bf%94%e5%9b%9e%e7%9a%84%e4%b8%8d%e6%98%afObject%e7%b1%bb%e5%9e%8b%e7%9a%84%e6%95%b0%e7%bb%84%ef%bc%89%20if%20%28elementData.getClass%28%29%20!=%20Object[].class%29%20//%20mjy%ef%bc%9a%20%e5%b0%86%e5%8e%9f%e6%9d%a5%e4%b8%8d%e6%98%afObject%e7%b1%bb%e5%9e%8b%e7%9a%84elementData%e6%95%b0%e7%bb%84%e7%9a%84%e5%86%85%e5%ae%b9%ef%bc%8c%e8%b5%8b%e5%80%bc%e7%bb%99%e6%96%b0%e7%9a%84Object%e7%b1%bb%e5%9e%8b%e7%9a%84elementData%e6%95%b0%e7%bb%84%20elementData%20=%20Arrays.copyOf%28elementData,%20size,%20Object[].class%29;%20%7d%20else%20%7b%20//%20replace%20with%20empty%20array.%20mjy%ef%bc%9a%20elementData%e6%95%b0%e7%bb%84%e7%9a%84%e9%95%bf%e5%ba%a6%e4%b8%ba0%ef%bc%8c%e5%8d%b3%e4%b8%ba%e7%a9%ba%e6%95%b0%e7%bb%84%20this.elementData%20=%20EMPTY_ELEMENTDATA;%20%7d%20%7d%20/**%20*%20Trims%20the%20capacity%20of%20this%20%3ctt%3eArrayList%3c/tt%3e%20instance%20to%20be%20the%20*%20list%27s%20current%20size.%20An%20application%20can%20use%20this%20operation%20to%20minimize%20*%20the%20storage%20of%20an%20%3ctt%3eArrayList%3c/tt%3e%20instance.%20*/%20//%20mjy%ef%bc%9a%20%e4%bf%ae%e6%94%b9%e8%bf%99%e4%b8%aaArrayList%e5%ae%9e%e4%be%8b%e7%9a%84%e5%ae%b9%e9%87%8f%e6%98%af%e5%88%97%e8%a1%a8%e7%9a%84%e5%bd%93%e5%89%8d%e5%a4%a7%e5%b0%8f%e3%80%82%20%e5%8f%af%e4%bb%a5%e4%bd%bf%e7%94%a8%e6%ad%a4%e6%93%8d%e4%bd%9c%e6%9d%a5%e6%9c%80%e5%b0%8f%e5%8c%96ArrayList%e5%ae%9e%e4%be%8b%e7%9a%84%e5%ad%98%e5%82%a8%e3%80%82%20public%20void%20trimToSize%28%29%20%7b%20modCount++;%20if%20%28size%20%3c%20elementData.length%29%20%7b%20elementData%20=%20%28size%20==%200%29%20?%20EMPTY_ELEMENTDATA%20:%20Arrays.copyOf%28elementData,%20size%29;%20%7d%20%7d%20/**%20*%20Increases%20the%20capacity%20of%20this%20%3ctt%3eArrayList%3c/tt%3e%20instance,%20if%20*%20necessary,%20to%20ensure%20that%20it%20can%20hold%20at%20least%20the%20number%20of%20elements%20*%20specified%20by%20the%20minimum%20capacity%20argument.%20*%20mjy%ef%bc%9a%20%e5%a6%82%e6%9c%89%e5%bf%85%e8%a6%81%ef%bc%8c%e5%a2%9e%e5%8a%a0%e6%ad%a4ArrayList%e5%ae%9e%e4%be%8b%e7%9a%84%e5%ae%b9%e9%87%8f%ef%bc%8c%e4%bb%a5%e7%a1%ae%e4%bf%9d%e5%ae%83%e8%87%b3%e5%b0%91%e5%8f%af%e4%bb%a5%e5%ae%b9%e7%ba%b3%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e5%8f%82%e6%95%b0%e6%8c%87%e5%ae%9a%e7%9a%84%e5%85%83%e7%b4%a0%e6%95%b0%e9%87%8f%e3%80%82%20*%20*%20@param%20minCapacity%20the%20desired%20minimum%20capacity%20mjy%ef%bc%9a%e6%89%80%e9%9c%80%e7%9a%84%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%20*/%20public%20void%20ensureCapacity%28int%20minCapacity%29%20%7b%20//%20mjy%ef%bc%9a%20%28%e6%95%b0%e7%bb%84%e5%85%83%e7%b4%a0%e4%b8%8d%e4%b8%ba%e7%a9%ba%29%20%e5%a6%82%e6%9e%9c%e6%98%aftrue%ef%bc%8cminExpand%e7%9a%84%e5%80%bc%e4%b8%ba0%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%98%affalse,minExpand%e7%9a%84%e5%80%bc%e4%b8%ba10%20int%20minExpand%20=%20%28elementData%20!=%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%29%20//%20any%20size%20if%20not%20default%20element%20table%20?%200%20//%20larger%20than%20default%20for%20default%20empty%20table.%20It%27s%20already%20//%20supposed%20to%20be%20at%20default%20size.%20:%20DEFAULT_CAPACITY;%20//%20%e5%a6%82%e6%9e%9c%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e5%a4%a7%e4%ba%8e%e5%b7%b2%e6%9c%89%e7%9a%84%e6%9c%80%e5%a4%a7%e5%ae%b9%e9%87%8f%20if%20%28minCapacity%20%3e%20minExpand%29%20%7b%20ensureExplicitCapacity%28minCapacity%29;%20%7d%20%7d%20//%20mjy%ef%bc%9a%20%e7%a1%ae%e4%bf%9d%e5%86%85%e9%83%a8%e5%ae%b9%e9%87%8f%20private%20void%20ensureCapacityInternal%28int%20minCapacity%29%20%7b%20//%20mjy%ef%bc%9a%e5%a6%82%e6%9e%9c%e5%85%83%e7%b4%a0%e6%98%af%e7%a9%ba%20if%20%28elementData%20==%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%89%80%e9%9c%80%e8%a6%81%e7%9a%84%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e4%b8%ba%20%e9%bb%98%e8%ae%a4%e5%ae%b9%e9%87%8f%e5%92%8c%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e7%9b%b8%e6%af%94%20%e8%be%83%e5%a4%a7%e7%9a%84%e4%b8%80%e4%b8%aa%20minCapacity%20=%20Math.max%28DEFAULT_CAPACITY,%20minCapacity%29;%20%7d%20//%20%e7%a1%ae%e4%bf%9d%20%e5%ae%b9%e9%87%8f%20ensureExplicitCapacity%28minCapacity%29;%20%7d%20private%20void%20ensureExplicitCapacity%28int%20minCapacity%29%20%7b%20modCount++;%20//%20overflow-conscious%20code%20//%20mjy%ef%bc%9a%e6%89%80%e9%9c%80%e8%a6%81%e7%9a%84%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e5%87%8f%e5%8e%bb%e7%8e%b0%e5%9c%a8%e7%9a%84%e6%95%b0%e7%bb%84%e5%85%83%e7%b4%a0%e9%95%bf%e5%ba%a6%20%e5%a4%a7%e4%ba%8e0%20if%20%28minCapacity%20-%20elementData.length%20%3e%200%29%20//%20mjy%ef%bc%9a%e8%b0%83%e7%94%a8grow%e6%96%b9%e6%b3%95%e8%bf%9b%e8%a1%8c%e6%89%a9%e5%ae%b9%ef%bc%8c%e8%b0%83%e7%94%a8%e6%ad%a4%e6%96%b9%e6%b3%95%e4%bb%a3%e8%a1%a8%e5%b7%b2%e7%bb%8f%e5%bc%80%e5%a7%8b%e6%89%a9%e5%ae%b9%e4%ba%86%20grow%28minCapacity%29;%20%7d%20/**%20*%20The%20maximum%20size%20of%20array%20to%20allocate.%20*%20Some%20VMs%20reserve%20some%20header%20words%20in%20an%20array.%20*%20Attempts%20to%20allocate%20larger%20arrays%20may%20result%20in%20*%20OutOfMemoryError:%20Requested%20array%20size%20exceeds%20VM%20limit%20*%20mjy%ef%bc%9a%20%e6%98%afJVM%e8%83%bd%e5%88%86%e9%85%8d%e7%9a%84%e6%95%b0%e7%bb%84%e7%9a%84%e6%9c%80%e5%a4%a7%20%e5%a4%a7%e5%b0%8f%ef%bc%8c%e4%b8%80%e8%88%ac%e4%b8%baInteger.MAX_VALUE%20-%208%ef%bc%88%e8%bf%99%e5%92%8cJVM%e5%86%85%e9%83%a8%e5%ae%9e%e7%8e%b0%e6%9c%89%e5%85%b3%ef%bc%8c%e7%95%99%e5%87%ba%e4%ba%86%e4%b8%80%e4%ba%9b%e7%94%a8%e4%ba%8e%e5%af%b9%e8%b1%a1%e5%a4%b4%e4%bf%a1%e6%81%af%e7%9a%84%e7%a9%ba%e9%97%b4%ef%bc%89%e3%80%82%20*/%20private%20static%20final%20int%20MAX_ARRAY_SIZE%20=%20Integer.MAX_VALUE%20-%208;%20/**%20*%20Increases%20the%20capacity%20to%20ensure%20that%20it%20can%20hold%20at%20least%20the%20*%20number%20of%20elements%20specified%20by%20the%20minimum%20capacity%20argument.%20*%20mjy%ef%bc%9aArrayList%e6%89%a9%e5%ae%b9%e7%9a%84%e6%a0%b8%e5%bf%83%e6%96%b9%e6%b3%95%e3%80%82%20*%20*%20@param%20minCapacity%20the%20desired%20minimum%20capacity%20*/%20private%20void%20grow%28int%20minCapacity%29%20%7b%20//%20overflow-conscious%20code%20//%20mjy%ef%bc%9a%20%e8%a1%a8%e7%a4%ba%e5%bd%93%e5%89%8d%e6%95%b0%e7%bb%84%e7%9a%84%e5%ae%b9%e9%87%8f%ef%bc%88%e5%8d%b3%e5%bd%93%e5%89%8d%e5%ad%98%e5%82%a8%e5%85%83%e7%b4%a0%e7%9a%84%e6%95%b0%e7%bb%84%20elementData%20%e7%9a%84%e9%95%bf%e5%ba%a6%ef%bc%89%20int%20oldCapacity%20=%20elementData.length;%20//%20mjy%ef%bc%9a%e6%98%af%e6%96%b0%e7%9a%84%e6%95%b0%e7%bb%84%e5%ae%b9%e9%87%8f%ef%bc%8c%e8%ae%a1%e7%ae%97%e6%96%b9%e5%bc%8f%e6%98%af%e6%97%a7%e5%ae%b9%e9%87%8f%e7%9a%84%201.5%20%e5%80%8d%20%28oldCapacity%20+%20oldCapacity%20%3e%3e%201%ef%bc%8c%e5%8d%b3%e5%8f%b3%e7%a7%bb%e4%b8%80%e4%bd%8d%e8%a1%a8%e7%a4%ba%e9%99%a4%e4%bb%a52%29%e3%80%82%e9%80%9a%e8%bf%87%e8%bf%99%e7%a7%8d%e6%96%b9%e5%bc%8f%ef%bc%8cArrayList%20%e7%9a%84%e5%ae%b9%e9%87%8f%e4%bc%9a%e5%9c%a8%e9%9c%80%e8%a6%81%e6%97%b6%e4%bb%a5%e6%8c%87%e6%95%b0%e6%96%b9%e5%bc%8f%e5%a2%9e%e5%8a%a0%ef%bc%8c%e9%81%bf%e5%85%8d%e9%a2%91%e7%b9%81%e6%89%a9%e5%ae%b9%e3%80%82%20int%20newCapacity%20=%20oldCapacity%20+%20%28oldCapacity%20%3e%3e%201%29;%20//%20mjy%ef%bc%9aminCapacity%e6%98%af%e8%b0%83%e7%94%a8grow%e6%96%b9%e6%b3%95%e6%97%b6%e4%bc%a0%e5%85%a5%e7%9a%84%e5%8f%82%e6%95%b0%ef%bc%8c%e8%a1%a8%e7%a4%ba%e6%89%80%e9%9c%80%e7%9a%84%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e3%80%82%e5%a6%82%e6%9e%9c%e8%ae%a1%e7%ae%97%e5%87%ba%e7%9a%84newCapacity%e5%b0%8f%e4%ba%8eminCapacity%ef%bc%8c%e9%82%a3%e4%b9%88%e7%9b%b4%e6%8e%a5%e5%b0%86newCapacity%e8%ae%be%e7%bd%ae%e4%b8%baminCapacity%ef%bc%8c%e7%a1%ae%e4%bf%9d%e6%96%b0%e5%ae%b9%e9%87%8f%e8%87%b3%e5%b0%91%e8%83%bd%e6%bb%a1%e8%b6%b3%e5%bd%93%e5%89%8d%e6%89%80%e9%9c%80%e7%9a%84%e7%a9%ba%e9%97%b4%e3%80%82%20if%20%28newCapacity%20-%20minCapacity%20%3c%200%29%20newCapacity%20=%20minCapacity;%20//%20mjy%ef%bc%9a%e5%a6%82%e6%9e%9cnewCapacity%e8%b6%85%e8%bf%87%e4%ba%86MAX_ARRAY_SIZE%ef%bc%8c%e8%b0%83%e7%94%a8%20hugeCapacity%28minCapacity%29%20%e6%96%b9%e6%b3%95%e6%9d%a5%e5%86%b3%e5%ae%9a%e5%ae%9e%e9%99%85%e7%9a%84%e5%ae%b9%e9%87%8f%e3%80%82%20if%20%28newCapacity%20-%20MAX_ARRAY_SIZE%20%3e%200%29%20newCapacity%20=%20hugeCapacity%28minCapacity%29;%20//%20minCapacity%20is%20usually%20close%20to%20size,%20so%20this%20is%20a%20win:%20//%20mjy%ef%bc%9a%e8%b0%83%e7%94%a8Arrays.copyOf%e6%96%b9%e6%b3%95%e5%b0%86%e7%8e%b0%e6%9c%89%e7%9a%84%e6%95%b0%e7%bb%84elementData%e5%a4%8d%e5%88%b6%e5%88%b0%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84%e6%95%b0%e7%bb%84%e4%b8%ad%ef%bc%8c%e6%96%b0%e6%95%b0%e7%bb%84%e7%9a%84%e9%95%bf%e5%ba%a6%e4%b8%ba%20newCapacity%ef%bc%8c%e5%ae%9e%e7%8e%b0%e4%ba%86%e6%95%b0%e7%bb%84%e7%9a%84%e6%89%a9%e5%ae%b9%e3%80%82%e8%bf%99%e4%b8%aa%e8%bf%87%e7%a8%8b%e4%bc%9a%e4%bf%9d%e7%95%99%e5%8e%9f%e6%95%b0%e7%bb%84%e4%b8%ad%e7%9a%84%e6%89%80%e6%9c%89%e5%85%83%e7%b4%a0%ef%bc%8c%e4%bd%86%e5%ba%95%e5%b1%82%e7%9a%84%e5%ad%98%e5%82%a8%e7%a9%ba%e9%97%b4%e5%b7%b2%e7%bb%8f%e6%89%a9%e5%b1%95%e3%80%82%20elementData%20=%20Arrays.copyOf%28elementData,%20newCapacity%29;%20%7d%20//%20mjy%ef%bc%9a%20%e5%a4%84%e7%90%86%e5%8f%af%e8%83%bd%e8%b6%85%e8%bf%87%e6%9c%80%e5%a4%a7%e6%95%b0%e7%bb%84%e5%a4%a7%e5%b0%8f%e7%9a%84%e6%83%85%e5%86%b5%20private%20static%20int%20hugeCapacity%28int%20minCapacity%29%20%7b%20//%20mjy%ef%bc%9a%20%e5%a6%82%e6%9e%9cminCapacity%e4%b8%ba%e8%b4%9f%e6%95%b0%ef%bc%8c%e6%84%8f%e5%91%b3%e7%9d%80%e5%8f%91%e7%94%9f%e4%ba%86%e5%ae%b9%e9%87%8f%e6%ba%a2%e5%87%ba%ef%bc%88%e4%be%8b%e5%a6%82%ef%bc%8c%e5%ae%b9%e9%87%8f%e8%ae%a1%e7%ae%97%e6%ba%a2%e5%87%ba%e4%ba%86Integer%e7%9a%84%e8%8c%83%e5%9b%b4%ef%bc%89%ef%bc%8c%e6%ad%a4%e6%97%b6%e6%8a%9b%e5%87%ba%20OutOfMemoryError%20if%20%28minCapacity%20%3c%200%29%20//%20overflow%20throw%20new%20OutOfMemoryError%28%29;%20//%20mjy%ef%bc%9a%e5%a6%82%e6%9e%9cminCapacity%e8%b6%85%e8%bf%87%e4%ba%86MAX_ARRAY_SIZE%ef%bc%8c%e8%bf%94%e5%9b%9eInteger.MAX_VALUE%ef%bc%8c%e5%8d%b3%e6%95%b0%e7%bb%84%e4%bc%9a%e6%89%a9%e5%b1%95%e5%88%b0%20JVM%20%e5%8f%af%e4%bb%a5%e6%94%af%e6%8c%81%e7%9a%84%e6%9c%80%e5%a4%a7%e5%80%bc%e3%80%82%e5%90%a6%e5%88%99%e5%8d%b3minCapacity%e5%b0%8f%e4%ba%8eMAX_ARRAY_SIZE%ef%bc%8c%e4%bd%86%e4%bb%8d%e7%84%b6%e8%b6%85%e5%87%ba%e4%ba%86%e5%90%88%e7%90%86%e8%8c%83%e5%9b%b4%ef%bc%8c%e5%88%99%e8%bf%94%e5%9b%9e%20MAX_ARRAY_SIZE%e3%80%82%20return%20%28minCapacity%20%3e%20MAX_ARRAY_SIZE%29%20?%20Integer.MAX_VALUE%20:%20MAX_ARRAY_SIZE;%20%7d%20/**%20*%20Returns%20the%20number%20of%20elements%20in%20this%20list.%20*%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e7%9a%84%e5%85%83%e7%b4%a0%e6%95%b0%20*%20*%20@return%20the%20number%20of%20elements%20in%20this%20list%20*/%20public%20int%20size%28%29%20%7b%20return%20size;%20%7d%20/**%20*%20Returns%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contains%20no%20elements.%20*%20mjy%ef%bc%9a%20%e5%88%a4%e6%96%ad%e6%98%af%e5%90%a6%e4%b8%ba%e7%a9%ba%20%e5%a6%82%e6%9e%9c%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e8%bf%94%e5%9b%9e%20true%20*%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contains%20no%20elements%20*/%20public%20boolean%20isEmpty%28%29%20%7b%20return%20size%20==%200;%20%7d%20/**%20*%20Returns%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contains%20the%20specified%20element.%20*%20More%20formally,%20returns%20%3ctt%3etrue%3c/tt%3e%20if%20and%20only%20if%20this%20list%20contains%20*%20at%20least%20one%20element%20%3ctt%3ee%3c/tt%3e%20such%20that%20*%20%3ctt%3e%28o==null&amp;nbsp;?&amp;nbsp;e==null&amp;nbsp;:&amp;nbsp;o.equals%28e%29%29%3c/tt%3e.%20*%20*%20@param%20o%20element%20whose%20presence%20in%20this%20list%20is%20to%20be%20tested%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contains%20the%20specified%20element%20*/%20//%20mjy%ef%bc%9a%20%e5%88%a4%e6%96%ad%e6%98%af%e5%90%a6%e5%8c%85%e5%90%ab%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%ef%bc%8c%e5%8c%85%e5%90%ab%e8%bf%94%e5%9b%9etrue%20public%20boolean%20contains%28Object%20o%29%20%7b%20//%20mjy%ef%bc%9a%20indexOf%28%29%e6%96%b9%e6%b3%95%ef%bc%9a%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%e7%9a%84%e9%a6%96%e6%ac%a1%e5%87%ba%e7%8e%b0%e7%9a%84%e7%b4%a2%e5%bc%95%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e6%ad%a4%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e4%b8%ba-1%20return%20indexOf%28o%29%20%3e=%200;%20%7d%20/**%20*%20Returns%20the%20index%20of%20the%20first%20occurrence%20of%20the%20specified%20element%20*%20in%20this%20list,%20or%20-1%20if%20this%20list%20does%20not%20contain%20the%20element.%20*%20More%20formally,%20returns%20the%20lowest%20index%20%3ctt%3ei%3c/tt%3e%20such%20that%20*%20%3ctt%3e%28o==null&amp;nbsp;?&amp;nbsp;get%28i%29==null&amp;nbsp;:&amp;nbsp;o.equals%28get%28i%29%29%29%3c/tt%3e,%20*%20or%20-1%20if%20there%20is%20no%20such%20index.%20*/%20//%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%e7%9a%84%e9%a6%96%e6%ac%a1%e5%87%ba%e7%8e%b0%e7%9a%84%e7%b4%a2%e5%bc%95%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e6%ad%a4%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e4%b8%ba-1%20public%20int%20indexOf%28Object%20o%29%20%7b%20//%20mjy%ef%bc%9a%20%e5%85%a5%e5%8f%82%e5%85%83%e7%b4%a0%e4%b8%ba%e7%a9%ba%20if%20%28o%20==%20null%29%20%7b%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20//%20mjy%ef%bc%9a%20%e5%88%a4%e6%96%ad%e6%98%af%e5%90%a6%e5%ad%98%e5%9c%a8%e7%a9%ba%e5%85%83%e7%b4%a0%20if%20%28elementData[i]%20==%20null%29%20return%20i;%20%7d%20else%20%7b%20//%20%e4%b8%8d%e4%b8%ba%e7%a9%ba%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20//%20mjy%ef%bc%9a%20equals%28%29%e6%96%b9%e6%b3%95%e6%af%94%e8%be%83%20if%20%28o.equals%28elementData[i]%29%29%20return%20i;%20%7d%20return%20-1;%20%7d%20/**%20*%20Returns%20the%20index%20of%20the%20last%20occurrence%20of%20the%20specified%20element%20*%20in%20this%20list,%20or%20-1%20if%20this%20list%20does%20not%20contain%20the%20element.%20*%20More%20formally,%20returns%20the%20highest%20index%20%3ctt%3ei%3c/tt%3e%20such%20that%20*%20%3ctt%3e%28o==null&amp;nbsp;?&amp;nbsp;get%28i%29==null&amp;nbsp;:&amp;nbsp;o.equals%28get%28i%29%29%29%3c/tt%3e,%20*%20or%20-1%20if%20there%20is%20no%20such%20index.%20*/%20//%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%e7%9a%84%e6%9c%80%e5%90%8e%e4%b8%80%e6%ac%a1%e5%87%ba%e7%8e%b0%e7%9a%84%e7%b4%a2%e5%bc%95%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e8%bf%94%e5%9b%9e-1%20public%20int%20lastIndexOf%28Object%20o%29%20%7b%20//%20%e5%80%92%e5%ba%8f%e5%be%aa%e7%8e%af%20if%20%28o%20==%20null%29%20%7b%20for%20%28int%20i%20=%20size%20-%201;%20i%20%3e=%200;%20i--%29%20if%20%28elementData[i]%20==%20null%29%20return%20i;%20%7d%20else%20%7b%20for%20%28int%20i%20=%20size%20-%201;%20i%20%3e=%200;%20i--%29%20if%20%28o.equals%28elementData[i]%29%29%20return%20i;%20%7d%20return%20-1;%20%7d%20/**%20*%20Returns%20a%20shallow%20copy%20of%20this%20%3ctt%3eArrayList%3c/tt%3e%20instance.%20%28The%20*%20elements%20themselves%20are%20not%20copied.%29%20*%20*%20@return%20a%20clone%20of%20this%20%3ctt%3eArrayList%3c/tt%3e%20instance%20*/%20//%20mjy%ef%bc%9a%20%e5%85%8b%e9%9a%86%e6%96%b9%e6%b3%95%ef%bc%8c%e8%bf%94%e5%9b%9e%e6%ad%a4ArrayList%e5%ae%9e%e4%be%8b%e7%9a%84%e6%b5%85%e6%8b%b7%20%ef%bc%88%e5%85%83%e7%b4%a0%e6%9c%ac%e8%ba%ab%e4%b8%8d%e8%a2%ab%e5%a4%8d%e5%88%b6%e3%80%82%ef%bc%89%20public%20Object%20clone%28%29%20%7b%20try%20%7b%20ArrayList%3c?%3e%20v%20=%20%28ArrayList%3c?%3e%29%20super.clone%28%29;%20//%20mjy%ef%bc%9a%20Arrays.copyOf%e5%8a%9f%e8%83%bd%e6%98%af%e5%ae%9e%e7%8e%b0%e6%95%b0%e7%bb%84%e7%9a%84%e5%a4%8d%e5%88%b6%ef%bc%8c%e8%bf%94%e5%9b%9e%e5%a4%8d%e5%88%b6%e5%90%8e%e7%9a%84%e6%95%b0%e7%bb%84%e3%80%82%e5%8f%82%e6%95%b0%e6%98%af%e8%a2%ab%e5%a4%8d%e5%88%b6%e7%9a%84%e6%95%b0%e7%bb%84%e5%92%8c%e5%a4%8d%e5%88%b6%e7%9a%84%e9%95%bf%e5%ba%a6%20v.elementData%20=%20Arrays.copyOf%28elementData,%20size%29;%20v.modCount%20=%200;%20return%20v;%20%7d%20catch%20%28CloneNotSupportedException%20e%29%20%7b%20//%20this%20shouldn%27t%20happen,%20since%20we%20are%20Cloneable%20//%20mjy%ef%bc%9a%20%e8%bf%99%e4%b8%8d%e5%ba%94%e8%af%a5%e5%8f%91%e7%94%9f%ef%bc%8c%e5%9b%a0%e4%b8%ba%e6%88%91%e4%bb%ac%e6%98%af%e5%8f%af%e4%bb%a5%e5%85%8b%e9%9a%86%e7%9a%84%20throw%20new%20InternalError%28e%29;%20%7d%20%7d%20/**%20*%20Returns%20an%20array%20containing%20all%20of%20the%20elements%20in%20this%20list%20*%20in%20proper%20sequence%20%28from%20first%20to%20last%20element%29.%20*%20mjy%ef%bc%9a%20%e4%bb%a5%e6%ad%a3%e7%a1%ae%e7%9a%84%e9%a1%ba%e5%ba%8f%ef%bc%88%e4%bb%8e%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%88%b0%e6%9c%80%e5%90%8e%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%ef%bc%89%e8%bf%94%e5%9b%9e%e4%b8%80%e4%b8%aa%e5%8c%85%e5%90%ab%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%89%80%e6%9c%89%e5%85%83%e7%b4%a0%e7%9a%84%e6%95%b0%e7%bb%84%e3%80%82%20*%20%3cp%3eThe%20returned%20array%20will%20be%20%22safe%22%20in%20that%20no%20references%20to%20it%20are%20*%20maintained%20by%20this%20list.%20%28In%20other%20words,%20this%20method%20must%20allocate%20*%20a%20new%20array%29.%20The%20caller%20is%20thus%20free%20to%20modify%20the%20returned%20array.%20*%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e7%9a%84%e6%95%b0%e7%bb%84%e5%b0%86%e6%98%af%e5%ae%89%e5%85%a8%e7%9a%84%ef%bc%8c%e5%9b%a0%e4%b8%ba%e8%af%a5%e5%88%97%e8%a1%a8%e4%b8%8d%e4%bf%9d%e7%95%99%e5%af%b9%e5%ae%83%e7%9a%84%e5%bc%95%e7%94%a8%e3%80%82%20%ef%bc%88%e6%8d%a2%e5%8f%a5%e8%af%9d%e8%af%b4%ef%bc%8c%e8%bf%99%e4%b8%aa%e6%96%b9%e6%b3%95%e5%bf%85%e9%a1%bb%e5%88%86%e9%85%8d%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84%e6%95%b0%e7%bb%84%ef%bc%89%e3%80%82%20*%20%3cp%3eThis%20method%20acts%20as%20bridge%20between%20array-based%20and%20collection-based%20*%20APIs.%20*%20mjy%ef%bc%9a%20%e5%9b%a0%e6%ad%a4%ef%bc%8c%e8%b0%83%e7%94%a8%e8%80%85%e5%8f%af%e4%bb%a5%e8%87%aa%e7%94%b1%e5%9c%b0%e4%bf%ae%e6%94%b9%e8%bf%94%e5%9b%9e%e7%9a%84%e6%95%b0%e7%bb%84%e3%80%82%20%e6%ad%a4%e6%96%b9%e6%b3%95%e5%85%85%e5%bd%93%e5%9f%ba%e4%ba%8e%e9%98%b5%e5%88%97%e5%92%8c%e5%9f%ba%e4%ba%8e%e9%9b%86%e5%90%88%e7%9a%84API%e4%b9%8b%e9%97%b4%e7%9a%84%e6%a1%a5%e6%a2%81%e3%80%82%20*%20*%20@return%20an%20array%20containing%20all%20of%20the%20elements%20in%20this%20list%20in%20*%20proper%20sequence%20*/%20public%20Object[]%20toArray%28%29%20%7b%20return%20Arrays.copyOf%28elementData,%20size%29;%20%7d%20/**%20*%20Returns%20an%20array%20containing%20all%20of%20the%20elements%20in%20this%20list%20in%20proper%20*%20sequence%20%28from%20first%20to%20last%20element%29;%20the%20runtime%20type%20of%20the%20returned%20*%20array%20is%20that%20of%20the%20specified%20array.%20If%20the%20list%20fits%20in%20the%20*%20specified%20array,%20it%20is%20returned%20therein.%20Otherwise,%20a%20new%20array%20is%20*%20allocated%20with%20the%20runtime%20type%20of%20the%20specified%20array%20and%20the%20size%20of%20*%20this%20list.%20*%20*%20%3cp%3eIf%20the%20list%20fits%20in%20the%20specified%20array%20with%20room%20to%20spare%20*%20%28i.e.,%20the%20array%20has%20more%20elements%20than%20the%20list%29,%20the%20element%20in%20*%20the%20array%20immediately%20following%20the%20end%20of%20the%20collection%20is%20set%20to%20*%20%3ctt%3enull%3c/tt%3e.%20%28This%20is%20useful%20in%20determining%20the%20length%20of%20the%20*%20list%20%3ci%3eonly%3c/i%3e%20if%20the%20caller%20knows%20that%20the%20list%20does%20not%20contain%20*%20any%20null%20elements.%29%20*%20*%20@param%20a%20the%20array%20into%20which%20the%20elements%20of%20the%20list%20are%20to%20*%20be%20stored,%20if%20it%20is%20big%20enough;%20otherwise,%20a%20new%20array%20of%20the%20*%20same%20runtime%20type%20is%20allocated%20for%20this%20purpose.%20*%20@return%20an%20array%20containing%20the%20elements%20of%20the%20list%20*%20@throws%20ArrayStoreException%20if%20the%20runtime%20type%20of%20the%20specified%20array%20*%20is%20not%20a%20supertype%20of%20the%20runtime%20type%20of%20every%20element%20in%20*%20this%20list%20*%20@throws%20NullPointerException%20if%20the%20specified%20array%20is%20null%20*/%20@SuppressWarnings%28%22unchecked%22%29%20public%20%3cT%3e%20T[]%20toArray%28T[]%20a%29%20%7b%20if%20%28a.length%20%3c%20size%29%20//%20Make%20a%20new%20array%20of%20a%27s%20runtime%20type,%20but%20my%20contents:%20return%20%28T[]%29%20Arrays.copyOf%28elementData,%20size,%20a.getClass%28%29%29;%20System.arraycopy%28elementData,%200,%20a,%200,%20size%29;%20if%20%28a.length%20%3e%20size%29%20a[size]%20=%20null;%20return%20a;%20%7d%20//%20Positional%20Access%20Operations%20@SuppressWarnings%28%22unchecked%22%29%20E%20elementData%28int%20index%29%20%7b%20return%20%28E%29%20elementData[index];%20%7d%20/**%20*%20Returns%20the%20element%20at%20the%20specified%20position%20in%20this%20list.%20*%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e4%bd%8d%e7%bd%ae%e7%9a%84%e5%85%83%e7%b4%a0%20*%20*%20@param%20index%20index%20of%20the%20element%20to%20return%20*%20@return%20the%20element%20at%20the%20specified%20position%20in%20this%20list%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20E%20get%28int%20index%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%a0%a1%e9%aa%8c%e6%95%b0%e7%bb%84%e4%b8%8b%e6%a0%87%e8%b6%8a%e7%95%8c%20rangeCheck%28index%29;%20return%20elementData%28index%29;%20%7d%20/**%20*%20Replaces%20the%20element%20at%20the%20specified%20position%20in%20this%20list%20with%20*%20the%20specified%20element.%20*%20mjy%ef%bc%9a%20%e7%94%a8%e6%8c%87%e5%ae%9a%e7%9a%84%e5%85%83%e7%b4%a0%e6%9b%bf%e6%8d%a2%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e4%bd%8d%e7%bd%ae%e7%9a%84%e5%85%83%e7%b4%a0%20*%20*%20@param%20index%20index%20of%20the%20element%20to%20replace%20*%20@param%20element%20element%20to%20be%20stored%20at%20the%20specified%20position%20*%20@return%20the%20element%20previously%20at%20the%20specified%20position%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20E%20set%28int%20index,%20E%20element%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%a0%a1%e9%aa%8c%e6%95%b0%e7%bb%84%e4%b8%8b%e6%a0%87%e8%b6%8a%e7%95%8c%20rangeCheck%28index%29;%20//%20mjy%ef%bc%9a%20%e6%97%a7%e7%9a%84%e5%80%bc%20E%20oldValue%20=%20elementData%28index%29;%20//%20mjy%ef%bc%9a%20%e6%96%b0%e7%9a%84%e8%b5%8b%e5%80%bc%20elementData[index]%20=%20element;%20//%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%97%a7%e7%9a%84%e5%80%bc%20return%20oldValue;%20%7d%20/**%20*%20Appends%20the%20specified%20element%20to%20the%20end%20of%20this%20list.%20*%20mjy%ef%bc%9a%20%e6%b7%bb%e5%8a%a0%e5%85%83%e7%b4%a0%ef%bc%8c%e5%b0%86%e6%8c%87%e5%ae%9a%e7%9a%84%e5%85%83%e7%b4%a0%e8%bf%bd%e5%8a%a0%e5%88%b0%e6%ad%a4%e5%88%97%e8%a1%a8%e7%9a%84%e6%9c%ab%e5%b0%be%20*%20*%20@param%20e%20element%20to%20be%20appended%20to%20this%20list%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20%28as%20specified%20by%20%7b@link%20Collection#add%7d%29%20*/%20public%20boolean%20add%28E%20e%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%89%a9%e5%ae%b9%e6%a0%a1%e9%aa%8c%20ensureCapacityInternal%28size%20+%201%29;%20//%20Increments%20modCount!!%20//%20mjy%ef%bc%9a%20%e6%b7%bb%e5%8a%a0%e5%85%83%e7%b4%a0%20elementData[size++]%20=%20e;%20return%20true;%20%7d%20/**%20*%20Inserts%20the%20specified%20element%20at%20the%20specified%20position%20in%20this%20*%20list.%20Shifts%20the%20element%20currently%20at%20that%20position%20%28if%20any%29%20and%20*%20any%20subsequent%20elements%20to%20the%20right%20%28adds%20one%20to%20their%20indices%29.%20*%20mjy%ef%bc%9a%20%e6%b7%bb%e5%8a%a0%e5%85%83%e7%b4%a0%ef%bc%8c%e5%9c%a8%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e7%9a%84%e6%8c%87%e5%ae%9a%e4%bd%8d%e7%bd%ae%e6%8f%92%e5%85%a5%e6%8c%87%e5%ae%9a%e7%9a%84%e5%85%83%e7%b4%a0%20*%20mjy%ef%bc%9a%e5%85%88%e8%b0%83%e7%94%a8%20rangeCheckForAdd%20%e5%af%b9index%e8%bf%9b%e8%a1%8c%e7%95%8c%e9%99%90%e6%a3%80%e6%9f%a5%ef%bc%9b%e7%84%b6%e5%90%8e%e8%b0%83%e7%94%a8%20ensureCapacityInternal%20%e6%96%b9%e6%b3%95%e4%bf%9d%e8%af%81capacity%e8%b6%b3%e5%a4%9f%e5%a4%a7%ef%bc%9b%e5%86%8d%e5%b0%86%e4%bb%8eindex%e5%bc%80%e5%a7%8b%e4%b9%8b%e5%90%8e%e7%9a%84%e6%89%80%e6%9c%89%e6%88%90%e5%91%98%e5%90%8e%e7%a7%bb%e4%b8%80%e4%b8%aa%e4%bd%8d%e7%bd%ae%ef%bc%9b%e5%b0%86element%e6%8f%92%e5%85%a5index%e4%bd%8d%e7%bd%ae%ef%bc%9b%e6%9c%80%e5%90%8esize%e5%8a%a01%e3%80%82%20*%20*%20@param%20index%20index%20at%20which%20the%20specified%20element%20is%20to%20be%20inserted%20*%20@param%20element%20element%20to%20be%20inserted%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20void%20add%28int%20index,%20E%20element%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%a0%a1%e9%aa%8c%20rangeCheckForAdd%28index%29;%20ensureCapacityInternal%28size%20+%201%29;%20//%20Increments%20modCount!!%20//%20mjy%ef%bc%9a%20System.arraycopy%28%29%e8%bf%99%e4%b8%aa%e5%ae%9e%e7%8e%b0%e6%95%b0%e7%bb%84%e4%b9%8b%e9%97%b4%e5%a4%8d%e5%88%b6%e7%9a%84%e6%96%b9%e6%b3%95%e4%b8%80%e5%ae%9a%e8%a6%81%e7%9c%8b%e4%b8%80%e4%b8%8b%ef%bc%8c%e4%b8%8b%e9%9d%a2%e5%b0%b1%e7%94%a8%e5%88%b0%e4%ba%86arraycopy%28%29%e6%96%b9%e6%b3%95%e5%ae%9e%e7%8e%b0%e6%95%b0%e7%bb%84%e8%87%aa%e5%b7%b1%e5%a4%8d%e5%88%b6%e8%87%aa%e5%b7%b1%20System.arraycopy%28elementData,%20index,%20elementData,%20index%20+%201,%20size%20-%20index%29;%20elementData[index]%20=%20element;%20size++;%20%7d%20/**%20*%20Removes%20the%20element%20at%20the%20specified%20position%20in%20this%20list.%20*%20Shifts%20any%20subsequent%20elements%20to%20the%20left%20%28subtracts%20one%20from%20their%20*%20indices%29.%20*%20mjy%ef%bc%9a%e5%88%a0%e9%99%a4%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%a0%e9%99%a4%e8%af%a5%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e4%bd%8d%e7%bd%ae%e7%9a%84%e5%85%83%e7%b4%a0%e3%80%82%20%e5%b0%86%e4%bb%bb%e4%bd%95%e5%90%8e%e7%bb%ad%e5%85%83%e7%b4%a0%e7%a7%bb%e5%8a%a8%e5%88%b0%e5%b7%a6%e4%be%a7%ef%bc%88%e4%bb%8e%e5%85%b6%e7%b4%a2%e5%bc%95%e4%b8%ad%e5%87%8f%e5%8e%bb%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%ef%bc%89%20*%20*%20@param%20index%20the%20index%20of%20the%20element%20to%20be%20removed%20*%20@return%20the%20element%20that%20was%20removed%20from%20the%20list%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20E%20remove%28int%20index%29%20%7b%20rangeCheck%28index%29;%20modCount++;%20E%20oldValue%20=%20elementData%28index%29;%20int%20numMoved%20=%20size%20-%20index%20-%201;%20if%20%28numMoved%20%3e%200%29%20System.arraycopy%28elementData,%20index%20+%201,%20elementData,%20index,%20numMoved%29;%20elementData[--size]%20=%20null;%20//%20clear%20to%20let%20GC%20do%20its%20work%20return%20oldValue;%20%7d%20/**%20*%20Removes%20the%20first%20occurrence%20of%20the%20specified%20element%20from%20this%20list,%20*%20if%20it%20is%20present.%20If%20the%20list%20does%20not%20contain%20the%20element,%20it%20is%20*%20unchanged.%20More%20formally,%20removes%20the%20element%20with%20the%20lowest%20index%20*%20%3ctt%3ei%3c/tt%3e%20such%20that%20*%20%3ctt%3e%28o==null&amp;nbsp;?&amp;nbsp;get%28i%29==null&amp;nbsp;:&amp;nbsp;o.equals%28get%28i%29%29%29%3c/tt%3e%20*%20%28if%20such%20an%20element%20exists%29.%20Returns%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20*%20contained%20the%20specified%20element%20%28or%20equivalently,%20if%20this%20list%20*%20changed%20as%20a%20result%20of%20the%20call%29.%20*%20mjy%ef%bc%9a%20%e4%bb%8e%e5%88%97%e8%a1%a8%e4%b8%ad%e5%88%a0%e9%99%a4%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%e7%9a%84%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%87%ba%e7%8e%b0%ef%bc%88%e5%a6%82%e6%9e%9c%e5%ad%98%e5%9c%a8%ef%bc%89%e3%80%82%20%e5%a6%82%e6%9e%9c%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e8%af%a5%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e5%ae%83%e4%b8%8d%e4%bc%9a%e6%9b%b4%e6%94%b9%e3%80%82%20*%20*%20@param%20o%20element%20to%20be%20removed%20from%20this%20list,%20if%20present%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contained%20the%20specified%20element%20*/%20public%20boolean%20remove%28Object%20o%29%20%7b%20if%20%28o%20==%20null%29%20%7b%20for%20%28int%20index%20=%200;%20index%20%3c%20size;%20index++%29%20if%20%28elementData[index]%20==%20null%29%20%7b%20fastRemove%28index%29;%20return%20true;%20%7d%20%7d%20else%20%7b%20for%20%28int%20index%20=%200;%20index%20%3c%20size;%20index++%29%20if%20%28o.equals%28elementData[index]%29%29%20%7b%20fastRemove%28index%29;%20return%20true;%20%7d%20%7d%20return%20false;%20%7d%20/*%20*%20Private%20remove%20method%20that%20skimjy%20bounds%20checking%20and%20does%20not%20*%20return%20the%20value%20removed.%20*/%20private%20void%20fastRemove%28int%20index%29%20%7b%20modCount++;%20int%20numMoved%20=%20size%20-%20index%20-%201;%20if%20%28numMoved%20%3e%200%29%20System.arraycopy%28elementData,%20index%20+%201,%20elementData,%20index,%20numMoved%29;%20elementData[--size]%20=%20null;%20//%20clear%20to%20let%20GC%20do%20its%20work%20%7d%20/**%20*%20Removes%20all%20of%20the%20elements%20from%20this%20list.%20The%20list%20will%20*%20be%20empty%20after%20this%20call%20returns.%20*%20mjy%ef%bc%9a%20%e4%bb%8e%e5%88%97%e8%a1%a8%e4%b8%ad%e6%b8%85%e7%a9%ba%ef%bc%88%e5%88%a0%e9%99%a4%ef%bc%89%e6%89%80%e6%9c%89%e5%85%83%e7%b4%a0%e3%80%82%20*/%20public%20void%20clear%28%29%20%7b%20modCount++;%20//%20clear%20to%20let%20GC%20do%20its%20work%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20elementData[i]%20=%20null;%20size%20=%200;%20%7d%20/**%20*%20Appends%20all%20of%20the%20elements%20in%20the%20specified%20collection%20to%20the%20end%20of%20*%20this%20list,%20in%20the%20order%20that%20they%20are%20returned%20by%20the%20*%20specified%20collection%27s%20Iterator.%20The%20behavior%20of%20this%20operation%20is%20*%20undefined%20if%20the%20specified%20collection%20is%20modified%20while%20the%20operation%20*%20is%20in%20progress.%20%28This%20implies%20that%20the%20behavior%20of%20this%20call%20is%20*%20undefined%20if%20the%20specified%20collection%20is%20this%20list,%20and%20this%20*%20list%20is%20nonempty.%29%20*%20*%20@param%20c%20collection%20containing%20elements%20to%20be%20added%20to%20this%20list%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20changed%20as%20a%20result%20of%20the%20call%20*%20@throws%20NullPointerException%20if%20the%20specified%20collection%20is%20null%20*/%20public%20boolean%20addAll%28Collection%3c?%20extends%20E%3e%20c%29%20%7b%20Object[]%20a%20=%20c.toArray%28%29;%20int%20numNew%20=%20a.length;%20ensureCapacityInternal%28size%20+%20numNew%29;%20//%20Increments%20modCount%20System.arraycopy%28a,%200,%20elementData,%20size,%20numNew%29;%20size%20+=%20numNew;%20return%20numNew%20!=%200;%20%7d%20/**%20*%20Inserts%20all%20of%20the%20elements%20in%20the%20specified%20collection%20into%20this%20*%20list,%20starting%20at%20the%20specified%20position.%20Shifts%20the%20element%20*%20currently%20at%20that%20position%20%28if%20any%29%20and%20any%20subsequent%20elements%20to%20*%20the%20right%20%28increases%20their%20indices%29.%20The%20new%20elements%20will%20appear%20*%20in%20the%20list%20in%20the%20order%20that%20they%20are%20returned%20by%20the%20*%20specified%20collection%27s%20iterator.%20*%20*%20@param%20index%20index%20at%20which%20to%20insert%20the%20first%20element%20from%20the%20*%20specified%20collection%20*%20@param%20c%20collection%20containing%20elements%20to%20be%20added%20to%20this%20list%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20changed%20as%20a%20result%20of%20the%20call%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*%20@throws%20NullPointerException%20if%20the%20specified%20collection%20is%20null%20*/%20public%20boolean%20addAll%28int%20index,%20Collection%3c?%20extends%20E%3e%20c%29%20%7b%20rangeCheckForAdd%28index%29;%20Object[]%20a%20=%20c.toArray%28%29;%20int%20numNew%20=%20a.length;%20ensureCapacityInternal%28size%20+%20numNew%29;%20//%20Increments%20modCount%20int%20numMoved%20=%20size%20-%20index;%20if%20%28numMoved%20%3e%200%29%20System.arraycopy%28elementData,%20index,%20elementData,%20index%20+%20numNew,%20numMoved%29;%20System.arraycopy%28a,%200,%20elementData,%20index,%20numNew%29;%20size%20+=%20numNew;%20return%20numNew%20!=%200;%20%7d%20/**%20*%20Removes%20from%20this%20list%20all%20of%20the%20elements%20whose%20index%20is%20between%20*%20%7b@code%20fromIndex%7d,%20inclusive,%20and%20%7b@code%20toIndex%7d,%20exclusive.%20*%20Shifts%20any%20succeeding%20elements%20to%20the%20left%20%28reduces%20their%20index%29.%20*%20This%20call%20shortens%20the%20list%20by%20%7b@code%20%28toIndex%20-%20fromIndex%29%7d%20elements.%20*%20%28If%20%7b@code%20toIndex==fromIndex%7d,%20this%20operation%20has%20no%20effect.%29%20*%20*%20@throws%20IndexOutOfBoundsException%20if%20%7b@code%20fromIndex%7d%20or%20*%20%7b@code%20toIndex%7d%20is%20out%20of%20range%20*%20%28%7b@code%20fromIndex%20%3c%200%20%7c%7c%20*%20fromIndex%20%3e=%20size%28%29%20%7c%7c%20*%20toIndex%20%3e%20size%28%29%20%7c%7c%20*%20toIndex%20%3c%20fromIndex%7d%29%20*/%20protected%20void%20removeRange%28int%20fromIndex,%20int%20toIndex%29%20%7b%20modCount++;%20int%20numMoved%20=%20size%20-%20toIndex;%20System.arraycopy%28elementData,%20toIndex,%20elementData,%20fromIndex,%20numMoved%29;%20//%20clear%20to%20let%20GC%20do%20its%20work%20int%20newSize%20=%20size%20-%20%28toIndex%20-%20fromIndex%29;%20for%20%28int%20i%20=%20newSize;%20i%20%3c%20size;%20i++%29%20%7b%20elementData[i]%20=%20null;%20%7d%20size%20=%20newSize;%20%7d%20/**%20*%20Checks%20if%20the%20given%20index%20is%20in%20range.%20If%20not,%20throws%20an%20appropriate%20*%20runtime%20exception.%20This%20method%20does%20*not*%20check%20if%20the%20index%20is%20*%20negative:%20It%20is%20always%20used%20immediately%20prior%20to%20an%20array%20access,%20*%20which%20throws%20an%20ArrayIndexOutOfBoundsException%20if%20index%20is%20negative.%20*/%20private%20void%20rangeCheck%28int%20index%29%20%7b%20if%20%28index%20%3e=%20size%29%20throw%20new%20IndexOutOfBoundsException%28outOfBoundsMsg%28index%29%29;%20%7d%20/**%20*%20A%20version%20of%20rangeCheck%20used%20by%20add%20and%20addAll.%20*/%20private%20void%20rangeCheckForAdd%28int%20index%29%20%7b%20if%20%28index%20%3e%20size%20%7c%7c%20index%20%3c%200%29%20throw%20new%20IndexOutOfBoundsException%28outOfBoundsMsg%28index%29%29;%20%7d%20/**%20*%20Constructs%20an%20IndexOutOfBoundsException%20detail%20message.%20*%20Of%20the%20many%20possible%20refactorings%20of%20the%20error%20handling%20code,%20*%20this%20%22outlining%22%20performs%20best%20with%20both%20server%20and%20client%20VMs.%20*/%20private%20String%20outOfBoundsMsg%28int%20index%29%20%7b%20return%20%22Index:%20%22%20+%20index%20+%20%22,%20Size:%20%22%20+%20size;%20%7d%20/**%20*%20Removes%20from%20this%20list%20all%20of%20its%20elements%20that%20are%20contained%20in%20the%20*%20specified%20collection.%20*%20*%20@param%20c%20collection%20containing%20elements%20to%20be%20removed%20from%20this%20list%20*%20@return%20%7b@code%20true%7d%20if%20this%20list%20changed%20as%20a%20result%20of%20the%20call%20*%20@throws%20ClassCastException%20if%20the%20class%20of%20an%20element%20of%20this%20list%20*%20is%20incompatible%20with%20the%20specified%20collection%20*%20%28%3ca%20href=%22Collection.html#optional-restrictions%22%3eoptional%3c/a%3e%29%20*%20@throws%20NullPointerException%20if%20this%20list%20contains%20a%20null%20element%20and%20the%20*%20specified%20collection%20does%20not%20permit%20null%20elements%20*%20%28%3ca%20href=%22Collection.html#optional-restrictions%22%3eoptional%3c/a%3e%29,%20*%20or%20if%20the%20specified%20collection%20is%20null%20*%20@see%20Collection#contains%28Object%29%20*/%20public%20boolean%20removeAll%28Collection%3c?%3e%20c%29%20%7b%20Objects.requireNonNull%28c%29;%20return%20batchRemove%28c,%20false%29;%20%7d%20/**%20*%20Retains%20only%20the%20elements%20in%20this%20list%20that%20are%20contained%20in%20the%20*%20specified%20collection.%20In%20other%20words,%20removes%20from%20this%20list%20all%20*%20of%20its%20elements%20that%20are%20not%20contained%20in%20the%20specified%20collection.%20*%20*%20@param%20c%20collection%20containing%20elements%20to%20be%20retained%20in%20this%20list%20*%20@return%20%7b@code%20true%7d%20if%20this%20list%20changed%20as%20a%20result%20of%20the%20call%20*%20@throws%20ClassCastException%20if%20the%20class%20of%20an%20element%20of%20this%20list%20*%20is%20incompatible%20with%20the%20specified%20collection%20*%20%28%3ca%20href=%22Collection.html#optional-restrictions%22%3eoptional%3c/a%3e%29%20*%20@throws%20NullPointerException%20if%20this%20list%20contains%20a%20null%20element%20and%20the%20*%20specified%20collection%20does%20not%20permit%20null%20elements%20*%20%28%3ca%20href=%22Collection.html#optional-restrictions%22%3eoptional%3c/a%3e%29,%20*%20or%20if%20the%20specified%20collection%20is%20null%20*%20@see%20Collection#contains%28Object%29%20*/%20public%20boolean%20retainAll%28Collection%3c?%3e%20c%29%20%7b%20Objects.requireNonNull%28c%29;%20return%20batchRemove%28c,%20true%29;%20%7d%20private%20boolean%20batchRemove%28Collection%3c?%3e%20c,%20boolean%20complement%29%20%7b%20final%20Object[]%20elementData%20=%20this.elementData;%20int%20r%20=%200,%20w%20=%200;%20boolean%20modified%20=%20false;%20try%20%7b%20for%20%28;%20r%20%3c%20size;%20r++%29%20if%20%28c.contains%28elementData[r]%29%20==%20complement%29%20elementData[w++]%20=%20elementData[r];%20%7d%20finally%20%7b%20//%20Preserve%20behavioral%20compatibility%20with%20AbstractCollection,%20//%20even%20if%20c.contains%28%29%20throws.%20if%20%28r%20!=%20size%29%20%7b%20System.arraycopy%28elementData,%20r,%20elementData,%20w,%20size%20-%20r%29;%20w%20+=%20size%20-%20r;%20%7d%20if%20%28w%20!=%20size%29%20%7b%20//%20clear%20to%20let%20GC%20do%20its%20work%20for%20%28int%20i%20=%20w;%20i%20%3c%20size;%20i++%29%20elementData[i]%20=%20null;%20modCount%20+=%20size%20-%20w;%20size%20=%20w;%20modified%20=%20true;%20%7d%20%7d%20return%20modified;%20%7d%20/**%20*%20Save%20the%20state%20of%20the%20%3ctt%3eArrayList%3c/tt%3e%20instance%20to%20a%20stream%20%28that%20*%20is,%20serialize%20it%29.%20*%20*%20@serialData%20The%20length%20of%20the%20array%20backing%20the%20%3ctt%3eArrayList%3c/tt%3e%20*%20instance%20is%20emitted%20%28int%29,%20followed%20by%20all%20of%20its%20elements%20*%20%28each%20an%20%3ctt%3eObject%3c/tt%3e%29%20in%20the%20proper%20order.%20*/%20private%20void%20writeObject%28java.io.ObjectOutputStream%20s%29%20throws%20java.io.IOException%20%7b%20//%20Write%20out%20element%20count,%20and%20any%20hidden%20stuff%20int%20expectedModCount%20=%20modCount;%20s.defaultWriteObject%28%29;%20//%20Write%20out%20size%20as%20capacity%20for%20behavioural%20compatibility%20with%20clone%28%29%20s.writeInt%28size%29;%20//%20Write%20out%20all%20elements%20in%20the%20proper%20order.%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20%7b%20s.writeObject%28elementData[i]%29;%20%7d%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20/**%20*%20Reconstitute%20the%20%3ctt%3eArrayList%3c/tt%3e%20instance%20from%20a%20stream%20%28that%20is,%20*%20deserialize%20it%29.%20*/%20private%20void%20readObject%28java.io.ObjectInputStream%20s%29%20throws%20java.io.IOException,%20ClassNotFoundException%20%7b%20elementData%20=%20EMPTY_ELEMENTDATA;%20//%20Read%20in%20size,%20and%20any%20hidden%20stuff%20s.defaultReadObject%28%29;%20//%20Read%20in%20capacity%20s.readInt%28%29;%20//%20ignored%20if%20%28size%20%3e%200%29%20%7b%20//%20be%20like%20clone%28%29,%20allocate%20array%20based%20upon%20size%20not%20capacity%20ensureCapacityInternal%28size%29;%20Object[]%20a%20=%20elementData;%20//%20Read%20in%20all%20elements%20in%20the%20proper%20order.%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20%7b%20a[i]%20=%20s.readObject%28%29;%20%7d%20%7d%20%7d%20/**%20*%20Returns%20a%20list%20iterator%20over%20the%20elements%20in%20this%20list%20%28in%20proper%20*%20sequence%29,%20starting%20at%20the%20specified%20position%20in%20the%20list.%20*%20The%20specified%20index%20indicates%20the%20first%20element%20that%20would%20be%20*%20returned%20by%20an%20initial%20call%20to%20%7b@link%20ListIterator#next%20next%7d.%20*%20An%20initial%20call%20to%20%7b@link%20ListIterator#previous%20previous%7d%20would%20*%20return%20the%20element%20with%20the%20specified%20index%20minus%20one.%20*%20*%20%3cp%3eThe%20returned%20list%20iterator%20is%20%3ca%20href=%22#fail-fast%22%3e%3ci%3efail-fast%3c/i%3e%3c/a%3e.%20*%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20ListIterator%3cE%3e%20listIterator%28int%20index%29%20%7b%20if%20%28index%20%3c%200%20%7c%7c%20index%20%3e%20size%29%20throw%20new%20IndexOutOfBoundsException%28%22Index:%20%22%20+%20index%29;%20return%20new%20ListItr%28index%29;%20%7d%20/**%20*%20Returns%20a%20list%20iterator%20over%20the%20elements%20in%20this%20list%20%28in%20proper%20*%20sequence%29.%20*%20*%20%3cp%3eThe%20returned%20list%20iterator%20is%20%3ca%20href=%22#fail-fast%22%3e%3ci%3efail-fast%3c/i%3e%3c/a%3e.%20*%20*%20@see%20#listIterator%28int%29%20*/%20public%20ListIterator%3cE%3e%20listIterator%28%29%20%7b%20return%20new%20ListItr%280%29;%20%7d%20/**%20*%20Returns%20an%20iterator%20over%20the%20elements%20in%20this%20list%20in%20proper%20sequence.%20*%20*%20%3cp%3eThe%20returned%20iterator%20is%20%3ca%20href=%22#fail-fast%22%3e%3ci%3efail-fast%3c/i%3e%3c/a%3e.%20*%20*%20@return%20an%20iterator%20over%20the%20elements%20in%20this%20list%20in%20proper%20sequence%20*/%20public%20Iterator%3cE%3e%20iterator%28%29%20%7b%20return%20new%20Itr%28%29;%20%7d%20/**%20*%20An%20optimized%20version%20of%20AbstractList.Itr%20*/%20private%20class%20Itr%20implements%20Iterator%3cE%3e%20%7b%20int%20cursor;%20//%20index%20of%20next%20element%20to%20return%20int%20lastRet%20=%20-1;%20//%20index%20of%20last%20element%20returned;%20-1%20if%20no%20such%20int%20expectedModCount%20=%20modCount;%20public%20boolean%20hasNext%28%29%20%7b%20return%20cursor%20!=%20size;%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20E%20next%28%29%20%7b%20checkForComodification%28%29;%20int%20i%20=%20cursor;%20if%20%28i%20%3e=%20size%29%20throw%20new%20NoSuchElementException%28%29;%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28i%20%3e=%20elementData.length%29%20throw%20new%20ConcurrentModificationException%28%29;%20cursor%20=%20i%20+%201;%20return%20%28E%29%20elementData[lastRet%20=%20i];%20%7d%20public%20void%20remove%28%29%20%7b%20if%20%28lastRet%20%3c%200%29%20throw%20new%20IllegalStateException%28%29;%20checkForComodification%28%29;%20try%20%7b%20ArrayList.this.remove%28lastRet%29;%20cursor%20=%20lastRet;%20lastRet%20=%20-1;%20expectedModCount%20=%20modCount;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20@Override%20@SuppressWarnings%28%22unchecked%22%29%20public%20void%20forEachRemaining%28Consumer%3c?%20super%20E%3e%20consumer%29%20%7b%20Objects.requireNonNull%28consumer%29;%20final%20int%20size%20=%20ArrayList.this.size;%20int%20i%20=%20cursor;%20if%20%28i%20%3e=%20size%29%20%7b%20return;%20%7d%20final%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28i%20%3e=%20elementData.length%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20while%20%28i%20!=%20size%20&&%20modCount%20==%20expectedModCount%29%20%7b%20consumer.accept%28%28E%29%20elementData[i++]%29;%20%7d%20//%20update%20once%20at%20end%20of%20iteration%20to%20reduce%20heap%20write%20traffic%20cursor%20=%20i;%20lastRet%20=%20i%20-%201;%20checkForComodification%28%29;%20%7d%20final%20void%20checkForComodification%28%29%20%7b%20if%20%28modCount%20!=%20expectedModCount%29%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20/**%20*%20An%20optimized%20version%20of%20AbstractList.ListItr%20*/%20private%20class%20ListItr%20extends%20Itr%20implements%20ListIterator%3cE%3e%20%7b%20ListItr%28int%20index%29%20%7b%20super%28%29;%20cursor%20=%20index;%20%7d%20public%20boolean%20hasPrevious%28%29%20%7b%20return%20cursor%20!=%200;%20%7d%20public%20int%20nextIndex%28%29%20%7b%20return%20cursor;%20%7d%20public%20int%20previousIndex%28%29%20%7b%20return%20cursor%20-%201;%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20E%20previous%28%29%20%7b%20checkForComodification%28%29;%20int%20i%20=%20cursor%20-%201;%20if%20%28i%20%3c%200%29%20throw%20new%20NoSuchElementException%28%29;%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28i%20%3e=%20elementData.length%29%20throw%20new%20ConcurrentModificationException%28%29;%20cursor%20=%20i;%20return%20%28E%29%20elementData[lastRet%20=%20i];%20%7d%20public%20void%20set%28E%20e%29%20%7b%20if%20%28lastRet%20%3c%200%29%20throw%20new%20IllegalStateException%28%29;%20checkForComodification%28%29;%20try%20%7b%20ArrayList.this.set%28lastRet,%20e%29;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20public%20void%20add%28E%20e%29%20%7b%20checkForComodification%28%29;%20try%20%7b%20int%20i%20=%20cursor;%20ArrayList.this.add%28i,%20e%29;%20cursor%20=%20i%20+%201;%20lastRet%20=%20-1;%20expectedModCount%20=%20modCount;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20%7d%20/**%20*%20Returns%20a%20view%20of%20the%20portion%20of%20this%20list%20between%20the%20specified%20*%20%7b@code%20fromIndex%7d,%20inclusive,%20and%20%7b@code%20toIndex%7d,%20exclusive.%20%28If%20*%20%7b@code%20fromIndex%7d%20and%20%7b@code%20toIndex%7d%20are%20equal,%20the%20returned%20list%20is%20*%20empty.%29%20The%20returned%20list%20is%20backed%20by%20this%20list,%20so%20non-structural%20*%20changes%20in%20the%20returned%20list%20are%20reflected%20in%20this%20list,%20and%20vice-versa.%20*%20The%20returned%20list%20supports%20all%20of%20the%20optional%20list%20operations.%20*%20*%20%3cp%3eThis%20method%20eliminates%20the%20need%20for%20explicit%20range%20operations%20%28of%20*%20the%20sort%20that%20commonly%20exist%20for%20arrays%29.%20Any%20operation%20that%20expects%20*%20a%20list%20can%20be%20used%20as%20a%20range%20operation%20by%20passing%20a%20subList%20view%20*%20instead%20of%20a%20whole%20list.%20For%20example,%20the%20following%20idiom%20*%20removes%20a%20range%20of%20elements%20from%20a%20list:%20*%20%3cpre%3e%20*%20list.subList%28from,%20to%29.clear%28%29;%20*%20%3c/pre%3e%20*%20Similar%20idioms%20may%20be%20constructed%20for%20%7b@link%20#indexOf%28Object%29%7d%20and%20*%20%7b@link%20#lastIndexOf%28Object%29%7d,%20and%20all%20of%20the%20algorithms%20in%20the%20*%20%7b@link%20Collections%7d%20class%20can%20be%20applied%20to%20a%20subList.%20*%20*%20%3cp%3eThe%20semantics%20of%20the%20list%20returned%20by%20this%20method%20become%20undefined%20if%20*%20the%20backing%20list%20%28i.e.,%20this%20list%29%20is%20%3ci%3estructurally%20modified%3c/i%3e%20in%20*%20any%20way%20other%20than%20via%20the%20returned%20list.%20%28Structural%20modifications%20are%20*%20those%20that%20change%20the%20size%20of%20this%20list,%20or%20otherwise%20perturb%20it%20in%20such%20*%20a%20fashion%20that%20iterations%20in%20progress%20may%20yield%20incorrect%20results.%29%20*%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*%20@throws%20IllegalArgumentException%20%7b@inheritDoc%7d%20*/%20public%20List%3cE%3e%20subList%28int%20fromIndex,%20int%20toIndex%29%20%7b%20subListRangeCheck%28fromIndex,%20toIndex,%20size%29;%20return%20new%20SubList%28this,%200,%20fromIndex,%20toIndex%29;%20%7d%20static%20void%20subListRangeCheck%28int%20fromIndex,%20int%20toIndex,%20int%20size%29%20%7b%20if%20%28fromIndex%20%3c%200%29%20throw%20new%20IndexOutOfBoundsException%28%22fromIndex%20=%20%22%20+%20fromIndex%29;%20if%20%28toIndex%20%3e%20size%29%20throw%20new%20IndexOutOfBoundsException%28%22toIndex%20=%20%22%20+%20toIndex%29;%20if%20%28fromIndex%20%3e%20toIndex%29%20throw%20new%20IllegalArgumentException%28%22fromIndex%28%22%20+%20fromIndex%20+%20%22%29%20%3e%20toIndex%28%22%20+%20toIndex%20+%20%22%29%22%29;%20%7d%20private%20class%20SubList%20extends%20AbstractList%3cE%3e%20implements%20RandomAccess%20%7b%20private%20final%20AbstractList%3cE%3e%20parent;%20private%20final%20int%20parentOffset;%20private%20final%20int%20offset;%20int%20size;%20SubList%28AbstractList%3cE%3e%20parent,%20int%20offset,%20int%20fromIndex,%20int%20toIndex%29%20%7b%20this.parent%20=%20parent;%20this.parentOffset%20=%20fromIndex;%20this.offset%20=%20offset%20+%20fromIndex;%20this.size%20=%20toIndex%20-%20fromIndex;%20this.modCount%20=%20ArrayList.this.modCount;%20%7d%20public%20E%20set%28int%20index,%20E%20e%29%20%7b%20rangeCheck%28index%29;%20checkForComodification%28%29;%20E%20oldValue%20=%20ArrayList.this.elementData%28offset%20+%20index%29;%20ArrayList.this.elementData[offset%20+%20index]%20=%20e;%20return%20oldValue;%20%7d%20public%20E%20get%28int%20index%29%20%7b%20rangeCheck%28index%29;%20checkForComodification%28%29;%20return%20ArrayList.this.elementData%28offset%20+%20index%29;%20%7d%20public%20int%20size%28%29%20%7b%20checkForComodification%28%29;%20return%20this.size;%20%7d%20public%20void%20add%28int%20index,%20E%20e%29%20%7b%20rangeCheckForAdd%28index%29;%20checkForComodification%28%29;%20parent.add%28parentOffset%20+%20index,%20e%29;%20this.modCount%20=%20parent.modCount;%20this.size++;%20%7d%20public%20E%20remove%28int%20index%29%20%7b%20rangeCheck%28index%29;%20checkForComodification%28%29;%20E%20result%20=%20parent.remove%28parentOffset%20+%20index%29;%20this.modCount%20=%20parent.modCount;%20this.size--;%20return%20result;%20%7d%20protected%20void%20removeRange%28int%20fromIndex,%20int%20toIndex%29%20%7b%20checkForComodification%28%29;%20parent.removeRange%28parentOffset%20+%20fromIndex,%20parentOffset%20+%20toIndex%29;%20this.modCount%20=%20parent.modCount;%20this.size%20-=%20toIndex%20-%20fromIndex;%20%7d%20public%20boolean%20addAll%28Collection%3c?%20extends%20E%3e%20c%29%20%7b%20return%20addAll%28this.size,%20c%29;%20%7d%20public%20boolean%20addAll%28int%20index,%20Collection%3c?%20extends%20E%3e%20c%29%20%7b%20rangeCheckForAdd%28index%29;%20int%20cSize%20=%20c.size%28%29;%20if%20%28cSize%20==%200%29%20return%20false;%20checkForComodification%28%29;%20parent.addAll%28parentOffset%20+%20index,%20c%29;%20this.modCount%20=%20parent.modCount;%20this.size%20+=%20cSize;%20return%20true;%20%7d%20public%20Iterator%3cE%3e%20iterator%28%29%20%7b%20return%20listIterator%28%29;%20%7d%20public%20ListIterator%3cE%3e%20listIterator%28final%20int%20index%29%20%7b%20checkForComodification%28%29;%20rangeCheckForAdd%28index%29;%20final%20int%20offset%20=%20this.offset;%20return%20new%20ListIterator%3cE%3e%28%29%20%7b%20int%20cursor%20=%20index;%20int%20lastRet%20=%20-1;%20int%20expectedModCount%20=%20ArrayList.this.modCount;%20public%20boolean%20hasNext%28%29%20%7b%20return%20cursor%20!=%20SubList.this.size;%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20E%20next%28%29%20%7b%20checkForComodification%28%29;%20int%20i%20=%20cursor;%20if%20%28i%20%3e=%20SubList.this.size%29%20throw%20new%20NoSuchElementException%28%29;%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28offset%20+%20i%20%3e=%20elementData.length%29%20throw%20new%20ConcurrentModificationException%28%29;%20cursor%20=%20i%20+%201;%20return%20%28E%29%20elementData[offset%20+%20%28lastRet%20=%20i%29];%20%7d%20public%20boolean%20hasPrevious%28%29%20%7b%20return%20cursor%20!=%200;%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20E%20previous%28%29%20%7b%20checkForComodification%28%29;%20int%20i%20=%20cursor%20-%201;%20if%20%28i%20%3c%200%29%20throw%20new%20NoSuchElementException%28%29;%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28offset%20+%20i%20%3e=%20elementData.length%29%20throw%20new%20ConcurrentModificationException%28%29;%20cursor%20=%20i;%20return%20%28E%29%20elementData[offset%20+%20%28lastRet%20=%20i%29];%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20void%20forEachRemaining%28Consumer%3c?%20super%20E%3e%20consumer%29%20%7b%20Objects.requireNonNull%28consumer%29;%20final%20int%20size%20=%20SubList.this.size;%20int%20i%20=%20cursor;%20if%20%28i%20%3e=%20size%29%20%7b%20return;%20%7d%20final%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28offset%20+%20i%20%3e=%20elementData.length%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20while%20%28i%20!=%20size%20&&%20modCount%20==%20expectedModCount%29%20%7b%20consumer.accept%28%28E%29%20elementData[offset%20+%20%28i++%29]%29;%20%7d%20//%20update%20once%20at%20end%20of%20iteration%20to%20reduce%20heap%20write%20traffic%20lastRet%20=%20cursor%20=%20i;%20checkForComodification%28%29;%20%7d%20public%20int%20nextIndex%28%29%20%7b%20return%20cursor;%20%7d%20public%20int%20previousIndex%28%29%20%7b%20return%20cursor%20-%201;%20%7d%20public%20void%20remove%28%29%20%7b%20if%20%28lastRet%20%3c%200%29%20throw%20new%20IllegalStateException%28%29;%20checkForComodification%28%29;%20try%20%7b%20SubList.this.remove%28lastRet%29;%20cursor%20=%20lastRet;%20lastRet%20=%20-1;%20expectedModCount%20=%20ArrayList.this.modCount;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20public%20void%20set%28E%20e%29%20%7b%20if%20%28lastRet%20%3c%200%29%20throw%20new%20IllegalStateException%28%29;%20checkForComodification%28%29;%20try%20%7b%20ArrayList.this.set%28offset%20+%20lastRet,%20e%29;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20public%20void%20add%28E%20e%29%20%7b%20checkForComodification%28%29;%20try%20%7b%20int%20i%20=%20cursor;%20SubList.this.add%28i,%20e%29;%20cursor%20=%20i%20+%201;%20lastRet%20=%20-1;%20expectedModCount%20=%20ArrayList.this.modCount;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20final%20void%20checkForComodification%28%29%20%7b%20if%20%28expectedModCount%20!=%20ArrayList.this.modCount%29%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d;%20%7d%20public%20List%3cE%3e%20subList%28int%20fromIndex,%20int%20toIndex%29%20%7b%20subListRangeCheck%28fromIndex,%20toIndex,%20size%29;%20return%20new%20SubList%28this,%20offset,%20fromIndex,%20toIndex%29;%20%7d%20private%20void%20rangeCheck%28int%20index%29%20%7b%20if%20%28index%20%3c%200%20%7c%7c%20index%20%3e=%20this.size%29%20throw%20new%20IndexOutOfBoundsException%28outOfBoundsMsg%28index%29%29;%20%7d%20private%20void%20rangeCheckForAdd%28int%20index%29%20%7b%20if%20%28index%20%3c%200%20%7c%7c%20index%20%3e%20this.size%29%20throw%20new%20IndexOutOfBoundsException%28outOfBoundsMsg%28index%29%29;%20%7d%20private%20String%20outOfBoundsMsg%28int%20index%29%20%7b%20return%20%22Index:%20%22%20+%20index%20+%20%22,%20Size:%20%22%20+%20this.size;%20%7d%20private%20void%20checkForComodification%28%29%20%7b%20if%20%28ArrayList.this.modCount%20!=%20this.modCount%29%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20public%20Spliterator%3cE%3e%20spliterator%28%29%20%7b%20checkForComodification%28%29;%20return%20new%20ArrayListSpliterator%3cE%3e%28ArrayList.this,%20offset,%20offset%20+%20this.size,%20this.modCount%29;%20%7d%20%7d%20@Override%20public%20void%20forEach%28Consumer%3c?%20super%20E%3e%20action%29%20%7b%20Objects.requireNonNull%28action%29;%20final%20int%20expectedModCount%20=%20modCount;%20@SuppressWarnings%28%22unchecked%22%29%20final%20E[]%20elementData%20=%20%28E[]%29%20this.elementData;%20final%20int%20size%20=%20this.size;%20for%20%28int%20i%20=%200;%20modCount%20==%20expectedModCount%20&&%20i%20%3c%20size;%20i++%29%20%7b%20action.accept%28elementData[i]%29;%20%7d%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20/**%20*%20Creates%20a%20%3cem%3e%3ca%20href=%22Spliterator.html#binding%22%3elate-binding%3c/a%3e%3c/em%3e%20*%20and%20%3cem%3efail-fast%3c/em%3e%20%7b@link%20Spliterator%7d%20over%20the%20elements%20in%20this%20*%20list.%20*%20*%20%3cp%3eThe%20%7b@code%20Spliterator%7d%20reports%20%7b@link%20Spliterator#SIZED%7d,%20*%20%7b@link%20Spliterator#SUBSIZED%7d,%20and%20%7b@link%20Spliterator#ORDERED%7d.%20*%20Overriding%20implementations%20should%20document%20the%20reporting%20of%20additional%20*%20characteristic%20values.%20*%20*%20@return%20a%20%7b@code%20Spliterator%7d%20over%20the%20elements%20in%20this%20list%20*%20@since%201.8%20*/%20@Override%20public%20Spliterator%3cE%3e%20spliterator%28%29%20%7b%20return%20new%20ArrayListSpliterator%3c%3e%28this,%200,%20-1,%200%29;%20%7d%20/**%20*%20Index-based%20split-by-two,%20lazily%20initialized%20Spliterator%20*/%20static%20final%20class%20ArrayListSpliterator%3cE%3e%20implements%20Spliterator%3cE%3e%20%7b%20/*%20*%20If%20ArrayLists%20were%20immutable,%20or%20structurally%20immutable%20%28no%20*%20adds,%20removes,%20etc%29,%20we%20could%20implement%20their%20spliterators%20*%20with%20Arrays.spliterator.%20Instead%20we%20detect%20as%20much%20*%20interference%20during%20traversal%20as%20practical%20without%20*%20sacrificing%20much%20performance.%20We%20rely%20primarily%20on%20*%20modCounts.%20These%20are%20not%20guaranteed%20to%20detect%20concurrency%20*%20violations,%20and%20are%20sometimes%20overly%20conservative%20about%20*%20within-thread%20interference,%20but%20detect%20enough%20problems%20to%20*%20be%20worthwhile%20in%20practice.%20To%20carry%20this%20out,%20we%20%281%29%20lazily%20*%20initialize%20fence%20and%20expectedModCount%20until%20the%20latest%20*%20point%20that%20we%20need%20to%20commit%20to%20the%20state%20we%20are%20checking%20*%20against;%20thus%20improving%20precision.%20%28This%20doesn%27t%20apply%20to%20*%20SubLists,%20that%20create%20spliterators%20with%20current%20non-lazy%20*%20values%29.%20%282%29%20We%20perform%20only%20a%20single%20*%20ConcurrentModificationException%20check%20at%20the%20end%20of%20forEach%20*%20%28the%20most%20performance-sensitive%20method%29.%20When%20using%20forEach%20*%20%28as%20opposed%20to%20iterators%29,%20we%20can%20normally%20only%20detect%20*%20interference%20after%20actions,%20not%20before.%20Further%20*%20CME-triggering%20checks%20apply%20to%20all%20other%20possible%20*%20violations%20of%20assumptions%20for%20example%20null%20or%20too-small%20*%20elementData%20array%20given%20its%20size%28%29,%20that%20could%20only%20have%20*%20occurred%20due%20to%20interference.%20This%20allows%20the%20inner%20loop%20*%20of%20forEach%20to%20run%20without%20any%20further%20checks,%20and%20*%20simplifies%20lambda-resolution.%20While%20this%20does%20entail%20a%20*%20number%20of%20checks,%20note%20that%20in%20the%20common%20case%20of%20*%20list.stream%28%29.forEach%28a%29,%20no%20checks%20or%20other%20computation%20*%20occur%20anywhere%20other%20than%20inside%20forEach%20itself.%20The%20other%20*%20less-often-used%20methods%20cannot%20take%20advantage%20of%20most%20of%20*%20these%20streamlinings.%20*/%20private%20final%20ArrayList%3cE%3e%20list;%20private%20int%20index;%20//%20current%20index,%20modified%20on%20advance/split%20private%20int%20fence;%20//%20-1%20until%20used;%20then%20one%20past%20last%20index%20private%20int%20expectedModCount;%20//%20initialized%20when%20fence%20set%20/**%20*%20Create%20new%20spliterator%20covering%20the%20given%20range%20*/%20ArrayListSpliterator%28ArrayList%3cE%3e%20list,%20int%20origin,%20int%20fence,%20int%20expectedModCount%29%20%7b%20this.list%20=%20list;%20//%20OK%20if%20null%20unless%20traversed%20this.index%20=%20origin;%20this.fence%20=%20fence;%20this.expectedModCount%20=%20expectedModCount;%20%7d%20private%20int%20getFence%28%29%20%7b%20//%20initialize%20fence%20to%20size%20on%20first%20use%20int%20hi;%20//%20%28a%20specialized%20variant%20appears%20in%20method%20forEach%29%20ArrayList%3cE%3e%20lst;%20if%20%28%28hi%20=%20fence%29%20%3c%200%29%20%7b%20if%20%28%28lst%20=%20list%29%20==%20null%29%20hi%20=%20fence%20=%200;%20else%20%7b%20expectedModCount%20=%20lst.modCount;%20hi%20=%20fence%20=%20lst.size;%20%7d%20%7d%20return%20hi;%20%7d%20public%20ArrayListSpliterator%3cE%3e%20trySplit%28%29%20%7b%20int%20hi%20=%20getFence%28%29,%20lo%20=%20index,%20mid%20=%20%28lo%20+%20hi%29%20%3e%3e%3e%201;%20return%20%28lo%20%3e=%20mid%29%20?%20null%20:%20//%20divide%20range%20in%20half%20unless%20too%20small%20new%20ArrayListSpliterator%3cE%3e%28list,%20lo,%20index%20=%20mid,%20expectedModCount%29;%20%7d%20public%20boolean%20tryAdvance%28Consumer%3c?%20super%20E%3e%20action%29%20%7b%20if%20%28action%20==%20null%29%20throw%20new%20NullPointerException%28%29;%20int%20hi%20=%20getFence%28%29,%20i%20=%20index;%20if%20%28i%20%3c%20hi%29%20%7b%20index%20=%20i%20+%201;%20@SuppressWarnings%28%22unchecked%22%29%20E%20e%20=%20%28E%29%20list.elementData[i];%20action.accept%28e%29;%20if%20%28list.modCount%20!=%20expectedModCount%29%20throw%20new%20ConcurrentModificationException%28%29;%20return%20true;%20%7d%20return%20false;%20%7d%20public%20void%20forEachRemaining%28Consumer%3c?%20super%20E%3e%20action%29%20%7b%20int%20i,%20hi,%20mc;%20//%20hoist%20accesses%20and%20checks%20from%20loop%20ArrayList%3cE%3e%20lst;%20Object[]%20a;%20if%20%28action%20==%20null%29%20throw%20new%20NullPointerException%28%29;%20if%20%28%28lst%20=%20list%29%20!=%20null%20&&%20%28a%20=%20lst.elementData%29%20!=%20null%29%20%7b%20if%20%28%28hi%20=%20fence%29%20%3c%200%29%20%7b%20mc%20=%20lst.modCount;%20hi%20=%20lst.size;%20%7d%20else%20mc%20=%20expectedModCount;%20if%20%28%28i%20=%20index%29%20%3e=%200%20&&%20%28index%20=%20hi%29%20%3c=%20a.length%29%20%7b%20for%20%28;%20i%20%3c%20hi;%20++i%29%20%7b%20@SuppressWarnings%28%22unchecked%22%29%20E%20e%20=%20%28E%29%20a[i];%20action.accept%28e%29;%20%7d%20if%20%28lst.modCount%20==%20mc%29%20return;%20%7d%20%7d%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20public%20long%20estimateSize%28%29%20%7b%20return%20%28long%29%20%28getFence%28%29%20-%20index%29;%20%7d%20public%20int%20characteristics%28%29%20%7b%20return%20Spliterator.ORDERED%20%7c%20Spliterator.SIZED%20%7c%20Spliterator.SUBSIZED;%20%7d%20%7d%20@Override%20public%20boolean%20removeIf%28Predicate%3c?%20super%20E%3e%20filter%29%20%7b%20Objects.requireNonNull%28filter%29;%20//%20figure%20out%20which%20elements%20are%20to%20be%20removed%20//%20any%20exception%20thrown%20from%20the%20filter%20predicate%20at%20this%20stage%20//%20will%20leave%20the%20collection%20unmodified%20int%20removeCount%20=%200;%20final%20BitSet%20removeSet%20=%20new%20BitSet%28size%29;%20final%20int%20expectedModCount%20=%20modCount;%20final%20int%20size%20=%20this.size;%20for%20%28int%20i%20=%200;%20modCount%20==%20expectedModCount%20&&%20i%20%3c%20size;%20i++%29%20%7b%20@SuppressWarnings%28%22unchecked%22%29%20final%20E%20element%20=%20%28E%29%20elementData[i];%20if%20%28filter.test%28element%29%29%20%7b%20removeSet.set%28i%29;%20removeCount++;%20%7d%20%7d%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20//%20shift%20surviving%20elements%20left%20over%20the%20spaces%20left%20by%20removed%20elements%20final%20boolean%20anyToRemove%20=%20removeCount%20%3e%200;%20if%20%28anyToRemove%29%20%7b%20final%20int%20newSize%20=%20size%20-%20removeCount;%20for%20%28int%20i%20=%200,%20j%20=%200;%20%28i%20%3c%20size%29%20&&%20%28j%20%3c%20newSize%29;%20i++,%20j++%29%20%7b%20i%20=%20removeSet.nextClearBit%28i%29;%20elementData[j]%20=%20elementData[i];%20%7d%20for%20%28int%20k%20=%20newSize;%20k%20%3c%20size;%20k++%29%20%7b%20elementData[k]%20=%20null;%20//%20Let%20gc%20do%20its%20work%20%7d%20this.size%20=%20newSize;%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20modCount++;%20%7d%20return%20anyToRemove;%20%7d%20@Override%20@SuppressWarnings%28%22unchecked%22%29%20public%20void%20replaceAll%28UnaryOperator%3cE%3e%20operator%29%20%7b%20Objects.requireNonNull%28operator%29;%20final%20int%20expectedModCount%20=%20modCount;%20final%20int%20size%20=%20this.size;%20for%20%28int%20i%20=%200;%20modCount%20==%20expectedModCount%20&&%20i%20%3c%20size;%20i++%29%20%7b%20elementData[i]%20=%20operator.apply%28%28E%29%20elementData[i]%29;%20%7d%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20modCount++;%20%7d%20@Override%20@SuppressWarnings%28%22unchecked%22%29%20public%20void%20sort%28Comparator%3c?%20super%20E%3e%20c%29%20%7b%20final%20int%20expectedModCount%20=%20modCount;%20Arrays.sort%28%28E[]%29%20elementData,%200,%20size,%20c%29;%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20modCount++;%20%7d%20%7d%20%e6%89%a9%e5%ae%b9%e5%88%86%e6%9e%90" title=分享到「豆瓣」 target=_blank rel=noopener><svg viewBox="0 0 24 24" class="icon douban-icon"><path d="M.643.92v2.412h22.714V.92H.643zm1.974 4.926v9.42h18.764v-9.42H2.617zm2.72 2.408H18.69v4.605H5.338V8.254zm1.657 7.412-2.512.938c1.037 1.461 1.87 2.825 2.512 4.091H0v2.385h24v-2.385h-6.678c.818-1.176 1.589-2.543 2.303-4.091l-2.73-.938a29.952 29.952.0 01-2.479 5.03h-4.75c-.786-1.962-1.677-3.641-2.672-5.03z"/></svg></a></div><div class="share-item qq"><a href="https://connect.qq.com/widget/shareqq/index.html?url=https://www.mujaspace.com/tech/2023/arraylist%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/&amp;title=ArrayList%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90%20building&amp;summary=%e7%ae%80%e4%bb%8b%20ArrayList%e7%bb%a7%e6%89%bf%e4%ba%8e%c2%a0AbstractList%c2%a0%e7%b1%bb%ef%bc%8c%e5%ae%9e%e7%8e%b0%e4%ba%86%c2%a0List,%c2%a0RandomAccess,%c2%a0Cloneable,%c2%a0java.io.Serializable%c2%a0%e8%bf%99%e4%ba%9b%e6%8e%a5%e5%8f%a3%e3%80%82%0aList%ef%bc%9a%e8%a1%a8%e6%98%8e%e6%98%af%e4%b8%80%e4%b8%aa%e5%88%97%e8%a1%a8%ef%bc%8c%e6%94%af%e6%8c%81%e6%b7%bb%e5%8a%a0%e3%80%81%e5%88%a0%e9%99%a4%e3%80%81%e6%9f%a5%e6%89%be%e7%ad%89%e6%93%8d%e4%bd%9c%ef%bc%8c%e5%b9%b6%e4%b8%94%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e4%b8%8b%e6%a0%87%e8%bf%9b%e8%a1%8c%e8%ae%bf%e9%97%ae%e3%80%82%20RandomAccess%ef%bc%9a%e6%98%af%e4%b8%80%e4%b8%aa%e6%a0%87%e5%bf%97%e6%8e%a5%e5%8f%a3%ef%bc%8c%e8%a1%a8%e6%98%8e%e5%ae%9e%e7%8e%b0%e8%bf%99%e4%b8%aa%e8%bf%99%e4%b8%aa%e6%8e%a5%e5%8f%a3%e7%9a%84%20List%20%e9%9b%86%e5%90%88%e6%98%af%e6%94%af%e6%8c%81%e5%bf%ab%e9%80%9f%e9%9a%8f%e6%9c%ba%e8%ae%bf%e9%97%ae%e7%9a%84%e3%80%82%e5%9c%a8%c2%a0ArrayList%c2%a0%e4%b8%ad%ef%bc%8c%e6%88%91%e4%bb%ac%e5%8d%b3%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e5%85%83%e7%b4%a0%e7%9a%84%e5%ba%8f%e5%8f%b7%e5%bf%ab%e9%80%9f%e8%8e%b7%e5%8f%96%e5%85%83%e7%b4%a0%e5%af%b9%e8%b1%a1%ef%bc%8c%e8%bf%99%e5%b0%b1%e6%98%af%e5%bf%ab%e9%80%9f%e9%9a%8f%e6%9c%ba%e8%ae%bf%e9%97%ae%e3%80%82%20Cloneable%c2%a0%ef%bc%9a%e5%8d%b3%e8%a6%86%e7%9b%96%e4%ba%86%e5%87%bd%e6%95%b0clone%28%29%ef%bc%8c%e8%83%bd%e8%a2%ab%e5%85%8b%e9%9a%86%e3%80%82%20Serializable%ef%bc%9a%e8%bf%99%e6%84%8f%e5%91%b3%e7%9d%80ArrayList%e6%94%af%e6%8c%81%e5%ba%8f%e5%88%97%e5%8c%96%ef%bc%8c%e8%83%bd%e9%80%9a%e8%bf%87%e5%ba%8f%e5%88%97%e5%8c%96%e5%8e%bb%e4%bc%a0%e8%be%93%e3%80%82%201%202%203%20public%20class%20ArrayList%3cE%3e%20extends%20AbstractList%3cE%3e%20implements%20List%3cE%3e,%20RandomAccess,%20Cloneable,%20java.io.Serializable%20%7b%7d%20%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90%201%202%203%204%205%206%207%208%209%2010%2011%2012%2013%2014%2015%2016%2017%2018%2019%2020%2021%2022%2023%2024%2025%2026%2027%2028%2029%2030%2031%2032%2033%2034%2035%2036%2037%2038%2039%2040%2041%2042%2043%2044%2045%2046%2047%2048%2049%2050%2051%2052%2053%2054%2055%2056%2057%2058%2059%2060%2061%2062%2063%2064%2065%2066%2067%2068%2069%2070%2071%2072%2073%2074%2075%2076%2077%2078%2079%2080%2081%2082%2083%2084%2085%2086%2087%2088%2089%2090%2091%2092%2093%2094%2095%2096%2097%2098%2099%20100%20101%20102%20103%20104%20105%20106%20107%20108%20109%20110%20111%20112%20113%20114%20115%20116%20117%20118%20119%20120%20121%20122%20123%20124%20125%20126%20127%20128%20129%20130%20131%20132%20133%20134%20135%20136%20137%20138%20139%20140%20141%20142%20143%20144%20145%20146%20147%20148%20149%20150%20151%20152%20153%20154%20155%20156%20157%20158%20159%20160%20161%20162%20163%20164%20165%20166%20167%20168%20169%20170%20171%20172%20173%20174%20175%20176%20177%20178%20179%20180%20181%20182%20183%20184%20185%20186%20187%20188%20189%20190%20191%20192%20193%20194%20195%20196%20197%20198%20199%20200%20201%20202%20203%20204%20205%20206%20207%20208%20209%20210%20211%20212%20213%20214%20215%20216%20217%20218%20219%20220%20221%20222%20223%20224%20225%20226%20227%20228%20229%20230%20231%20232%20233%20234%20235%20236%20237%20238%20239%20240%20241%20242%20243%20244%20245%20246%20247%20248%20249%20250%20251%20252%20253%20254%20255%20256%20257%20258%20259%20260%20261%20262%20263%20264%20265%20266%20267%20268%20269%20270%20271%20272%20273%20274%20275%20276%20277%20278%20279%20280%20281%20282%20283%20284%20285%20286%20287%20288%20289%20290%20291%20292%20293%20294%20295%20296%20297%20298%20299%20300%20301%20302%20303%20304%20305%20306%20307%20308%20309%20310%20311%20312%20313%20314%20315%20316%20317%20318%20319%20320%20321%20322%20323%20324%20325%20326%20327%20328%20329%20330%20331%20332%20333%20334%20335%20336%20337%20338%20339%20340%20341%20342%20343%20344%20345%20346%20347%20348%20349%20350%20351%20352%20353%20354%20355%20356%20357%20358%20359%20360%20361%20362%20363%20364%20365%20366%20367%20368%20369%20370%20371%20372%20373%20374%20375%20376%20377%20378%20379%20380%20381%20382%20383%20384%20385%20386%20387%20388%20389%20390%20391%20392%20393%20394%20395%20396%20397%20398%20399%20400%20401%20402%20403%20404%20405%20406%20407%20408%20409%20410%20411%20412%20413%20414%20415%20416%20417%20418%20419%20420%20421%20422%20423%20424%20425%20426%20427%20428%20429%20430%20431%20432%20433%20434%20435%20436%20437%20438%20439%20440%20441%20442%20443%20444%20445%20446%20447%20448%20449%20450%20451%20452%20453%20454%20455%20456%20457%20458%20459%20460%20461%20462%20463%20464%20465%20466%20467%20468%20469%20470%20471%20472%20473%20474%20475%20476%20477%20478%20479%20480%20481%20482%20483%20484%20485%20486%20487%20488%20489%20490%20491%20492%20493%20494%20495%20496%20497%20498%20499%20500%20501%20502%20503%20504%20505%20506%20507%20508%20509%20510%20511%20512%20513%20514%20515%20516%20517%20518%20519%20520%20521%20522%20523%20524%20525%20526%20527%20528%20529%20530%20531%20532%20533%20534%20535%20536%20537%20538%20539%20540%20541%20542%20543%20544%20545%20546%20547%20548%20549%20550%20551%20552%20553%20554%20555%20556%20557%20558%20559%20560%20561%20562%20563%20564%20565%20566%20567%20568%20569%20570%20571%20572%20573%20574%20575%20576%20577%20578%20579%20580%20581%20582%20583%20584%20585%20586%20587%20588%20589%20590%20591%20592%20593%20594%20595%20596%20597%20598%20599%20600%20601%20602%20603%20604%20605%20606%20607%20608%20609%20610%20611%20612%20613%20614%20615%20616%20617%20618%20619%20620%20621%20622%20623%20624%20625%20626%20627%20628%20629%20630%20631%20632%20633%20634%20635%20636%20637%20638%20639%20640%20641%20642%20643%20644%20645%20646%20647%20648%20649%20650%20651%20652%20653%20654%20655%20656%20657%20658%20659%20660%20661%20662%20663%20664%20665%20666%20667%20668%20669%20670%20671%20672%20673%20674%20675%20676%20677%20678%20679%20680%20681%20682%20683%20684%20685%20686%20687%20688%20689%20690%20691%20692%20693%20694%20695%20696%20697%20698%20699%20700%20701%20702%20703%20704%20705%20706%20707%20708%20709%20710%20711%20712%20713%20714%20715%20716%20717%20718%20719%20720%20721%20722%20723%20724%20725%20726%20727%20728%20729%20730%20731%20732%20733%20734%20735%20736%20737%20738%20739%20740%20741%20742%20743%20744%20745%20746%20747%20748%20749%20750%20751%20752%20753%20754%20755%20756%20757%20758%20759%20760%20761%20762%20763%20764%20765%20766%20767%20768%20769%20770%20771%20772%20773%20774%20775%20776%20777%20778%20779%20780%20781%20782%20783%20784%20785%20786%20787%20788%20789%20790%20791%20792%20793%20794%20795%20796%20797%20798%20799%20800%20801%20802%20803%20804%20805%20806%20807%20808%20809%20810%20811%20812%20813%20814%20815%20816%20817%20818%20819%20820%20821%20822%20823%20824%20825%20826%20827%20828%20829%20830%20831%20832%20833%20834%20835%20836%20837%20838%20839%20840%20841%20842%20843%20844%20845%20846%20847%20848%20849%20850%20851%20852%20853%20854%20855%20856%20857%20858%20859%20860%20861%20862%20863%20864%20865%20866%20867%20868%20869%20870%20871%20872%20873%20874%20875%20876%20877%20878%20879%20880%20881%20882%20883%20884%20885%20886%20887%20888%20889%20890%20891%20892%20893%20894%20895%20896%20897%20898%20899%20900%20901%20902%20903%20904%20905%20906%20907%20908%20909%20910%20911%20912%20913%20914%20915%20916%20917%20918%20919%20920%20921%20922%20923%20924%20925%20926%20927%20928%20929%20930%20931%20932%20933%20934%20935%20936%20937%20938%20939%20940%20941%20942%20943%20944%20945%20946%20947%20948%20949%20950%20951%20952%20953%20954%20955%20956%20957%20958%20959%20960%20961%20962%20963%20964%20965%20966%20967%20968%20969%20970%20971%20972%20973%20974%20975%20976%20977%20978%20979%20980%20981%20982%20983%20984%20985%20986%20987%20988%20989%20990%20991%20992%20993%20994%20995%20996%20997%20998%20999%201000%201001%201002%201003%201004%201005%201006%201007%201008%201009%201010%201011%201012%201013%201014%201015%201016%201017%201018%201019%201020%201021%201022%201023%201024%201025%201026%201027%201028%201029%201030%201031%201032%201033%201034%201035%201036%201037%201038%201039%201040%201041%201042%201043%201044%201045%201046%201047%201048%201049%201050%201051%201052%201053%201054%201055%201056%201057%201058%201059%201060%201061%201062%201063%201064%201065%201066%201067%201068%201069%201070%201071%201072%201073%201074%201075%201076%201077%201078%201079%201080%201081%201082%201083%201084%201085%201086%201087%201088%201089%201090%201091%201092%201093%201094%201095%201096%201097%201098%201099%201100%201101%201102%201103%201104%201105%201106%201107%201108%201109%201110%201111%201112%201113%201114%201115%201116%201117%201118%201119%201120%201121%201122%201123%201124%201125%201126%201127%201128%201129%201130%201131%201132%201133%201134%201135%201136%201137%201138%201139%201140%201141%201142%201143%201144%201145%201146%201147%201148%201149%201150%201151%201152%201153%201154%201155%201156%201157%201158%201159%201160%201161%201162%201163%201164%201165%201166%201167%201168%201169%201170%201171%201172%201173%201174%201175%201176%201177%201178%201179%201180%201181%201182%201183%201184%201185%20package%20java.util;%20import%20java.util.function.Consumer;%20import%20java.util.function.Predicate;%20import%20java.util.function.UnaryOperator;%20public%20class%20ArrayList%3cE%3e%20extends%20AbstractList%3cE%3e%20implements%20List%3cE%3e,%20RandomAccess,%20Cloneable,%20java.io.Serializable%20%7b%20private%20static%20final%20long%20serialVersionUID%20=%208683452581122892189L;%20/**%20*%20Default%20initial%20capacity.%20mjy%ef%bc%9a%e9%bb%98%e8%ae%a4%e5%88%9d%e5%a7%8b%e5%ae%b9%e9%87%8f%e5%a4%a7%e5%b0%8f%20*/%20private%20static%20final%20int%20DEFAULT_CAPACITY%20=%2010;%20/**%20*%20Shared%20empty%20array%20instance%20used%20for%20empty%20instances.%20mjy%ef%bc%9a%e7%a9%ba%e6%95%b0%e7%bb%84%ef%bc%88%e7%94%a8%e4%ba%8e%e7%a9%ba%e5%ae%9e%e4%be%8b%ef%bc%89%e3%80%82%20*/%20private%20static%20final%20Object[]%20EMPTY_ELEMENTDATA%20=%20%7b%7d;%20/**%20*%20Shared%20empty%20array%20instance%20used%20for%20default%20sized%20empty%20instances.%20We%20*%20distinguish%20this%20from%20EMPTY_ELEMENTDATA%20to%20know%20how%20much%20to%20inflate%20when%20*%20first%20element%20is%20added.%20*/%20//%20mjy%ef%bc%9a%e7%94%a8%e4%ba%8e%e9%bb%98%e8%ae%a4%e5%a4%a7%e5%b0%8f%e7%a9%ba%e5%ae%9e%e4%be%8b%e7%9a%84%e5%85%b1%e4%ba%ab%e7%a9%ba%e6%95%b0%e7%bb%84%e5%ae%9e%e4%be%8b%e3%80%82%e5%92%8cEMPTY_ELEMENTDATA%e6%95%b0%e7%bb%84%e5%8c%ba%e5%88%86%ef%bc%8c%e4%bb%a5%e7%9f%a5%e9%81%93%e5%9c%a8%e6%b7%bb%e5%8a%a0%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%e6%97%b6%e5%ae%b9%e9%87%8f%e9%9c%80%e8%a6%81%e5%a2%9e%e5%8a%a0%e5%a4%9a%e5%b0%91%e3%80%82%20private%20static%20final%20Object[]%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%20=%20%7b%7d;%20/**%20*%20The%20array%20buffer%20into%20which%20the%20elements%20of%20the%20ArrayList%20are%20stored.%20*%20The%20capacity%20of%20the%20ArrayList%20is%20the%20length%20of%20this%20array%20buffer.%20Any%20*%20empty%20ArrayList%20with%20elementData%20==%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%20*%20will%20be%20expanded%20to%20DEFAULT_CAPACITY%20when%20the%20first%20element%20is%20added.%20*/%20//%20mjy%ef%bc%9a%e5%ad%98%e5%82%a8ArrayList%e5%85%83%e7%b4%a0%e7%9a%84%e6%95%b0%e7%bb%84%e7%bc%93%e5%86%b2%e5%8c%ba%ef%bc%88%e5%b0%b1%e6%98%af%e4%bf%9d%e5%ad%98ArrayList%e6%95%b0%e6%8d%ae%e7%9a%84%e6%95%b0%e7%bb%84%ef%bc%89%e3%80%82ArrayList%e7%9a%84%e5%ae%b9%e9%87%8f%e6%98%af%e6%ad%a4%e6%95%b0%e7%bb%84%e7%bc%93%e5%86%b2%e5%8c%ba%e7%9a%84%e9%95%bf%e5%ba%a6%e3%80%82%e6%b7%bb%e5%8a%a0%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%e6%97%b6%ef%bc%8c%e4%bb%bb%e4%bd%95%e5%85%b7%e6%9c%89elementData==DEFAULTCAPACITY_EMMENTDATA%e7%9a%84%e7%a9%baArrayList%e9%83%bd%e5%b0%86%e6%89%a9%e5%b1%95%e4%b8%baDEFAULT_CAPACITY%e3%80%82%20transient%20Object[]%20elementData;%20//%20non-private%20to%20simplify%20nested%20class%20access%20/**%20*%20The%20size%20of%20the%20ArrayList%20%28the%20number%20of%20elements%20it%20contains%29.%20mjy%ef%bc%9a%e6%95%b0%e7%bb%84%e9%95%bf%e5%ba%a6%e5%a4%a7%e5%b0%8f%ef%bc%88%e5%85%83%e7%b4%a0%e4%b8%aa%e6%95%b0%ef%bc%89%20*%20*%20@serial%20*/%20private%20int%20size;%20/**%20*%20Constructs%20an%20empty%20list%20with%20the%20specified%20initial%20capacity.%20*%20*%20@param%20initialCapacity%20the%20initial%20capacity%20of%20the%20list%20*%20@throws%20IllegalArgumentException%20if%20the%20specified%20initial%20capacity%20*%20is%20negative%20*/%20//%20mjy%ef%bc%9a%e5%b8%a6%e5%88%9d%e5%a7%8b%e5%ae%b9%e9%87%8f%e5%8f%82%e6%95%b0%e7%9a%84%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%ef%bc%88%e7%94%a8%e6%88%b7%e5%8f%af%e4%bb%a5%e5%9c%a8%e5%88%9b%e5%bb%baArrayList%e5%af%b9%e8%b1%a1%e6%97%b6%e8%87%aa%e5%b7%b1%e6%8c%87%e5%ae%9a%e9%9b%86%e5%90%88%e7%9a%84%e5%88%9d%e5%a7%8b%e5%a4%a7%e5%b0%8f%ef%bc%89%20public%20ArrayList%28int%20initialCapacity%29%20%7b%20if%20%28initialCapacity%20%3e%200%29%20%7b%20//%20%e4%bc%a0%e5%85%a5%e7%9a%84%e5%8f%82%e6%95%b0%e5%a4%a7%e4%ba%8e0%ef%bc%8c%e5%88%9b%e5%bb%bainitialCapacity%e5%a4%a7%e5%b0%8f%e7%9a%84%e6%95%b0%e7%bb%84%20this.elementData%20=%20new%20Object[initialCapacity];%20%7d%20else%20if%20%28initialCapacity%20==%200%29%20%7b%20//%20%e4%bc%a0%e5%85%a5%e7%9a%84%e5%8f%82%e6%95%b0%e7%ad%89%e4%ba%8e0%ef%bc%8c%e5%88%9b%e5%bb%ba%e7%a9%ba%e6%95%b0%e7%bb%84%20this.elementData%20=%20EMPTY_ELEMENTDATA;%20%7d%20else%20%7b%20//%20%e5%85%b6%e4%bb%96%e6%83%85%e5%86%b5%e5%bc%82%e5%b8%b8%20throw%20new%20IllegalArgumentException%28%22Illegal%20Capacity:%20%22%20+%20initialCapacity%29;%20%7d%20%7d%20/**%20*%20Constructs%20an%20empty%20list%20with%20an%20initial%20capacity%20of%20ten.%20*/%20//%20mjy%ef%bc%9a%e9%bb%98%e8%ae%a4%e6%97%a0%e5%8f%82%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%e4%b8%ba0%e3%80%82%e5%88%9d%e5%a7%8b%e5%85%b6%e5%ae%9e%e6%98%af%e7%a9%ba%e6%95%b0%e7%bb%84%ef%bc%8c%e5%bd%93%e6%b7%bb%e5%8a%a0%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%e7%9a%84%e6%97%b6%e5%80%99%e6%95%b0%e7%bb%84%e5%ae%b9%e9%87%8f%e6%89%8d%e5%8f%98%e6%88%9010%20public%20ArrayList%28%29%20%7b%20this.elementData%20=%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA;%20%7d%20/**%20*%20Constructs%20a%20list%20containing%20the%20elements%20of%20the%20specified%20*%20collection,%20in%20the%20order%20they%20are%20returned%20by%20the%20collection%27s%20*%20iterator.%20*%20*%20@param%20c%20the%20collection%20whose%20elements%20are%20to%20be%20placed%20into%20this%20list%20*%20@throws%20NullPointerException%20if%20the%20specified%20collection%20is%20null%20*/%20//%20mjy%ef%bc%9a%e6%9e%84%e9%80%a0%e4%b8%80%e4%b8%aa%e5%8c%85%e5%90%ab%e6%8c%87%e5%ae%9a%e9%9b%86%e5%90%88%e7%9a%84%e5%85%83%e7%b4%a0%e7%9a%84%e5%88%97%e8%a1%a8%ef%bc%8c%e6%8c%89%e7%85%a7%e5%ae%83%e4%bb%ac%e7%94%b1%e9%9b%86%e5%90%88%e7%9a%84%e8%bf%ad%e4%bb%a3%e5%99%a8%e8%bf%94%e5%9b%9e%e7%9a%84%e9%a1%ba%e5%ba%8f%e3%80%82%20new%20ArrayList%3c%3e%28paramList%29;%20public%20ArrayList%28Collection%3c?%20extends%20E%3e%20c%29%20%7b%20//%20%e5%b0%86%e5%8f%82%e6%95%b0%e8%bd%ac%e6%8d%a2%e4%b8%ba%e6%95%b0%e7%bb%84%20elementData%20=%20c.toArray%28%29;%20//%20elementData%e6%95%b0%e7%bb%84%e7%9a%84%e9%95%bf%e5%ba%a6%e4%b8%8d%e4%b8%ba0%20if%20%28%28size%20=%20elementData.length%29%20!=%200%29%20%7b%20//%20c.toArray%20might%20%28incorrectly%29%20not%20return%20Object[]%20%28see%206260652%29%20//%20mjy%ef%bc%9a%20elementData%e4%b8%8d%e6%98%afObject%e7%b1%bb%e5%9e%8b%e6%95%b0%e6%8d%ae%ef%bc%88c.toArray%e5%8f%af%e8%83%bd%e8%bf%94%e5%9b%9e%e7%9a%84%e4%b8%8d%e6%98%afObject%e7%b1%bb%e5%9e%8b%e7%9a%84%e6%95%b0%e7%bb%84%ef%bc%89%20if%20%28elementData.getClass%28%29%20!=%20Object[].class%29%20//%20mjy%ef%bc%9a%20%e5%b0%86%e5%8e%9f%e6%9d%a5%e4%b8%8d%e6%98%afObject%e7%b1%bb%e5%9e%8b%e7%9a%84elementData%e6%95%b0%e7%bb%84%e7%9a%84%e5%86%85%e5%ae%b9%ef%bc%8c%e8%b5%8b%e5%80%bc%e7%bb%99%e6%96%b0%e7%9a%84Object%e7%b1%bb%e5%9e%8b%e7%9a%84elementData%e6%95%b0%e7%bb%84%20elementData%20=%20Arrays.copyOf%28elementData,%20size,%20Object[].class%29;%20%7d%20else%20%7b%20//%20replace%20with%20empty%20array.%20mjy%ef%bc%9a%20elementData%e6%95%b0%e7%bb%84%e7%9a%84%e9%95%bf%e5%ba%a6%e4%b8%ba0%ef%bc%8c%e5%8d%b3%e4%b8%ba%e7%a9%ba%e6%95%b0%e7%bb%84%20this.elementData%20=%20EMPTY_ELEMENTDATA;%20%7d%20%7d%20/**%20*%20Trims%20the%20capacity%20of%20this%20%3ctt%3eArrayList%3c/tt%3e%20instance%20to%20be%20the%20*%20list%27s%20current%20size.%20An%20application%20can%20use%20this%20operation%20to%20minimize%20*%20the%20storage%20of%20an%20%3ctt%3eArrayList%3c/tt%3e%20instance.%20*/%20//%20mjy%ef%bc%9a%20%e4%bf%ae%e6%94%b9%e8%bf%99%e4%b8%aaArrayList%e5%ae%9e%e4%be%8b%e7%9a%84%e5%ae%b9%e9%87%8f%e6%98%af%e5%88%97%e8%a1%a8%e7%9a%84%e5%bd%93%e5%89%8d%e5%a4%a7%e5%b0%8f%e3%80%82%20%e5%8f%af%e4%bb%a5%e4%bd%bf%e7%94%a8%e6%ad%a4%e6%93%8d%e4%bd%9c%e6%9d%a5%e6%9c%80%e5%b0%8f%e5%8c%96ArrayList%e5%ae%9e%e4%be%8b%e7%9a%84%e5%ad%98%e5%82%a8%e3%80%82%20public%20void%20trimToSize%28%29%20%7b%20modCount++;%20if%20%28size%20%3c%20elementData.length%29%20%7b%20elementData%20=%20%28size%20==%200%29%20?%20EMPTY_ELEMENTDATA%20:%20Arrays.copyOf%28elementData,%20size%29;%20%7d%20%7d%20/**%20*%20Increases%20the%20capacity%20of%20this%20%3ctt%3eArrayList%3c/tt%3e%20instance,%20if%20*%20necessary,%20to%20ensure%20that%20it%20can%20hold%20at%20least%20the%20number%20of%20elements%20*%20specified%20by%20the%20minimum%20capacity%20argument.%20*%20mjy%ef%bc%9a%20%e5%a6%82%e6%9c%89%e5%bf%85%e8%a6%81%ef%bc%8c%e5%a2%9e%e5%8a%a0%e6%ad%a4ArrayList%e5%ae%9e%e4%be%8b%e7%9a%84%e5%ae%b9%e9%87%8f%ef%bc%8c%e4%bb%a5%e7%a1%ae%e4%bf%9d%e5%ae%83%e8%87%b3%e5%b0%91%e5%8f%af%e4%bb%a5%e5%ae%b9%e7%ba%b3%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e5%8f%82%e6%95%b0%e6%8c%87%e5%ae%9a%e7%9a%84%e5%85%83%e7%b4%a0%e6%95%b0%e9%87%8f%e3%80%82%20*%20*%20@param%20minCapacity%20the%20desired%20minimum%20capacity%20mjy%ef%bc%9a%e6%89%80%e9%9c%80%e7%9a%84%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%20*/%20public%20void%20ensureCapacity%28int%20minCapacity%29%20%7b%20//%20mjy%ef%bc%9a%20%28%e6%95%b0%e7%bb%84%e5%85%83%e7%b4%a0%e4%b8%8d%e4%b8%ba%e7%a9%ba%29%20%e5%a6%82%e6%9e%9c%e6%98%aftrue%ef%bc%8cminExpand%e7%9a%84%e5%80%bc%e4%b8%ba0%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%98%affalse,minExpand%e7%9a%84%e5%80%bc%e4%b8%ba10%20int%20minExpand%20=%20%28elementData%20!=%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%29%20//%20any%20size%20if%20not%20default%20element%20table%20?%200%20//%20larger%20than%20default%20for%20default%20empty%20table.%20It%27s%20already%20//%20supposed%20to%20be%20at%20default%20size.%20:%20DEFAULT_CAPACITY;%20//%20%e5%a6%82%e6%9e%9c%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e5%a4%a7%e4%ba%8e%e5%b7%b2%e6%9c%89%e7%9a%84%e6%9c%80%e5%a4%a7%e5%ae%b9%e9%87%8f%20if%20%28minCapacity%20%3e%20minExpand%29%20%7b%20ensureExplicitCapacity%28minCapacity%29;%20%7d%20%7d%20//%20mjy%ef%bc%9a%20%e7%a1%ae%e4%bf%9d%e5%86%85%e9%83%a8%e5%ae%b9%e9%87%8f%20private%20void%20ensureCapacityInternal%28int%20minCapacity%29%20%7b%20//%20mjy%ef%bc%9a%e5%a6%82%e6%9e%9c%e5%85%83%e7%b4%a0%e6%98%af%e7%a9%ba%20if%20%28elementData%20==%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%89%80%e9%9c%80%e8%a6%81%e7%9a%84%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e4%b8%ba%20%e9%bb%98%e8%ae%a4%e5%ae%b9%e9%87%8f%e5%92%8c%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e7%9b%b8%e6%af%94%20%e8%be%83%e5%a4%a7%e7%9a%84%e4%b8%80%e4%b8%aa%20minCapacity%20=%20Math.max%28DEFAULT_CAPACITY,%20minCapacity%29;%20%7d%20//%20%e7%a1%ae%e4%bf%9d%20%e5%ae%b9%e9%87%8f%20ensureExplicitCapacity%28minCapacity%29;%20%7d%20private%20void%20ensureExplicitCapacity%28int%20minCapacity%29%20%7b%20modCount++;%20//%20overflow-conscious%20code%20//%20mjy%ef%bc%9a%e6%89%80%e9%9c%80%e8%a6%81%e7%9a%84%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e5%87%8f%e5%8e%bb%e7%8e%b0%e5%9c%a8%e7%9a%84%e6%95%b0%e7%bb%84%e5%85%83%e7%b4%a0%e9%95%bf%e5%ba%a6%20%e5%a4%a7%e4%ba%8e0%20if%20%28minCapacity%20-%20elementData.length%20%3e%200%29%20//%20mjy%ef%bc%9a%e8%b0%83%e7%94%a8grow%e6%96%b9%e6%b3%95%e8%bf%9b%e8%a1%8c%e6%89%a9%e5%ae%b9%ef%bc%8c%e8%b0%83%e7%94%a8%e6%ad%a4%e6%96%b9%e6%b3%95%e4%bb%a3%e8%a1%a8%e5%b7%b2%e7%bb%8f%e5%bc%80%e5%a7%8b%e6%89%a9%e5%ae%b9%e4%ba%86%20grow%28minCapacity%29;%20%7d%20/**%20*%20The%20maximum%20size%20of%20array%20to%20allocate.%20*%20Some%20VMs%20reserve%20some%20header%20words%20in%20an%20array.%20*%20Attempts%20to%20allocate%20larger%20arrays%20may%20result%20in%20*%20OutOfMemoryError:%20Requested%20array%20size%20exceeds%20VM%20limit%20*%20mjy%ef%bc%9a%20%e6%98%afJVM%e8%83%bd%e5%88%86%e9%85%8d%e7%9a%84%e6%95%b0%e7%bb%84%e7%9a%84%e6%9c%80%e5%a4%a7%20%e5%a4%a7%e5%b0%8f%ef%bc%8c%e4%b8%80%e8%88%ac%e4%b8%baInteger.MAX_VALUE%20-%208%ef%bc%88%e8%bf%99%e5%92%8cJVM%e5%86%85%e9%83%a8%e5%ae%9e%e7%8e%b0%e6%9c%89%e5%85%b3%ef%bc%8c%e7%95%99%e5%87%ba%e4%ba%86%e4%b8%80%e4%ba%9b%e7%94%a8%e4%ba%8e%e5%af%b9%e8%b1%a1%e5%a4%b4%e4%bf%a1%e6%81%af%e7%9a%84%e7%a9%ba%e9%97%b4%ef%bc%89%e3%80%82%20*/%20private%20static%20final%20int%20MAX_ARRAY_SIZE%20=%20Integer.MAX_VALUE%20-%208;%20/**%20*%20Increases%20the%20capacity%20to%20ensure%20that%20it%20can%20hold%20at%20least%20the%20*%20number%20of%20elements%20specified%20by%20the%20minimum%20capacity%20argument.%20*%20mjy%ef%bc%9aArrayList%e6%89%a9%e5%ae%b9%e7%9a%84%e6%a0%b8%e5%bf%83%e6%96%b9%e6%b3%95%e3%80%82%20*%20*%20@param%20minCapacity%20the%20desired%20minimum%20capacity%20*/%20private%20void%20grow%28int%20minCapacity%29%20%7b%20//%20overflow-conscious%20code%20//%20mjy%ef%bc%9a%20%e8%a1%a8%e7%a4%ba%e5%bd%93%e5%89%8d%e6%95%b0%e7%bb%84%e7%9a%84%e5%ae%b9%e9%87%8f%ef%bc%88%e5%8d%b3%e5%bd%93%e5%89%8d%e5%ad%98%e5%82%a8%e5%85%83%e7%b4%a0%e7%9a%84%e6%95%b0%e7%bb%84%20elementData%20%e7%9a%84%e9%95%bf%e5%ba%a6%ef%bc%89%20int%20oldCapacity%20=%20elementData.length;%20//%20mjy%ef%bc%9a%e6%98%af%e6%96%b0%e7%9a%84%e6%95%b0%e7%bb%84%e5%ae%b9%e9%87%8f%ef%bc%8c%e8%ae%a1%e7%ae%97%e6%96%b9%e5%bc%8f%e6%98%af%e6%97%a7%e5%ae%b9%e9%87%8f%e7%9a%84%201.5%20%e5%80%8d%20%28oldCapacity%20+%20oldCapacity%20%3e%3e%201%ef%bc%8c%e5%8d%b3%e5%8f%b3%e7%a7%bb%e4%b8%80%e4%bd%8d%e8%a1%a8%e7%a4%ba%e9%99%a4%e4%bb%a52%29%e3%80%82%e9%80%9a%e8%bf%87%e8%bf%99%e7%a7%8d%e6%96%b9%e5%bc%8f%ef%bc%8cArrayList%20%e7%9a%84%e5%ae%b9%e9%87%8f%e4%bc%9a%e5%9c%a8%e9%9c%80%e8%a6%81%e6%97%b6%e4%bb%a5%e6%8c%87%e6%95%b0%e6%96%b9%e5%bc%8f%e5%a2%9e%e5%8a%a0%ef%bc%8c%e9%81%bf%e5%85%8d%e9%a2%91%e7%b9%81%e6%89%a9%e5%ae%b9%e3%80%82%20int%20newCapacity%20=%20oldCapacity%20+%20%28oldCapacity%20%3e%3e%201%29;%20//%20mjy%ef%bc%9aminCapacity%e6%98%af%e8%b0%83%e7%94%a8grow%e6%96%b9%e6%b3%95%e6%97%b6%e4%bc%a0%e5%85%a5%e7%9a%84%e5%8f%82%e6%95%b0%ef%bc%8c%e8%a1%a8%e7%a4%ba%e6%89%80%e9%9c%80%e7%9a%84%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e3%80%82%e5%a6%82%e6%9e%9c%e8%ae%a1%e7%ae%97%e5%87%ba%e7%9a%84newCapacity%e5%b0%8f%e4%ba%8eminCapacity%ef%bc%8c%e9%82%a3%e4%b9%88%e7%9b%b4%e6%8e%a5%e5%b0%86newCapacity%e8%ae%be%e7%bd%ae%e4%b8%baminCapacity%ef%bc%8c%e7%a1%ae%e4%bf%9d%e6%96%b0%e5%ae%b9%e9%87%8f%e8%87%b3%e5%b0%91%e8%83%bd%e6%bb%a1%e8%b6%b3%e5%bd%93%e5%89%8d%e6%89%80%e9%9c%80%e7%9a%84%e7%a9%ba%e9%97%b4%e3%80%82%20if%20%28newCapacity%20-%20minCapacity%20%3c%200%29%20newCapacity%20=%20minCapacity;%20//%20mjy%ef%bc%9a%e5%a6%82%e6%9e%9cnewCapacity%e8%b6%85%e8%bf%87%e4%ba%86MAX_ARRAY_SIZE%ef%bc%8c%e8%b0%83%e7%94%a8%20hugeCapacity%28minCapacity%29%20%e6%96%b9%e6%b3%95%e6%9d%a5%e5%86%b3%e5%ae%9a%e5%ae%9e%e9%99%85%e7%9a%84%e5%ae%b9%e9%87%8f%e3%80%82%20if%20%28newCapacity%20-%20MAX_ARRAY_SIZE%20%3e%200%29%20newCapacity%20=%20hugeCapacity%28minCapacity%29;%20//%20minCapacity%20is%20usually%20close%20to%20size,%20so%20this%20is%20a%20win:%20//%20mjy%ef%bc%9a%e8%b0%83%e7%94%a8Arrays.copyOf%e6%96%b9%e6%b3%95%e5%b0%86%e7%8e%b0%e6%9c%89%e7%9a%84%e6%95%b0%e7%bb%84elementData%e5%a4%8d%e5%88%b6%e5%88%b0%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84%e6%95%b0%e7%bb%84%e4%b8%ad%ef%bc%8c%e6%96%b0%e6%95%b0%e7%bb%84%e7%9a%84%e9%95%bf%e5%ba%a6%e4%b8%ba%20newCapacity%ef%bc%8c%e5%ae%9e%e7%8e%b0%e4%ba%86%e6%95%b0%e7%bb%84%e7%9a%84%e6%89%a9%e5%ae%b9%e3%80%82%e8%bf%99%e4%b8%aa%e8%bf%87%e7%a8%8b%e4%bc%9a%e4%bf%9d%e7%95%99%e5%8e%9f%e6%95%b0%e7%bb%84%e4%b8%ad%e7%9a%84%e6%89%80%e6%9c%89%e5%85%83%e7%b4%a0%ef%bc%8c%e4%bd%86%e5%ba%95%e5%b1%82%e7%9a%84%e5%ad%98%e5%82%a8%e7%a9%ba%e9%97%b4%e5%b7%b2%e7%bb%8f%e6%89%a9%e5%b1%95%e3%80%82%20elementData%20=%20Arrays.copyOf%28elementData,%20newCapacity%29;%20%7d%20//%20mjy%ef%bc%9a%20%e5%a4%84%e7%90%86%e5%8f%af%e8%83%bd%e8%b6%85%e8%bf%87%e6%9c%80%e5%a4%a7%e6%95%b0%e7%bb%84%e5%a4%a7%e5%b0%8f%e7%9a%84%e6%83%85%e5%86%b5%20private%20static%20int%20hugeCapacity%28int%20minCapacity%29%20%7b%20//%20mjy%ef%bc%9a%20%e5%a6%82%e6%9e%9cminCapacity%e4%b8%ba%e8%b4%9f%e6%95%b0%ef%bc%8c%e6%84%8f%e5%91%b3%e7%9d%80%e5%8f%91%e7%94%9f%e4%ba%86%e5%ae%b9%e9%87%8f%e6%ba%a2%e5%87%ba%ef%bc%88%e4%be%8b%e5%a6%82%ef%bc%8c%e5%ae%b9%e9%87%8f%e8%ae%a1%e7%ae%97%e6%ba%a2%e5%87%ba%e4%ba%86Integer%e7%9a%84%e8%8c%83%e5%9b%b4%ef%bc%89%ef%bc%8c%e6%ad%a4%e6%97%b6%e6%8a%9b%e5%87%ba%20OutOfMemoryError%20if%20%28minCapacity%20%3c%200%29%20//%20overflow%20throw%20new%20OutOfMemoryError%28%29;%20//%20mjy%ef%bc%9a%e5%a6%82%e6%9e%9cminCapacity%e8%b6%85%e8%bf%87%e4%ba%86MAX_ARRAY_SIZE%ef%bc%8c%e8%bf%94%e5%9b%9eInteger.MAX_VALUE%ef%bc%8c%e5%8d%b3%e6%95%b0%e7%bb%84%e4%bc%9a%e6%89%a9%e5%b1%95%e5%88%b0%20JVM%20%e5%8f%af%e4%bb%a5%e6%94%af%e6%8c%81%e7%9a%84%e6%9c%80%e5%a4%a7%e5%80%bc%e3%80%82%e5%90%a6%e5%88%99%e5%8d%b3minCapacity%e5%b0%8f%e4%ba%8eMAX_ARRAY_SIZE%ef%bc%8c%e4%bd%86%e4%bb%8d%e7%84%b6%e8%b6%85%e5%87%ba%e4%ba%86%e5%90%88%e7%90%86%e8%8c%83%e5%9b%b4%ef%bc%8c%e5%88%99%e8%bf%94%e5%9b%9e%20MAX_ARRAY_SIZE%e3%80%82%20return%20%28minCapacity%20%3e%20MAX_ARRAY_SIZE%29%20?%20Integer.MAX_VALUE%20:%20MAX_ARRAY_SIZE;%20%7d%20/**%20*%20Returns%20the%20number%20of%20elements%20in%20this%20list.%20*%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e7%9a%84%e5%85%83%e7%b4%a0%e6%95%b0%20*%20*%20@return%20the%20number%20of%20elements%20in%20this%20list%20*/%20public%20int%20size%28%29%20%7b%20return%20size;%20%7d%20/**%20*%20Returns%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contains%20no%20elements.%20*%20mjy%ef%bc%9a%20%e5%88%a4%e6%96%ad%e6%98%af%e5%90%a6%e4%b8%ba%e7%a9%ba%20%e5%a6%82%e6%9e%9c%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e8%bf%94%e5%9b%9e%20true%20*%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contains%20no%20elements%20*/%20public%20boolean%20isEmpty%28%29%20%7b%20return%20size%20==%200;%20%7d%20/**%20*%20Returns%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contains%20the%20specified%20element.%20*%20More%20formally,%20returns%20%3ctt%3etrue%3c/tt%3e%20if%20and%20only%20if%20this%20list%20contains%20*%20at%20least%20one%20element%20%3ctt%3ee%3c/tt%3e%20such%20that%20*%20%3ctt%3e%28o==null&amp;nbsp;?&amp;nbsp;e==null&amp;nbsp;:&amp;nbsp;o.equals%28e%29%29%3c/tt%3e.%20*%20*%20@param%20o%20element%20whose%20presence%20in%20this%20list%20is%20to%20be%20tested%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contains%20the%20specified%20element%20*/%20//%20mjy%ef%bc%9a%20%e5%88%a4%e6%96%ad%e6%98%af%e5%90%a6%e5%8c%85%e5%90%ab%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%ef%bc%8c%e5%8c%85%e5%90%ab%e8%bf%94%e5%9b%9etrue%20public%20boolean%20contains%28Object%20o%29%20%7b%20//%20mjy%ef%bc%9a%20indexOf%28%29%e6%96%b9%e6%b3%95%ef%bc%9a%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%e7%9a%84%e9%a6%96%e6%ac%a1%e5%87%ba%e7%8e%b0%e7%9a%84%e7%b4%a2%e5%bc%95%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e6%ad%a4%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e4%b8%ba-1%20return%20indexOf%28o%29%20%3e=%200;%20%7d%20/**%20*%20Returns%20the%20index%20of%20the%20first%20occurrence%20of%20the%20specified%20element%20*%20in%20this%20list,%20or%20-1%20if%20this%20list%20does%20not%20contain%20the%20element.%20*%20More%20formally,%20returns%20the%20lowest%20index%20%3ctt%3ei%3c/tt%3e%20such%20that%20*%20%3ctt%3e%28o==null&amp;nbsp;?&amp;nbsp;get%28i%29==null&amp;nbsp;:&amp;nbsp;o.equals%28get%28i%29%29%29%3c/tt%3e,%20*%20or%20-1%20if%20there%20is%20no%20such%20index.%20*/%20//%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%e7%9a%84%e9%a6%96%e6%ac%a1%e5%87%ba%e7%8e%b0%e7%9a%84%e7%b4%a2%e5%bc%95%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e6%ad%a4%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e4%b8%ba-1%20public%20int%20indexOf%28Object%20o%29%20%7b%20//%20mjy%ef%bc%9a%20%e5%85%a5%e5%8f%82%e5%85%83%e7%b4%a0%e4%b8%ba%e7%a9%ba%20if%20%28o%20==%20null%29%20%7b%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20//%20mjy%ef%bc%9a%20%e5%88%a4%e6%96%ad%e6%98%af%e5%90%a6%e5%ad%98%e5%9c%a8%e7%a9%ba%e5%85%83%e7%b4%a0%20if%20%28elementData[i]%20==%20null%29%20return%20i;%20%7d%20else%20%7b%20//%20%e4%b8%8d%e4%b8%ba%e7%a9%ba%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20//%20mjy%ef%bc%9a%20equals%28%29%e6%96%b9%e6%b3%95%e6%af%94%e8%be%83%20if%20%28o.equals%28elementData[i]%29%29%20return%20i;%20%7d%20return%20-1;%20%7d%20/**%20*%20Returns%20the%20index%20of%20the%20last%20occurrence%20of%20the%20specified%20element%20*%20in%20this%20list,%20or%20-1%20if%20this%20list%20does%20not%20contain%20the%20element.%20*%20More%20formally,%20returns%20the%20highest%20index%20%3ctt%3ei%3c/tt%3e%20such%20that%20*%20%3ctt%3e%28o==null&amp;nbsp;?&amp;nbsp;get%28i%29==null&amp;nbsp;:&amp;nbsp;o.equals%28get%28i%29%29%29%3c/tt%3e,%20*%20or%20-1%20if%20there%20is%20no%20such%20index.%20*/%20//%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%e7%9a%84%e6%9c%80%e5%90%8e%e4%b8%80%e6%ac%a1%e5%87%ba%e7%8e%b0%e7%9a%84%e7%b4%a2%e5%bc%95%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e8%bf%94%e5%9b%9e-1%20public%20int%20lastIndexOf%28Object%20o%29%20%7b%20//%20%e5%80%92%e5%ba%8f%e5%be%aa%e7%8e%af%20if%20%28o%20==%20null%29%20%7b%20for%20%28int%20i%20=%20size%20-%201;%20i%20%3e=%200;%20i--%29%20if%20%28elementData[i]%20==%20null%29%20return%20i;%20%7d%20else%20%7b%20for%20%28int%20i%20=%20size%20-%201;%20i%20%3e=%200;%20i--%29%20if%20%28o.equals%28elementData[i]%29%29%20return%20i;%20%7d%20return%20-1;%20%7d%20/**%20*%20Returns%20a%20shallow%20copy%20of%20this%20%3ctt%3eArrayList%3c/tt%3e%20instance.%20%28The%20*%20elements%20themselves%20are%20not%20copied.%29%20*%20*%20@return%20a%20clone%20of%20this%20%3ctt%3eArrayList%3c/tt%3e%20instance%20*/%20//%20mjy%ef%bc%9a%20%e5%85%8b%e9%9a%86%e6%96%b9%e6%b3%95%ef%bc%8c%e8%bf%94%e5%9b%9e%e6%ad%a4ArrayList%e5%ae%9e%e4%be%8b%e7%9a%84%e6%b5%85%e6%8b%b7%20%ef%bc%88%e5%85%83%e7%b4%a0%e6%9c%ac%e8%ba%ab%e4%b8%8d%e8%a2%ab%e5%a4%8d%e5%88%b6%e3%80%82%ef%bc%89%20public%20Object%20clone%28%29%20%7b%20try%20%7b%20ArrayList%3c?%3e%20v%20=%20%28ArrayList%3c?%3e%29%20super.clone%28%29;%20//%20mjy%ef%bc%9a%20Arrays.copyOf%e5%8a%9f%e8%83%bd%e6%98%af%e5%ae%9e%e7%8e%b0%e6%95%b0%e7%bb%84%e7%9a%84%e5%a4%8d%e5%88%b6%ef%bc%8c%e8%bf%94%e5%9b%9e%e5%a4%8d%e5%88%b6%e5%90%8e%e7%9a%84%e6%95%b0%e7%bb%84%e3%80%82%e5%8f%82%e6%95%b0%e6%98%af%e8%a2%ab%e5%a4%8d%e5%88%b6%e7%9a%84%e6%95%b0%e7%bb%84%e5%92%8c%e5%a4%8d%e5%88%b6%e7%9a%84%e9%95%bf%e5%ba%a6%20v.elementData%20=%20Arrays.copyOf%28elementData,%20size%29;%20v.modCount%20=%200;%20return%20v;%20%7d%20catch%20%28CloneNotSupportedException%20e%29%20%7b%20//%20this%20shouldn%27t%20happen,%20since%20we%20are%20Cloneable%20//%20mjy%ef%bc%9a%20%e8%bf%99%e4%b8%8d%e5%ba%94%e8%af%a5%e5%8f%91%e7%94%9f%ef%bc%8c%e5%9b%a0%e4%b8%ba%e6%88%91%e4%bb%ac%e6%98%af%e5%8f%af%e4%bb%a5%e5%85%8b%e9%9a%86%e7%9a%84%20throw%20new%20InternalError%28e%29;%20%7d%20%7d%20/**%20*%20Returns%20an%20array%20containing%20all%20of%20the%20elements%20in%20this%20list%20*%20in%20proper%20sequence%20%28from%20first%20to%20last%20element%29.%20*%20mjy%ef%bc%9a%20%e4%bb%a5%e6%ad%a3%e7%a1%ae%e7%9a%84%e9%a1%ba%e5%ba%8f%ef%bc%88%e4%bb%8e%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%88%b0%e6%9c%80%e5%90%8e%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%ef%bc%89%e8%bf%94%e5%9b%9e%e4%b8%80%e4%b8%aa%e5%8c%85%e5%90%ab%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%89%80%e6%9c%89%e5%85%83%e7%b4%a0%e7%9a%84%e6%95%b0%e7%bb%84%e3%80%82%20*%20%3cp%3eThe%20returned%20array%20will%20be%20%22safe%22%20in%20that%20no%20references%20to%20it%20are%20*%20maintained%20by%20this%20list.%20%28In%20other%20words,%20this%20method%20must%20allocate%20*%20a%20new%20array%29.%20The%20caller%20is%20thus%20free%20to%20modify%20the%20returned%20array.%20*%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e7%9a%84%e6%95%b0%e7%bb%84%e5%b0%86%e6%98%af%e5%ae%89%e5%85%a8%e7%9a%84%ef%bc%8c%e5%9b%a0%e4%b8%ba%e8%af%a5%e5%88%97%e8%a1%a8%e4%b8%8d%e4%bf%9d%e7%95%99%e5%af%b9%e5%ae%83%e7%9a%84%e5%bc%95%e7%94%a8%e3%80%82%20%ef%bc%88%e6%8d%a2%e5%8f%a5%e8%af%9d%e8%af%b4%ef%bc%8c%e8%bf%99%e4%b8%aa%e6%96%b9%e6%b3%95%e5%bf%85%e9%a1%bb%e5%88%86%e9%85%8d%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84%e6%95%b0%e7%bb%84%ef%bc%89%e3%80%82%20*%20%3cp%3eThis%20method%20acts%20as%20bridge%20between%20array-based%20and%20collection-based%20*%20APIs.%20*%20mjy%ef%bc%9a%20%e5%9b%a0%e6%ad%a4%ef%bc%8c%e8%b0%83%e7%94%a8%e8%80%85%e5%8f%af%e4%bb%a5%e8%87%aa%e7%94%b1%e5%9c%b0%e4%bf%ae%e6%94%b9%e8%bf%94%e5%9b%9e%e7%9a%84%e6%95%b0%e7%bb%84%e3%80%82%20%e6%ad%a4%e6%96%b9%e6%b3%95%e5%85%85%e5%bd%93%e5%9f%ba%e4%ba%8e%e9%98%b5%e5%88%97%e5%92%8c%e5%9f%ba%e4%ba%8e%e9%9b%86%e5%90%88%e7%9a%84API%e4%b9%8b%e9%97%b4%e7%9a%84%e6%a1%a5%e6%a2%81%e3%80%82%20*%20*%20@return%20an%20array%20containing%20all%20of%20the%20elements%20in%20this%20list%20in%20*%20proper%20sequence%20*/%20public%20Object[]%20toArray%28%29%20%7b%20return%20Arrays.copyOf%28elementData,%20size%29;%20%7d%20/**%20*%20Returns%20an%20array%20containing%20all%20of%20the%20elements%20in%20this%20list%20in%20proper%20*%20sequence%20%28from%20first%20to%20last%20element%29;%20the%20runtime%20type%20of%20the%20returned%20*%20array%20is%20that%20of%20the%20specified%20array.%20If%20the%20list%20fits%20in%20the%20*%20specified%20array,%20it%20is%20returned%20therein.%20Otherwise,%20a%20new%20array%20is%20*%20allocated%20with%20the%20runtime%20type%20of%20the%20specified%20array%20and%20the%20size%20of%20*%20this%20list.%20*%20*%20%3cp%3eIf%20the%20list%20fits%20in%20the%20specified%20array%20with%20room%20to%20spare%20*%20%28i.e.,%20the%20array%20has%20more%20elements%20than%20the%20list%29,%20the%20element%20in%20*%20the%20array%20immediately%20following%20the%20end%20of%20the%20collection%20is%20set%20to%20*%20%3ctt%3enull%3c/tt%3e.%20%28This%20is%20useful%20in%20determining%20the%20length%20of%20the%20*%20list%20%3ci%3eonly%3c/i%3e%20if%20the%20caller%20knows%20that%20the%20list%20does%20not%20contain%20*%20any%20null%20elements.%29%20*%20*%20@param%20a%20the%20array%20into%20which%20the%20elements%20of%20the%20list%20are%20to%20*%20be%20stored,%20if%20it%20is%20big%20enough;%20otherwise,%20a%20new%20array%20of%20the%20*%20same%20runtime%20type%20is%20allocated%20for%20this%20purpose.%20*%20@return%20an%20array%20containing%20the%20elements%20of%20the%20list%20*%20@throws%20ArrayStoreException%20if%20the%20runtime%20type%20of%20the%20specified%20array%20*%20is%20not%20a%20supertype%20of%20the%20runtime%20type%20of%20every%20element%20in%20*%20this%20list%20*%20@throws%20NullPointerException%20if%20the%20specified%20array%20is%20null%20*/%20@SuppressWarnings%28%22unchecked%22%29%20public%20%3cT%3e%20T[]%20toArray%28T[]%20a%29%20%7b%20if%20%28a.length%20%3c%20size%29%20//%20Make%20a%20new%20array%20of%20a%27s%20runtime%20type,%20but%20my%20contents:%20return%20%28T[]%29%20Arrays.copyOf%28elementData,%20size,%20a.getClass%28%29%29;%20System.arraycopy%28elementData,%200,%20a,%200,%20size%29;%20if%20%28a.length%20%3e%20size%29%20a[size]%20=%20null;%20return%20a;%20%7d%20//%20Positional%20Access%20Operations%20@SuppressWarnings%28%22unchecked%22%29%20E%20elementData%28int%20index%29%20%7b%20return%20%28E%29%20elementData[index];%20%7d%20/**%20*%20Returns%20the%20element%20at%20the%20specified%20position%20in%20this%20list.%20*%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e4%bd%8d%e7%bd%ae%e7%9a%84%e5%85%83%e7%b4%a0%20*%20*%20@param%20index%20index%20of%20the%20element%20to%20return%20*%20@return%20the%20element%20at%20the%20specified%20position%20in%20this%20list%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20E%20get%28int%20index%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%a0%a1%e9%aa%8c%e6%95%b0%e7%bb%84%e4%b8%8b%e6%a0%87%e8%b6%8a%e7%95%8c%20rangeCheck%28index%29;%20return%20elementData%28index%29;%20%7d%20/**%20*%20Replaces%20the%20element%20at%20the%20specified%20position%20in%20this%20list%20with%20*%20the%20specified%20element.%20*%20mjy%ef%bc%9a%20%e7%94%a8%e6%8c%87%e5%ae%9a%e7%9a%84%e5%85%83%e7%b4%a0%e6%9b%bf%e6%8d%a2%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e4%bd%8d%e7%bd%ae%e7%9a%84%e5%85%83%e7%b4%a0%20*%20*%20@param%20index%20index%20of%20the%20element%20to%20replace%20*%20@param%20element%20element%20to%20be%20stored%20at%20the%20specified%20position%20*%20@return%20the%20element%20previously%20at%20the%20specified%20position%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20E%20set%28int%20index,%20E%20element%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%a0%a1%e9%aa%8c%e6%95%b0%e7%bb%84%e4%b8%8b%e6%a0%87%e8%b6%8a%e7%95%8c%20rangeCheck%28index%29;%20//%20mjy%ef%bc%9a%20%e6%97%a7%e7%9a%84%e5%80%bc%20E%20oldValue%20=%20elementData%28index%29;%20//%20mjy%ef%bc%9a%20%e6%96%b0%e7%9a%84%e8%b5%8b%e5%80%bc%20elementData[index]%20=%20element;%20//%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%97%a7%e7%9a%84%e5%80%bc%20return%20oldValue;%20%7d%20/**%20*%20Appends%20the%20specified%20element%20to%20the%20end%20of%20this%20list.%20*%20mjy%ef%bc%9a%20%e6%b7%bb%e5%8a%a0%e5%85%83%e7%b4%a0%ef%bc%8c%e5%b0%86%e6%8c%87%e5%ae%9a%e7%9a%84%e5%85%83%e7%b4%a0%e8%bf%bd%e5%8a%a0%e5%88%b0%e6%ad%a4%e5%88%97%e8%a1%a8%e7%9a%84%e6%9c%ab%e5%b0%be%20*%20*%20@param%20e%20element%20to%20be%20appended%20to%20this%20list%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20%28as%20specified%20by%20%7b@link%20Collection#add%7d%29%20*/%20public%20boolean%20add%28E%20e%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%89%a9%e5%ae%b9%e6%a0%a1%e9%aa%8c%20ensureCapacityInternal%28size%20+%201%29;%20//%20Increments%20modCount!!%20//%20mjy%ef%bc%9a%20%e6%b7%bb%e5%8a%a0%e5%85%83%e7%b4%a0%20elementData[size++]%20=%20e;%20return%20true;%20%7d%20/**%20*%20Inserts%20the%20specified%20element%20at%20the%20specified%20position%20in%20this%20*%20list.%20Shifts%20the%20element%20currently%20at%20that%20position%20%28if%20any%29%20and%20*%20any%20subsequent%20elements%20to%20the%20right%20%28adds%20one%20to%20their%20indices%29.%20*%20mjy%ef%bc%9a%20%e6%b7%bb%e5%8a%a0%e5%85%83%e7%b4%a0%ef%bc%8c%e5%9c%a8%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e7%9a%84%e6%8c%87%e5%ae%9a%e4%bd%8d%e7%bd%ae%e6%8f%92%e5%85%a5%e6%8c%87%e5%ae%9a%e7%9a%84%e5%85%83%e7%b4%a0%20*%20mjy%ef%bc%9a%e5%85%88%e8%b0%83%e7%94%a8%20rangeCheckForAdd%20%e5%af%b9index%e8%bf%9b%e8%a1%8c%e7%95%8c%e9%99%90%e6%a3%80%e6%9f%a5%ef%bc%9b%e7%84%b6%e5%90%8e%e8%b0%83%e7%94%a8%20ensureCapacityInternal%20%e6%96%b9%e6%b3%95%e4%bf%9d%e8%af%81capacity%e8%b6%b3%e5%a4%9f%e5%a4%a7%ef%bc%9b%e5%86%8d%e5%b0%86%e4%bb%8eindex%e5%bc%80%e5%a7%8b%e4%b9%8b%e5%90%8e%e7%9a%84%e6%89%80%e6%9c%89%e6%88%90%e5%91%98%e5%90%8e%e7%a7%bb%e4%b8%80%e4%b8%aa%e4%bd%8d%e7%bd%ae%ef%bc%9b%e5%b0%86element%e6%8f%92%e5%85%a5index%e4%bd%8d%e7%bd%ae%ef%bc%9b%e6%9c%80%e5%90%8esize%e5%8a%a01%e3%80%82%20*%20*%20@param%20index%20index%20at%20which%20the%20specified%20element%20is%20to%20be%20inserted%20*%20@param%20element%20element%20to%20be%20inserted%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20void%20add%28int%20index,%20E%20element%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%a0%a1%e9%aa%8c%20rangeCheckForAdd%28index%29;%20ensureCapacityInternal%28size%20+%201%29;%20//%20Increments%20modCount!!%20//%20mjy%ef%bc%9a%20System.arraycopy%28%29%e8%bf%99%e4%b8%aa%e5%ae%9e%e7%8e%b0%e6%95%b0%e7%bb%84%e4%b9%8b%e9%97%b4%e5%a4%8d%e5%88%b6%e7%9a%84%e6%96%b9%e6%b3%95%e4%b8%80%e5%ae%9a%e8%a6%81%e7%9c%8b%e4%b8%80%e4%b8%8b%ef%bc%8c%e4%b8%8b%e9%9d%a2%e5%b0%b1%e7%94%a8%e5%88%b0%e4%ba%86arraycopy%28%29%e6%96%b9%e6%b3%95%e5%ae%9e%e7%8e%b0%e6%95%b0%e7%bb%84%e8%87%aa%e5%b7%b1%e5%a4%8d%e5%88%b6%e8%87%aa%e5%b7%b1%20System.arraycopy%28elementData,%20index,%20elementData,%20index%20+%201,%20size%20-%20index%29;%20elementData[index]%20=%20element;%20size++;%20%7d%20/**%20*%20Removes%20the%20element%20at%20the%20specified%20position%20in%20this%20list.%20*%20Shifts%20any%20subsequent%20elements%20to%20the%20left%20%28subtracts%20one%20from%20their%20*%20indices%29.%20*%20mjy%ef%bc%9a%e5%88%a0%e9%99%a4%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%a0%e9%99%a4%e8%af%a5%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e4%bd%8d%e7%bd%ae%e7%9a%84%e5%85%83%e7%b4%a0%e3%80%82%20%e5%b0%86%e4%bb%bb%e4%bd%95%e5%90%8e%e7%bb%ad%e5%85%83%e7%b4%a0%e7%a7%bb%e5%8a%a8%e5%88%b0%e5%b7%a6%e4%be%a7%ef%bc%88%e4%bb%8e%e5%85%b6%e7%b4%a2%e5%bc%95%e4%b8%ad%e5%87%8f%e5%8e%bb%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%ef%bc%89%20*%20*%20@param%20index%20the%20index%20of%20the%20element%20to%20be%20removed%20*%20@return%20the%20element%20that%20was%20removed%20from%20the%20list%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20E%20remove%28int%20index%29%20%7b%20rangeCheck%28index%29;%20modCount++;%20E%20oldValue%20=%20elementData%28index%29;%20int%20numMoved%20=%20size%20-%20index%20-%201;%20if%20%28numMoved%20%3e%200%29%20System.arraycopy%28elementData,%20index%20+%201,%20elementData,%20index,%20numMoved%29;%20elementData[--size]%20=%20null;%20//%20clear%20to%20let%20GC%20do%20its%20work%20return%20oldValue;%20%7d%20/**%20*%20Removes%20the%20first%20occurrence%20of%20the%20specified%20element%20from%20this%20list,%20*%20if%20it%20is%20present.%20If%20the%20list%20does%20not%20contain%20the%20element,%20it%20is%20*%20unchanged.%20More%20formally,%20removes%20the%20element%20with%20the%20lowest%20index%20*%20%3ctt%3ei%3c/tt%3e%20such%20that%20*%20%3ctt%3e%28o==null&amp;nbsp;?&amp;nbsp;get%28i%29==null&amp;nbsp;:&amp;nbsp;o.equals%28get%28i%29%29%29%3c/tt%3e%20*%20%28if%20such%20an%20element%20exists%29.%20Returns%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20*%20contained%20the%20specified%20element%20%28or%20equivalently,%20if%20this%20list%20*%20changed%20as%20a%20result%20of%20the%20call%29.%20*%20mjy%ef%bc%9a%20%e4%bb%8e%e5%88%97%e8%a1%a8%e4%b8%ad%e5%88%a0%e9%99%a4%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%e7%9a%84%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%87%ba%e7%8e%b0%ef%bc%88%e5%a6%82%e6%9e%9c%e5%ad%98%e5%9c%a8%ef%bc%89%e3%80%82%20%e5%a6%82%e6%9e%9c%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e8%af%a5%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e5%ae%83%e4%b8%8d%e4%bc%9a%e6%9b%b4%e6%94%b9%e3%80%82%20*%20*%20@param%20o%20element%20to%20be%20removed%20from%20this%20list,%20if%20present%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contained%20the%20specified%20element%20*/%20public%20boolean%20remove%28Object%20o%29%20%7b%20if%20%28o%20==%20null%29%20%7b%20for%20%28int%20index%20=%200;%20index%20%3c%20size;%20index++%29%20if%20%28elementData[index]%20==%20null%29%20%7b%20fastRemove%28index%29;%20return%20true;%20%7d%20%7d%20else%20%7b%20for%20%28int%20index%20=%200;%20index%20%3c%20size;%20index++%29%20if%20%28o.equals%28elementData[index]%29%29%20%7b%20fastRemove%28index%29;%20return%20true;%20%7d%20%7d%20return%20false;%20%7d%20/*%20*%20Private%20remove%20method%20that%20skimjy%20bounds%20checking%20and%20does%20not%20*%20return%20the%20value%20removed.%20*/%20private%20void%20fastRemove%28int%20index%29%20%7b%20modCount++;%20int%20numMoved%20=%20size%20-%20index%20-%201;%20if%20%28numMoved%20%3e%200%29%20System.arraycopy%28elementData,%20index%20+%201,%20elementData,%20index,%20numMoved%29;%20elementData[--size]%20=%20null;%20//%20clear%20to%20let%20GC%20do%20its%20work%20%7d%20/**%20*%20Removes%20all%20of%20the%20elements%20from%20this%20list.%20The%20list%20will%20*%20be%20empty%20after%20this%20call%20returns.%20*%20mjy%ef%bc%9a%20%e4%bb%8e%e5%88%97%e8%a1%a8%e4%b8%ad%e6%b8%85%e7%a9%ba%ef%bc%88%e5%88%a0%e9%99%a4%ef%bc%89%e6%89%80%e6%9c%89%e5%85%83%e7%b4%a0%e3%80%82%20*/%20public%20void%20clear%28%29%20%7b%20modCount++;%20//%20clear%20to%20let%20GC%20do%20its%20work%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20elementData[i]%20=%20null;%20size%20=%200;%20%7d%20/**%20*%20Appends%20all%20of%20the%20elements%20in%20the%20specified%20collection%20to%20the%20end%20of%20*%20this%20list,%20in%20the%20order%20that%20they%20are%20returned%20by%20the%20*%20specified%20collection%27s%20Iterator.%20The%20behavior%20of%20this%20operation%20is%20*%20undefined%20if%20the%20specified%20collection%20is%20modified%20while%20the%20operation%20*%20is%20in%20progress.%20%28This%20implies%20that%20the%20behavior%20of%20this%20call%20is%20*%20undefined%20if%20the%20specified%20collection%20is%20this%20list,%20and%20this%20*%20list%20is%20nonempty.%29%20*%20*%20@param%20c%20collection%20containing%20elements%20to%20be%20added%20to%20this%20list%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20changed%20as%20a%20result%20of%20the%20call%20*%20@throws%20NullPointerException%20if%20the%20specified%20collection%20is%20null%20*/%20public%20boolean%20addAll%28Collection%3c?%20extends%20E%3e%20c%29%20%7b%20Object[]%20a%20=%20c.toArray%28%29;%20int%20numNew%20=%20a.length;%20ensureCapacityInternal%28size%20+%20numNew%29;%20//%20Increments%20modCount%20System.arraycopy%28a,%200,%20elementData,%20size,%20numNew%29;%20size%20+=%20numNew;%20return%20numNew%20!=%200;%20%7d%20/**%20*%20Inserts%20all%20of%20the%20elements%20in%20the%20specified%20collection%20into%20this%20*%20list,%20starting%20at%20the%20specified%20position.%20Shifts%20the%20element%20*%20currently%20at%20that%20position%20%28if%20any%29%20and%20any%20subsequent%20elements%20to%20*%20the%20right%20%28increases%20their%20indices%29.%20The%20new%20elements%20will%20appear%20*%20in%20the%20list%20in%20the%20order%20that%20they%20are%20returned%20by%20the%20*%20specified%20collection%27s%20iterator.%20*%20*%20@param%20index%20index%20at%20which%20to%20insert%20the%20first%20element%20from%20the%20*%20specified%20collection%20*%20@param%20c%20collection%20containing%20elements%20to%20be%20added%20to%20this%20list%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20changed%20as%20a%20result%20of%20the%20call%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*%20@throws%20NullPointerException%20if%20the%20specified%20collection%20is%20null%20*/%20public%20boolean%20addAll%28int%20index,%20Collection%3c?%20extends%20E%3e%20c%29%20%7b%20rangeCheckForAdd%28index%29;%20Object[]%20a%20=%20c.toArray%28%29;%20int%20numNew%20=%20a.length;%20ensureCapacityInternal%28size%20+%20numNew%29;%20//%20Increments%20modCount%20int%20numMoved%20=%20size%20-%20index;%20if%20%28numMoved%20%3e%200%29%20System.arraycopy%28elementData,%20index,%20elementData,%20index%20+%20numNew,%20numMoved%29;%20System.arraycopy%28a,%200,%20elementData,%20index,%20numNew%29;%20size%20+=%20numNew;%20return%20numNew%20!=%200;%20%7d%20/**%20*%20Removes%20from%20this%20list%20all%20of%20the%20elements%20whose%20index%20is%20between%20*%20%7b@code%20fromIndex%7d,%20inclusive,%20and%20%7b@code%20toIndex%7d,%20exclusive.%20*%20Shifts%20any%20succeeding%20elements%20to%20the%20left%20%28reduces%20their%20index%29.%20*%20This%20call%20shortens%20the%20list%20by%20%7b@code%20%28toIndex%20-%20fromIndex%29%7d%20elements.%20*%20%28If%20%7b@code%20toIndex==fromIndex%7d,%20this%20operation%20has%20no%20effect.%29%20*%20*%20@throws%20IndexOutOfBoundsException%20if%20%7b@code%20fromIndex%7d%20or%20*%20%7b@code%20toIndex%7d%20is%20out%20of%20range%20*%20%28%7b@code%20fromIndex%20%3c%200%20%7c%7c%20*%20fromIndex%20%3e=%20size%28%29%20%7c%7c%20*%20toIndex%20%3e%20size%28%29%20%7c%7c%20*%20toIndex%20%3c%20fromIndex%7d%29%20*/%20protected%20void%20removeRange%28int%20fromIndex,%20int%20toIndex%29%20%7b%20modCount++;%20int%20numMoved%20=%20size%20-%20toIndex;%20System.arraycopy%28elementData,%20toIndex,%20elementData,%20fromIndex,%20numMoved%29;%20//%20clear%20to%20let%20GC%20do%20its%20work%20int%20newSize%20=%20size%20-%20%28toIndex%20-%20fromIndex%29;%20for%20%28int%20i%20=%20newSize;%20i%20%3c%20size;%20i++%29%20%7b%20elementData[i]%20=%20null;%20%7d%20size%20=%20newSize;%20%7d%20/**%20*%20Checks%20if%20the%20given%20index%20is%20in%20range.%20If%20not,%20throws%20an%20appropriate%20*%20runtime%20exception.%20This%20method%20does%20*not*%20check%20if%20the%20index%20is%20*%20negative:%20It%20is%20always%20used%20immediately%20prior%20to%20an%20array%20access,%20*%20which%20throws%20an%20ArrayIndexOutOfBoundsException%20if%20index%20is%20negative.%20*/%20private%20void%20rangeCheck%28int%20index%29%20%7b%20if%20%28index%20%3e=%20size%29%20throw%20new%20IndexOutOfBoundsException%28outOfBoundsMsg%28index%29%29;%20%7d%20/**%20*%20A%20version%20of%20rangeCheck%20used%20by%20add%20and%20addAll.%20*/%20private%20void%20rangeCheckForAdd%28int%20index%29%20%7b%20if%20%28index%20%3e%20size%20%7c%7c%20index%20%3c%200%29%20throw%20new%20IndexOutOfBoundsException%28outOfBoundsMsg%28index%29%29;%20%7d%20/**%20*%20Constructs%20an%20IndexOutOfBoundsException%20detail%20message.%20*%20Of%20the%20many%20possible%20refactorings%20of%20the%20error%20handling%20code,%20*%20this%20%22outlining%22%20performs%20best%20with%20both%20server%20and%20client%20VMs.%20*/%20private%20String%20outOfBoundsMsg%28int%20index%29%20%7b%20return%20%22Index:%20%22%20+%20index%20+%20%22,%20Size:%20%22%20+%20size;%20%7d%20/**%20*%20Removes%20from%20this%20list%20all%20of%20its%20elements%20that%20are%20contained%20in%20the%20*%20specified%20collection.%20*%20*%20@param%20c%20collection%20containing%20elements%20to%20be%20removed%20from%20this%20list%20*%20@return%20%7b@code%20true%7d%20if%20this%20list%20changed%20as%20a%20result%20of%20the%20call%20*%20@throws%20ClassCastException%20if%20the%20class%20of%20an%20element%20of%20this%20list%20*%20is%20incompatible%20with%20the%20specified%20collection%20*%20%28%3ca%20href=%22Collection.html#optional-restrictions%22%3eoptional%3c/a%3e%29%20*%20@throws%20NullPointerException%20if%20this%20list%20contains%20a%20null%20element%20and%20the%20*%20specified%20collection%20does%20not%20permit%20null%20elements%20*%20%28%3ca%20href=%22Collection.html#optional-restrictions%22%3eoptional%3c/a%3e%29,%20*%20or%20if%20the%20specified%20collection%20is%20null%20*%20@see%20Collection#contains%28Object%29%20*/%20public%20boolean%20removeAll%28Collection%3c?%3e%20c%29%20%7b%20Objects.requireNonNull%28c%29;%20return%20batchRemove%28c,%20false%29;%20%7d%20/**%20*%20Retains%20only%20the%20elements%20in%20this%20list%20that%20are%20contained%20in%20the%20*%20specified%20collection.%20In%20other%20words,%20removes%20from%20this%20list%20all%20*%20of%20its%20elements%20that%20are%20not%20contained%20in%20the%20specified%20collection.%20*%20*%20@param%20c%20collection%20containing%20elements%20to%20be%20retained%20in%20this%20list%20*%20@return%20%7b@code%20true%7d%20if%20this%20list%20changed%20as%20a%20result%20of%20the%20call%20*%20@throws%20ClassCastException%20if%20the%20class%20of%20an%20element%20of%20this%20list%20*%20is%20incompatible%20with%20the%20specified%20collection%20*%20%28%3ca%20href=%22Collection.html#optional-restrictions%22%3eoptional%3c/a%3e%29%20*%20@throws%20NullPointerException%20if%20this%20list%20contains%20a%20null%20element%20and%20the%20*%20specified%20collection%20does%20not%20permit%20null%20elements%20*%20%28%3ca%20href=%22Collection.html#optional-restrictions%22%3eoptional%3c/a%3e%29,%20*%20or%20if%20the%20specified%20collection%20is%20null%20*%20@see%20Collection#contains%28Object%29%20*/%20public%20boolean%20retainAll%28Collection%3c?%3e%20c%29%20%7b%20Objects.requireNonNull%28c%29;%20return%20batchRemove%28c,%20true%29;%20%7d%20private%20boolean%20batchRemove%28Collection%3c?%3e%20c,%20boolean%20complement%29%20%7b%20final%20Object[]%20elementData%20=%20this.elementData;%20int%20r%20=%200,%20w%20=%200;%20boolean%20modified%20=%20false;%20try%20%7b%20for%20%28;%20r%20%3c%20size;%20r++%29%20if%20%28c.contains%28elementData[r]%29%20==%20complement%29%20elementData[w++]%20=%20elementData[r];%20%7d%20finally%20%7b%20//%20Preserve%20behavioral%20compatibility%20with%20AbstractCollection,%20//%20even%20if%20c.contains%28%29%20throws.%20if%20%28r%20!=%20size%29%20%7b%20System.arraycopy%28elementData,%20r,%20elementData,%20w,%20size%20-%20r%29;%20w%20+=%20size%20-%20r;%20%7d%20if%20%28w%20!=%20size%29%20%7b%20//%20clear%20to%20let%20GC%20do%20its%20work%20for%20%28int%20i%20=%20w;%20i%20%3c%20size;%20i++%29%20elementData[i]%20=%20null;%20modCount%20+=%20size%20-%20w;%20size%20=%20w;%20modified%20=%20true;%20%7d%20%7d%20return%20modified;%20%7d%20/**%20*%20Save%20the%20state%20of%20the%20%3ctt%3eArrayList%3c/tt%3e%20instance%20to%20a%20stream%20%28that%20*%20is,%20serialize%20it%29.%20*%20*%20@serialData%20The%20length%20of%20the%20array%20backing%20the%20%3ctt%3eArrayList%3c/tt%3e%20*%20instance%20is%20emitted%20%28int%29,%20followed%20by%20all%20of%20its%20elements%20*%20%28each%20an%20%3ctt%3eObject%3c/tt%3e%29%20in%20the%20proper%20order.%20*/%20private%20void%20writeObject%28java.io.ObjectOutputStream%20s%29%20throws%20java.io.IOException%20%7b%20//%20Write%20out%20element%20count,%20and%20any%20hidden%20stuff%20int%20expectedModCount%20=%20modCount;%20s.defaultWriteObject%28%29;%20//%20Write%20out%20size%20as%20capacity%20for%20behavioural%20compatibility%20with%20clone%28%29%20s.writeInt%28size%29;%20//%20Write%20out%20all%20elements%20in%20the%20proper%20order.%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20%7b%20s.writeObject%28elementData[i]%29;%20%7d%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20/**%20*%20Reconstitute%20the%20%3ctt%3eArrayList%3c/tt%3e%20instance%20from%20a%20stream%20%28that%20is,%20*%20deserialize%20it%29.%20*/%20private%20void%20readObject%28java.io.ObjectInputStream%20s%29%20throws%20java.io.IOException,%20ClassNotFoundException%20%7b%20elementData%20=%20EMPTY_ELEMENTDATA;%20//%20Read%20in%20size,%20and%20any%20hidden%20stuff%20s.defaultReadObject%28%29;%20//%20Read%20in%20capacity%20s.readInt%28%29;%20//%20ignored%20if%20%28size%20%3e%200%29%20%7b%20//%20be%20like%20clone%28%29,%20allocate%20array%20based%20upon%20size%20not%20capacity%20ensureCapacityInternal%28size%29;%20Object[]%20a%20=%20elementData;%20//%20Read%20in%20all%20elements%20in%20the%20proper%20order.%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20%7b%20a[i]%20=%20s.readObject%28%29;%20%7d%20%7d%20%7d%20/**%20*%20Returns%20a%20list%20iterator%20over%20the%20elements%20in%20this%20list%20%28in%20proper%20*%20sequence%29,%20starting%20at%20the%20specified%20position%20in%20the%20list.%20*%20The%20specified%20index%20indicates%20the%20first%20element%20that%20would%20be%20*%20returned%20by%20an%20initial%20call%20to%20%7b@link%20ListIterator#next%20next%7d.%20*%20An%20initial%20call%20to%20%7b@link%20ListIterator#previous%20previous%7d%20would%20*%20return%20the%20element%20with%20the%20specified%20index%20minus%20one.%20*%20*%20%3cp%3eThe%20returned%20list%20iterator%20is%20%3ca%20href=%22#fail-fast%22%3e%3ci%3efail-fast%3c/i%3e%3c/a%3e.%20*%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20ListIterator%3cE%3e%20listIterator%28int%20index%29%20%7b%20if%20%28index%20%3c%200%20%7c%7c%20index%20%3e%20size%29%20throw%20new%20IndexOutOfBoundsException%28%22Index:%20%22%20+%20index%29;%20return%20new%20ListItr%28index%29;%20%7d%20/**%20*%20Returns%20a%20list%20iterator%20over%20the%20elements%20in%20this%20list%20%28in%20proper%20*%20sequence%29.%20*%20*%20%3cp%3eThe%20returned%20list%20iterator%20is%20%3ca%20href=%22#fail-fast%22%3e%3ci%3efail-fast%3c/i%3e%3c/a%3e.%20*%20*%20@see%20#listIterator%28int%29%20*/%20public%20ListIterator%3cE%3e%20listIterator%28%29%20%7b%20return%20new%20ListItr%280%29;%20%7d%20/**%20*%20Returns%20an%20iterator%20over%20the%20elements%20in%20this%20list%20in%20proper%20sequence.%20*%20*%20%3cp%3eThe%20returned%20iterator%20is%20%3ca%20href=%22#fail-fast%22%3e%3ci%3efail-fast%3c/i%3e%3c/a%3e.%20*%20*%20@return%20an%20iterator%20over%20the%20elements%20in%20this%20list%20in%20proper%20sequence%20*/%20public%20Iterator%3cE%3e%20iterator%28%29%20%7b%20return%20new%20Itr%28%29;%20%7d%20/**%20*%20An%20optimized%20version%20of%20AbstractList.Itr%20*/%20private%20class%20Itr%20implements%20Iterator%3cE%3e%20%7b%20int%20cursor;%20//%20index%20of%20next%20element%20to%20return%20int%20lastRet%20=%20-1;%20//%20index%20of%20last%20element%20returned;%20-1%20if%20no%20such%20int%20expectedModCount%20=%20modCount;%20public%20boolean%20hasNext%28%29%20%7b%20return%20cursor%20!=%20size;%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20E%20next%28%29%20%7b%20checkForComodification%28%29;%20int%20i%20=%20cursor;%20if%20%28i%20%3e=%20size%29%20throw%20new%20NoSuchElementException%28%29;%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28i%20%3e=%20elementData.length%29%20throw%20new%20ConcurrentModificationException%28%29;%20cursor%20=%20i%20+%201;%20return%20%28E%29%20elementData[lastRet%20=%20i];%20%7d%20public%20void%20remove%28%29%20%7b%20if%20%28lastRet%20%3c%200%29%20throw%20new%20IllegalStateException%28%29;%20checkForComodification%28%29;%20try%20%7b%20ArrayList.this.remove%28lastRet%29;%20cursor%20=%20lastRet;%20lastRet%20=%20-1;%20expectedModCount%20=%20modCount;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20@Override%20@SuppressWarnings%28%22unchecked%22%29%20public%20void%20forEachRemaining%28Consumer%3c?%20super%20E%3e%20consumer%29%20%7b%20Objects.requireNonNull%28consumer%29;%20final%20int%20size%20=%20ArrayList.this.size;%20int%20i%20=%20cursor;%20if%20%28i%20%3e=%20size%29%20%7b%20return;%20%7d%20final%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28i%20%3e=%20elementData.length%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20while%20%28i%20!=%20size%20&&%20modCount%20==%20expectedModCount%29%20%7b%20consumer.accept%28%28E%29%20elementData[i++]%29;%20%7d%20//%20update%20once%20at%20end%20of%20iteration%20to%20reduce%20heap%20write%20traffic%20cursor%20=%20i;%20lastRet%20=%20i%20-%201;%20checkForComodification%28%29;%20%7d%20final%20void%20checkForComodification%28%29%20%7b%20if%20%28modCount%20!=%20expectedModCount%29%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20/**%20*%20An%20optimized%20version%20of%20AbstractList.ListItr%20*/%20private%20class%20ListItr%20extends%20Itr%20implements%20ListIterator%3cE%3e%20%7b%20ListItr%28int%20index%29%20%7b%20super%28%29;%20cursor%20=%20index;%20%7d%20public%20boolean%20hasPrevious%28%29%20%7b%20return%20cursor%20!=%200;%20%7d%20public%20int%20nextIndex%28%29%20%7b%20return%20cursor;%20%7d%20public%20int%20previousIndex%28%29%20%7b%20return%20cursor%20-%201;%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20E%20previous%28%29%20%7b%20checkForComodification%28%29;%20int%20i%20=%20cursor%20-%201;%20if%20%28i%20%3c%200%29%20throw%20new%20NoSuchElementException%28%29;%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28i%20%3e=%20elementData.length%29%20throw%20new%20ConcurrentModificationException%28%29;%20cursor%20=%20i;%20return%20%28E%29%20elementData[lastRet%20=%20i];%20%7d%20public%20void%20set%28E%20e%29%20%7b%20if%20%28lastRet%20%3c%200%29%20throw%20new%20IllegalStateException%28%29;%20checkForComodification%28%29;%20try%20%7b%20ArrayList.this.set%28lastRet,%20e%29;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20public%20void%20add%28E%20e%29%20%7b%20checkForComodification%28%29;%20try%20%7b%20int%20i%20=%20cursor;%20ArrayList.this.add%28i,%20e%29;%20cursor%20=%20i%20+%201;%20lastRet%20=%20-1;%20expectedModCount%20=%20modCount;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20%7d%20/**%20*%20Returns%20a%20view%20of%20the%20portion%20of%20this%20list%20between%20the%20specified%20*%20%7b@code%20fromIndex%7d,%20inclusive,%20and%20%7b@code%20toIndex%7d,%20exclusive.%20%28If%20*%20%7b@code%20fromIndex%7d%20and%20%7b@code%20toIndex%7d%20are%20equal,%20the%20returned%20list%20is%20*%20empty.%29%20The%20returned%20list%20is%20backed%20by%20this%20list,%20so%20non-structural%20*%20changes%20in%20the%20returned%20list%20are%20reflected%20in%20this%20list,%20and%20vice-versa.%20*%20The%20returned%20list%20supports%20all%20of%20the%20optional%20list%20operations.%20*%20*%20%3cp%3eThis%20method%20eliminates%20the%20need%20for%20explicit%20range%20operations%20%28of%20*%20the%20sort%20that%20commonly%20exist%20for%20arrays%29.%20Any%20operation%20that%20expects%20*%20a%20list%20can%20be%20used%20as%20a%20range%20operation%20by%20passing%20a%20subList%20view%20*%20instead%20of%20a%20whole%20list.%20For%20example,%20the%20following%20idiom%20*%20removes%20a%20range%20of%20elements%20from%20a%20list:%20*%20%3cpre%3e%20*%20list.subList%28from,%20to%29.clear%28%29;%20*%20%3c/pre%3e%20*%20Similar%20idioms%20may%20be%20constructed%20for%20%7b@link%20#indexOf%28Object%29%7d%20and%20*%20%7b@link%20#lastIndexOf%28Object%29%7d,%20and%20all%20of%20the%20algorithms%20in%20the%20*%20%7b@link%20Collections%7d%20class%20can%20be%20applied%20to%20a%20subList.%20*%20*%20%3cp%3eThe%20semantics%20of%20the%20list%20returned%20by%20this%20method%20become%20undefined%20if%20*%20the%20backing%20list%20%28i.e.,%20this%20list%29%20is%20%3ci%3estructurally%20modified%3c/i%3e%20in%20*%20any%20way%20other%20than%20via%20the%20returned%20list.%20%28Structural%20modifications%20are%20*%20those%20that%20change%20the%20size%20of%20this%20list,%20or%20otherwise%20perturb%20it%20in%20such%20*%20a%20fashion%20that%20iterations%20in%20progress%20may%20yield%20incorrect%20results.%29%20*%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*%20@throws%20IllegalArgumentException%20%7b@inheritDoc%7d%20*/%20public%20List%3cE%3e%20subList%28int%20fromIndex,%20int%20toIndex%29%20%7b%20subListRangeCheck%28fromIndex,%20toIndex,%20size%29;%20return%20new%20SubList%28this,%200,%20fromIndex,%20toIndex%29;%20%7d%20static%20void%20subListRangeCheck%28int%20fromIndex,%20int%20toIndex,%20int%20size%29%20%7b%20if%20%28fromIndex%20%3c%200%29%20throw%20new%20IndexOutOfBoundsException%28%22fromIndex%20=%20%22%20+%20fromIndex%29;%20if%20%28toIndex%20%3e%20size%29%20throw%20new%20IndexOutOfBoundsException%28%22toIndex%20=%20%22%20+%20toIndex%29;%20if%20%28fromIndex%20%3e%20toIndex%29%20throw%20new%20IllegalArgumentException%28%22fromIndex%28%22%20+%20fromIndex%20+%20%22%29%20%3e%20toIndex%28%22%20+%20toIndex%20+%20%22%29%22%29;%20%7d%20private%20class%20SubList%20extends%20AbstractList%3cE%3e%20implements%20RandomAccess%20%7b%20private%20final%20AbstractList%3cE%3e%20parent;%20private%20final%20int%20parentOffset;%20private%20final%20int%20offset;%20int%20size;%20SubList%28AbstractList%3cE%3e%20parent,%20int%20offset,%20int%20fromIndex,%20int%20toIndex%29%20%7b%20this.parent%20=%20parent;%20this.parentOffset%20=%20fromIndex;%20this.offset%20=%20offset%20+%20fromIndex;%20this.size%20=%20toIndex%20-%20fromIndex;%20this.modCount%20=%20ArrayList.this.modCount;%20%7d%20public%20E%20set%28int%20index,%20E%20e%29%20%7b%20rangeCheck%28index%29;%20checkForComodification%28%29;%20E%20oldValue%20=%20ArrayList.this.elementData%28offset%20+%20index%29;%20ArrayList.this.elementData[offset%20+%20index]%20=%20e;%20return%20oldValue;%20%7d%20public%20E%20get%28int%20index%29%20%7b%20rangeCheck%28index%29;%20checkForComodification%28%29;%20return%20ArrayList.this.elementData%28offset%20+%20index%29;%20%7d%20public%20int%20size%28%29%20%7b%20checkForComodification%28%29;%20return%20this.size;%20%7d%20public%20void%20add%28int%20index,%20E%20e%29%20%7b%20rangeCheckForAdd%28index%29;%20checkForComodification%28%29;%20parent.add%28parentOffset%20+%20index,%20e%29;%20this.modCount%20=%20parent.modCount;%20this.size++;%20%7d%20public%20E%20remove%28int%20index%29%20%7b%20rangeCheck%28index%29;%20checkForComodification%28%29;%20E%20result%20=%20parent.remove%28parentOffset%20+%20index%29;%20this.modCount%20=%20parent.modCount;%20this.size--;%20return%20result;%20%7d%20protected%20void%20removeRange%28int%20fromIndex,%20int%20toIndex%29%20%7b%20checkForComodification%28%29;%20parent.removeRange%28parentOffset%20+%20fromIndex,%20parentOffset%20+%20toIndex%29;%20this.modCount%20=%20parent.modCount;%20this.size%20-=%20toIndex%20-%20fromIndex;%20%7d%20public%20boolean%20addAll%28Collection%3c?%20extends%20E%3e%20c%29%20%7b%20return%20addAll%28this.size,%20c%29;%20%7d%20public%20boolean%20addAll%28int%20index,%20Collection%3c?%20extends%20E%3e%20c%29%20%7b%20rangeCheckForAdd%28index%29;%20int%20cSize%20=%20c.size%28%29;%20if%20%28cSize%20==%200%29%20return%20false;%20checkForComodification%28%29;%20parent.addAll%28parentOffset%20+%20index,%20c%29;%20this.modCount%20=%20parent.modCount;%20this.size%20+=%20cSize;%20return%20true;%20%7d%20public%20Iterator%3cE%3e%20iterator%28%29%20%7b%20return%20listIterator%28%29;%20%7d%20public%20ListIterator%3cE%3e%20listIterator%28final%20int%20index%29%20%7b%20checkForComodification%28%29;%20rangeCheckForAdd%28index%29;%20final%20int%20offset%20=%20this.offset;%20return%20new%20ListIterator%3cE%3e%28%29%20%7b%20int%20cursor%20=%20index;%20int%20lastRet%20=%20-1;%20int%20expectedModCount%20=%20ArrayList.this.modCount;%20public%20boolean%20hasNext%28%29%20%7b%20return%20cursor%20!=%20SubList.this.size;%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20E%20next%28%29%20%7b%20checkForComodification%28%29;%20int%20i%20=%20cursor;%20if%20%28i%20%3e=%20SubList.this.size%29%20throw%20new%20NoSuchElementException%28%29;%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28offset%20+%20i%20%3e=%20elementData.length%29%20throw%20new%20ConcurrentModificationException%28%29;%20cursor%20=%20i%20+%201;%20return%20%28E%29%20elementData[offset%20+%20%28lastRet%20=%20i%29];%20%7d%20public%20boolean%20hasPrevious%28%29%20%7b%20return%20cursor%20!=%200;%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20E%20previous%28%29%20%7b%20checkForComodification%28%29;%20int%20i%20=%20cursor%20-%201;%20if%20%28i%20%3c%200%29%20throw%20new%20NoSuchElementException%28%29;%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28offset%20+%20i%20%3e=%20elementData.length%29%20throw%20new%20ConcurrentModificationException%28%29;%20cursor%20=%20i;%20return%20%28E%29%20elementData[offset%20+%20%28lastRet%20=%20i%29];%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20void%20forEachRemaining%28Consumer%3c?%20super%20E%3e%20consumer%29%20%7b%20Objects.requireNonNull%28consumer%29;%20final%20int%20size%20=%20SubList.this.size;%20int%20i%20=%20cursor;%20if%20%28i%20%3e=%20size%29%20%7b%20return;%20%7d%20final%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28offset%20+%20i%20%3e=%20elementData.length%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20while%20%28i%20!=%20size%20&&%20modCount%20==%20expectedModCount%29%20%7b%20consumer.accept%28%28E%29%20elementData[offset%20+%20%28i++%29]%29;%20%7d%20//%20update%20once%20at%20end%20of%20iteration%20to%20reduce%20heap%20write%20traffic%20lastRet%20=%20cursor%20=%20i;%20checkForComodification%28%29;%20%7d%20public%20int%20nextIndex%28%29%20%7b%20return%20cursor;%20%7d%20public%20int%20previousIndex%28%29%20%7b%20return%20cursor%20-%201;%20%7d%20public%20void%20remove%28%29%20%7b%20if%20%28lastRet%20%3c%200%29%20throw%20new%20IllegalStateException%28%29;%20checkForComodification%28%29;%20try%20%7b%20SubList.this.remove%28lastRet%29;%20cursor%20=%20lastRet;%20lastRet%20=%20-1;%20expectedModCount%20=%20ArrayList.this.modCount;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20public%20void%20set%28E%20e%29%20%7b%20if%20%28lastRet%20%3c%200%29%20throw%20new%20IllegalStateException%28%29;%20checkForComodification%28%29;%20try%20%7b%20ArrayList.this.set%28offset%20+%20lastRet,%20e%29;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20public%20void%20add%28E%20e%29%20%7b%20checkForComodification%28%29;%20try%20%7b%20int%20i%20=%20cursor;%20SubList.this.add%28i,%20e%29;%20cursor%20=%20i%20+%201;%20lastRet%20=%20-1;%20expectedModCount%20=%20ArrayList.this.modCount;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20final%20void%20checkForComodification%28%29%20%7b%20if%20%28expectedModCount%20!=%20ArrayList.this.modCount%29%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d;%20%7d%20public%20List%3cE%3e%20subList%28int%20fromIndex,%20int%20toIndex%29%20%7b%20subListRangeCheck%28fromIndex,%20toIndex,%20size%29;%20return%20new%20SubList%28this,%20offset,%20fromIndex,%20toIndex%29;%20%7d%20private%20void%20rangeCheck%28int%20index%29%20%7b%20if%20%28index%20%3c%200%20%7c%7c%20index%20%3e=%20this.size%29%20throw%20new%20IndexOutOfBoundsException%28outOfBoundsMsg%28index%29%29;%20%7d%20private%20void%20rangeCheckForAdd%28int%20index%29%20%7b%20if%20%28index%20%3c%200%20%7c%7c%20index%20%3e%20this.size%29%20throw%20new%20IndexOutOfBoundsException%28outOfBoundsMsg%28index%29%29;%20%7d%20private%20String%20outOfBoundsMsg%28int%20index%29%20%7b%20return%20%22Index:%20%22%20+%20index%20+%20%22,%20Size:%20%22%20+%20this.size;%20%7d%20private%20void%20checkForComodification%28%29%20%7b%20if%20%28ArrayList.this.modCount%20!=%20this.modCount%29%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20public%20Spliterator%3cE%3e%20spliterator%28%29%20%7b%20checkForComodification%28%29;%20return%20new%20ArrayListSpliterator%3cE%3e%28ArrayList.this,%20offset,%20offset%20+%20this.size,%20this.modCount%29;%20%7d%20%7d%20@Override%20public%20void%20forEach%28Consumer%3c?%20super%20E%3e%20action%29%20%7b%20Objects.requireNonNull%28action%29;%20final%20int%20expectedModCount%20=%20modCount;%20@SuppressWarnings%28%22unchecked%22%29%20final%20E[]%20elementData%20=%20%28E[]%29%20this.elementData;%20final%20int%20size%20=%20this.size;%20for%20%28int%20i%20=%200;%20modCount%20==%20expectedModCount%20&&%20i%20%3c%20size;%20i++%29%20%7b%20action.accept%28elementData[i]%29;%20%7d%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20/**%20*%20Creates%20a%20%3cem%3e%3ca%20href=%22Spliterator.html#binding%22%3elate-binding%3c/a%3e%3c/em%3e%20*%20and%20%3cem%3efail-fast%3c/em%3e%20%7b@link%20Spliterator%7d%20over%20the%20elements%20in%20this%20*%20list.%20*%20*%20%3cp%3eThe%20%7b@code%20Spliterator%7d%20reports%20%7b@link%20Spliterator#SIZED%7d,%20*%20%7b@link%20Spliterator#SUBSIZED%7d,%20and%20%7b@link%20Spliterator#ORDERED%7d.%20*%20Overriding%20implementations%20should%20document%20the%20reporting%20of%20additional%20*%20characteristic%20values.%20*%20*%20@return%20a%20%7b@code%20Spliterator%7d%20over%20the%20elements%20in%20this%20list%20*%20@since%201.8%20*/%20@Override%20public%20Spliterator%3cE%3e%20spliterator%28%29%20%7b%20return%20new%20ArrayListSpliterator%3c%3e%28this,%200,%20-1,%200%29;%20%7d%20/**%20*%20Index-based%20split-by-two,%20lazily%20initialized%20Spliterator%20*/%20static%20final%20class%20ArrayListSpliterator%3cE%3e%20implements%20Spliterator%3cE%3e%20%7b%20/*%20*%20If%20ArrayLists%20were%20immutable,%20or%20structurally%20immutable%20%28no%20*%20adds,%20removes,%20etc%29,%20we%20could%20implement%20their%20spliterators%20*%20with%20Arrays.spliterator.%20Instead%20we%20detect%20as%20much%20*%20interference%20during%20traversal%20as%20practical%20without%20*%20sacrificing%20much%20performance.%20We%20rely%20primarily%20on%20*%20modCounts.%20These%20are%20not%20guaranteed%20to%20detect%20concurrency%20*%20violations,%20and%20are%20sometimes%20overly%20conservative%20about%20*%20within-thread%20interference,%20but%20detect%20enough%20problems%20to%20*%20be%20worthwhile%20in%20practice.%20To%20carry%20this%20out,%20we%20%281%29%20lazily%20*%20initialize%20fence%20and%20expectedModCount%20until%20the%20latest%20*%20point%20that%20we%20need%20to%20commit%20to%20the%20state%20we%20are%20checking%20*%20against;%20thus%20improving%20precision.%20%28This%20doesn%27t%20apply%20to%20*%20SubLists,%20that%20create%20spliterators%20with%20current%20non-lazy%20*%20values%29.%20%282%29%20We%20perform%20only%20a%20single%20*%20ConcurrentModificationException%20check%20at%20the%20end%20of%20forEach%20*%20%28the%20most%20performance-sensitive%20method%29.%20When%20using%20forEach%20*%20%28as%20opposed%20to%20iterators%29,%20we%20can%20normally%20only%20detect%20*%20interference%20after%20actions,%20not%20before.%20Further%20*%20CME-triggering%20checks%20apply%20to%20all%20other%20possible%20*%20violations%20of%20assumptions%20for%20example%20null%20or%20too-small%20*%20elementData%20array%20given%20its%20size%28%29,%20that%20could%20only%20have%20*%20occurred%20due%20to%20interference.%20This%20allows%20the%20inner%20loop%20*%20of%20forEach%20to%20run%20without%20any%20further%20checks,%20and%20*%20simplifies%20lambda-resolution.%20While%20this%20does%20entail%20a%20*%20number%20of%20checks,%20note%20that%20in%20the%20common%20case%20of%20*%20list.stream%28%29.forEach%28a%29,%20no%20checks%20or%20other%20computation%20*%20occur%20anywhere%20other%20than%20inside%20forEach%20itself.%20The%20other%20*%20less-often-used%20methods%20cannot%20take%20advantage%20of%20most%20of%20*%20these%20streamlinings.%20*/%20private%20final%20ArrayList%3cE%3e%20list;%20private%20int%20index;%20//%20current%20index,%20modified%20on%20advance/split%20private%20int%20fence;%20//%20-1%20until%20used;%20then%20one%20past%20last%20index%20private%20int%20expectedModCount;%20//%20initialized%20when%20fence%20set%20/**%20*%20Create%20new%20spliterator%20covering%20the%20given%20range%20*/%20ArrayListSpliterator%28ArrayList%3cE%3e%20list,%20int%20origin,%20int%20fence,%20int%20expectedModCount%29%20%7b%20this.list%20=%20list;%20//%20OK%20if%20null%20unless%20traversed%20this.index%20=%20origin;%20this.fence%20=%20fence;%20this.expectedModCount%20=%20expectedModCount;%20%7d%20private%20int%20getFence%28%29%20%7b%20//%20initialize%20fence%20to%20size%20on%20first%20use%20int%20hi;%20//%20%28a%20specialized%20variant%20appears%20in%20method%20forEach%29%20ArrayList%3cE%3e%20lst;%20if%20%28%28hi%20=%20fence%29%20%3c%200%29%20%7b%20if%20%28%28lst%20=%20list%29%20==%20null%29%20hi%20=%20fence%20=%200;%20else%20%7b%20expectedModCount%20=%20lst.modCount;%20hi%20=%20fence%20=%20lst.size;%20%7d%20%7d%20return%20hi;%20%7d%20public%20ArrayListSpliterator%3cE%3e%20trySplit%28%29%20%7b%20int%20hi%20=%20getFence%28%29,%20lo%20=%20index,%20mid%20=%20%28lo%20+%20hi%29%20%3e%3e%3e%201;%20return%20%28lo%20%3e=%20mid%29%20?%20null%20:%20//%20divide%20range%20in%20half%20unless%20too%20small%20new%20ArrayListSpliterator%3cE%3e%28list,%20lo,%20index%20=%20mid,%20expectedModCount%29;%20%7d%20public%20boolean%20tryAdvance%28Consumer%3c?%20super%20E%3e%20action%29%20%7b%20if%20%28action%20==%20null%29%20throw%20new%20NullPointerException%28%29;%20int%20hi%20=%20getFence%28%29,%20i%20=%20index;%20if%20%28i%20%3c%20hi%29%20%7b%20index%20=%20i%20+%201;%20@SuppressWarnings%28%22unchecked%22%29%20E%20e%20=%20%28E%29%20list.elementData[i];%20action.accept%28e%29;%20if%20%28list.modCount%20!=%20expectedModCount%29%20throw%20new%20ConcurrentModificationException%28%29;%20return%20true;%20%7d%20return%20false;%20%7d%20public%20void%20forEachRemaining%28Consumer%3c?%20super%20E%3e%20action%29%20%7b%20int%20i,%20hi,%20mc;%20//%20hoist%20accesses%20and%20checks%20from%20loop%20ArrayList%3cE%3e%20lst;%20Object[]%20a;%20if%20%28action%20==%20null%29%20throw%20new%20NullPointerException%28%29;%20if%20%28%28lst%20=%20list%29%20!=%20null%20&&%20%28a%20=%20lst.elementData%29%20!=%20null%29%20%7b%20if%20%28%28hi%20=%20fence%29%20%3c%200%29%20%7b%20mc%20=%20lst.modCount;%20hi%20=%20lst.size;%20%7d%20else%20mc%20=%20expectedModCount;%20if%20%28%28i%20=%20index%29%20%3e=%200%20&&%20%28index%20=%20hi%29%20%3c=%20a.length%29%20%7b%20for%20%28;%20i%20%3c%20hi;%20++i%29%20%7b%20@SuppressWarnings%28%22unchecked%22%29%20E%20e%20=%20%28E%29%20a[i];%20action.accept%28e%29;%20%7d%20if%20%28lst.modCount%20==%20mc%29%20return;%20%7d%20%7d%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20public%20long%20estimateSize%28%29%20%7b%20return%20%28long%29%20%28getFence%28%29%20-%20index%29;%20%7d%20public%20int%20characteristics%28%29%20%7b%20return%20Spliterator.ORDERED%20%7c%20Spliterator.SIZED%20%7c%20Spliterator.SUBSIZED;%20%7d%20%7d%20@Override%20public%20boolean%20removeIf%28Predicate%3c?%20super%20E%3e%20filter%29%20%7b%20Objects.requireNonNull%28filter%29;%20//%20figure%20out%20which%20elements%20are%20to%20be%20removed%20//%20any%20exception%20thrown%20from%20the%20filter%20predicate%20at%20this%20stage%20//%20will%20leave%20the%20collection%20unmodified%20int%20removeCount%20=%200;%20final%20BitSet%20removeSet%20=%20new%20BitSet%28size%29;%20final%20int%20expectedModCount%20=%20modCount;%20final%20int%20size%20=%20this.size;%20for%20%28int%20i%20=%200;%20modCount%20==%20expectedModCount%20&&%20i%20%3c%20size;%20i++%29%20%7b%20@SuppressWarnings%28%22unchecked%22%29%20final%20E%20element%20=%20%28E%29%20elementData[i];%20if%20%28filter.test%28element%29%29%20%7b%20removeSet.set%28i%29;%20removeCount++;%20%7d%20%7d%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20//%20shift%20surviving%20elements%20left%20over%20the%20spaces%20left%20by%20removed%20elements%20final%20boolean%20anyToRemove%20=%20removeCount%20%3e%200;%20if%20%28anyToRemove%29%20%7b%20final%20int%20newSize%20=%20size%20-%20removeCount;%20for%20%28int%20i%20=%200,%20j%20=%200;%20%28i%20%3c%20size%29%20&&%20%28j%20%3c%20newSize%29;%20i++,%20j++%29%20%7b%20i%20=%20removeSet.nextClearBit%28i%29;%20elementData[j]%20=%20elementData[i];%20%7d%20for%20%28int%20k%20=%20newSize;%20k%20%3c%20size;%20k++%29%20%7b%20elementData[k]%20=%20null;%20//%20Let%20gc%20do%20its%20work%20%7d%20this.size%20=%20newSize;%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20modCount++;%20%7d%20return%20anyToRemove;%20%7d%20@Override%20@SuppressWarnings%28%22unchecked%22%29%20public%20void%20replaceAll%28UnaryOperator%3cE%3e%20operator%29%20%7b%20Objects.requireNonNull%28operator%29;%20final%20int%20expectedModCount%20=%20modCount;%20final%20int%20size%20=%20this.size;%20for%20%28int%20i%20=%200;%20modCount%20==%20expectedModCount%20&&%20i%20%3c%20size;%20i++%29%20%7b%20elementData[i]%20=%20operator.apply%28%28E%29%20elementData[i]%29;%20%7d%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20modCount++;%20%7d%20@Override%20@SuppressWarnings%28%22unchecked%22%29%20public%20void%20sort%28Comparator%3c?%20super%20E%3e%20c%29%20%7b%20final%20int%20expectedModCount%20=%20modCount;%20Arrays.sort%28%28E[]%29%20elementData,%200,%20size,%20c%29;%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20modCount++;%20%7d%20%7d%20%e6%89%a9%e5%ae%b9%e5%88%86%e6%9e%90&amp;pics=https://www.mujaspace.com/icons/apple-touch-icon.png&amp;site=muja%27s%20Space%20" title=分享到「QQ」 target=_blank rel=noopener><svg viewBox="0 0 448 512" class="icon qq-icon"><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741.0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792.0.0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z"/></svg></a></div><div class="share-item qzone"><a href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://www.mujaspace.com/tech/2023/arraylist%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/&amp;title=ArrayList%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90%20building&amp;summary=%e7%ae%80%e4%bb%8b%20ArrayList%e7%bb%a7%e6%89%bf%e4%ba%8e%c2%a0AbstractList%c2%a0%e7%b1%bb%ef%bc%8c%e5%ae%9e%e7%8e%b0%e4%ba%86%c2%a0List,%c2%a0RandomAccess,%c2%a0Cloneable,%c2%a0java.io.Serializable%c2%a0%e8%bf%99%e4%ba%9b%e6%8e%a5%e5%8f%a3%e3%80%82%0aList%ef%bc%9a%e8%a1%a8%e6%98%8e%e6%98%af%e4%b8%80%e4%b8%aa%e5%88%97%e8%a1%a8%ef%bc%8c%e6%94%af%e6%8c%81%e6%b7%bb%e5%8a%a0%e3%80%81%e5%88%a0%e9%99%a4%e3%80%81%e6%9f%a5%e6%89%be%e7%ad%89%e6%93%8d%e4%bd%9c%ef%bc%8c%e5%b9%b6%e4%b8%94%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e4%b8%8b%e6%a0%87%e8%bf%9b%e8%a1%8c%e8%ae%bf%e9%97%ae%e3%80%82%20RandomAccess%ef%bc%9a%e6%98%af%e4%b8%80%e4%b8%aa%e6%a0%87%e5%bf%97%e6%8e%a5%e5%8f%a3%ef%bc%8c%e8%a1%a8%e6%98%8e%e5%ae%9e%e7%8e%b0%e8%bf%99%e4%b8%aa%e8%bf%99%e4%b8%aa%e6%8e%a5%e5%8f%a3%e7%9a%84%20List%20%e9%9b%86%e5%90%88%e6%98%af%e6%94%af%e6%8c%81%e5%bf%ab%e9%80%9f%e9%9a%8f%e6%9c%ba%e8%ae%bf%e9%97%ae%e7%9a%84%e3%80%82%e5%9c%a8%c2%a0ArrayList%c2%a0%e4%b8%ad%ef%bc%8c%e6%88%91%e4%bb%ac%e5%8d%b3%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e5%85%83%e7%b4%a0%e7%9a%84%e5%ba%8f%e5%8f%b7%e5%bf%ab%e9%80%9f%e8%8e%b7%e5%8f%96%e5%85%83%e7%b4%a0%e5%af%b9%e8%b1%a1%ef%bc%8c%e8%bf%99%e5%b0%b1%e6%98%af%e5%bf%ab%e9%80%9f%e9%9a%8f%e6%9c%ba%e8%ae%bf%e9%97%ae%e3%80%82%20Cloneable%c2%a0%ef%bc%9a%e5%8d%b3%e8%a6%86%e7%9b%96%e4%ba%86%e5%87%bd%e6%95%b0clone%28%29%ef%bc%8c%e8%83%bd%e8%a2%ab%e5%85%8b%e9%9a%86%e3%80%82%20Serializable%ef%bc%9a%e8%bf%99%e6%84%8f%e5%91%b3%e7%9d%80ArrayList%e6%94%af%e6%8c%81%e5%ba%8f%e5%88%97%e5%8c%96%ef%bc%8c%e8%83%bd%e9%80%9a%e8%bf%87%e5%ba%8f%e5%88%97%e5%8c%96%e5%8e%bb%e4%bc%a0%e8%be%93%e3%80%82%201%202%203%20public%20class%20ArrayList%3cE%3e%20extends%20AbstractList%3cE%3e%20implements%20List%3cE%3e,%20RandomAccess,%20Cloneable,%20java.io.Serializable%20%7b%7d%20%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90%201%202%203%204%205%206%207%208%209%2010%2011%2012%2013%2014%2015%2016%2017%2018%2019%2020%2021%2022%2023%2024%2025%2026%2027%2028%2029%2030%2031%2032%2033%2034%2035%2036%2037%2038%2039%2040%2041%2042%2043%2044%2045%2046%2047%2048%2049%2050%2051%2052%2053%2054%2055%2056%2057%2058%2059%2060%2061%2062%2063%2064%2065%2066%2067%2068%2069%2070%2071%2072%2073%2074%2075%2076%2077%2078%2079%2080%2081%2082%2083%2084%2085%2086%2087%2088%2089%2090%2091%2092%2093%2094%2095%2096%2097%2098%2099%20100%20101%20102%20103%20104%20105%20106%20107%20108%20109%20110%20111%20112%20113%20114%20115%20116%20117%20118%20119%20120%20121%20122%20123%20124%20125%20126%20127%20128%20129%20130%20131%20132%20133%20134%20135%20136%20137%20138%20139%20140%20141%20142%20143%20144%20145%20146%20147%20148%20149%20150%20151%20152%20153%20154%20155%20156%20157%20158%20159%20160%20161%20162%20163%20164%20165%20166%20167%20168%20169%20170%20171%20172%20173%20174%20175%20176%20177%20178%20179%20180%20181%20182%20183%20184%20185%20186%20187%20188%20189%20190%20191%20192%20193%20194%20195%20196%20197%20198%20199%20200%20201%20202%20203%20204%20205%20206%20207%20208%20209%20210%20211%20212%20213%20214%20215%20216%20217%20218%20219%20220%20221%20222%20223%20224%20225%20226%20227%20228%20229%20230%20231%20232%20233%20234%20235%20236%20237%20238%20239%20240%20241%20242%20243%20244%20245%20246%20247%20248%20249%20250%20251%20252%20253%20254%20255%20256%20257%20258%20259%20260%20261%20262%20263%20264%20265%20266%20267%20268%20269%20270%20271%20272%20273%20274%20275%20276%20277%20278%20279%20280%20281%20282%20283%20284%20285%20286%20287%20288%20289%20290%20291%20292%20293%20294%20295%20296%20297%20298%20299%20300%20301%20302%20303%20304%20305%20306%20307%20308%20309%20310%20311%20312%20313%20314%20315%20316%20317%20318%20319%20320%20321%20322%20323%20324%20325%20326%20327%20328%20329%20330%20331%20332%20333%20334%20335%20336%20337%20338%20339%20340%20341%20342%20343%20344%20345%20346%20347%20348%20349%20350%20351%20352%20353%20354%20355%20356%20357%20358%20359%20360%20361%20362%20363%20364%20365%20366%20367%20368%20369%20370%20371%20372%20373%20374%20375%20376%20377%20378%20379%20380%20381%20382%20383%20384%20385%20386%20387%20388%20389%20390%20391%20392%20393%20394%20395%20396%20397%20398%20399%20400%20401%20402%20403%20404%20405%20406%20407%20408%20409%20410%20411%20412%20413%20414%20415%20416%20417%20418%20419%20420%20421%20422%20423%20424%20425%20426%20427%20428%20429%20430%20431%20432%20433%20434%20435%20436%20437%20438%20439%20440%20441%20442%20443%20444%20445%20446%20447%20448%20449%20450%20451%20452%20453%20454%20455%20456%20457%20458%20459%20460%20461%20462%20463%20464%20465%20466%20467%20468%20469%20470%20471%20472%20473%20474%20475%20476%20477%20478%20479%20480%20481%20482%20483%20484%20485%20486%20487%20488%20489%20490%20491%20492%20493%20494%20495%20496%20497%20498%20499%20500%20501%20502%20503%20504%20505%20506%20507%20508%20509%20510%20511%20512%20513%20514%20515%20516%20517%20518%20519%20520%20521%20522%20523%20524%20525%20526%20527%20528%20529%20530%20531%20532%20533%20534%20535%20536%20537%20538%20539%20540%20541%20542%20543%20544%20545%20546%20547%20548%20549%20550%20551%20552%20553%20554%20555%20556%20557%20558%20559%20560%20561%20562%20563%20564%20565%20566%20567%20568%20569%20570%20571%20572%20573%20574%20575%20576%20577%20578%20579%20580%20581%20582%20583%20584%20585%20586%20587%20588%20589%20590%20591%20592%20593%20594%20595%20596%20597%20598%20599%20600%20601%20602%20603%20604%20605%20606%20607%20608%20609%20610%20611%20612%20613%20614%20615%20616%20617%20618%20619%20620%20621%20622%20623%20624%20625%20626%20627%20628%20629%20630%20631%20632%20633%20634%20635%20636%20637%20638%20639%20640%20641%20642%20643%20644%20645%20646%20647%20648%20649%20650%20651%20652%20653%20654%20655%20656%20657%20658%20659%20660%20661%20662%20663%20664%20665%20666%20667%20668%20669%20670%20671%20672%20673%20674%20675%20676%20677%20678%20679%20680%20681%20682%20683%20684%20685%20686%20687%20688%20689%20690%20691%20692%20693%20694%20695%20696%20697%20698%20699%20700%20701%20702%20703%20704%20705%20706%20707%20708%20709%20710%20711%20712%20713%20714%20715%20716%20717%20718%20719%20720%20721%20722%20723%20724%20725%20726%20727%20728%20729%20730%20731%20732%20733%20734%20735%20736%20737%20738%20739%20740%20741%20742%20743%20744%20745%20746%20747%20748%20749%20750%20751%20752%20753%20754%20755%20756%20757%20758%20759%20760%20761%20762%20763%20764%20765%20766%20767%20768%20769%20770%20771%20772%20773%20774%20775%20776%20777%20778%20779%20780%20781%20782%20783%20784%20785%20786%20787%20788%20789%20790%20791%20792%20793%20794%20795%20796%20797%20798%20799%20800%20801%20802%20803%20804%20805%20806%20807%20808%20809%20810%20811%20812%20813%20814%20815%20816%20817%20818%20819%20820%20821%20822%20823%20824%20825%20826%20827%20828%20829%20830%20831%20832%20833%20834%20835%20836%20837%20838%20839%20840%20841%20842%20843%20844%20845%20846%20847%20848%20849%20850%20851%20852%20853%20854%20855%20856%20857%20858%20859%20860%20861%20862%20863%20864%20865%20866%20867%20868%20869%20870%20871%20872%20873%20874%20875%20876%20877%20878%20879%20880%20881%20882%20883%20884%20885%20886%20887%20888%20889%20890%20891%20892%20893%20894%20895%20896%20897%20898%20899%20900%20901%20902%20903%20904%20905%20906%20907%20908%20909%20910%20911%20912%20913%20914%20915%20916%20917%20918%20919%20920%20921%20922%20923%20924%20925%20926%20927%20928%20929%20930%20931%20932%20933%20934%20935%20936%20937%20938%20939%20940%20941%20942%20943%20944%20945%20946%20947%20948%20949%20950%20951%20952%20953%20954%20955%20956%20957%20958%20959%20960%20961%20962%20963%20964%20965%20966%20967%20968%20969%20970%20971%20972%20973%20974%20975%20976%20977%20978%20979%20980%20981%20982%20983%20984%20985%20986%20987%20988%20989%20990%20991%20992%20993%20994%20995%20996%20997%20998%20999%201000%201001%201002%201003%201004%201005%201006%201007%201008%201009%201010%201011%201012%201013%201014%201015%201016%201017%201018%201019%201020%201021%201022%201023%201024%201025%201026%201027%201028%201029%201030%201031%201032%201033%201034%201035%201036%201037%201038%201039%201040%201041%201042%201043%201044%201045%201046%201047%201048%201049%201050%201051%201052%201053%201054%201055%201056%201057%201058%201059%201060%201061%201062%201063%201064%201065%201066%201067%201068%201069%201070%201071%201072%201073%201074%201075%201076%201077%201078%201079%201080%201081%201082%201083%201084%201085%201086%201087%201088%201089%201090%201091%201092%201093%201094%201095%201096%201097%201098%201099%201100%201101%201102%201103%201104%201105%201106%201107%201108%201109%201110%201111%201112%201113%201114%201115%201116%201117%201118%201119%201120%201121%201122%201123%201124%201125%201126%201127%201128%201129%201130%201131%201132%201133%201134%201135%201136%201137%201138%201139%201140%201141%201142%201143%201144%201145%201146%201147%201148%201149%201150%201151%201152%201153%201154%201155%201156%201157%201158%201159%201160%201161%201162%201163%201164%201165%201166%201167%201168%201169%201170%201171%201172%201173%201174%201175%201176%201177%201178%201179%201180%201181%201182%201183%201184%201185%20package%20java.util;%20import%20java.util.function.Consumer;%20import%20java.util.function.Predicate;%20import%20java.util.function.UnaryOperator;%20public%20class%20ArrayList%3cE%3e%20extends%20AbstractList%3cE%3e%20implements%20List%3cE%3e,%20RandomAccess,%20Cloneable,%20java.io.Serializable%20%7b%20private%20static%20final%20long%20serialVersionUID%20=%208683452581122892189L;%20/**%20*%20Default%20initial%20capacity.%20mjy%ef%bc%9a%e9%bb%98%e8%ae%a4%e5%88%9d%e5%a7%8b%e5%ae%b9%e9%87%8f%e5%a4%a7%e5%b0%8f%20*/%20private%20static%20final%20int%20DEFAULT_CAPACITY%20=%2010;%20/**%20*%20Shared%20empty%20array%20instance%20used%20for%20empty%20instances.%20mjy%ef%bc%9a%e7%a9%ba%e6%95%b0%e7%bb%84%ef%bc%88%e7%94%a8%e4%ba%8e%e7%a9%ba%e5%ae%9e%e4%be%8b%ef%bc%89%e3%80%82%20*/%20private%20static%20final%20Object[]%20EMPTY_ELEMENTDATA%20=%20%7b%7d;%20/**%20*%20Shared%20empty%20array%20instance%20used%20for%20default%20sized%20empty%20instances.%20We%20*%20distinguish%20this%20from%20EMPTY_ELEMENTDATA%20to%20know%20how%20much%20to%20inflate%20when%20*%20first%20element%20is%20added.%20*/%20//%20mjy%ef%bc%9a%e7%94%a8%e4%ba%8e%e9%bb%98%e8%ae%a4%e5%a4%a7%e5%b0%8f%e7%a9%ba%e5%ae%9e%e4%be%8b%e7%9a%84%e5%85%b1%e4%ba%ab%e7%a9%ba%e6%95%b0%e7%bb%84%e5%ae%9e%e4%be%8b%e3%80%82%e5%92%8cEMPTY_ELEMENTDATA%e6%95%b0%e7%bb%84%e5%8c%ba%e5%88%86%ef%bc%8c%e4%bb%a5%e7%9f%a5%e9%81%93%e5%9c%a8%e6%b7%bb%e5%8a%a0%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%e6%97%b6%e5%ae%b9%e9%87%8f%e9%9c%80%e8%a6%81%e5%a2%9e%e5%8a%a0%e5%a4%9a%e5%b0%91%e3%80%82%20private%20static%20final%20Object[]%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%20=%20%7b%7d;%20/**%20*%20The%20array%20buffer%20into%20which%20the%20elements%20of%20the%20ArrayList%20are%20stored.%20*%20The%20capacity%20of%20the%20ArrayList%20is%20the%20length%20of%20this%20array%20buffer.%20Any%20*%20empty%20ArrayList%20with%20elementData%20==%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%20*%20will%20be%20expanded%20to%20DEFAULT_CAPACITY%20when%20the%20first%20element%20is%20added.%20*/%20//%20mjy%ef%bc%9a%e5%ad%98%e5%82%a8ArrayList%e5%85%83%e7%b4%a0%e7%9a%84%e6%95%b0%e7%bb%84%e7%bc%93%e5%86%b2%e5%8c%ba%ef%bc%88%e5%b0%b1%e6%98%af%e4%bf%9d%e5%ad%98ArrayList%e6%95%b0%e6%8d%ae%e7%9a%84%e6%95%b0%e7%bb%84%ef%bc%89%e3%80%82ArrayList%e7%9a%84%e5%ae%b9%e9%87%8f%e6%98%af%e6%ad%a4%e6%95%b0%e7%bb%84%e7%bc%93%e5%86%b2%e5%8c%ba%e7%9a%84%e9%95%bf%e5%ba%a6%e3%80%82%e6%b7%bb%e5%8a%a0%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%e6%97%b6%ef%bc%8c%e4%bb%bb%e4%bd%95%e5%85%b7%e6%9c%89elementData==DEFAULTCAPACITY_EMMENTDATA%e7%9a%84%e7%a9%baArrayList%e9%83%bd%e5%b0%86%e6%89%a9%e5%b1%95%e4%b8%baDEFAULT_CAPACITY%e3%80%82%20transient%20Object[]%20elementData;%20//%20non-private%20to%20simplify%20nested%20class%20access%20/**%20*%20The%20size%20of%20the%20ArrayList%20%28the%20number%20of%20elements%20it%20contains%29.%20mjy%ef%bc%9a%e6%95%b0%e7%bb%84%e9%95%bf%e5%ba%a6%e5%a4%a7%e5%b0%8f%ef%bc%88%e5%85%83%e7%b4%a0%e4%b8%aa%e6%95%b0%ef%bc%89%20*%20*%20@serial%20*/%20private%20int%20size;%20/**%20*%20Constructs%20an%20empty%20list%20with%20the%20specified%20initial%20capacity.%20*%20*%20@param%20initialCapacity%20the%20initial%20capacity%20of%20the%20list%20*%20@throws%20IllegalArgumentException%20if%20the%20specified%20initial%20capacity%20*%20is%20negative%20*/%20//%20mjy%ef%bc%9a%e5%b8%a6%e5%88%9d%e5%a7%8b%e5%ae%b9%e9%87%8f%e5%8f%82%e6%95%b0%e7%9a%84%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%ef%bc%88%e7%94%a8%e6%88%b7%e5%8f%af%e4%bb%a5%e5%9c%a8%e5%88%9b%e5%bb%baArrayList%e5%af%b9%e8%b1%a1%e6%97%b6%e8%87%aa%e5%b7%b1%e6%8c%87%e5%ae%9a%e9%9b%86%e5%90%88%e7%9a%84%e5%88%9d%e5%a7%8b%e5%a4%a7%e5%b0%8f%ef%bc%89%20public%20ArrayList%28int%20initialCapacity%29%20%7b%20if%20%28initialCapacity%20%3e%200%29%20%7b%20//%20%e4%bc%a0%e5%85%a5%e7%9a%84%e5%8f%82%e6%95%b0%e5%a4%a7%e4%ba%8e0%ef%bc%8c%e5%88%9b%e5%bb%bainitialCapacity%e5%a4%a7%e5%b0%8f%e7%9a%84%e6%95%b0%e7%bb%84%20this.elementData%20=%20new%20Object[initialCapacity];%20%7d%20else%20if%20%28initialCapacity%20==%200%29%20%7b%20//%20%e4%bc%a0%e5%85%a5%e7%9a%84%e5%8f%82%e6%95%b0%e7%ad%89%e4%ba%8e0%ef%bc%8c%e5%88%9b%e5%bb%ba%e7%a9%ba%e6%95%b0%e7%bb%84%20this.elementData%20=%20EMPTY_ELEMENTDATA;%20%7d%20else%20%7b%20//%20%e5%85%b6%e4%bb%96%e6%83%85%e5%86%b5%e5%bc%82%e5%b8%b8%20throw%20new%20IllegalArgumentException%28%22Illegal%20Capacity:%20%22%20+%20initialCapacity%29;%20%7d%20%7d%20/**%20*%20Constructs%20an%20empty%20list%20with%20an%20initial%20capacity%20of%20ten.%20*/%20//%20mjy%ef%bc%9a%e9%bb%98%e8%ae%a4%e6%97%a0%e5%8f%82%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%e4%b8%ba0%e3%80%82%e5%88%9d%e5%a7%8b%e5%85%b6%e5%ae%9e%e6%98%af%e7%a9%ba%e6%95%b0%e7%bb%84%ef%bc%8c%e5%bd%93%e6%b7%bb%e5%8a%a0%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%e7%9a%84%e6%97%b6%e5%80%99%e6%95%b0%e7%bb%84%e5%ae%b9%e9%87%8f%e6%89%8d%e5%8f%98%e6%88%9010%20public%20ArrayList%28%29%20%7b%20this.elementData%20=%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA;%20%7d%20/**%20*%20Constructs%20a%20list%20containing%20the%20elements%20of%20the%20specified%20*%20collection,%20in%20the%20order%20they%20are%20returned%20by%20the%20collection%27s%20*%20iterator.%20*%20*%20@param%20c%20the%20collection%20whose%20elements%20are%20to%20be%20placed%20into%20this%20list%20*%20@throws%20NullPointerException%20if%20the%20specified%20collection%20is%20null%20*/%20//%20mjy%ef%bc%9a%e6%9e%84%e9%80%a0%e4%b8%80%e4%b8%aa%e5%8c%85%e5%90%ab%e6%8c%87%e5%ae%9a%e9%9b%86%e5%90%88%e7%9a%84%e5%85%83%e7%b4%a0%e7%9a%84%e5%88%97%e8%a1%a8%ef%bc%8c%e6%8c%89%e7%85%a7%e5%ae%83%e4%bb%ac%e7%94%b1%e9%9b%86%e5%90%88%e7%9a%84%e8%bf%ad%e4%bb%a3%e5%99%a8%e8%bf%94%e5%9b%9e%e7%9a%84%e9%a1%ba%e5%ba%8f%e3%80%82%20new%20ArrayList%3c%3e%28paramList%29;%20public%20ArrayList%28Collection%3c?%20extends%20E%3e%20c%29%20%7b%20//%20%e5%b0%86%e5%8f%82%e6%95%b0%e8%bd%ac%e6%8d%a2%e4%b8%ba%e6%95%b0%e7%bb%84%20elementData%20=%20c.toArray%28%29;%20//%20elementData%e6%95%b0%e7%bb%84%e7%9a%84%e9%95%bf%e5%ba%a6%e4%b8%8d%e4%b8%ba0%20if%20%28%28size%20=%20elementData.length%29%20!=%200%29%20%7b%20//%20c.toArray%20might%20%28incorrectly%29%20not%20return%20Object[]%20%28see%206260652%29%20//%20mjy%ef%bc%9a%20elementData%e4%b8%8d%e6%98%afObject%e7%b1%bb%e5%9e%8b%e6%95%b0%e6%8d%ae%ef%bc%88c.toArray%e5%8f%af%e8%83%bd%e8%bf%94%e5%9b%9e%e7%9a%84%e4%b8%8d%e6%98%afObject%e7%b1%bb%e5%9e%8b%e7%9a%84%e6%95%b0%e7%bb%84%ef%bc%89%20if%20%28elementData.getClass%28%29%20!=%20Object[].class%29%20//%20mjy%ef%bc%9a%20%e5%b0%86%e5%8e%9f%e6%9d%a5%e4%b8%8d%e6%98%afObject%e7%b1%bb%e5%9e%8b%e7%9a%84elementData%e6%95%b0%e7%bb%84%e7%9a%84%e5%86%85%e5%ae%b9%ef%bc%8c%e8%b5%8b%e5%80%bc%e7%bb%99%e6%96%b0%e7%9a%84Object%e7%b1%bb%e5%9e%8b%e7%9a%84elementData%e6%95%b0%e7%bb%84%20elementData%20=%20Arrays.copyOf%28elementData,%20size,%20Object[].class%29;%20%7d%20else%20%7b%20//%20replace%20with%20empty%20array.%20mjy%ef%bc%9a%20elementData%e6%95%b0%e7%bb%84%e7%9a%84%e9%95%bf%e5%ba%a6%e4%b8%ba0%ef%bc%8c%e5%8d%b3%e4%b8%ba%e7%a9%ba%e6%95%b0%e7%bb%84%20this.elementData%20=%20EMPTY_ELEMENTDATA;%20%7d%20%7d%20/**%20*%20Trims%20the%20capacity%20of%20this%20%3ctt%3eArrayList%3c/tt%3e%20instance%20to%20be%20the%20*%20list%27s%20current%20size.%20An%20application%20can%20use%20this%20operation%20to%20minimize%20*%20the%20storage%20of%20an%20%3ctt%3eArrayList%3c/tt%3e%20instance.%20*/%20//%20mjy%ef%bc%9a%20%e4%bf%ae%e6%94%b9%e8%bf%99%e4%b8%aaArrayList%e5%ae%9e%e4%be%8b%e7%9a%84%e5%ae%b9%e9%87%8f%e6%98%af%e5%88%97%e8%a1%a8%e7%9a%84%e5%bd%93%e5%89%8d%e5%a4%a7%e5%b0%8f%e3%80%82%20%e5%8f%af%e4%bb%a5%e4%bd%bf%e7%94%a8%e6%ad%a4%e6%93%8d%e4%bd%9c%e6%9d%a5%e6%9c%80%e5%b0%8f%e5%8c%96ArrayList%e5%ae%9e%e4%be%8b%e7%9a%84%e5%ad%98%e5%82%a8%e3%80%82%20public%20void%20trimToSize%28%29%20%7b%20modCount++;%20if%20%28size%20%3c%20elementData.length%29%20%7b%20elementData%20=%20%28size%20==%200%29%20?%20EMPTY_ELEMENTDATA%20:%20Arrays.copyOf%28elementData,%20size%29;%20%7d%20%7d%20/**%20*%20Increases%20the%20capacity%20of%20this%20%3ctt%3eArrayList%3c/tt%3e%20instance,%20if%20*%20necessary,%20to%20ensure%20that%20it%20can%20hold%20at%20least%20the%20number%20of%20elements%20*%20specified%20by%20the%20minimum%20capacity%20argument.%20*%20mjy%ef%bc%9a%20%e5%a6%82%e6%9c%89%e5%bf%85%e8%a6%81%ef%bc%8c%e5%a2%9e%e5%8a%a0%e6%ad%a4ArrayList%e5%ae%9e%e4%be%8b%e7%9a%84%e5%ae%b9%e9%87%8f%ef%bc%8c%e4%bb%a5%e7%a1%ae%e4%bf%9d%e5%ae%83%e8%87%b3%e5%b0%91%e5%8f%af%e4%bb%a5%e5%ae%b9%e7%ba%b3%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e5%8f%82%e6%95%b0%e6%8c%87%e5%ae%9a%e7%9a%84%e5%85%83%e7%b4%a0%e6%95%b0%e9%87%8f%e3%80%82%20*%20*%20@param%20minCapacity%20the%20desired%20minimum%20capacity%20mjy%ef%bc%9a%e6%89%80%e9%9c%80%e7%9a%84%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%20*/%20public%20void%20ensureCapacity%28int%20minCapacity%29%20%7b%20//%20mjy%ef%bc%9a%20%28%e6%95%b0%e7%bb%84%e5%85%83%e7%b4%a0%e4%b8%8d%e4%b8%ba%e7%a9%ba%29%20%e5%a6%82%e6%9e%9c%e6%98%aftrue%ef%bc%8cminExpand%e7%9a%84%e5%80%bc%e4%b8%ba0%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%98%affalse,minExpand%e7%9a%84%e5%80%bc%e4%b8%ba10%20int%20minExpand%20=%20%28elementData%20!=%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%29%20//%20any%20size%20if%20not%20default%20element%20table%20?%200%20//%20larger%20than%20default%20for%20default%20empty%20table.%20It%27s%20already%20//%20supposed%20to%20be%20at%20default%20size.%20:%20DEFAULT_CAPACITY;%20//%20%e5%a6%82%e6%9e%9c%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e5%a4%a7%e4%ba%8e%e5%b7%b2%e6%9c%89%e7%9a%84%e6%9c%80%e5%a4%a7%e5%ae%b9%e9%87%8f%20if%20%28minCapacity%20%3e%20minExpand%29%20%7b%20ensureExplicitCapacity%28minCapacity%29;%20%7d%20%7d%20//%20mjy%ef%bc%9a%20%e7%a1%ae%e4%bf%9d%e5%86%85%e9%83%a8%e5%ae%b9%e9%87%8f%20private%20void%20ensureCapacityInternal%28int%20minCapacity%29%20%7b%20//%20mjy%ef%bc%9a%e5%a6%82%e6%9e%9c%e5%85%83%e7%b4%a0%e6%98%af%e7%a9%ba%20if%20%28elementData%20==%20DEFAULTCAPACITY_EMPTY_ELEMENTDATA%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%89%80%e9%9c%80%e8%a6%81%e7%9a%84%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e4%b8%ba%20%e9%bb%98%e8%ae%a4%e5%ae%b9%e9%87%8f%e5%92%8c%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e7%9b%b8%e6%af%94%20%e8%be%83%e5%a4%a7%e7%9a%84%e4%b8%80%e4%b8%aa%20minCapacity%20=%20Math.max%28DEFAULT_CAPACITY,%20minCapacity%29;%20%7d%20//%20%e7%a1%ae%e4%bf%9d%20%e5%ae%b9%e9%87%8f%20ensureExplicitCapacity%28minCapacity%29;%20%7d%20private%20void%20ensureExplicitCapacity%28int%20minCapacity%29%20%7b%20modCount++;%20//%20overflow-conscious%20code%20//%20mjy%ef%bc%9a%e6%89%80%e9%9c%80%e8%a6%81%e7%9a%84%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e5%87%8f%e5%8e%bb%e7%8e%b0%e5%9c%a8%e7%9a%84%e6%95%b0%e7%bb%84%e5%85%83%e7%b4%a0%e9%95%bf%e5%ba%a6%20%e5%a4%a7%e4%ba%8e0%20if%20%28minCapacity%20-%20elementData.length%20%3e%200%29%20//%20mjy%ef%bc%9a%e8%b0%83%e7%94%a8grow%e6%96%b9%e6%b3%95%e8%bf%9b%e8%a1%8c%e6%89%a9%e5%ae%b9%ef%bc%8c%e8%b0%83%e7%94%a8%e6%ad%a4%e6%96%b9%e6%b3%95%e4%bb%a3%e8%a1%a8%e5%b7%b2%e7%bb%8f%e5%bc%80%e5%a7%8b%e6%89%a9%e5%ae%b9%e4%ba%86%20grow%28minCapacity%29;%20%7d%20/**%20*%20The%20maximum%20size%20of%20array%20to%20allocate.%20*%20Some%20VMs%20reserve%20some%20header%20words%20in%20an%20array.%20*%20Attempts%20to%20allocate%20larger%20arrays%20may%20result%20in%20*%20OutOfMemoryError:%20Requested%20array%20size%20exceeds%20VM%20limit%20*%20mjy%ef%bc%9a%20%e6%98%afJVM%e8%83%bd%e5%88%86%e9%85%8d%e7%9a%84%e6%95%b0%e7%bb%84%e7%9a%84%e6%9c%80%e5%a4%a7%20%e5%a4%a7%e5%b0%8f%ef%bc%8c%e4%b8%80%e8%88%ac%e4%b8%baInteger.MAX_VALUE%20-%208%ef%bc%88%e8%bf%99%e5%92%8cJVM%e5%86%85%e9%83%a8%e5%ae%9e%e7%8e%b0%e6%9c%89%e5%85%b3%ef%bc%8c%e7%95%99%e5%87%ba%e4%ba%86%e4%b8%80%e4%ba%9b%e7%94%a8%e4%ba%8e%e5%af%b9%e8%b1%a1%e5%a4%b4%e4%bf%a1%e6%81%af%e7%9a%84%e7%a9%ba%e9%97%b4%ef%bc%89%e3%80%82%20*/%20private%20static%20final%20int%20MAX_ARRAY_SIZE%20=%20Integer.MAX_VALUE%20-%208;%20/**%20*%20Increases%20the%20capacity%20to%20ensure%20that%20it%20can%20hold%20at%20least%20the%20*%20number%20of%20elements%20specified%20by%20the%20minimum%20capacity%20argument.%20*%20mjy%ef%bc%9aArrayList%e6%89%a9%e5%ae%b9%e7%9a%84%e6%a0%b8%e5%bf%83%e6%96%b9%e6%b3%95%e3%80%82%20*%20*%20@param%20minCapacity%20the%20desired%20minimum%20capacity%20*/%20private%20void%20grow%28int%20minCapacity%29%20%7b%20//%20overflow-conscious%20code%20//%20mjy%ef%bc%9a%20%e8%a1%a8%e7%a4%ba%e5%bd%93%e5%89%8d%e6%95%b0%e7%bb%84%e7%9a%84%e5%ae%b9%e9%87%8f%ef%bc%88%e5%8d%b3%e5%bd%93%e5%89%8d%e5%ad%98%e5%82%a8%e5%85%83%e7%b4%a0%e7%9a%84%e6%95%b0%e7%bb%84%20elementData%20%e7%9a%84%e9%95%bf%e5%ba%a6%ef%bc%89%20int%20oldCapacity%20=%20elementData.length;%20//%20mjy%ef%bc%9a%e6%98%af%e6%96%b0%e7%9a%84%e6%95%b0%e7%bb%84%e5%ae%b9%e9%87%8f%ef%bc%8c%e8%ae%a1%e7%ae%97%e6%96%b9%e5%bc%8f%e6%98%af%e6%97%a7%e5%ae%b9%e9%87%8f%e7%9a%84%201.5%20%e5%80%8d%20%28oldCapacity%20+%20oldCapacity%20%3e%3e%201%ef%bc%8c%e5%8d%b3%e5%8f%b3%e7%a7%bb%e4%b8%80%e4%bd%8d%e8%a1%a8%e7%a4%ba%e9%99%a4%e4%bb%a52%29%e3%80%82%e9%80%9a%e8%bf%87%e8%bf%99%e7%a7%8d%e6%96%b9%e5%bc%8f%ef%bc%8cArrayList%20%e7%9a%84%e5%ae%b9%e9%87%8f%e4%bc%9a%e5%9c%a8%e9%9c%80%e8%a6%81%e6%97%b6%e4%bb%a5%e6%8c%87%e6%95%b0%e6%96%b9%e5%bc%8f%e5%a2%9e%e5%8a%a0%ef%bc%8c%e9%81%bf%e5%85%8d%e9%a2%91%e7%b9%81%e6%89%a9%e5%ae%b9%e3%80%82%20int%20newCapacity%20=%20oldCapacity%20+%20%28oldCapacity%20%3e%3e%201%29;%20//%20mjy%ef%bc%9aminCapacity%e6%98%af%e8%b0%83%e7%94%a8grow%e6%96%b9%e6%b3%95%e6%97%b6%e4%bc%a0%e5%85%a5%e7%9a%84%e5%8f%82%e6%95%b0%ef%bc%8c%e8%a1%a8%e7%a4%ba%e6%89%80%e9%9c%80%e7%9a%84%e6%9c%80%e5%b0%8f%e5%ae%b9%e9%87%8f%e3%80%82%e5%a6%82%e6%9e%9c%e8%ae%a1%e7%ae%97%e5%87%ba%e7%9a%84newCapacity%e5%b0%8f%e4%ba%8eminCapacity%ef%bc%8c%e9%82%a3%e4%b9%88%e7%9b%b4%e6%8e%a5%e5%b0%86newCapacity%e8%ae%be%e7%bd%ae%e4%b8%baminCapacity%ef%bc%8c%e7%a1%ae%e4%bf%9d%e6%96%b0%e5%ae%b9%e9%87%8f%e8%87%b3%e5%b0%91%e8%83%bd%e6%bb%a1%e8%b6%b3%e5%bd%93%e5%89%8d%e6%89%80%e9%9c%80%e7%9a%84%e7%a9%ba%e9%97%b4%e3%80%82%20if%20%28newCapacity%20-%20minCapacity%20%3c%200%29%20newCapacity%20=%20minCapacity;%20//%20mjy%ef%bc%9a%e5%a6%82%e6%9e%9cnewCapacity%e8%b6%85%e8%bf%87%e4%ba%86MAX_ARRAY_SIZE%ef%bc%8c%e8%b0%83%e7%94%a8%20hugeCapacity%28minCapacity%29%20%e6%96%b9%e6%b3%95%e6%9d%a5%e5%86%b3%e5%ae%9a%e5%ae%9e%e9%99%85%e7%9a%84%e5%ae%b9%e9%87%8f%e3%80%82%20if%20%28newCapacity%20-%20MAX_ARRAY_SIZE%20%3e%200%29%20newCapacity%20=%20hugeCapacity%28minCapacity%29;%20//%20minCapacity%20is%20usually%20close%20to%20size,%20so%20this%20is%20a%20win:%20//%20mjy%ef%bc%9a%e8%b0%83%e7%94%a8Arrays.copyOf%e6%96%b9%e6%b3%95%e5%b0%86%e7%8e%b0%e6%9c%89%e7%9a%84%e6%95%b0%e7%bb%84elementData%e5%a4%8d%e5%88%b6%e5%88%b0%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84%e6%95%b0%e7%bb%84%e4%b8%ad%ef%bc%8c%e6%96%b0%e6%95%b0%e7%bb%84%e7%9a%84%e9%95%bf%e5%ba%a6%e4%b8%ba%20newCapacity%ef%bc%8c%e5%ae%9e%e7%8e%b0%e4%ba%86%e6%95%b0%e7%bb%84%e7%9a%84%e6%89%a9%e5%ae%b9%e3%80%82%e8%bf%99%e4%b8%aa%e8%bf%87%e7%a8%8b%e4%bc%9a%e4%bf%9d%e7%95%99%e5%8e%9f%e6%95%b0%e7%bb%84%e4%b8%ad%e7%9a%84%e6%89%80%e6%9c%89%e5%85%83%e7%b4%a0%ef%bc%8c%e4%bd%86%e5%ba%95%e5%b1%82%e7%9a%84%e5%ad%98%e5%82%a8%e7%a9%ba%e9%97%b4%e5%b7%b2%e7%bb%8f%e6%89%a9%e5%b1%95%e3%80%82%20elementData%20=%20Arrays.copyOf%28elementData,%20newCapacity%29;%20%7d%20//%20mjy%ef%bc%9a%20%e5%a4%84%e7%90%86%e5%8f%af%e8%83%bd%e8%b6%85%e8%bf%87%e6%9c%80%e5%a4%a7%e6%95%b0%e7%bb%84%e5%a4%a7%e5%b0%8f%e7%9a%84%e6%83%85%e5%86%b5%20private%20static%20int%20hugeCapacity%28int%20minCapacity%29%20%7b%20//%20mjy%ef%bc%9a%20%e5%a6%82%e6%9e%9cminCapacity%e4%b8%ba%e8%b4%9f%e6%95%b0%ef%bc%8c%e6%84%8f%e5%91%b3%e7%9d%80%e5%8f%91%e7%94%9f%e4%ba%86%e5%ae%b9%e9%87%8f%e6%ba%a2%e5%87%ba%ef%bc%88%e4%be%8b%e5%a6%82%ef%bc%8c%e5%ae%b9%e9%87%8f%e8%ae%a1%e7%ae%97%e6%ba%a2%e5%87%ba%e4%ba%86Integer%e7%9a%84%e8%8c%83%e5%9b%b4%ef%bc%89%ef%bc%8c%e6%ad%a4%e6%97%b6%e6%8a%9b%e5%87%ba%20OutOfMemoryError%20if%20%28minCapacity%20%3c%200%29%20//%20overflow%20throw%20new%20OutOfMemoryError%28%29;%20//%20mjy%ef%bc%9a%e5%a6%82%e6%9e%9cminCapacity%e8%b6%85%e8%bf%87%e4%ba%86MAX_ARRAY_SIZE%ef%bc%8c%e8%bf%94%e5%9b%9eInteger.MAX_VALUE%ef%bc%8c%e5%8d%b3%e6%95%b0%e7%bb%84%e4%bc%9a%e6%89%a9%e5%b1%95%e5%88%b0%20JVM%20%e5%8f%af%e4%bb%a5%e6%94%af%e6%8c%81%e7%9a%84%e6%9c%80%e5%a4%a7%e5%80%bc%e3%80%82%e5%90%a6%e5%88%99%e5%8d%b3minCapacity%e5%b0%8f%e4%ba%8eMAX_ARRAY_SIZE%ef%bc%8c%e4%bd%86%e4%bb%8d%e7%84%b6%e8%b6%85%e5%87%ba%e4%ba%86%e5%90%88%e7%90%86%e8%8c%83%e5%9b%b4%ef%bc%8c%e5%88%99%e8%bf%94%e5%9b%9e%20MAX_ARRAY_SIZE%e3%80%82%20return%20%28minCapacity%20%3e%20MAX_ARRAY_SIZE%29%20?%20Integer.MAX_VALUE%20:%20MAX_ARRAY_SIZE;%20%7d%20/**%20*%20Returns%20the%20number%20of%20elements%20in%20this%20list.%20*%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e7%9a%84%e5%85%83%e7%b4%a0%e6%95%b0%20*%20*%20@return%20the%20number%20of%20elements%20in%20this%20list%20*/%20public%20int%20size%28%29%20%7b%20return%20size;%20%7d%20/**%20*%20Returns%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contains%20no%20elements.%20*%20mjy%ef%bc%9a%20%e5%88%a4%e6%96%ad%e6%98%af%e5%90%a6%e4%b8%ba%e7%a9%ba%20%e5%a6%82%e6%9e%9c%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e8%bf%94%e5%9b%9e%20true%20*%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contains%20no%20elements%20*/%20public%20boolean%20isEmpty%28%29%20%7b%20return%20size%20==%200;%20%7d%20/**%20*%20Returns%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contains%20the%20specified%20element.%20*%20More%20formally,%20returns%20%3ctt%3etrue%3c/tt%3e%20if%20and%20only%20if%20this%20list%20contains%20*%20at%20least%20one%20element%20%3ctt%3ee%3c/tt%3e%20such%20that%20*%20%3ctt%3e%28o==null&amp;nbsp;?&amp;nbsp;e==null&amp;nbsp;:&amp;nbsp;o.equals%28e%29%29%3c/tt%3e.%20*%20*%20@param%20o%20element%20whose%20presence%20in%20this%20list%20is%20to%20be%20tested%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contains%20the%20specified%20element%20*/%20//%20mjy%ef%bc%9a%20%e5%88%a4%e6%96%ad%e6%98%af%e5%90%a6%e5%8c%85%e5%90%ab%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%ef%bc%8c%e5%8c%85%e5%90%ab%e8%bf%94%e5%9b%9etrue%20public%20boolean%20contains%28Object%20o%29%20%7b%20//%20mjy%ef%bc%9a%20indexOf%28%29%e6%96%b9%e6%b3%95%ef%bc%9a%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%e7%9a%84%e9%a6%96%e6%ac%a1%e5%87%ba%e7%8e%b0%e7%9a%84%e7%b4%a2%e5%bc%95%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e6%ad%a4%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e4%b8%ba-1%20return%20indexOf%28o%29%20%3e=%200;%20%7d%20/**%20*%20Returns%20the%20index%20of%20the%20first%20occurrence%20of%20the%20specified%20element%20*%20in%20this%20list,%20or%20-1%20if%20this%20list%20does%20not%20contain%20the%20element.%20*%20More%20formally,%20returns%20the%20lowest%20index%20%3ctt%3ei%3c/tt%3e%20such%20that%20*%20%3ctt%3e%28o==null&amp;nbsp;?&amp;nbsp;get%28i%29==null&amp;nbsp;:&amp;nbsp;o.equals%28get%28i%29%29%29%3c/tt%3e,%20*%20or%20-1%20if%20there%20is%20no%20such%20index.%20*/%20//%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%e7%9a%84%e9%a6%96%e6%ac%a1%e5%87%ba%e7%8e%b0%e7%9a%84%e7%b4%a2%e5%bc%95%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e6%ad%a4%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e4%b8%ba-1%20public%20int%20indexOf%28Object%20o%29%20%7b%20//%20mjy%ef%bc%9a%20%e5%85%a5%e5%8f%82%e5%85%83%e7%b4%a0%e4%b8%ba%e7%a9%ba%20if%20%28o%20==%20null%29%20%7b%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20//%20mjy%ef%bc%9a%20%e5%88%a4%e6%96%ad%e6%98%af%e5%90%a6%e5%ad%98%e5%9c%a8%e7%a9%ba%e5%85%83%e7%b4%a0%20if%20%28elementData[i]%20==%20null%29%20return%20i;%20%7d%20else%20%7b%20//%20%e4%b8%8d%e4%b8%ba%e7%a9%ba%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20//%20mjy%ef%bc%9a%20equals%28%29%e6%96%b9%e6%b3%95%e6%af%94%e8%be%83%20if%20%28o.equals%28elementData[i]%29%29%20return%20i;%20%7d%20return%20-1;%20%7d%20/**%20*%20Returns%20the%20index%20of%20the%20last%20occurrence%20of%20the%20specified%20element%20*%20in%20this%20list,%20or%20-1%20if%20this%20list%20does%20not%20contain%20the%20element.%20*%20More%20formally,%20returns%20the%20highest%20index%20%3ctt%3ei%3c/tt%3e%20such%20that%20*%20%3ctt%3e%28o==null&amp;nbsp;?&amp;nbsp;get%28i%29==null&amp;nbsp;:&amp;nbsp;o.equals%28get%28i%29%29%29%3c/tt%3e,%20*%20or%20-1%20if%20there%20is%20no%20such%20index.%20*/%20//%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%e7%9a%84%e6%9c%80%e5%90%8e%e4%b8%80%e6%ac%a1%e5%87%ba%e7%8e%b0%e7%9a%84%e7%b4%a2%e5%bc%95%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e8%bf%94%e5%9b%9e-1%20public%20int%20lastIndexOf%28Object%20o%29%20%7b%20//%20%e5%80%92%e5%ba%8f%e5%be%aa%e7%8e%af%20if%20%28o%20==%20null%29%20%7b%20for%20%28int%20i%20=%20size%20-%201;%20i%20%3e=%200;%20i--%29%20if%20%28elementData[i]%20==%20null%29%20return%20i;%20%7d%20else%20%7b%20for%20%28int%20i%20=%20size%20-%201;%20i%20%3e=%200;%20i--%29%20if%20%28o.equals%28elementData[i]%29%29%20return%20i;%20%7d%20return%20-1;%20%7d%20/**%20*%20Returns%20a%20shallow%20copy%20of%20this%20%3ctt%3eArrayList%3c/tt%3e%20instance.%20%28The%20*%20elements%20themselves%20are%20not%20copied.%29%20*%20*%20@return%20a%20clone%20of%20this%20%3ctt%3eArrayList%3c/tt%3e%20instance%20*/%20//%20mjy%ef%bc%9a%20%e5%85%8b%e9%9a%86%e6%96%b9%e6%b3%95%ef%bc%8c%e8%bf%94%e5%9b%9e%e6%ad%a4ArrayList%e5%ae%9e%e4%be%8b%e7%9a%84%e6%b5%85%e6%8b%b7%20%ef%bc%88%e5%85%83%e7%b4%a0%e6%9c%ac%e8%ba%ab%e4%b8%8d%e8%a2%ab%e5%a4%8d%e5%88%b6%e3%80%82%ef%bc%89%20public%20Object%20clone%28%29%20%7b%20try%20%7b%20ArrayList%3c?%3e%20v%20=%20%28ArrayList%3c?%3e%29%20super.clone%28%29;%20//%20mjy%ef%bc%9a%20Arrays.copyOf%e5%8a%9f%e8%83%bd%e6%98%af%e5%ae%9e%e7%8e%b0%e6%95%b0%e7%bb%84%e7%9a%84%e5%a4%8d%e5%88%b6%ef%bc%8c%e8%bf%94%e5%9b%9e%e5%a4%8d%e5%88%b6%e5%90%8e%e7%9a%84%e6%95%b0%e7%bb%84%e3%80%82%e5%8f%82%e6%95%b0%e6%98%af%e8%a2%ab%e5%a4%8d%e5%88%b6%e7%9a%84%e6%95%b0%e7%bb%84%e5%92%8c%e5%a4%8d%e5%88%b6%e7%9a%84%e9%95%bf%e5%ba%a6%20v.elementData%20=%20Arrays.copyOf%28elementData,%20size%29;%20v.modCount%20=%200;%20return%20v;%20%7d%20catch%20%28CloneNotSupportedException%20e%29%20%7b%20//%20this%20shouldn%27t%20happen,%20since%20we%20are%20Cloneable%20//%20mjy%ef%bc%9a%20%e8%bf%99%e4%b8%8d%e5%ba%94%e8%af%a5%e5%8f%91%e7%94%9f%ef%bc%8c%e5%9b%a0%e4%b8%ba%e6%88%91%e4%bb%ac%e6%98%af%e5%8f%af%e4%bb%a5%e5%85%8b%e9%9a%86%e7%9a%84%20throw%20new%20InternalError%28e%29;%20%7d%20%7d%20/**%20*%20Returns%20an%20array%20containing%20all%20of%20the%20elements%20in%20this%20list%20*%20in%20proper%20sequence%20%28from%20first%20to%20last%20element%29.%20*%20mjy%ef%bc%9a%20%e4%bb%a5%e6%ad%a3%e7%a1%ae%e7%9a%84%e9%a1%ba%e5%ba%8f%ef%bc%88%e4%bb%8e%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%88%b0%e6%9c%80%e5%90%8e%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%ef%bc%89%e8%bf%94%e5%9b%9e%e4%b8%80%e4%b8%aa%e5%8c%85%e5%90%ab%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%89%80%e6%9c%89%e5%85%83%e7%b4%a0%e7%9a%84%e6%95%b0%e7%bb%84%e3%80%82%20*%20%3cp%3eThe%20returned%20array%20will%20be%20%22safe%22%20in%20that%20no%20references%20to%20it%20are%20*%20maintained%20by%20this%20list.%20%28In%20other%20words,%20this%20method%20must%20allocate%20*%20a%20new%20array%29.%20The%20caller%20is%20thus%20free%20to%20modify%20the%20returned%20array.%20*%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e7%9a%84%e6%95%b0%e7%bb%84%e5%b0%86%e6%98%af%e5%ae%89%e5%85%a8%e7%9a%84%ef%bc%8c%e5%9b%a0%e4%b8%ba%e8%af%a5%e5%88%97%e8%a1%a8%e4%b8%8d%e4%bf%9d%e7%95%99%e5%af%b9%e5%ae%83%e7%9a%84%e5%bc%95%e7%94%a8%e3%80%82%20%ef%bc%88%e6%8d%a2%e5%8f%a5%e8%af%9d%e8%af%b4%ef%bc%8c%e8%bf%99%e4%b8%aa%e6%96%b9%e6%b3%95%e5%bf%85%e9%a1%bb%e5%88%86%e9%85%8d%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84%e6%95%b0%e7%bb%84%ef%bc%89%e3%80%82%20*%20%3cp%3eThis%20method%20acts%20as%20bridge%20between%20array-based%20and%20collection-based%20*%20APIs.%20*%20mjy%ef%bc%9a%20%e5%9b%a0%e6%ad%a4%ef%bc%8c%e8%b0%83%e7%94%a8%e8%80%85%e5%8f%af%e4%bb%a5%e8%87%aa%e7%94%b1%e5%9c%b0%e4%bf%ae%e6%94%b9%e8%bf%94%e5%9b%9e%e7%9a%84%e6%95%b0%e7%bb%84%e3%80%82%20%e6%ad%a4%e6%96%b9%e6%b3%95%e5%85%85%e5%bd%93%e5%9f%ba%e4%ba%8e%e9%98%b5%e5%88%97%e5%92%8c%e5%9f%ba%e4%ba%8e%e9%9b%86%e5%90%88%e7%9a%84API%e4%b9%8b%e9%97%b4%e7%9a%84%e6%a1%a5%e6%a2%81%e3%80%82%20*%20*%20@return%20an%20array%20containing%20all%20of%20the%20elements%20in%20this%20list%20in%20*%20proper%20sequence%20*/%20public%20Object[]%20toArray%28%29%20%7b%20return%20Arrays.copyOf%28elementData,%20size%29;%20%7d%20/**%20*%20Returns%20an%20array%20containing%20all%20of%20the%20elements%20in%20this%20list%20in%20proper%20*%20sequence%20%28from%20first%20to%20last%20element%29;%20the%20runtime%20type%20of%20the%20returned%20*%20array%20is%20that%20of%20the%20specified%20array.%20If%20the%20list%20fits%20in%20the%20*%20specified%20array,%20it%20is%20returned%20therein.%20Otherwise,%20a%20new%20array%20is%20*%20allocated%20with%20the%20runtime%20type%20of%20the%20specified%20array%20and%20the%20size%20of%20*%20this%20list.%20*%20*%20%3cp%3eIf%20the%20list%20fits%20in%20the%20specified%20array%20with%20room%20to%20spare%20*%20%28i.e.,%20the%20array%20has%20more%20elements%20than%20the%20list%29,%20the%20element%20in%20*%20the%20array%20immediately%20following%20the%20end%20of%20the%20collection%20is%20set%20to%20*%20%3ctt%3enull%3c/tt%3e.%20%28This%20is%20useful%20in%20determining%20the%20length%20of%20the%20*%20list%20%3ci%3eonly%3c/i%3e%20if%20the%20caller%20knows%20that%20the%20list%20does%20not%20contain%20*%20any%20null%20elements.%29%20*%20*%20@param%20a%20the%20array%20into%20which%20the%20elements%20of%20the%20list%20are%20to%20*%20be%20stored,%20if%20it%20is%20big%20enough;%20otherwise,%20a%20new%20array%20of%20the%20*%20same%20runtime%20type%20is%20allocated%20for%20this%20purpose.%20*%20@return%20an%20array%20containing%20the%20elements%20of%20the%20list%20*%20@throws%20ArrayStoreException%20if%20the%20runtime%20type%20of%20the%20specified%20array%20*%20is%20not%20a%20supertype%20of%20the%20runtime%20type%20of%20every%20element%20in%20*%20this%20list%20*%20@throws%20NullPointerException%20if%20the%20specified%20array%20is%20null%20*/%20@SuppressWarnings%28%22unchecked%22%29%20public%20%3cT%3e%20T[]%20toArray%28T[]%20a%29%20%7b%20if%20%28a.length%20%3c%20size%29%20//%20Make%20a%20new%20array%20of%20a%27s%20runtime%20type,%20but%20my%20contents:%20return%20%28T[]%29%20Arrays.copyOf%28elementData,%20size,%20a.getClass%28%29%29;%20System.arraycopy%28elementData,%200,%20a,%200,%20size%29;%20if%20%28a.length%20%3e%20size%29%20a[size]%20=%20null;%20return%20a;%20%7d%20//%20Positional%20Access%20Operations%20@SuppressWarnings%28%22unchecked%22%29%20E%20elementData%28int%20index%29%20%7b%20return%20%28E%29%20elementData[index];%20%7d%20/**%20*%20Returns%20the%20element%20at%20the%20specified%20position%20in%20this%20list.%20*%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e4%bd%8d%e7%bd%ae%e7%9a%84%e5%85%83%e7%b4%a0%20*%20*%20@param%20index%20index%20of%20the%20element%20to%20return%20*%20@return%20the%20element%20at%20the%20specified%20position%20in%20this%20list%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20E%20get%28int%20index%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%a0%a1%e9%aa%8c%e6%95%b0%e7%bb%84%e4%b8%8b%e6%a0%87%e8%b6%8a%e7%95%8c%20rangeCheck%28index%29;%20return%20elementData%28index%29;%20%7d%20/**%20*%20Replaces%20the%20element%20at%20the%20specified%20position%20in%20this%20list%20with%20*%20the%20specified%20element.%20*%20mjy%ef%bc%9a%20%e7%94%a8%e6%8c%87%e5%ae%9a%e7%9a%84%e5%85%83%e7%b4%a0%e6%9b%bf%e6%8d%a2%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e4%bd%8d%e7%bd%ae%e7%9a%84%e5%85%83%e7%b4%a0%20*%20*%20@param%20index%20index%20of%20the%20element%20to%20replace%20*%20@param%20element%20element%20to%20be%20stored%20at%20the%20specified%20position%20*%20@return%20the%20element%20previously%20at%20the%20specified%20position%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20E%20set%28int%20index,%20E%20element%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%a0%a1%e9%aa%8c%e6%95%b0%e7%bb%84%e4%b8%8b%e6%a0%87%e8%b6%8a%e7%95%8c%20rangeCheck%28index%29;%20//%20mjy%ef%bc%9a%20%e6%97%a7%e7%9a%84%e5%80%bc%20E%20oldValue%20=%20elementData%28index%29;%20//%20mjy%ef%bc%9a%20%e6%96%b0%e7%9a%84%e8%b5%8b%e5%80%bc%20elementData[index]%20=%20element;%20//%20mjy%ef%bc%9a%20%e8%bf%94%e5%9b%9e%e6%97%a7%e7%9a%84%e5%80%bc%20return%20oldValue;%20%7d%20/**%20*%20Appends%20the%20specified%20element%20to%20the%20end%20of%20this%20list.%20*%20mjy%ef%bc%9a%20%e6%b7%bb%e5%8a%a0%e5%85%83%e7%b4%a0%ef%bc%8c%e5%b0%86%e6%8c%87%e5%ae%9a%e7%9a%84%e5%85%83%e7%b4%a0%e8%bf%bd%e5%8a%a0%e5%88%b0%e6%ad%a4%e5%88%97%e8%a1%a8%e7%9a%84%e6%9c%ab%e5%b0%be%20*%20*%20@param%20e%20element%20to%20be%20appended%20to%20this%20list%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20%28as%20specified%20by%20%7b@link%20Collection#add%7d%29%20*/%20public%20boolean%20add%28E%20e%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%89%a9%e5%ae%b9%e6%a0%a1%e9%aa%8c%20ensureCapacityInternal%28size%20+%201%29;%20//%20Increments%20modCount!!%20//%20mjy%ef%bc%9a%20%e6%b7%bb%e5%8a%a0%e5%85%83%e7%b4%a0%20elementData[size++]%20=%20e;%20return%20true;%20%7d%20/**%20*%20Inserts%20the%20specified%20element%20at%20the%20specified%20position%20in%20this%20*%20list.%20Shifts%20the%20element%20currently%20at%20that%20position%20%28if%20any%29%20and%20*%20any%20subsequent%20elements%20to%20the%20right%20%28adds%20one%20to%20their%20indices%29.%20*%20mjy%ef%bc%9a%20%e6%b7%bb%e5%8a%a0%e5%85%83%e7%b4%a0%ef%bc%8c%e5%9c%a8%e6%ad%a4%e5%88%97%e8%a1%a8%e4%b8%ad%e7%9a%84%e6%8c%87%e5%ae%9a%e4%bd%8d%e7%bd%ae%e6%8f%92%e5%85%a5%e6%8c%87%e5%ae%9a%e7%9a%84%e5%85%83%e7%b4%a0%20*%20mjy%ef%bc%9a%e5%85%88%e8%b0%83%e7%94%a8%20rangeCheckForAdd%20%e5%af%b9index%e8%bf%9b%e8%a1%8c%e7%95%8c%e9%99%90%e6%a3%80%e6%9f%a5%ef%bc%9b%e7%84%b6%e5%90%8e%e8%b0%83%e7%94%a8%20ensureCapacityInternal%20%e6%96%b9%e6%b3%95%e4%bf%9d%e8%af%81capacity%e8%b6%b3%e5%a4%9f%e5%a4%a7%ef%bc%9b%e5%86%8d%e5%b0%86%e4%bb%8eindex%e5%bc%80%e5%a7%8b%e4%b9%8b%e5%90%8e%e7%9a%84%e6%89%80%e6%9c%89%e6%88%90%e5%91%98%e5%90%8e%e7%a7%bb%e4%b8%80%e4%b8%aa%e4%bd%8d%e7%bd%ae%ef%bc%9b%e5%b0%86element%e6%8f%92%e5%85%a5index%e4%bd%8d%e7%bd%ae%ef%bc%9b%e6%9c%80%e5%90%8esize%e5%8a%a01%e3%80%82%20*%20*%20@param%20index%20index%20at%20which%20the%20specified%20element%20is%20to%20be%20inserted%20*%20@param%20element%20element%20to%20be%20inserted%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20void%20add%28int%20index,%20E%20element%29%20%7b%20//%20mjy%ef%bc%9a%20%e6%a0%a1%e9%aa%8c%20rangeCheckForAdd%28index%29;%20ensureCapacityInternal%28size%20+%201%29;%20//%20Increments%20modCount!!%20//%20mjy%ef%bc%9a%20System.arraycopy%28%29%e8%bf%99%e4%b8%aa%e5%ae%9e%e7%8e%b0%e6%95%b0%e7%bb%84%e4%b9%8b%e9%97%b4%e5%a4%8d%e5%88%b6%e7%9a%84%e6%96%b9%e6%b3%95%e4%b8%80%e5%ae%9a%e8%a6%81%e7%9c%8b%e4%b8%80%e4%b8%8b%ef%bc%8c%e4%b8%8b%e9%9d%a2%e5%b0%b1%e7%94%a8%e5%88%b0%e4%ba%86arraycopy%28%29%e6%96%b9%e6%b3%95%e5%ae%9e%e7%8e%b0%e6%95%b0%e7%bb%84%e8%87%aa%e5%b7%b1%e5%a4%8d%e5%88%b6%e8%87%aa%e5%b7%b1%20System.arraycopy%28elementData,%20index,%20elementData,%20index%20+%201,%20size%20-%20index%29;%20elementData[index]%20=%20element;%20size++;%20%7d%20/**%20*%20Removes%20the%20element%20at%20the%20specified%20position%20in%20this%20list.%20*%20Shifts%20any%20subsequent%20elements%20to%20the%20left%20%28subtracts%20one%20from%20their%20*%20indices%29.%20*%20mjy%ef%bc%9a%e5%88%a0%e9%99%a4%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%a0%e9%99%a4%e8%af%a5%e5%88%97%e8%a1%a8%e4%b8%ad%e6%8c%87%e5%ae%9a%e4%bd%8d%e7%bd%ae%e7%9a%84%e5%85%83%e7%b4%a0%e3%80%82%20%e5%b0%86%e4%bb%bb%e4%bd%95%e5%90%8e%e7%bb%ad%e5%85%83%e7%b4%a0%e7%a7%bb%e5%8a%a8%e5%88%b0%e5%b7%a6%e4%be%a7%ef%bc%88%e4%bb%8e%e5%85%b6%e7%b4%a2%e5%bc%95%e4%b8%ad%e5%87%8f%e5%8e%bb%e4%b8%80%e4%b8%aa%e5%85%83%e7%b4%a0%ef%bc%89%20*%20*%20@param%20index%20the%20index%20of%20the%20element%20to%20be%20removed%20*%20@return%20the%20element%20that%20was%20removed%20from%20the%20list%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20E%20remove%28int%20index%29%20%7b%20rangeCheck%28index%29;%20modCount++;%20E%20oldValue%20=%20elementData%28index%29;%20int%20numMoved%20=%20size%20-%20index%20-%201;%20if%20%28numMoved%20%3e%200%29%20System.arraycopy%28elementData,%20index%20+%201,%20elementData,%20index,%20numMoved%29;%20elementData[--size]%20=%20null;%20//%20clear%20to%20let%20GC%20do%20its%20work%20return%20oldValue;%20%7d%20/**%20*%20Removes%20the%20first%20occurrence%20of%20the%20specified%20element%20from%20this%20list,%20*%20if%20it%20is%20present.%20If%20the%20list%20does%20not%20contain%20the%20element,%20it%20is%20*%20unchanged.%20More%20formally,%20removes%20the%20element%20with%20the%20lowest%20index%20*%20%3ctt%3ei%3c/tt%3e%20such%20that%20*%20%3ctt%3e%28o==null&amp;nbsp;?&amp;nbsp;get%28i%29==null&amp;nbsp;:&amp;nbsp;o.equals%28get%28i%29%29%29%3c/tt%3e%20*%20%28if%20such%20an%20element%20exists%29.%20Returns%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20*%20contained%20the%20specified%20element%20%28or%20equivalently,%20if%20this%20list%20*%20changed%20as%20a%20result%20of%20the%20call%29.%20*%20mjy%ef%bc%9a%20%e4%bb%8e%e5%88%97%e8%a1%a8%e4%b8%ad%e5%88%a0%e9%99%a4%e6%8c%87%e5%ae%9a%e5%85%83%e7%b4%a0%e7%9a%84%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%87%ba%e7%8e%b0%ef%bc%88%e5%a6%82%e6%9e%9c%e5%ad%98%e5%9c%a8%ef%bc%89%e3%80%82%20%e5%a6%82%e6%9e%9c%e5%88%97%e8%a1%a8%e4%b8%8d%e5%8c%85%e5%90%ab%e8%af%a5%e5%85%83%e7%b4%a0%ef%bc%8c%e5%88%99%e5%ae%83%e4%b8%8d%e4%bc%9a%e6%9b%b4%e6%94%b9%e3%80%82%20*%20*%20@param%20o%20element%20to%20be%20removed%20from%20this%20list,%20if%20present%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20contained%20the%20specified%20element%20*/%20public%20boolean%20remove%28Object%20o%29%20%7b%20if%20%28o%20==%20null%29%20%7b%20for%20%28int%20index%20=%200;%20index%20%3c%20size;%20index++%29%20if%20%28elementData[index]%20==%20null%29%20%7b%20fastRemove%28index%29;%20return%20true;%20%7d%20%7d%20else%20%7b%20for%20%28int%20index%20=%200;%20index%20%3c%20size;%20index++%29%20if%20%28o.equals%28elementData[index]%29%29%20%7b%20fastRemove%28index%29;%20return%20true;%20%7d%20%7d%20return%20false;%20%7d%20/*%20*%20Private%20remove%20method%20that%20skimjy%20bounds%20checking%20and%20does%20not%20*%20return%20the%20value%20removed.%20*/%20private%20void%20fastRemove%28int%20index%29%20%7b%20modCount++;%20int%20numMoved%20=%20size%20-%20index%20-%201;%20if%20%28numMoved%20%3e%200%29%20System.arraycopy%28elementData,%20index%20+%201,%20elementData,%20index,%20numMoved%29;%20elementData[--size]%20=%20null;%20//%20clear%20to%20let%20GC%20do%20its%20work%20%7d%20/**%20*%20Removes%20all%20of%20the%20elements%20from%20this%20list.%20The%20list%20will%20*%20be%20empty%20after%20this%20call%20returns.%20*%20mjy%ef%bc%9a%20%e4%bb%8e%e5%88%97%e8%a1%a8%e4%b8%ad%e6%b8%85%e7%a9%ba%ef%bc%88%e5%88%a0%e9%99%a4%ef%bc%89%e6%89%80%e6%9c%89%e5%85%83%e7%b4%a0%e3%80%82%20*/%20public%20void%20clear%28%29%20%7b%20modCount++;%20//%20clear%20to%20let%20GC%20do%20its%20work%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20elementData[i]%20=%20null;%20size%20=%200;%20%7d%20/**%20*%20Appends%20all%20of%20the%20elements%20in%20the%20specified%20collection%20to%20the%20end%20of%20*%20this%20list,%20in%20the%20order%20that%20they%20are%20returned%20by%20the%20*%20specified%20collection%27s%20Iterator.%20The%20behavior%20of%20this%20operation%20is%20*%20undefined%20if%20the%20specified%20collection%20is%20modified%20while%20the%20operation%20*%20is%20in%20progress.%20%28This%20implies%20that%20the%20behavior%20of%20this%20call%20is%20*%20undefined%20if%20the%20specified%20collection%20is%20this%20list,%20and%20this%20*%20list%20is%20nonempty.%29%20*%20*%20@param%20c%20collection%20containing%20elements%20to%20be%20added%20to%20this%20list%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20changed%20as%20a%20result%20of%20the%20call%20*%20@throws%20NullPointerException%20if%20the%20specified%20collection%20is%20null%20*/%20public%20boolean%20addAll%28Collection%3c?%20extends%20E%3e%20c%29%20%7b%20Object[]%20a%20=%20c.toArray%28%29;%20int%20numNew%20=%20a.length;%20ensureCapacityInternal%28size%20+%20numNew%29;%20//%20Increments%20modCount%20System.arraycopy%28a,%200,%20elementData,%20size,%20numNew%29;%20size%20+=%20numNew;%20return%20numNew%20!=%200;%20%7d%20/**%20*%20Inserts%20all%20of%20the%20elements%20in%20the%20specified%20collection%20into%20this%20*%20list,%20starting%20at%20the%20specified%20position.%20Shifts%20the%20element%20*%20currently%20at%20that%20position%20%28if%20any%29%20and%20any%20subsequent%20elements%20to%20*%20the%20right%20%28increases%20their%20indices%29.%20The%20new%20elements%20will%20appear%20*%20in%20the%20list%20in%20the%20order%20that%20they%20are%20returned%20by%20the%20*%20specified%20collection%27s%20iterator.%20*%20*%20@param%20index%20index%20at%20which%20to%20insert%20the%20first%20element%20from%20the%20*%20specified%20collection%20*%20@param%20c%20collection%20containing%20elements%20to%20be%20added%20to%20this%20list%20*%20@return%20%3ctt%3etrue%3c/tt%3e%20if%20this%20list%20changed%20as%20a%20result%20of%20the%20call%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*%20@throws%20NullPointerException%20if%20the%20specified%20collection%20is%20null%20*/%20public%20boolean%20addAll%28int%20index,%20Collection%3c?%20extends%20E%3e%20c%29%20%7b%20rangeCheckForAdd%28index%29;%20Object[]%20a%20=%20c.toArray%28%29;%20int%20numNew%20=%20a.length;%20ensureCapacityInternal%28size%20+%20numNew%29;%20//%20Increments%20modCount%20int%20numMoved%20=%20size%20-%20index;%20if%20%28numMoved%20%3e%200%29%20System.arraycopy%28elementData,%20index,%20elementData,%20index%20+%20numNew,%20numMoved%29;%20System.arraycopy%28a,%200,%20elementData,%20index,%20numNew%29;%20size%20+=%20numNew;%20return%20numNew%20!=%200;%20%7d%20/**%20*%20Removes%20from%20this%20list%20all%20of%20the%20elements%20whose%20index%20is%20between%20*%20%7b@code%20fromIndex%7d,%20inclusive,%20and%20%7b@code%20toIndex%7d,%20exclusive.%20*%20Shifts%20any%20succeeding%20elements%20to%20the%20left%20%28reduces%20their%20index%29.%20*%20This%20call%20shortens%20the%20list%20by%20%7b@code%20%28toIndex%20-%20fromIndex%29%7d%20elements.%20*%20%28If%20%7b@code%20toIndex==fromIndex%7d,%20this%20operation%20has%20no%20effect.%29%20*%20*%20@throws%20IndexOutOfBoundsException%20if%20%7b@code%20fromIndex%7d%20or%20*%20%7b@code%20toIndex%7d%20is%20out%20of%20range%20*%20%28%7b@code%20fromIndex%20%3c%200%20%7c%7c%20*%20fromIndex%20%3e=%20size%28%29%20%7c%7c%20*%20toIndex%20%3e%20size%28%29%20%7c%7c%20*%20toIndex%20%3c%20fromIndex%7d%29%20*/%20protected%20void%20removeRange%28int%20fromIndex,%20int%20toIndex%29%20%7b%20modCount++;%20int%20numMoved%20=%20size%20-%20toIndex;%20System.arraycopy%28elementData,%20toIndex,%20elementData,%20fromIndex,%20numMoved%29;%20//%20clear%20to%20let%20GC%20do%20its%20work%20int%20newSize%20=%20size%20-%20%28toIndex%20-%20fromIndex%29;%20for%20%28int%20i%20=%20newSize;%20i%20%3c%20size;%20i++%29%20%7b%20elementData[i]%20=%20null;%20%7d%20size%20=%20newSize;%20%7d%20/**%20*%20Checks%20if%20the%20given%20index%20is%20in%20range.%20If%20not,%20throws%20an%20appropriate%20*%20runtime%20exception.%20This%20method%20does%20*not*%20check%20if%20the%20index%20is%20*%20negative:%20It%20is%20always%20used%20immediately%20prior%20to%20an%20array%20access,%20*%20which%20throws%20an%20ArrayIndexOutOfBoundsException%20if%20index%20is%20negative.%20*/%20private%20void%20rangeCheck%28int%20index%29%20%7b%20if%20%28index%20%3e=%20size%29%20throw%20new%20IndexOutOfBoundsException%28outOfBoundsMsg%28index%29%29;%20%7d%20/**%20*%20A%20version%20of%20rangeCheck%20used%20by%20add%20and%20addAll.%20*/%20private%20void%20rangeCheckForAdd%28int%20index%29%20%7b%20if%20%28index%20%3e%20size%20%7c%7c%20index%20%3c%200%29%20throw%20new%20IndexOutOfBoundsException%28outOfBoundsMsg%28index%29%29;%20%7d%20/**%20*%20Constructs%20an%20IndexOutOfBoundsException%20detail%20message.%20*%20Of%20the%20many%20possible%20refactorings%20of%20the%20error%20handling%20code,%20*%20this%20%22outlining%22%20performs%20best%20with%20both%20server%20and%20client%20VMs.%20*/%20private%20String%20outOfBoundsMsg%28int%20index%29%20%7b%20return%20%22Index:%20%22%20+%20index%20+%20%22,%20Size:%20%22%20+%20size;%20%7d%20/**%20*%20Removes%20from%20this%20list%20all%20of%20its%20elements%20that%20are%20contained%20in%20the%20*%20specified%20collection.%20*%20*%20@param%20c%20collection%20containing%20elements%20to%20be%20removed%20from%20this%20list%20*%20@return%20%7b@code%20true%7d%20if%20this%20list%20changed%20as%20a%20result%20of%20the%20call%20*%20@throws%20ClassCastException%20if%20the%20class%20of%20an%20element%20of%20this%20list%20*%20is%20incompatible%20with%20the%20specified%20collection%20*%20%28%3ca%20href=%22Collection.html#optional-restrictions%22%3eoptional%3c/a%3e%29%20*%20@throws%20NullPointerException%20if%20this%20list%20contains%20a%20null%20element%20and%20the%20*%20specified%20collection%20does%20not%20permit%20null%20elements%20*%20%28%3ca%20href=%22Collection.html#optional-restrictions%22%3eoptional%3c/a%3e%29,%20*%20or%20if%20the%20specified%20collection%20is%20null%20*%20@see%20Collection#contains%28Object%29%20*/%20public%20boolean%20removeAll%28Collection%3c?%3e%20c%29%20%7b%20Objects.requireNonNull%28c%29;%20return%20batchRemove%28c,%20false%29;%20%7d%20/**%20*%20Retains%20only%20the%20elements%20in%20this%20list%20that%20are%20contained%20in%20the%20*%20specified%20collection.%20In%20other%20words,%20removes%20from%20this%20list%20all%20*%20of%20its%20elements%20that%20are%20not%20contained%20in%20the%20specified%20collection.%20*%20*%20@param%20c%20collection%20containing%20elements%20to%20be%20retained%20in%20this%20list%20*%20@return%20%7b@code%20true%7d%20if%20this%20list%20changed%20as%20a%20result%20of%20the%20call%20*%20@throws%20ClassCastException%20if%20the%20class%20of%20an%20element%20of%20this%20list%20*%20is%20incompatible%20with%20the%20specified%20collection%20*%20%28%3ca%20href=%22Collection.html#optional-restrictions%22%3eoptional%3c/a%3e%29%20*%20@throws%20NullPointerException%20if%20this%20list%20contains%20a%20null%20element%20and%20the%20*%20specified%20collection%20does%20not%20permit%20null%20elements%20*%20%28%3ca%20href=%22Collection.html#optional-restrictions%22%3eoptional%3c/a%3e%29,%20*%20or%20if%20the%20specified%20collection%20is%20null%20*%20@see%20Collection#contains%28Object%29%20*/%20public%20boolean%20retainAll%28Collection%3c?%3e%20c%29%20%7b%20Objects.requireNonNull%28c%29;%20return%20batchRemove%28c,%20true%29;%20%7d%20private%20boolean%20batchRemove%28Collection%3c?%3e%20c,%20boolean%20complement%29%20%7b%20final%20Object[]%20elementData%20=%20this.elementData;%20int%20r%20=%200,%20w%20=%200;%20boolean%20modified%20=%20false;%20try%20%7b%20for%20%28;%20r%20%3c%20size;%20r++%29%20if%20%28c.contains%28elementData[r]%29%20==%20complement%29%20elementData[w++]%20=%20elementData[r];%20%7d%20finally%20%7b%20//%20Preserve%20behavioral%20compatibility%20with%20AbstractCollection,%20//%20even%20if%20c.contains%28%29%20throws.%20if%20%28r%20!=%20size%29%20%7b%20System.arraycopy%28elementData,%20r,%20elementData,%20w,%20size%20-%20r%29;%20w%20+=%20size%20-%20r;%20%7d%20if%20%28w%20!=%20size%29%20%7b%20//%20clear%20to%20let%20GC%20do%20its%20work%20for%20%28int%20i%20=%20w;%20i%20%3c%20size;%20i++%29%20elementData[i]%20=%20null;%20modCount%20+=%20size%20-%20w;%20size%20=%20w;%20modified%20=%20true;%20%7d%20%7d%20return%20modified;%20%7d%20/**%20*%20Save%20the%20state%20of%20the%20%3ctt%3eArrayList%3c/tt%3e%20instance%20to%20a%20stream%20%28that%20*%20is,%20serialize%20it%29.%20*%20*%20@serialData%20The%20length%20of%20the%20array%20backing%20the%20%3ctt%3eArrayList%3c/tt%3e%20*%20instance%20is%20emitted%20%28int%29,%20followed%20by%20all%20of%20its%20elements%20*%20%28each%20an%20%3ctt%3eObject%3c/tt%3e%29%20in%20the%20proper%20order.%20*/%20private%20void%20writeObject%28java.io.ObjectOutputStream%20s%29%20throws%20java.io.IOException%20%7b%20//%20Write%20out%20element%20count,%20and%20any%20hidden%20stuff%20int%20expectedModCount%20=%20modCount;%20s.defaultWriteObject%28%29;%20//%20Write%20out%20size%20as%20capacity%20for%20behavioural%20compatibility%20with%20clone%28%29%20s.writeInt%28size%29;%20//%20Write%20out%20all%20elements%20in%20the%20proper%20order.%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20%7b%20s.writeObject%28elementData[i]%29;%20%7d%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20/**%20*%20Reconstitute%20the%20%3ctt%3eArrayList%3c/tt%3e%20instance%20from%20a%20stream%20%28that%20is,%20*%20deserialize%20it%29.%20*/%20private%20void%20readObject%28java.io.ObjectInputStream%20s%29%20throws%20java.io.IOException,%20ClassNotFoundException%20%7b%20elementData%20=%20EMPTY_ELEMENTDATA;%20//%20Read%20in%20size,%20and%20any%20hidden%20stuff%20s.defaultReadObject%28%29;%20//%20Read%20in%20capacity%20s.readInt%28%29;%20//%20ignored%20if%20%28size%20%3e%200%29%20%7b%20//%20be%20like%20clone%28%29,%20allocate%20array%20based%20upon%20size%20not%20capacity%20ensureCapacityInternal%28size%29;%20Object[]%20a%20=%20elementData;%20//%20Read%20in%20all%20elements%20in%20the%20proper%20order.%20for%20%28int%20i%20=%200;%20i%20%3c%20size;%20i++%29%20%7b%20a[i]%20=%20s.readObject%28%29;%20%7d%20%7d%20%7d%20/**%20*%20Returns%20a%20list%20iterator%20over%20the%20elements%20in%20this%20list%20%28in%20proper%20*%20sequence%29,%20starting%20at%20the%20specified%20position%20in%20the%20list.%20*%20The%20specified%20index%20indicates%20the%20first%20element%20that%20would%20be%20*%20returned%20by%20an%20initial%20call%20to%20%7b@link%20ListIterator#next%20next%7d.%20*%20An%20initial%20call%20to%20%7b@link%20ListIterator#previous%20previous%7d%20would%20*%20return%20the%20element%20with%20the%20specified%20index%20minus%20one.%20*%20*%20%3cp%3eThe%20returned%20list%20iterator%20is%20%3ca%20href=%22#fail-fast%22%3e%3ci%3efail-fast%3c/i%3e%3c/a%3e.%20*%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*/%20public%20ListIterator%3cE%3e%20listIterator%28int%20index%29%20%7b%20if%20%28index%20%3c%200%20%7c%7c%20index%20%3e%20size%29%20throw%20new%20IndexOutOfBoundsException%28%22Index:%20%22%20+%20index%29;%20return%20new%20ListItr%28index%29;%20%7d%20/**%20*%20Returns%20a%20list%20iterator%20over%20the%20elements%20in%20this%20list%20%28in%20proper%20*%20sequence%29.%20*%20*%20%3cp%3eThe%20returned%20list%20iterator%20is%20%3ca%20href=%22#fail-fast%22%3e%3ci%3efail-fast%3c/i%3e%3c/a%3e.%20*%20*%20@see%20#listIterator%28int%29%20*/%20public%20ListIterator%3cE%3e%20listIterator%28%29%20%7b%20return%20new%20ListItr%280%29;%20%7d%20/**%20*%20Returns%20an%20iterator%20over%20the%20elements%20in%20this%20list%20in%20proper%20sequence.%20*%20*%20%3cp%3eThe%20returned%20iterator%20is%20%3ca%20href=%22#fail-fast%22%3e%3ci%3efail-fast%3c/i%3e%3c/a%3e.%20*%20*%20@return%20an%20iterator%20over%20the%20elements%20in%20this%20list%20in%20proper%20sequence%20*/%20public%20Iterator%3cE%3e%20iterator%28%29%20%7b%20return%20new%20Itr%28%29;%20%7d%20/**%20*%20An%20optimized%20version%20of%20AbstractList.Itr%20*/%20private%20class%20Itr%20implements%20Iterator%3cE%3e%20%7b%20int%20cursor;%20//%20index%20of%20next%20element%20to%20return%20int%20lastRet%20=%20-1;%20//%20index%20of%20last%20element%20returned;%20-1%20if%20no%20such%20int%20expectedModCount%20=%20modCount;%20public%20boolean%20hasNext%28%29%20%7b%20return%20cursor%20!=%20size;%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20E%20next%28%29%20%7b%20checkForComodification%28%29;%20int%20i%20=%20cursor;%20if%20%28i%20%3e=%20size%29%20throw%20new%20NoSuchElementException%28%29;%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28i%20%3e=%20elementData.length%29%20throw%20new%20ConcurrentModificationException%28%29;%20cursor%20=%20i%20+%201;%20return%20%28E%29%20elementData[lastRet%20=%20i];%20%7d%20public%20void%20remove%28%29%20%7b%20if%20%28lastRet%20%3c%200%29%20throw%20new%20IllegalStateException%28%29;%20checkForComodification%28%29;%20try%20%7b%20ArrayList.this.remove%28lastRet%29;%20cursor%20=%20lastRet;%20lastRet%20=%20-1;%20expectedModCount%20=%20modCount;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20@Override%20@SuppressWarnings%28%22unchecked%22%29%20public%20void%20forEachRemaining%28Consumer%3c?%20super%20E%3e%20consumer%29%20%7b%20Objects.requireNonNull%28consumer%29;%20final%20int%20size%20=%20ArrayList.this.size;%20int%20i%20=%20cursor;%20if%20%28i%20%3e=%20size%29%20%7b%20return;%20%7d%20final%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28i%20%3e=%20elementData.length%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20while%20%28i%20!=%20size%20&&%20modCount%20==%20expectedModCount%29%20%7b%20consumer.accept%28%28E%29%20elementData[i++]%29;%20%7d%20//%20update%20once%20at%20end%20of%20iteration%20to%20reduce%20heap%20write%20traffic%20cursor%20=%20i;%20lastRet%20=%20i%20-%201;%20checkForComodification%28%29;%20%7d%20final%20void%20checkForComodification%28%29%20%7b%20if%20%28modCount%20!=%20expectedModCount%29%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20/**%20*%20An%20optimized%20version%20of%20AbstractList.ListItr%20*/%20private%20class%20ListItr%20extends%20Itr%20implements%20ListIterator%3cE%3e%20%7b%20ListItr%28int%20index%29%20%7b%20super%28%29;%20cursor%20=%20index;%20%7d%20public%20boolean%20hasPrevious%28%29%20%7b%20return%20cursor%20!=%200;%20%7d%20public%20int%20nextIndex%28%29%20%7b%20return%20cursor;%20%7d%20public%20int%20previousIndex%28%29%20%7b%20return%20cursor%20-%201;%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20E%20previous%28%29%20%7b%20checkForComodification%28%29;%20int%20i%20=%20cursor%20-%201;%20if%20%28i%20%3c%200%29%20throw%20new%20NoSuchElementException%28%29;%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28i%20%3e=%20elementData.length%29%20throw%20new%20ConcurrentModificationException%28%29;%20cursor%20=%20i;%20return%20%28E%29%20elementData[lastRet%20=%20i];%20%7d%20public%20void%20set%28E%20e%29%20%7b%20if%20%28lastRet%20%3c%200%29%20throw%20new%20IllegalStateException%28%29;%20checkForComodification%28%29;%20try%20%7b%20ArrayList.this.set%28lastRet,%20e%29;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20public%20void%20add%28E%20e%29%20%7b%20checkForComodification%28%29;%20try%20%7b%20int%20i%20=%20cursor;%20ArrayList.this.add%28i,%20e%29;%20cursor%20=%20i%20+%201;%20lastRet%20=%20-1;%20expectedModCount%20=%20modCount;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20%7d%20/**%20*%20Returns%20a%20view%20of%20the%20portion%20of%20this%20list%20between%20the%20specified%20*%20%7b@code%20fromIndex%7d,%20inclusive,%20and%20%7b@code%20toIndex%7d,%20exclusive.%20%28If%20*%20%7b@code%20fromIndex%7d%20and%20%7b@code%20toIndex%7d%20are%20equal,%20the%20returned%20list%20is%20*%20empty.%29%20The%20returned%20list%20is%20backed%20by%20this%20list,%20so%20non-structural%20*%20changes%20in%20the%20returned%20list%20are%20reflected%20in%20this%20list,%20and%20vice-versa.%20*%20The%20returned%20list%20supports%20all%20of%20the%20optional%20list%20operations.%20*%20*%20%3cp%3eThis%20method%20eliminates%20the%20need%20for%20explicit%20range%20operations%20%28of%20*%20the%20sort%20that%20commonly%20exist%20for%20arrays%29.%20Any%20operation%20that%20expects%20*%20a%20list%20can%20be%20used%20as%20a%20range%20operation%20by%20passing%20a%20subList%20view%20*%20instead%20of%20a%20whole%20list.%20For%20example,%20the%20following%20idiom%20*%20removes%20a%20range%20of%20elements%20from%20a%20list:%20*%20%3cpre%3e%20*%20list.subList%28from,%20to%29.clear%28%29;%20*%20%3c/pre%3e%20*%20Similar%20idioms%20may%20be%20constructed%20for%20%7b@link%20#indexOf%28Object%29%7d%20and%20*%20%7b@link%20#lastIndexOf%28Object%29%7d,%20and%20all%20of%20the%20algorithms%20in%20the%20*%20%7b@link%20Collections%7d%20class%20can%20be%20applied%20to%20a%20subList.%20*%20*%20%3cp%3eThe%20semantics%20of%20the%20list%20returned%20by%20this%20method%20become%20undefined%20if%20*%20the%20backing%20list%20%28i.e.,%20this%20list%29%20is%20%3ci%3estructurally%20modified%3c/i%3e%20in%20*%20any%20way%20other%20than%20via%20the%20returned%20list.%20%28Structural%20modifications%20are%20*%20those%20that%20change%20the%20size%20of%20this%20list,%20or%20otherwise%20perturb%20it%20in%20such%20*%20a%20fashion%20that%20iterations%20in%20progress%20may%20yield%20incorrect%20results.%29%20*%20*%20@throws%20IndexOutOfBoundsException%20%7b@inheritDoc%7d%20*%20@throws%20IllegalArgumentException%20%7b@inheritDoc%7d%20*/%20public%20List%3cE%3e%20subList%28int%20fromIndex,%20int%20toIndex%29%20%7b%20subListRangeCheck%28fromIndex,%20toIndex,%20size%29;%20return%20new%20SubList%28this,%200,%20fromIndex,%20toIndex%29;%20%7d%20static%20void%20subListRangeCheck%28int%20fromIndex,%20int%20toIndex,%20int%20size%29%20%7b%20if%20%28fromIndex%20%3c%200%29%20throw%20new%20IndexOutOfBoundsException%28%22fromIndex%20=%20%22%20+%20fromIndex%29;%20if%20%28toIndex%20%3e%20size%29%20throw%20new%20IndexOutOfBoundsException%28%22toIndex%20=%20%22%20+%20toIndex%29;%20if%20%28fromIndex%20%3e%20toIndex%29%20throw%20new%20IllegalArgumentException%28%22fromIndex%28%22%20+%20fromIndex%20+%20%22%29%20%3e%20toIndex%28%22%20+%20toIndex%20+%20%22%29%22%29;%20%7d%20private%20class%20SubList%20extends%20AbstractList%3cE%3e%20implements%20RandomAccess%20%7b%20private%20final%20AbstractList%3cE%3e%20parent;%20private%20final%20int%20parentOffset;%20private%20final%20int%20offset;%20int%20size;%20SubList%28AbstractList%3cE%3e%20parent,%20int%20offset,%20int%20fromIndex,%20int%20toIndex%29%20%7b%20this.parent%20=%20parent;%20this.parentOffset%20=%20fromIndex;%20this.offset%20=%20offset%20+%20fromIndex;%20this.size%20=%20toIndex%20-%20fromIndex;%20this.modCount%20=%20ArrayList.this.modCount;%20%7d%20public%20E%20set%28int%20index,%20E%20e%29%20%7b%20rangeCheck%28index%29;%20checkForComodification%28%29;%20E%20oldValue%20=%20ArrayList.this.elementData%28offset%20+%20index%29;%20ArrayList.this.elementData[offset%20+%20index]%20=%20e;%20return%20oldValue;%20%7d%20public%20E%20get%28int%20index%29%20%7b%20rangeCheck%28index%29;%20checkForComodification%28%29;%20return%20ArrayList.this.elementData%28offset%20+%20index%29;%20%7d%20public%20int%20size%28%29%20%7b%20checkForComodification%28%29;%20return%20this.size;%20%7d%20public%20void%20add%28int%20index,%20E%20e%29%20%7b%20rangeCheckForAdd%28index%29;%20checkForComodification%28%29;%20parent.add%28parentOffset%20+%20index,%20e%29;%20this.modCount%20=%20parent.modCount;%20this.size++;%20%7d%20public%20E%20remove%28int%20index%29%20%7b%20rangeCheck%28index%29;%20checkForComodification%28%29;%20E%20result%20=%20parent.remove%28parentOffset%20+%20index%29;%20this.modCount%20=%20parent.modCount;%20this.size--;%20return%20result;%20%7d%20protected%20void%20removeRange%28int%20fromIndex,%20int%20toIndex%29%20%7b%20checkForComodification%28%29;%20parent.removeRange%28parentOffset%20+%20fromIndex,%20parentOffset%20+%20toIndex%29;%20this.modCount%20=%20parent.modCount;%20this.size%20-=%20toIndex%20-%20fromIndex;%20%7d%20public%20boolean%20addAll%28Collection%3c?%20extends%20E%3e%20c%29%20%7b%20return%20addAll%28this.size,%20c%29;%20%7d%20public%20boolean%20addAll%28int%20index,%20Collection%3c?%20extends%20E%3e%20c%29%20%7b%20rangeCheckForAdd%28index%29;%20int%20cSize%20=%20c.size%28%29;%20if%20%28cSize%20==%200%29%20return%20false;%20checkForComodification%28%29;%20parent.addAll%28parentOffset%20+%20index,%20c%29;%20this.modCount%20=%20parent.modCount;%20this.size%20+=%20cSize;%20return%20true;%20%7d%20public%20Iterator%3cE%3e%20iterator%28%29%20%7b%20return%20listIterator%28%29;%20%7d%20public%20ListIterator%3cE%3e%20listIterator%28final%20int%20index%29%20%7b%20checkForComodification%28%29;%20rangeCheckForAdd%28index%29;%20final%20int%20offset%20=%20this.offset;%20return%20new%20ListIterator%3cE%3e%28%29%20%7b%20int%20cursor%20=%20index;%20int%20lastRet%20=%20-1;%20int%20expectedModCount%20=%20ArrayList.this.modCount;%20public%20boolean%20hasNext%28%29%20%7b%20return%20cursor%20!=%20SubList.this.size;%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20E%20next%28%29%20%7b%20checkForComodification%28%29;%20int%20i%20=%20cursor;%20if%20%28i%20%3e=%20SubList.this.size%29%20throw%20new%20NoSuchElementException%28%29;%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28offset%20+%20i%20%3e=%20elementData.length%29%20throw%20new%20ConcurrentModificationException%28%29;%20cursor%20=%20i%20+%201;%20return%20%28E%29%20elementData[offset%20+%20%28lastRet%20=%20i%29];%20%7d%20public%20boolean%20hasPrevious%28%29%20%7b%20return%20cursor%20!=%200;%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20E%20previous%28%29%20%7b%20checkForComodification%28%29;%20int%20i%20=%20cursor%20-%201;%20if%20%28i%20%3c%200%29%20throw%20new%20NoSuchElementException%28%29;%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28offset%20+%20i%20%3e=%20elementData.length%29%20throw%20new%20ConcurrentModificationException%28%29;%20cursor%20=%20i;%20return%20%28E%29%20elementData[offset%20+%20%28lastRet%20=%20i%29];%20%7d%20@SuppressWarnings%28%22unchecked%22%29%20public%20void%20forEachRemaining%28Consumer%3c?%20super%20E%3e%20consumer%29%20%7b%20Objects.requireNonNull%28consumer%29;%20final%20int%20size%20=%20SubList.this.size;%20int%20i%20=%20cursor;%20if%20%28i%20%3e=%20size%29%20%7b%20return;%20%7d%20final%20Object[]%20elementData%20=%20ArrayList.this.elementData;%20if%20%28offset%20+%20i%20%3e=%20elementData.length%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20while%20%28i%20!=%20size%20&&%20modCount%20==%20expectedModCount%29%20%7b%20consumer.accept%28%28E%29%20elementData[offset%20+%20%28i++%29]%29;%20%7d%20//%20update%20once%20at%20end%20of%20iteration%20to%20reduce%20heap%20write%20traffic%20lastRet%20=%20cursor%20=%20i;%20checkForComodification%28%29;%20%7d%20public%20int%20nextIndex%28%29%20%7b%20return%20cursor;%20%7d%20public%20int%20previousIndex%28%29%20%7b%20return%20cursor%20-%201;%20%7d%20public%20void%20remove%28%29%20%7b%20if%20%28lastRet%20%3c%200%29%20throw%20new%20IllegalStateException%28%29;%20checkForComodification%28%29;%20try%20%7b%20SubList.this.remove%28lastRet%29;%20cursor%20=%20lastRet;%20lastRet%20=%20-1;%20expectedModCount%20=%20ArrayList.this.modCount;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20public%20void%20set%28E%20e%29%20%7b%20if%20%28lastRet%20%3c%200%29%20throw%20new%20IllegalStateException%28%29;%20checkForComodification%28%29;%20try%20%7b%20ArrayList.this.set%28offset%20+%20lastRet,%20e%29;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20public%20void%20add%28E%20e%29%20%7b%20checkForComodification%28%29;%20try%20%7b%20int%20i%20=%20cursor;%20SubList.this.add%28i,%20e%29;%20cursor%20=%20i%20+%201;%20lastRet%20=%20-1;%20expectedModCount%20=%20ArrayList.this.modCount;%20%7d%20catch%20%28IndexOutOfBoundsException%20ex%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20final%20void%20checkForComodification%28%29%20%7b%20if%20%28expectedModCount%20!=%20ArrayList.this.modCount%29%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d;%20%7d%20public%20List%3cE%3e%20subList%28int%20fromIndex,%20int%20toIndex%29%20%7b%20subListRangeCheck%28fromIndex,%20toIndex,%20size%29;%20return%20new%20SubList%28this,%20offset,%20fromIndex,%20toIndex%29;%20%7d%20private%20void%20rangeCheck%28int%20index%29%20%7b%20if%20%28index%20%3c%200%20%7c%7c%20index%20%3e=%20this.size%29%20throw%20new%20IndexOutOfBoundsException%28outOfBoundsMsg%28index%29%29;%20%7d%20private%20void%20rangeCheckForAdd%28int%20index%29%20%7b%20if%20%28index%20%3c%200%20%7c%7c%20index%20%3e%20this.size%29%20throw%20new%20IndexOutOfBoundsException%28outOfBoundsMsg%28index%29%29;%20%7d%20private%20String%20outOfBoundsMsg%28int%20index%29%20%7b%20return%20%22Index:%20%22%20+%20index%20+%20%22,%20Size:%20%22%20+%20this.size;%20%7d%20private%20void%20checkForComodification%28%29%20%7b%20if%20%28ArrayList.this.modCount%20!=%20this.modCount%29%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20public%20Spliterator%3cE%3e%20spliterator%28%29%20%7b%20checkForComodification%28%29;%20return%20new%20ArrayListSpliterator%3cE%3e%28ArrayList.this,%20offset,%20offset%20+%20this.size,%20this.modCount%29;%20%7d%20%7d%20@Override%20public%20void%20forEach%28Consumer%3c?%20super%20E%3e%20action%29%20%7b%20Objects.requireNonNull%28action%29;%20final%20int%20expectedModCount%20=%20modCount;%20@SuppressWarnings%28%22unchecked%22%29%20final%20E[]%20elementData%20=%20%28E[]%29%20this.elementData;%20final%20int%20size%20=%20this.size;%20for%20%28int%20i%20=%200;%20modCount%20==%20expectedModCount%20&&%20i%20%3c%20size;%20i++%29%20%7b%20action.accept%28elementData[i]%29;%20%7d%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20%7d%20/**%20*%20Creates%20a%20%3cem%3e%3ca%20href=%22Spliterator.html#binding%22%3elate-binding%3c/a%3e%3c/em%3e%20*%20and%20%3cem%3efail-fast%3c/em%3e%20%7b@link%20Spliterator%7d%20over%20the%20elements%20in%20this%20*%20list.%20*%20*%20%3cp%3eThe%20%7b@code%20Spliterator%7d%20reports%20%7b@link%20Spliterator#SIZED%7d,%20*%20%7b@link%20Spliterator#SUBSIZED%7d,%20and%20%7b@link%20Spliterator#ORDERED%7d.%20*%20Overriding%20implementations%20should%20document%20the%20reporting%20of%20additional%20*%20characteristic%20values.%20*%20*%20@return%20a%20%7b@code%20Spliterator%7d%20over%20the%20elements%20in%20this%20list%20*%20@since%201.8%20*/%20@Override%20public%20Spliterator%3cE%3e%20spliterator%28%29%20%7b%20return%20new%20ArrayListSpliterator%3c%3e%28this,%200,%20-1,%200%29;%20%7d%20/**%20*%20Index-based%20split-by-two,%20lazily%20initialized%20Spliterator%20*/%20static%20final%20class%20ArrayListSpliterator%3cE%3e%20implements%20Spliterator%3cE%3e%20%7b%20/*%20*%20If%20ArrayLists%20were%20immutable,%20or%20structurally%20immutable%20%28no%20*%20adds,%20removes,%20etc%29,%20we%20could%20implement%20their%20spliterators%20*%20with%20Arrays.spliterator.%20Instead%20we%20detect%20as%20much%20*%20interference%20during%20traversal%20as%20practical%20without%20*%20sacrificing%20much%20performance.%20We%20rely%20primarily%20on%20*%20modCounts.%20These%20are%20not%20guaranteed%20to%20detect%20concurrency%20*%20violations,%20and%20are%20sometimes%20overly%20conservative%20about%20*%20within-thread%20interference,%20but%20detect%20enough%20problems%20to%20*%20be%20worthwhile%20in%20practice.%20To%20carry%20this%20out,%20we%20%281%29%20lazily%20*%20initialize%20fence%20and%20expectedModCount%20until%20the%20latest%20*%20point%20that%20we%20need%20to%20commit%20to%20the%20state%20we%20are%20checking%20*%20against;%20thus%20improving%20precision.%20%28This%20doesn%27t%20apply%20to%20*%20SubLists,%20that%20create%20spliterators%20with%20current%20non-lazy%20*%20values%29.%20%282%29%20We%20perform%20only%20a%20single%20*%20ConcurrentModificationException%20check%20at%20the%20end%20of%20forEach%20*%20%28the%20most%20performance-sensitive%20method%29.%20When%20using%20forEach%20*%20%28as%20opposed%20to%20iterators%29,%20we%20can%20normally%20only%20detect%20*%20interference%20after%20actions,%20not%20before.%20Further%20*%20CME-triggering%20checks%20apply%20to%20all%20other%20possible%20*%20violations%20of%20assumptions%20for%20example%20null%20or%20too-small%20*%20elementData%20array%20given%20its%20size%28%29,%20that%20could%20only%20have%20*%20occurred%20due%20to%20interference.%20This%20allows%20the%20inner%20loop%20*%20of%20forEach%20to%20run%20without%20any%20further%20checks,%20and%20*%20simplifies%20lambda-resolution.%20While%20this%20does%20entail%20a%20*%20number%20of%20checks,%20note%20that%20in%20the%20common%20case%20of%20*%20list.stream%28%29.forEach%28a%29,%20no%20checks%20or%20other%20computation%20*%20occur%20anywhere%20other%20than%20inside%20forEach%20itself.%20The%20other%20*%20less-often-used%20methods%20cannot%20take%20advantage%20of%20most%20of%20*%20these%20streamlinings.%20*/%20private%20final%20ArrayList%3cE%3e%20list;%20private%20int%20index;%20//%20current%20index,%20modified%20on%20advance/split%20private%20int%20fence;%20//%20-1%20until%20used;%20then%20one%20past%20last%20index%20private%20int%20expectedModCount;%20//%20initialized%20when%20fence%20set%20/**%20*%20Create%20new%20spliterator%20covering%20the%20given%20range%20*/%20ArrayListSpliterator%28ArrayList%3cE%3e%20list,%20int%20origin,%20int%20fence,%20int%20expectedModCount%29%20%7b%20this.list%20=%20list;%20//%20OK%20if%20null%20unless%20traversed%20this.index%20=%20origin;%20this.fence%20=%20fence;%20this.expectedModCount%20=%20expectedModCount;%20%7d%20private%20int%20getFence%28%29%20%7b%20//%20initialize%20fence%20to%20size%20on%20first%20use%20int%20hi;%20//%20%28a%20specialized%20variant%20appears%20in%20method%20forEach%29%20ArrayList%3cE%3e%20lst;%20if%20%28%28hi%20=%20fence%29%20%3c%200%29%20%7b%20if%20%28%28lst%20=%20list%29%20==%20null%29%20hi%20=%20fence%20=%200;%20else%20%7b%20expectedModCount%20=%20lst.modCount;%20hi%20=%20fence%20=%20lst.size;%20%7d%20%7d%20return%20hi;%20%7d%20public%20ArrayListSpliterator%3cE%3e%20trySplit%28%29%20%7b%20int%20hi%20=%20getFence%28%29,%20lo%20=%20index,%20mid%20=%20%28lo%20+%20hi%29%20%3e%3e%3e%201;%20return%20%28lo%20%3e=%20mid%29%20?%20null%20:%20//%20divide%20range%20in%20half%20unless%20too%20small%20new%20ArrayListSpliterator%3cE%3e%28list,%20lo,%20index%20=%20mid,%20expectedModCount%29;%20%7d%20public%20boolean%20tryAdvance%28Consumer%3c?%20super%20E%3e%20action%29%20%7b%20if%20%28action%20==%20null%29%20throw%20new%20NullPointerException%28%29;%20int%20hi%20=%20getFence%28%29,%20i%20=%20index;%20if%20%28i%20%3c%20hi%29%20%7b%20index%20=%20i%20+%201;%20@SuppressWarnings%28%22unchecked%22%29%20E%20e%20=%20%28E%29%20list.elementData[i];%20action.accept%28e%29;%20if%20%28list.modCount%20!=%20expectedModCount%29%20throw%20new%20ConcurrentModificationException%28%29;%20return%20true;%20%7d%20return%20false;%20%7d%20public%20void%20forEachRemaining%28Consumer%3c?%20super%20E%3e%20action%29%20%7b%20int%20i,%20hi,%20mc;%20//%20hoist%20accesses%20and%20checks%20from%20loop%20ArrayList%3cE%3e%20lst;%20Object[]%20a;%20if%20%28action%20==%20null%29%20throw%20new%20NullPointerException%28%29;%20if%20%28%28lst%20=%20list%29%20!=%20null%20&&%20%28a%20=%20lst.elementData%29%20!=%20null%29%20%7b%20if%20%28%28hi%20=%20fence%29%20%3c%200%29%20%7b%20mc%20=%20lst.modCount;%20hi%20=%20lst.size;%20%7d%20else%20mc%20=%20expectedModCount;%20if%20%28%28i%20=%20index%29%20%3e=%200%20&&%20%28index%20=%20hi%29%20%3c=%20a.length%29%20%7b%20for%20%28;%20i%20%3c%20hi;%20++i%29%20%7b%20@SuppressWarnings%28%22unchecked%22%29%20E%20e%20=%20%28E%29%20a[i];%20action.accept%28e%29;%20%7d%20if%20%28lst.modCount%20==%20mc%29%20return;%20%7d%20%7d%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20public%20long%20estimateSize%28%29%20%7b%20return%20%28long%29%20%28getFence%28%29%20-%20index%29;%20%7d%20public%20int%20characteristics%28%29%20%7b%20return%20Spliterator.ORDERED%20%7c%20Spliterator.SIZED%20%7c%20Spliterator.SUBSIZED;%20%7d%20%7d%20@Override%20public%20boolean%20removeIf%28Predicate%3c?%20super%20E%3e%20filter%29%20%7b%20Objects.requireNonNull%28filter%29;%20//%20figure%20out%20which%20elements%20are%20to%20be%20removed%20//%20any%20exception%20thrown%20from%20the%20filter%20predicate%20at%20this%20stage%20//%20will%20leave%20the%20collection%20unmodified%20int%20removeCount%20=%200;%20final%20BitSet%20removeSet%20=%20new%20BitSet%28size%29;%20final%20int%20expectedModCount%20=%20modCount;%20final%20int%20size%20=%20this.size;%20for%20%28int%20i%20=%200;%20modCount%20==%20expectedModCount%20&&%20i%20%3c%20size;%20i++%29%20%7b%20@SuppressWarnings%28%22unchecked%22%29%20final%20E%20element%20=%20%28E%29%20elementData[i];%20if%20%28filter.test%28element%29%29%20%7b%20removeSet.set%28i%29;%20removeCount++;%20%7d%20%7d%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20//%20shift%20surviving%20elements%20left%20over%20the%20spaces%20left%20by%20removed%20elements%20final%20boolean%20anyToRemove%20=%20removeCount%20%3e%200;%20if%20%28anyToRemove%29%20%7b%20final%20int%20newSize%20=%20size%20-%20removeCount;%20for%20%28int%20i%20=%200,%20j%20=%200;%20%28i%20%3c%20size%29%20&&%20%28j%20%3c%20newSize%29;%20i++,%20j++%29%20%7b%20i%20=%20removeSet.nextClearBit%28i%29;%20elementData[j]%20=%20elementData[i];%20%7d%20for%20%28int%20k%20=%20newSize;%20k%20%3c%20size;%20k++%29%20%7b%20elementData[k]%20=%20null;%20//%20Let%20gc%20do%20its%20work%20%7d%20this.size%20=%20newSize;%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20modCount++;%20%7d%20return%20anyToRemove;%20%7d%20@Override%20@SuppressWarnings%28%22unchecked%22%29%20public%20void%20replaceAll%28UnaryOperator%3cE%3e%20operator%29%20%7b%20Objects.requireNonNull%28operator%29;%20final%20int%20expectedModCount%20=%20modCount;%20final%20int%20size%20=%20this.size;%20for%20%28int%20i%20=%200;%20modCount%20==%20expectedModCount%20&&%20i%20%3c%20size;%20i++%29%20%7b%20elementData[i]%20=%20operator.apply%28%28E%29%20elementData[i]%29;%20%7d%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20modCount++;%20%7d%20@Override%20@SuppressWarnings%28%22unchecked%22%29%20public%20void%20sort%28Comparator%3c?%20super%20E%3e%20c%29%20%7b%20final%20int%20expectedModCount%20=%20modCount;%20Arrays.sort%28%28E[]%29%20elementData,%200,%20size,%20c%29;%20if%20%28modCount%20!=%20expectedModCount%29%20%7b%20throw%20new%20ConcurrentModificationException%28%29;%20%7d%20modCount++;%20%7d%20%7d%20%e6%89%a9%e5%ae%b9%e5%88%86%e6%9e%90&amp;pics=https://www.mujaspace.com/icons/apple-touch-icon.png&amp;site=muja%27s%20Space%20" title="分享到「QQ 空间」" target=_blank rel=noopener><svg viewBox="0 0 24 24" class="icon qzone-icon"><path d="M23.985 9.202c-.032-.099-.127-.223-.334-.258-.207-.036-7.351-1.406-7.351-1.406s-.105-.022-.198-.07c-.092-.047-.127-.167-.127-.167S12.447.956 12.349.77C12.25.583 12.104.532 12 .532s-.251.051-.349.238c-.098.186-3.626 6.531-3.626 6.531s-.035.12-.128.167c-.092.047-.197.07-.197.07S.556 8.908.348 8.943c-.208.036-.302.16-.333.258a.477.477.0 00.125.449l5.362 5.49s.072.08.119.172c.016.104.005.21.005.21s-1.189 7.242-1.22 7.45.075.369.159.43c.083.062.233.106.421.013.189-.093 6.812-3.261 6.812-3.261s.098-.044.201-.061.201.061.201.061 6.623 3.168 6.812 3.261c.188.094.338.049.421-.013a.463.463.0 00.159-.43c-.021-.14-.93-5.677-.93-5.677.876-.54 1.425-1.039 1.849-1.747-2.594.969-6.006 1.717-9.415 1.866-.915.041-2.41.097-3.473-.015-.678-.071-1.17-.144-1.243-.438-.053-.215.054-.46.545-.831a2640.5 2640.5.0 012.861-2.155c1.285-.968 3.559-2.47 3.559-2.731.0-.285-2.144-.781-4.037-.781-1.945.0-2.275.132-2.811.168-.488.034-.769.005-.804-.138-.06-.248.183-.389.588-.568.709-.314 1.86-.594 1.984-.626.194-.052 3.082-.805 5.618-.535 1.318.14 3.244.668 3.244 1.276.0.342-1.721 1.494-3.225 2.597-1.149.843-2.217 1.561-2.217 1.688.0.342 3.533 1.241 6.689 1.01l.003-.022c.048-.092.119-.172.119-.172l5.362-5.49a.477.477.0 00.127-.449z"/></svg></a></div><div class="share-item qrcode"><div class=qrcode-container title=通过「二维码」><svg viewBox="0 0 448 512" class="icon qrcode-icon"><path d="M0 224h192V32H0v192zM64 96h64v64H64V96zm192-64v192h192V32H256zm128 128h-64V96h64v64zM0 480h192V288H0v192zm64-128h64v64H64v-64zm352-64h32v128h-96v-32h-32v96h-64V288h96v32h64v-32zm0 160h32v32h-32v-32zm-64 0h32v32h-32v-32z"/></svg><div id=qrcode-img></div></div><script src=https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js></script><script>const typeNumber=0,errorCorrectionLevel="L",qr=qrcode(typeNumber,errorCorrectionLevel);qr.addData("https://www.mujaspace.com/tech/2023/arraylist%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"),qr.make(),document.getElementById("qrcode-img").innerHTML=qr.createImgTag()</script></div></div></div><div class=related-posts><h2 class=related-title>相关文章：<svg viewBox="0 0 512 512" class="icon related-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6.0-12-5.4-12-12v-92h-92c-6.6.0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6.0 12 5.4 12 12v92h92c6.6.0 12 5.4 12 12v56z"/></svg></h2><ul class=related-list><li class=related-item><a href=/tech/2023/jvm%E7%9B%B8%E5%85%B3/ class=related-link>JVM相关</a></li><li class=related-item><a href=/tech/2023/mysql%E5%9F%BA%E7%A1%80/ class=related-link>MySQL基础</a></li><li class=related-item><a href=/tech/2023/mysql%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/ class=related-link>MySQL索引</a></li><li class=related-item><a href=/tech/2023/java%E9%9B%86%E5%90%88/ class=related-link>Java集合</a></li><li class=related-item><a href=/tech/2023/java%E5%9F%BA%E7%A1%80/ class=related-link>Java基础</a></li></ul></div><div class=post-tags><a href=/tags/tech/ rel=tag class=post-tags-link><svg viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49.0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882.0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>Tech</a></div></div></main><div id=back-to-top class=back-to-top><a href=#><svg viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6.0-33.9L207 39c9.4-9.4 24.6-9.4 33.9.0l194.3 194.3c9.4 9.4 9.4 24.6.0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3.0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a></div><footer id=footer class=footer><div class=footer-inner><div class=site-info>©&nbsp;2022–2024&nbsp;<svg viewBox="0 0 512 512" class="icon footer-icon"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3.0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>&nbsp;muja</div><div class=powered-by>Powered by <a href=https://github.com/gohugoio/hugo target=_blank rel=noopener>Hugo</a> | Theme is <a href=https://github.com/reuixiy/hugo-theme-meme target=_blank rel=noopener>MemE</a></div><div class=site-copyright><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel=noopener>CC BY-NC-SA 4.0</a></div><ul class=socials><li class=socials-item><a href=/rss.xml target=_blank rel="external noopener" title=RSS><svg viewBox="0 0 24 24" class="icon social-icon"><path d="M19.199 24C19.199 13.467 10.533 4.8.0 4.8V0c13.165.0 24 10.835 24 24h-4.801zM3.291 17.415c1.814.0 3.293 1.479 3.293 3.295.0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526.0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727.0 15.909 7.184 15.909 15.91z"/></svg></a></li><li class=socials-item><a href=mailto:mujaaa@163.com target=_blank rel="external noopener" title=Email><svg viewBox="0 0 512 512" class="icon social-icon"><path d="M464 64H48C21.49 64 0 85.49.0 112v288c0 26.51 21.49 48 48 48h416c26.51.0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 4e2V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V4e2H48z"/></svg></a></li><li class=socials-item><a href=https://github.com/minimua target=_blank rel="external noopener" title=GitHub><svg viewBox="0 0 24 24" class="icon social-icon"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></li><li class=socials-item><a href=https://twitter.com/minimua target=_blank rel="external noopener" title=Twitter><svg viewBox="0 0 512 512" class="icon social-icon"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></a></li><li class=socials-item><a href=https://t.me/minimuaaa target=_blank rel="external noopener" title=Telegram><svg viewBox="0 0 496 512" class="icon social-icon"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"/></svg></a></li><li class=socials-item><a href=https://weibo.com/u/2335343907 target=_blank rel="external noopener" title=Weibo><svg viewBox="0 0 512 512" class="icon social-icon"><path d="M407 177.6c7.6-24-13.4-46.8-37.4-41.7-22 4.8-28.8-28.1-7.1-32.8 50.1-10.9 92.3 37.1 76.5 84.8-6.8 21.2-38.8 10.8-32-10.3zM214.8 446.7C108.5 446.7.0 395.3.0 310.4c0-44.3 28-95.4 76.3-143.7C176 67 279.5 65.8 249.9 161c-4 13.1 12.3 5.7 12.3 6 79.5-33.6 140.5-16.8 114 51.4-3.7 9.4 1.1 10.9 8.3 13.1 135.7 42.3 34.8 215.2-169.7 215.2zm143.7-146.3c-5.4-55.7-78.5-94-163.4-85.7-84.8 8.6-148.8 60.3-143.4 116s78.5 94 163.4 85.7c84.8-8.6 148.8-60.3 143.4-116zM347.9 35.1c-25.9 5.6-16.8 43.7 8.3 38.3 72.3-15.2 134.8 52.8 111.7 124-7.4 24.2 29.1 37 37.4 12 31.9-99.8-55.1-195.9-157.4-174.3zm-78.5 311c-17.1 38.8-66.8 60-109.1 46.3-40.8-13.1-58-53.4-40.3-89.7 17.7-35.4 63.1-55.4 103.4-45.1 42 10.8 63.1 50.2 46 88.5zm-86.3-30c-12.9-5.4-30 .3-38 12.9-8.3 12.9-4.3 28 8.6 34 13.1 6 30.8.3 39.1-12.9 8-13.1 3.7-28.3-9.7-34zm32.6-13.4c-5.1-1.7-11.4.6-14.3 5.4-2.9 5.1-1.4 10.6 3.7 12.9 5.1 2 11.7-.3 14.6-5.4 2.8-5.2 1.1-10.9-4-12.9z"/></svg></a></li></ul></div></footer></div><script src=https://cdn.jsdelivr.net/npm/medium-zoom@latest/dist/medium-zoom.min.js></script><script>let imgNodes=document.querySelectorAll("div.post-body img");imgNodes=Array.from(imgNodes).filter(e=>e.parentNode.tagName!=="A"),mediumZoom(imgNodes,{background:"hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)"})</script><script src=https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.min.js type=module defer></script></body></html>